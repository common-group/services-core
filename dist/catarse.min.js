var c=function(e,t,o,r,n,i,a,s,l,c,d){"use strict";e=e&&e.hasOwnProperty("default")?e["default"]:e,t=t&&t.hasOwnProperty("default")?t["default"]:t,o=o&&o.hasOwnProperty("default")?o["default"]:o,r=r&&r.hasOwnProperty("default")?r["default"]:r,n=n&&n.hasOwnProperty("default")?n["default"]:n,i=i&&i.hasOwnProperty("default")?i["default"]:i,a=a&&a.hasOwnProperty("default")?a["default"]:a,s=s&&s.hasOwnProperty("default")?s["default"]:s,l=l&&l.hasOwnProperty("default")?l["default"]:l,c=c&&c.hasOwnProperty("default")?c["default"]:c,d=d&&d.hasOwnProperty("default")?d["default"]:d;var u=document.querySelector('[name="common-platform-token"]'),p=u?u.getAttribute("content"):null,m={"Platform-Code":p},f=function(e,t,o,r){e.init(t.getAttribute("content"),{method:"GET",url:o},r)},w=new i,b=document.querySelector('[name="api-host"]');f(w,b,"/api_token");var g=new i,h=document.querySelector('[name="common-payment-api-host"]');f(g,h,"/api_token/common",m);var v=new i,y=document.querySelector('[name="common-project-api-host"]');f(v,y,"/api_token/common",m);var j=new i,k=document.querySelector('[name="common-analytics-api-host"]');f(j,k,"/api_token/common",m);var x=new i,z=document.querySelector('[name="common-notification-api-host"]');f(x,z,"/api_token/common",m);var S={notificationTemplates:x.model("notification_templates"),userNotification:x.model("user_notifications"),commonNotificationTemplate:x.model("rpc/notification_template"),projectSubscribersInfo:j.model("rpc/project_subscribers_info"),projectReward:v.model("rewards"),projectSubscriber:v.model("subscribers"),commonPayment:g.model("rpc/pay"),cancelSubscription:g.model("rpc/cancel_subscription"),commonPaymentInfo:g.model("rpc/payment_info"),commonPayments:g.model("payments"),commonCreditCard:g.model("rpc/credit_card"),commonCreditCards:g.model("credit_cards"),commonSubscriptionUpgrade:g.model("rpc/upgrade_subscription"),country:w.model("countries"),state:w.model("states"),contributionDetail:w.model("contribution_details"),contributionActivity:w.model("contribution_activities"),projectDetail:w.model("project_details"),userDetail:w.model("user_details"),balance:w.model("balances"),balanceTransaction:w.model("balance_transactions"),balanceTransfer:w.model("balance_transfers"),user:w.model("users"),survey:w.model("surveys"),userCreditCard:w.model("user_credit_cards"),bankAccount:w.model("bank_accounts"),bank:w.model("banks"),goalDetail:w.model("goals"),rewardDetail:w.model("reward_details"),projectReminder:w.model("project_reminders"),projectReport:w.model("project_reports"),contributions:w.model("contributions"),directMessage:w.model("direct_messages"),teamTotal:w.model("team_totals"),recommendedProjects:w.model("recommended_projects"),projectAccount:w.model("project_accounts"),projectAccountError:w.model("project_account_errors"),projectContribution:w.model("project_contributions"),projectContributiorsStat:w.model("project_stat_contributors"),projectPostDetail:w.model("project_posts_details"),projectContributionsPerDay:w.model("project_contributions_per_day"),projectContributionsPerLocation:w.model("project_contributions_per_location"),projectContributionsPerRef:w.model("project_contributions_per_ref"),projectVisitorsPerDay:w.model("project_visitors_per_day"),projectFiscalId:w.model("project_fiscal_ids"),projectTransfer:w.model("project_transfers"),project:w.model("projects"),adminProject:w.model("admin_projects"),projectSearch:w.model("rpc/project_search"),publicTags:w.model("public_tags"),category:w.model("categories"),categoryTotals:w.model("category_totals"),categoryFollower:w.model("category_followers"),teamMember:w.model("team_members"),notification:w.model("notifications"),statistic:w.model("statistics"),successfulProject:w.model("successful_projects"),finishedProject:w.model("finished_projects"),userFriend:w.model("user_friends"),userFollow:w.model("user_follows"),followAllCreators:w.model("rpc/follow_all_creators"),sentSurveyCount:w.model("rpc/sent_survey_count"),answeredSurveyCount:w.model("rpc/answered_survey_count"),followAllFriends:w.model("rpc/follow_all_friends"),contributor:w.model("contributors"),userFollower:w.model("user_followers"),creatorSuggestion:w.model("creator_suggestions"),userContribution:w.model("user_contributions"),userSubscription:g.model("subscriptions"),subscriptionTransition:g.model("subscription_status_transitions"),shippingFee:w.model("shipping_fees"),deleteProject:w.model("rpc/delete_project"),cancelProject:w.model("rpc/cancel_project"),city:w.model("cities"),mailMarketingList:w.model("mail_marketing_lists")};S.teamMember.pageSize(40),S.rewardDetail.pageSize(!1),S.subscriptionTransition.pageSize(!1),S.shippingFee.pageSize(!1),S.projectReminder.pageSize(!1),S.goalDetail.pageSize(!1),S.project.pageSize(30),S.category.pageSize(50),S.contributionActivity.pageSize(40),S.successfulProject.pageSize(9),S.finishedProject.pageSize(9),S.country.pageSize(!1),S.state.pageSize(!1),S.publicTags.pageSize(!1),S.projectContribution.pageSize(9),S.contributor.pageSize(9),S.projectReward.pageSize(!1),S.recommendedProjects.pageSize(3),S.bank.pageSize(400),S.city.pageSize(200),S.balanceTransfer.pageSize(9),S.userSubscription.pageSize(9),S.notificationTemplates.pageSize(200);var C=e.prop({}),E=function(e,t,o){var r=w.filtersVM({user_id:"eq",project_id:"eq",state:"in"});r.user_id(e),r.project_id(t),r.state(o);var n=w.loaderWithToken(S.userContribution.getPageOptions(r.parameters()));return n.load()},P=function(){var t=document.getElementById("application"),o=t&&t.getAttribute("data-contribution");return!!o&&(C(JSON.parse(o)),e.redraw(!0),C)},M=function(e){return o.contains(["paid","pending_refund","refunded"],e.state)},D=function(e){return M(e)},q=function(e){return"BoletoBancario"===e.payment_method&&r(e.gateway_data.boleto_expiration_date).isAfter(r())},A=function(e){return"BoletoBancario"===e.payment_method&&"pending"===e.state&&"online"===e.project_state&&!e.reward_sold_out&&!r(e.gateway_data.boleto_expiration_date).isAfter(r())},T=function(e){return"paid"===e.state&&e.reward_id&&"failed"!==e.project_state},R={getCurrentContribution:P,canShowReceipt:D,canGenerateSlip:A,canShowSlip:q,getUserProjectContributions:E,canBeDelivered:T},I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N=function(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e},O=function(){function e(e,t){var o=[],r=!0,n=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(o.push(a.value),!t||o.length!==t);r=!0);}catch(l){n=!0,i=l}finally{try{!r&&s["return"]&&s["return"]()}finally{if(n)throw i}}return o}return function(t,o){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),F=function(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)},V={},L=function(e){return window.location.hash===e},B=function(){return window.screen&&window.screen.width<=767},Y=function(e){var t=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),o=new RegExp("[\\?&]"+t+"=([^&#]*)"),r=o.exec(location.search);return null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))},U=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e||t},W=function(){r.locale("pt",{months:"Janeiro_Fevereiro_Março_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),relativeTime:{future:"em %s",past:"há %s",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"}})},$=function(){return r().add(1,"months").format("D/MMMM")},H=function(e){return null!=e},Q=function(e){return replaceDiacritics(e.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,""))},G=function(e,t){return t=t||"DD/MM/YYYY",e?r(e).locale("pt").format(t):"no date"},X=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},J=function(e,t){if(!localStorage.getItem(e))return localStorage.setItem(e,String(t))},K=function(e,t){return sessionStorage.setItem(e,JSON.stringify(t))},Z=function(e){return sessionStorage.getItem(e)?JSON.parse(String(sessionStorage.getItem(e))):null},ee=function(e){var t=localStorage.getItem(e);return t?(localStorage.removeItem(e),t):null},te=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},oe=function(t,o){var r=document,n=r.createElement("script");return window.disqus_config=function(){this.page.url=t,this.page.identifier=o},n.src="//catarseflex.disqus.com/embed.js",n.setAttribute("data-timestamp",String(+new Date)),(r.head||r.body).appendChild(n),e("")},re=function(e){var t=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;return t.test(e)},ne=function(e){var t=void 0,o=void 0,r=void 0,n=void 0,i=void 0,a=void 0,s=e.replace(/[^\d]+/g,"");if(""==s)return!1;if(14!=s.length)return!1;if("00000000000000"==s||"11111111111111"==s||"22222222222222"==s||"33333333333333"==s||"44444444444444"==s||"55555555555555"==s||"66666666666666"==s||"77777777777777"==s||"88888888888888"==s||"99999999999999"==s)return!1;t=s.length-2,o=s.substring(0,t),r=s.substring(t),n=0,i=t-7;for(var l=t;l>=1;l--)n+=Number(o.charAt(t-l))*i--,i<2&&(i=9);if(a=n%11<2?0:11-n%11,String(a)!=r.charAt(0))return!1;t+=1,o=s.substring(0,t),n=0,i=t-7;for(var c=t;c>=1;c--)n+=Number(o.charAt(t-c))*i--,i<2&&(i=9);return a=n%11<2?0:11-n%11,String(a)==r.charAt(1)},ie=function(e){var t=0,o=void 0;if("00000000000"==e)return!1;for(var r=1;r<=9;r++)t+=parseInt(e.substring(r-1,r))*(11-r);if(o=10*t%11,10!=o&&11!=o||(o=0),o!=parseInt(e.substring(9,10)))return!1;t=0;for(var n=1;n<=10;n++)t+=parseInt(e.substring(n-1,n))*(12-n);return o=10*t%11,10!=o&&11!=o||(o=0),o==parseInt(e.substring(10,11))},ae=e.prop([]),se=function(){return ae([])},le=function(){e.prop([]);return{submit:function(e,t){return function(){return se(),o.map(e,function(e){"email"===e.rule&&(re(e.prop())||ae().push({field:e.prop,message:"E-mail inválido."})),"text"===e.rule&&""===e.prop().trim()&&ae().push({field:e.prop,message:"O campo não pode ser vazio."})}),!ae().length>0&&t()}},hasError:function(e){return o.reduce(ae(),function(t,o){return o.field()===e()||t},!1)}}},ce=function(e,t){var o=r(e,t||"DD/MM/YYYY");return o.isValid()?o:r(e)},de={days:"dias",minutes:"minutos",hours:"horas",seconds:"segundos"},ue=function Hu(e){var Hu=de,t=function(){var t=Hu[e.unit||"seconds"];return Number(e.total)<=1?t.slice(0,-1):t};return{unit:t(),total:e.total}},pe=function(e,t){return function(r,n,i){if(!o.isNumber(r))return null;var a="\\d(?=(\\d{"+(i||3)+"})+"+(n>0?"\\D":"$")+")",s=r.toFixed(Math.max(0,~~n));return(t?s.replace(".",t):s).replace(new RegExp(a,"g"),"$&"+(e||","))}},me=pe(".",","),fe=function(t,o){var r=e.prop(t);return r.toggle=function(){return r(r()===o?t:o)},r},we=w.filtersVM({id:"eq"}),be=function(){var e=document.getElementById("catarse_bootstrap"),t=e&&e.getAttribute("data-environment");return t&&"development"==t},ge=function(){if(V.currentProject)return V.currentProject;var e=document.getElementById("application"),t=e&&e.getAttribute("data-parameters");return t?V.currentProject=JSON.parse(t):null},he=function(){if(V.rdToken)return V.rdToken;var e=o.first(document.querySelectorAll("[name=rd-token]"));return e?V.rdToken=e.getAttribute("content"):null},_e=function(){if(V.similityCustomer)return V.similityCustomer;var e=o.first(document.querySelectorAll("[name=simility-customer]"));return e?V.similityCustomer=e.getAttribute("content"):null},ve=function(){if(V.newsletterUrl)return V.newsletterUrl;var e=o.first(document.querySelectorAll("[name=newsletter-url]"));return e?V.newsletterUrl=e.getAttribute("content"):null},ye=function(){if(V.user)return V.user;var e=document.getElementsByTagName("body"),t=o.first(e).getAttribute("data-user");return t?V.user=JSON.parse(t):null},je=function(){var e=ye();return null==e||null==e.user_id?null:e.user_id},ke=function(){return!o.isNull(je())},xe=function(){if(V.apiHost)return V.apiHost;var e=document.getElementById("api-host");return V.apiHost=e&&e.getAttribute("content")},ze=function(e){var t=window.location.pathname.split("/").slice(-1)[0];return e===t},Se=function(e){return e||"/assets/catarse_bootstrap/user.jpg"},Ce=function(){return e(".u-text-center.u-margintop-30 u-marginbottom-30",[e('img[alt="Loader"][src="https://s3.amazonaws.com/catarse.files/loader.gif"]')])},Ee=function(){return e("span.badge.badge-success.margin-side-5",t.t("projects.new_feature_badge"))},Pe=function(){var e=function(){try{window.FB.XFBML.parse()}catch(e){}};return window.setTimeout(e,500)},Me=function(e,t,o){return e>1?e+o:e+t},De=function(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e=e.replace(/\r\n?/,"\n"),e.length>0&&(e=e.replace(/\n\n+/g,"</p><p>"),e=e.replace(/\n/g,"<br />"),e="<p>"+e+"</p>"),e},Ae=function(e){return e.maximum_contributions>0&&e.paid_count+e.waiting_payment_count>=e.maximum_contributions},Te=function(e){return e.maximum_contributions-(e.paid_count+e.waiting_payment_count)},Re=function(e){var t=document.createElement("a");return t.href=e,t},Ie=function(){return function(e,t){!t&&window.$&&window.UIHelper&&window.UIHelper.setupResponsiveIframes(n(e))}},Ne=function(){return function(e,t){if(!t){var o=window.location.hash.substr(1);o===e.id&&(window.location.hash="",setTimeout(function(){window.location.hash=e.id}))}}},Oe=function(){return window.location.href="/pt/login",!1},Fe=function(e){return window.location.href=e,!1},Ve=function(e){var t=0,o=0;do t+=e.offsetTop||0,o+=e.offsetLeft||0,e=e.offsetParent;while(e);return{top:t,left:o}},Le=function(){var e=function(e,t){for(var r=document.getElementsByClassName(t),n=e.parentNode;n&&!o.contains(r,n);)n=n.parentNode;return n&&(n.style.display="none"),n},t=document.getElementById("modal-close");o.isElement(t)&&(t.onclick=function(o){o.preventDefault(),e(t,"modal-backdrop")});var r=document.getElementsByClassName("modal-close");o.map(r,function(t){o.isElement(t)&&(t.onclick=function(o){o.preventDefault(),e(t,"modal-backdrop")})})},Be=function(){var e=document.getElementsByClassName("icon-close")[0];o.isElement(e)&&(e.onclick=function(t){t.preventDefault(),e.parentElement&&e.parentElement.remove()})},Ye=function(e,t){return t=t||{},o.extend({},t,{scope:e})},Ue=function(t){var r=o.isFunction(t)?function(){t(),e.redraw()}:e.redraw;window.addEventListener("hashchange",r,!1)},We=function(){var e=o.first(document.querySelectorAll("[name=csrf-token]"));return e?e.getAttribute("content"):null},$e=function(){var e=o.first(document.querySelectorAll("[name=csrf-param]"));return e?e.getAttribute("content"):null},He=function(e){var t=window.scrollY,o=Ve(e).top,r=300,n=(o-t)/r,i=function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},a=setInterval(function(){var e=i(t/o)*t;window.scrollTo(0,e),t>=o&&clearInterval(a),t+=n},1)},Qe=function(){return window.scrollTo(0,0)},Ge=function(){var e=function(e,t){e.onclick=function(){var e=document.getElementById(t);return o.isElement(e)&&He(e),!1}};return function(t,o){!o&&t.hash&&e(t,t.hash.slice(1))}},Xe=function(e,t){var o={online:{cssClass:"text-success",text:"NO AR"},successful:{cssClass:"text-success",text:"FINANCIADO"},failed:{cssClass:"text-error",text:"NÃO FINANCIADO"},waiting_funds:{cssClass:"text-waiting",text:"AGUARDANDO"},rejected:{cssClass:"text-error",text:"CANCELADO"},draft:{cssClass:"",text:"RASCUNHO"},in_analysis:{cssClass:"",text:"EM ANÁLISE"},approved:{cssClass:"text-success",text:"APROVADO"}};return t?{cssClass:"text-error",text:"AGUARDANDO CANCELAMENTO"}:o[e]},Je=function(e){return function(t,o){if(!o){var r=document.createElement("script");return r.type="text/javascript",r.id="RDIntegration",document.getElementById(r.id)||(document.body.appendChild(r),r.onload=function(){return window.RdIntegration.integrate(he(),e)},r.src="https://d335luupugsy2.cloudfront.net/js/integration/stable/rd-js-integration.min.js"),!1}}},Ke=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Function.prototype;return e?function(o){try{e.project||(e.project=ge()),e.user||(e.user=ye()),a.event(e)}catch(r){}t(o)}:t},Ze={},et=function(e,t){if(!e)return t;var r=o.compact([e.cat,e.act]).join("_");if(!r)throw new Error("Should inform cat or act");return function(){if(!Ze[r]){Ze[r]=!0;var o=Ke(e,t);o()}}},tt=function(e){return o.isNumber(e())?parseFloat(e()):parseFloat(e().replace(".","").replace(",","."))},ot=function(e){var t=String(e).replace(/[^0-9]|[.]/g,""),o=t.slice(0,t.length-2),r=t.slice(t.length-2);return o=o.replace(/\B(?=(\d{3})+(?!\d))/g,"."),o+","+r},rt=function(e){return e.replace(/[0-9]/g,"")},nt=function(e){return e.replace(/[^0-9]/g,"")},it=function(e,t){return function(o){return function(r){return r.length===e&&o!==t?r+t:r}}},at=function(e){return function(t){return o.compact(o.map(t,function(t,o){return t in e?null:[o,t]}))}},st=function Qu(e){return function(t){return function(o,r){if(o>=t.length)return!1;var n=t.charAt(o);return n in e?e[n].test(r):r===n||Qu(e)(t)(o+1,r)}}},lt=function(e){var t=o.map(e,function(e){return it(e[0],e[1])});return function(e,r){var n=o.map(t,function(e){return e(r)}),i=o.reduce(n,function(e,t){return o.isFunction(e)?o.compose(t,e):t});return i(e)}},ct=function(e,t){var r={9:/\d/,A:/[a-zA-Z]/},n=at(r),i=st(r),a=lt(n(e)),s=i(e);return o.reduce(t,function(e,t){return s(e.length,t)&&(e=a(e,t)+t),e},"")},dt=function(e){return sessionStorage.removeItem(e)},ut=e.prop(),pt=function(e){ut(e)},mt=function(){return ut},ft=e.prop(),wt=function(e){ft(e)},bt=function(){return ft},gt=function(e,t){return"/"+e+(t?"?ref="+t:"")},ht=function(e){if(e){var t=!1;window.addEventListener("scroll",function(o){if(!t&&window.$&&n(document).scrollTop()>.75*n(window).height()){t=!0;var r=Ke(e);r()}})}},_t={event:Ke,oneTimeEvent:et,windowScroll:ht},vt=function(e){var t=void 0;return t="function"==typeof e?e().permalink:e.permalink,"https://www.catarse.me/"+t},yt=function(){var e=window.location.pathname;return"/pt"==e||"/"==e},jt=function(){var e=window.location.pathname,t=e.indexOf("/insights")>-1,o=e.indexOf("/fiscal")>-1,r=e.indexOf("/edit")>-1,n=e.indexOf("/contribution")>-1;return!(r||t||n||o)},kt=function(e){return function(t,o){var r=document.getElementsByTagName("title")[0],n=r.innerText;if(n!==e)return r.innerText=e}},xt=function(){var e=sessionStorage.getItem("reminder");e&&yt()&&(window.location.href="/projects/"+e)},zt=function(){if(V.rootUrl)return V.rootUrl;var e=o.first(document.querySelectorAll("[name=root-url]"));return e?V.rootUrl=e.getAttribute("content"):null},St=function(e){return{source:!1,formatting:["p"],formattingAdd:[{tag:"blockquote",title:"Citar","class":"fontsize-base quote",clear:!0},{tag:"p",title:"Cabeçalho 1","class":"fontsize-larger fontweight-semibold",clear:!0},{tag:"p",title:"Cabeçalho 2","class":"fontsize-large",clear:!0}],lang:"pt_br",maxHeight:800,minHeight:300,convertVideoLinks:!0,convertUrlLinks:!0,convertImageLinks:!1,plugins:["video"],imageUpload:"/redactor_rails/pictures?"+e,imageGetJson:"/redactor_rails/pictures",path:"/assets/redactor-rails",css:"style.css"}},Ct=function(e){return function(t,o){if(!o){var r=window.$(t),n=We(),i=$e(),a="";i&&n&&(a=i+"="+encodeURIComponent(n)),r.redactor(St(a)),r.redactor("code.set",e()),window.$(".redactor-editor").on("blur",function(){return e(r.redactor("code.get"))})}}},Et=function(t,o){return e("textarea.input_field.redactor.w-input.text-field.bottom.jumbo.positive",{name:t,config:Ct(o)})},Pt=function(e){We()&&e.setRequestHeader("X-CSRF-Token",We())},Mt=function(t){var o={delivered:e("span.fontsize-smallest.badge.badge-success","Enviada"),received:e("span.fontsize-smallest.badge.badge-success","Recebida"),undelivered:e("span.fontsize-smallest.badge.badge-light","Não enviada"),error:e("span.fontsize-smallest.badge.badge-attention","Erro no envio")};return R.canBeDelivered(t)?o[t.delivery_status]:""},Dt=function(e){var t=window.location.href,o=(/^[?#]/.test(t)?t.slice(1):t).split("?");return o.length>1?o[1].split("&").reduce(function(e,t){var o=t.split("="),r=O(o,2),n=r[0],i=r[1];return e[n]=i?decodeURIComponent(i.replace(/\+/g," ")):"",e},{})[e]:null},qt=function(e){var t=document.createElement("div");t.innerHTML=e;for(var o=t.getElementsByTagName("script"),r=o.length;r--;)o[r].parentNode.removeChild(o[r]);return t.innerHTML},At=function(t){var o=e.deferred();return setTimeout(o.resolve,t),o.promise};W(),Be(),Le(),xt();var Tt={sleep:At,stripScripts:qt,authenticityParam:$e,authenticityToken:We,buildLink:gt,contributionStatusBadge:Mt,cumulativeOffset:Ve,discuss:oe,existy:H,slugify:Q,validateEmail:re,validateCpf:ie,validateCnpj:ne,momentify:G,momentFromString:ce,lastDayOfNextMonth:$,formatNumber:me,idVM:we,getUser:ye,getUserID:je,getSimilityCustomer:_e,getApiHost:xe,getNewsletterUrl:ve,getCurrentProject:ge,getParams:Dt,toggleProp:fe,loader:Ce,newFeatureBadge:Ee,fbParse:Pe,pluralize:Me,simpleFormat:qe,translatedTime:ue,rewardSouldOut:Ae,rewardRemaning:Te,parseUrl:Re,hashMatch:L,mobileScreen:B,redrawHashChange:Ue,useAvatarOrDefault:Se,locationActionMatch:ze,navigateToDevise:Oe,navigateTo:Fe,storeAction:J,callStoredAction:ee,UIHelper:Ie,toAnchor:Ne,capitalize:te,paramByName:Y,i18nScope:Ye,RDTracker:Je,selfOrEmpty:U,animateScrollTo:He,scrollTo:Ge,scrollTop:Qe,getRandomInt:X,projectStateTextClass:Xe,validationErrors:ae,validate:le,analytics:_t,strip:De,storeObject:K,getStoredObject:Z,removeStoredObject:dt,setProject:pt,getProject:mt,setReward:wt,getReward:bt,applyMonetaryMask:ot,noNumbersMask:rt,numbersOnlyMask:nt,monetaryToFloat:tt,mask:ct,projectFullPermalink:vt,isProjectPage:jt,setPageTitle:kt,rootUrl:zt,redactor:Et,setCsrfToken:Pt,userSignedIn:ke,isDevEnv:be},Rt={view:function(t,o){return e(".w-section.save-draft-btn-section",{style:o.hideMarginLeft?{"margin-left":0}:""},[e(".w-row",[e(".w-col.w-col-4.w-col-push-4",o.loading()?Tt.loader():[e('input[id="anchor"][name="anchor"][type="hidden"][value="about_me"]'),e('input.btn.btn.btn-large[name="commit"][type="submit"][value="Salvar"]',{onclick:o.onSubmit})]),e(".w-col.w-col-4")])])}},It={controller:function(){var t=x.paginationVM(S.notificationTemplates,"label.asc"),r=s(),n=e.prop(!0),i=e.prop(!1),a=e.prop(),l=e.prop(),c=e.prop(),d=e.prop(),u=e.prop(),p=e.prop(),m=e.prop(),f={user:{name:"test name user"}},w=function(t){var o=r.parse(Tt.stripScripts(t));r.render(o,f).then(function(o){p(Tt.stripScripts(t)),d(o),e.redraw()})},b=function(t){var o=r.parse(Tt.stripScripts(t));r.render(o,f).then(function(o){u(Tt.stripScripts(t)),c(o),e.redraw()})},g=function(e){return function(t){var r=o.find(e,{label:t.target.value});if(r&&r.label){var n=r.template||r.default_template,i=r.subject||r.default_subject;a(r),l(n),m(i),w(i),b(n)}else a(void 0)}},h=function(e){i(!0),S.commonNotificationTemplate.postWithToken({data:{label:a().label,subject:p(),template:u()}},null,{}).then(function(){t.firstPage({}).then(function(){i(!1)})})};return t.firstPage({}).then(function(){n(!1)}),{templates:t,selectedItem:a,selectedItemTemplate:l,renderedTemplate:c,renderTemplate:b,changeSelectedTo:g,loaderTemp:n,onSaveSelectedItem:h,loaderSubmit:i,renderSubjectTemplate:w,selectedItemSubjectTemplate:m}},view:function(t){var r=t.templates.collection(),n=t.selectedItem();return e("",[e("#notifications-admin",[e(".section",e(".w-container",e(".w-row",[e(".w-col.w-col-3"),e(".w-col.w-col-6",e(".w-form",[e("form",[e(".fontsize-larger.u-marginbottom-10.u-text-center","Notificações"),t.loaderTemp()&&!o.isEmpty(r)?Tt.loader():e("select.medium.text-field.w-select",{oninput:t.changeSelectedTo(r)},function(){var t=o.map(r,function(t){return e("option",{value:t.label},t.label)});return t.unshift(e("option[value='']","Selecione uma notificação")),t}())])])),e(".w-col.w-col-3")]))),e(".divider"),e(".u-marginbottom-80.bg-gray.section",n?e(".w-container",e(".w-row",[e(".w-col.w-col-6",[e(".fontsize-base.fontweight-semibold.u-marginbottom-20.u-text-center",[e("span.fa.fa-code",""),"HTML"]),e(".w-form",[e("form",[e(".u-marginbottom-20.w-row",[e(".w-col.w-col-2",e("label.fontsize-small","Label")),e(".w-col.w-col-10",e(".fontsize-small",n.label))]),e(".w-row",[e(".w-col.w-col-2",e("label.fontsize-small","Subject")),e(".w-col.w-col-10",e("input.positive.text-field.w-input",{value:t.selectedItemSubjectTemplate(),oninput:e.withAttr("value",function(e){t.selectedItemSubjectTemplate(e),t.renderSubjectTemplate(e)})}))]),e("label.fontsize-small",["Content",e("a.alt-link.u-right","Ver variáveis")]),e('textarea.positive.text-field.w-input[rows="20"]',{value:t.selectedItemTemplate(),oninput:e.withAttr("value",function(e){t.selectedItemTemplate(e),t.renderTemplate(e)})})])])]),e(".w-col.w-col-6",[e(".fontsize-base.fontweight-semibold.u-marginbottom-20.u-text-center",[e("span.fa.fa-eye",""),"Visualização"]),e("",e.trust(t.renderedTemplate()))])])):"")]),n?e("footer",e(Rt,{loading:t.loaderSubmit,onSubmit:t.onSaveSelectedItem,hideMarginLeft:!0})):""])}};S.adminProject.pageSize(9);var Nt=w.paginationVM(S.adminProject,"pledged.desc",{Prefer:"count=exact"}),Ot=w.filtersVM({full_text_index:"@@",state:"eq",mode:"eq",recommended:"eq",created_at:"between",project_expires_at:"between",updated_at:"between",goal:"between",progress:"between",category_name:"eq"}),Ft=function(e){return(e||"").toString().trim()};Ot.state("online"),Ot.mode(""),Ot.recommended(""),Ot.category_name(""),Ot.order({project_id:"desc"}),Ot.updated_at.lte.toFilter=function(){var e=Ft(Ot.updated_at.lte());return e&&Tt.momentFromString(e).endOf("day").format("")},Ot.updated_at.gte.toFilter=function(){var e=Ft(Ot.updated_at.gte());return e&&Tt.momentFromString(e).format()},Ot.project_expires_at.lte.toFilter=function(){var e=Ft(Ot.project_expires_at.lte());return e&&Tt.momentFromString(e).endOf("day").format("")},Ot.project_expires_at.gte.toFilter=function(){var e=Ft(Ot.project_expires_at.gte());return e&&Tt.momentFromString(e).format()},Ot.created_at.lte.toFilter=function(){var e=Ft(Ot.created_at.lte());return e&&Tt.momentFromString(e).endOf("day").format("")},Ot.created_at.gte.toFilter=function(){var e=Ft(Ot.created_at.gte());return e&&Tt.momentFromString(e).format()},Ot.full_text_index.toFilter=function(){var e=Ft(Ot.full_text_index());return e&&l(e)||void 0};var Vt={view:function(t,o){var r=o.wrapper_class||".w-row",n=o.inputWrapperClass||".w-input.text-field.positive.medium",i=o.btnClass||".btn.btn-large.u-marginbottom-10";return e(r,[e(".w-col.w-col-8",[e("input"+n+'[placeholder="'+o.placeholder+'"][type="text"]',{onchange:e.withAttr("value",o.vm),value:o.vm()})]),e(".w-col.w-col-4",[e("input#filter-btn"+i+'[type="submit"][value="Buscar"]')])])}},Lt={controller:function(){return{toggler:Tt.toggleProp(!1,!0)}},view:function(t,r){var n=r.filterBuilder,i=(r.data,r.label||""),a=o.findWhere(n,{component:Vt});return e("#admin-contributions-filter.w-section.page-header",[e(".w-container",[e(".fontsize-larger.u-text-center.u-marginbottom-30",i),e(".w-form",[e("form",{onsubmit:r.submit},[a?e.component(a.component,a.data):"",e(".u-marginbottom-20.w-row",e('button.w-col.w-col-12.fontsize-smallest.link-hidden-light[style="background: none; border: none; outline: none; text-align: left;"][type="button"]',{onclick:t.toggler.toggle},"Filtros avançados  >")),t.toggler()?e("#advanced-search.w-row.admin-filters",[o.map(n,function(t){return t.component!==Vt?e.component(t.component,t.data):""})]):""])])])])}},Bt={controller:function(e){return{displayDetailBox:Tt.toggleProp(!1,!0)}},view:function(t,r){var n=r.item,i=r.listWrapper||{},a=!!o.isFunction(i.isSelected)&&i.isSelected(n.id);return e(".w-clearfix.card.u-radius.u-marginbottom-20.results-admin-items",{"class":a?"card-alert":""},[e.component(r.listItem,{item:n,listWrapper:r.listWrapper,key:r.key}),e("button.w-inline-block.arrow-admin.fa.fa-chevron-down.fontcolor-secondary",{onclick:t.displayDetailBox.toggle}),t.displayDetailBox()?e.component(r.listDetail,{item:n,key:r.key}):""])}},Yt={controller:function(e){var t=e.vm.list;!t.collection().length&&t.firstPage&&t.firstPage(e.filterVM?e.filterVM.parameters():null).then(null,function(t){e.vm.error(t.message)})},view:function(t,o){var r=o.vm.list,n=o.vm.error,i=o.label||"",a=o.itemComponent||Bt;return e(".w-section.section",[e(".w-container",n()?e(".card.card-error.u-radius.fontweight-bold",n()):[e(".w-row.u-marginbottom-20",[e(".w-col.w-col-9",[e(".fontsize-base",r.isLoading()?"Carregando "+i.toLowerCase()+"...":[e(".w-row",[e(".w-col.w-col-3",[e(".fontweight-semibold",r.total())," "+i.toLowerCase()+" encontrados"]),o.vm&&o.vm.hasInputAction?e(".w-col-9.w-col",o.vm.inputActions()):""])])])]),e("#admin-contributions-list.w-container",[r.collection().map(function(t){return e.component(a,{listItem:o.listItem,listDetail:o.listDetail,listWrapper:o.vm,item:t,key:t.id})}),e(".w-section.section",[e(".w-container",[e(".w-row",[e(".w-col.w-col-2.w-col-push-5",[r.isLoading()?Tt.loader():e("button#load-more.btn.btn-medium.btn-terciary",{onclick:r.nextPage},"Carregar mais")])])])])])])])}},Ut=o.partial(Tt.i18nScope,"projects.card"),Wt={controller:function(e){var t=e.project,r=e.progress,n=function(e){return o.contains(["successful","failed","waiting_funds"],e.state)},i=function(){var e=function(){return"failed"===t.state||"waiting_funds"===t.state?"card-secondary":""};return".card-project-meter."+t.mode+"."+t.state+"."+(r>100?"complete":"incomplete")+"."+e()};return{project:t,progress:r,cardMeter:i,isFinished:n}},view:function(o){var r=o.project;return e(o.cardMeter(),[o.isFinished(r)?e("div","successful"===r.state&&o.progress<100?t.t("display_status.flex_successful",Ut()):t.t("display_status."+r.state,Ut())):e(".meter",[e(".meter-fill",{style:{width:(o.progress>100?100:o.progress)+"%"}})])])}},$t=function(){var e=w.filtersVM,t=e({state:"eq"}).state("online"),o=e({near_me:"eq",open_for_contributions:"eq"}).open_for_contributions("true").near_me(!0),n=e({expires_at:"lte",open_for_contributions:"eq"}).open_for_contributions("true").expires_at(r().add(14,"days").format("YYYY-MM-DD")),i=e({online_date:"gte",open_for_contributions:"eq"}).open_for_contributions("true").online_date(r().subtract(5,"days").format("YYYY-MM-DD")),a=e({score:"gte",open_for_contributions:"eq"}).score("1").open_for_contributions("true"),s=e({open_for_contributions:"eq"}).open_for_contributions("true"),l=e({open_for_contributions:"eq",contributed_by_friends:"eq"}).open_for_contributions("true").contributed_by_friends(!0),c=e({state:"eq"}).state("successful"),d=e({}),u={all:{title:"Todas as Categorias",filter:t,nicename:"No ar",isContextual:!1,keyName:"all"},score:{title:"Todas as Categorias",filter:a,nicename:"Populares",isContextual:!1,keyName:"score"},contributed_by_friends:{title:"Amigos",filter:l,nicename:"Amigos",isContextual:!1,keyName:"contributed_by_friends"},online:{title:"No ar",filter:s,isContextual:!1,keyName:"online"},expiring:{title:"Reta final",filter:n,isContextual:!1,keyName:"expiring"},successful:{title:"Todas as Categorias",filter:c,nicename:"Financiados",isContextual:!1,keyName:"successful"},finished:{title:"Todas as Categorias",filter:d,nicename:"Finalizados",isContextual:!1,keyName:"finished"},recent:{title:"Recentes",filter:i,isContextual:!1,keyName:"recent"},near_me:{title:"Próximos a mim",filter:o,isContextual:!1,keyName:"near_me"}},p=function(e){return _.map(e,function(e){return u[e].isContextual=!0}),u},m=function(){return _.filter(u,function(e){return e.isContextual})},f=function(e){return u[e.keyName].isContextual=!1,u};return{filters:u,setContextFilters:p,getContextFilters:m,removeContextFilter:f}},Ht=Tt.idVM,Qt=e.prop({}),Gt=w.filtersVM({project_user_id:"eq"}),Xt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;
Gt.project_user_id(e).order({project_id:"desc"}),S.project.pageSize(t);var o=w.loaderWithToken(S.project.getPageOptions(Gt.parameters()));return o.load()},Jt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,o=w.filtersVM({user_id:"eq"});o.user_id(e),S.contributor.pageSize(t);var r=w.loaderWithToken(S.contributor.getPageOptions(o.parameters()));return r.load()},Kt=function(e){var t=w.filtersVM({user_id:"eq"});t.user_id(e);var o=w.loaderWithToken(S.balance.getPageOptions(t.parameters()));return o.load()},Zt=function(e){var t=w.filtersVM({user_id:"eq"});t.user_id(e);var o=w.loaderWithToken(S.bankAccount.getPageOptions(t.parameters()));return o.load()},eo=function(e){var t=w.filtersVM({user_id:"eq",without_notification:"eq"});t.user_id(e).without_notification(!0),S.projectReminder;var o=w.loaderWithToken(S.projectReminder.getPageOptions(t.parameters()));return o.load()},to=function(){var e=w.loaderWithToken(S.mailMarketingList.getPageOptions({order:"id.asc"}));return e.load()},oo=function(e){var t=w.filtersVM({user_id:"eq"});t.user_id(e),S.userCreditCard.pageSize(!1);var o=w.loaderWithToken(S.userCreditCard.getPageOptions(t.parameters()));return o.load()},ro=function(t,o){return e.request({method:"GET",config:Tt.setCsrfToken,url:"/projects/"+t+"/contributions/"+o.contribution_id+"/toggle_delivery"})},no=function(t,o){return e.request({method:"GET",config:Tt.setCsrfToken,url:"/projects/"+t+"/contributions/"+o.contribution_id+"/toggle_anonymous"})},io=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,o=w.filtersVM({user_id:"eq",state:"in"});o.user_id(e).order({created_at:"desc"}).state(["refunded","pending_refund","paid"]),S.userContribution.pageSize(t);var r=w.loaderWithToken(S.userContribution.getPageOptions(o.parameters()));return r.load()},ao=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qt;Ht.id(e);var n=w.loaderWithToken(S.userDetail.getRowOptions(Ht.parameters()));return t?n.load().then(o.compose(r,o.first)):n.load()},so=function(){return ao(Tt.getUserID()),Qt},lo=function(e){var t=e||{name:"no name"};return o.isEmpty(t.public_name)?t.name:t.public_name},co=function(e){var t="https://catarse.me/assets/catarse_bootstrap/user.jpg";return e?e.profile_img_thumbnail||t:t},uo=function(e){return e?e.profile_cover_image||co(e):co(e)},po=function(t){var r=o.partial(o.sample,o,3),n=e.prop([]),i=e.prop([]),a=Tt.getUser(),s=a.user_id,l=function(){return o.reduce(n(),function(e,t){var r=o.isFunction(e)?e():e,n=o.isFunction(t)?t():t;return r&&n},!0)},c=function(){var e=$t().filters,t=w.loaderWithToken(S.project.getPageOptions(o.extend({},{order:"score.desc"},e.score.filter.parameters())));n().push(t),t.load().then(o.compose(i,r))},d=function(e){var t=e.project_id,r=w.loaderWithToken(S.project.getPageOptions(w.filtersVM({project_id:"eq"}).project_id(t).parameters()));n().push(r),r.load().then(function(e){i().push(o.first(e))})},u=w.loaderWithToken(S.recommendedProjects.getPageOptions(w.filtersVM({user_id:"eq"}).user_id(s).parameters()));return u.load().then(function(e){e.length>0?o.map(e,d):c()}),{loader:l,collection:i}},mo={getUserCreatedProjects:Xt,getUserCreditCards:oo,toggleDelivery:ro,toggleAnonymous:no,getUserProjectReminders:eo,getUserRecommendedProjects:po,getUserContributedProjects:io,getUserBalance:Kt,getUserBankAccount:Zt,getPublicUserContributedProjects:Jt,displayImage:co,displayCover:uo,displayName:lo,fetchUser:ao,getCurrentUser:so,currentUser:Qt,getMailMarketingLists:to},fo=e.prop(""),wo=e.prop([]),bo=e.prop([]),go=e.prop([]),ho={id:null,description:"",shipping_options:null,minimum_value:10},_o=e.prop(ho.minimum_value),vo=e.prop(),yo=w.filtersVM({project_id:"eq"}),jo=function(e){return yo.project_id(e),w.loaderWithToken(S.rewardDetail.getPageOptions(yo.parameters()))},ko=function(e){var t=w.filtersVM({id:"eq"});return t.id(e),w.loaderWithToken(S.rewardDetail.getPageOptions(t.parameters()))},xo=function(e){return jo(e).load().then(wo)},zo=function(e){yo.project_id(e);var t=v.loaderWithToken(S.projectReward.getPageOptions(yo.parameters()));t.load().then(wo)},So=function(e){var t=w.filtersVM({reward_id:"eq"});t.reward_id(e.id);var o=w.loader(S.shippingFee.getPageOptions(t.parameters()));return o.load()},Co=function(){var t=document.getElementById("application"),o=t&&t.getAttribute("data-contribution");if(o){var r=JSON.parse(o);return vo(r.reward),e.redraw(!0),vo}return!1},Eo=function(e){return function(){vo()!==e&&(fo(""),vo(e),_o(e.id?Tt.applyMonetaryMask(e.minimum_value+",00"):Tt.applyMonetaryMask("$10,00")),e.id&&So(e).then(go))}},Po=o.compose(_o,Tt.applyMonetaryMask),Mo=w.loader(S.state.getPageOptions()),Do=function(){return Mo.load().then(bo),bo},qo=function(t,r){var n=e.prop([]),i=o.map(bo(),function(e){var t=void 0,r=o.findWhere(go(),{destination:e.acronym}),n=o.findWhere(go(),{destination:"others"});return r?t=r.value:n&&(t=n.value),{name:e.name,value:e.acronym,fee:t}});if("national"===t.shipping_options)n(i);else if("international"===t.shipping_options){var a=void 0,s=o.findWhere(go(),{destination:"international"});s&&(a=s.value),n(o.union([{value:"international",name:"Outside Brazil",fee:a}],i))}return n(o.union([{value:"",name:"Selecione Opção",fee:0}],n())),n()},Ao=function(e){return o.findWhere(go(),{id:e})},To=function(){return o.reject(bo(),function(e){return!o.isUndefined(o.findWhere(go(),{destination:e.acronym}))})},Ro=function(e,t){var r=Ao(t)||{},n=o.findWhere(bo(),{acronym:r.destination});return n?n.acronym:"national"===e.shipping_options&&"others"===r.destination?o.pluck(To(go),"acronym").join(", "):r.destination},Io=function(e){var t=o.findWhere(go(),{destination:e()});return!t&&o.findWhere(bo(),{acronym:e()})&&(t=o.findWhere(go(),{destination:"others"})),t},No=function(t,o){return e.request({method:"POST",url:"/projects/"+t+"/rewards.json",data:{reward:o},config:Tt.setCsrfToken})},Oo=function(t,o,r){return e.request({method:"PATCH",url:"/projects/"+t+"/rewards/"+o+".json",data:{reward:r},config:Tt.setCsrfToken})},Fo=function(e,t,r){return(r||{}).is_admin||"draft"===t||"online"===t&&e.paid_count()<=0&&(!o.isFunction(e.waiting_payment_count)||e.waiting_payment_count()<=0)},Vo=function(e,t){return(t||{}).is_admin||"draft"===e||"online"===e},Lo=function(e){return!(o.isNull(e.shipping_options)||"free"===e.shipping_options||"presential"===e.shipping_options)},Bo={canEdit:Fo,canAdd:Vo,error:fo,getStates:Do,getFees:So,rewardLoader:ko,fees:go,rewards:wo,applyMask:Po,noReward:ho,fetchRewards:xo,fetchCommonRewards:zo,selectReward:Eo,getSelectedReward:Co,selectedReward:vo,contributionValue:_o,updateReward:Oo,createReward:No,rewardsLoader:jo,locationOptions:qo,shippingFeeForCurrentReward:Io,shippingFeeById:Ao,statesLoader:Mo,feeDestination:Ro,getValue:_o,setValue:_o,hasShippingOptions:Lo},Yo=e.prop([]),Uo=w.filtersVM({project_id:"eq"}),Wo=function(e){return Uo.project_id(e),Uo.order({value:"asc"}),w.loaderWithToken(S.goalDetail.getPageOptions(Uo.parameters()))},$o=function(t){Yo().push(e.prop({id:e.prop(null),project_id:e.prop(t),editing:Tt.toggleProp(!0,!1),value:e.prop(""),title:e.prop(""),description:e.prop("")}))},Ho=function(e){return Wo(e).load().then(Yo)},Qo=function(t){o.isEmpty(Yo())&&Wo(t).load().then(function(r){o.map(r,function(o){var r=e.prop({id:e.prop(o.id),project_id:e.prop(t),editing:Tt.toggleProp(!1,!0),value:e.prop(o.value),title:e.prop(o.title),description:e.prop(o.description)});Yo().push(r)}),o.isEmpty(Yo())&&$o(t)})},Go=function(t,o){return e.request({method:"POST",url:"/projects/"+t+"/goals.json",data:{goal:o},config:Tt.setCsrfToken})},Xo=function(t,o,r){return e.request({method:"PATCH",url:"/projects/"+t+"/goals/"+o+".json",data:{goal:r},config:Tt.setCsrfToken})},Jo={goals:Yo,fetchGoals:Ho,fetchGoalsEdit:Qo,addGoal:$o,updateGoal:Xo,createGoal:Go,goalsLoader:Wo},Ko=e.prop(),Zo=e.prop(),er=e.prop(),tr=e.prop([]),or=w.filtersVM({project_id:"eq"}),rr=Tt.idVM,nr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ko;return o.isFunction(e)?!!e()&&"sub"===e().mode:!!e&&"sub"===e.mode},ir=function(e){var t=j.loaderWithToken(S.projectSubscribersInfo.postOptions({id:e}));t.load().then(function(e){er(e||{amount_paid_for_valid_period:0,total_subscriptions:0,total_subscribers:0,new_percent:0,returning_percent:0})})},ar=function(e){return function(t){return Ko(o.first(t)),nr(Ko())&&ir(Ko().common_id),e||mo.fetchUser(Ko().user_id,!0,Zo),Ko}},sr=function(e,t){or.project_id(e);var o=w.loaderWithToken(S.projectDetail.getRowOptions(or.parameters()));return cr(e,t),o.load().then(ar(t))},lr=function(){Zo({}),Bo.rewards([])},cr=function(e,t){t&&mo.fetchUser(t,!0,Zo),Bo.fetchRewards(e),Jo.fetchGoals(e)},dr=function(){var t=document.getElementById("application"),o=t&&t.getAttribute("data-parameters");if(o){var r=JSON.parse(o),n=r.projectId,i=r.projectUserId,a=r.project_id,s=r.project_user_id;return r.id&&r.mode&&Ko(r),sr(a||n,s||i),e.redraw(),Ko()}return!1},ur=function(t,o){return function(){return Ko(t),lr(),e.route(Tt.buildLink(t.permalink,o),{project_id:t.project_id,project_user_id:t.project_user_id}),!1}},pr=function(){if(Ko()){var e=Ko().project_name||Ko().name;return e?Tt.setPageTitle(e):Function.prototype}},mr=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ko;rr.id(e);var n=w.loaderWithToken(S.projectDetail.getRowOptions(rr.parameters()));return t?n.load().then(o.compose(r,o.first)):n.load()},fr=function(t,o){return e.request({method:"PUT",url:"/projects/"+t+".json",data:{project:o},config:Tt.setCsrfToken})},wr="subscribeProject",br=function(e){Tt.storeAction(wr,e)},gr=function(){var t=Tt.callStoredAction(wr);t&&e.route(t)},hr={userDetails:Zo,getCurrentProject:dr,projectContributions:tr,currentProject:Ko,rewardDetails:Bo.rewards,goalDetails:Jo.goals,routeToProject:ur,setProjectPageTitle:pr,init:sr,fetchProject:mr,fetchSubData:ir,subscriptionData:er,updateProject:fr,isSubscription:nr,storeSubscribeAction:br,checkSubscribeAction:gr},_r={controller:function(e){var t=e.item,o=Tt.toggleProp(t.recommended,!t.recommended),r=function(){hr.updateProject(t.project_id,{recommended:!o()}).then(o.toggle)};return{project:t,toggleRecommend:r,recommended:o}},view:function(t){var o=t.project,r=t.recommended;return e(".w-row",[e(".w-col.w-col-4",e(".w-row",[e(".w-col.w-col-2",e("a.btn-star.fa.fa-lg.fa-star.w-inline-block",{onclick:function(){t.toggleRecommend()},"class":r()?"selected":""})),e(".w-col.w-col-10",e(".w-row",[e(".u-marginbottom-10.w-col.w-col-3.w-col-small-3",e("img.thumb-project.u-radius[src="+o.project_img+"][width=50]")),e(".w-col.w-col-9.w-col-small-9",[e("a.alt-link.fontsize-smaller.fontweight-semibold.lineheight-tighter.u-marginbottom-10[href='/"+o.permalink+"'][target='_blank']",o.project_name),e(".fontcolor-secondary.fontsize-smallest.fontweight-semibold",o.category_name)])]))])),e(".admin-project-meter.w-col.w-col-4",[e(".w-row",[e(".w-col.w-col-4",e(".fontsize-smaller.fontweight-semibold.text-success",o.state)),e(".u-text-center-small-only.w-clearfix.w-col.w-col-8",e(".fontsize-smaller.u-right",Tt.momentify(o.project_online_date)+" a "+Tt.momentify(o.project_expires_at)))]),e(".u-marginbottom-10",e(Wt,{project:o,progress:o.progress})),e(".w-row",[e(".w-col.w-col-4",e(".fontsize-smaller",o.progress.toFixed(2)+"%")),e(".u-text-center-small-only.w-clearfix.w-col.w-col-8",e(".fontsize-smaller.u-right","R$"+o.pledged+" de R$"+o.goal))])]),e(".w-col.w-col-4",e(".w-row",[e(".w-col.w-col-2",e("img.user-avatar[src='"+mo.displayImage({profile_img_thumbnail:o.profile_img_thumbnail})+"']")),e(".w-col.w-col-10",[e(".fontsize-smaller.fontweight-semibold.lineheight-tighter",o.owner_name),e(".fontcolor-secondary.fontsize-smallest.u-marginbottom-10",o.email),e(".fontcolor-secondary.fontsize-smallest",o.total_published+" projetos criados"),e(".fontcolor-secondary.fontsize-smallest","Ainda não apoiou projetos")])]))])}},vr={controller:function(t){var o=t.data,r=e.prop(!1),n=e.prop(!1),i=(e.prop(!1),{}),a=t.item,s=o.property,l=o.forceValue||null,c=e.prop(l);Tt.idVM.id(a[o.updateKey]);var d=w.loaderWithToken(o.model.patchOptions(Tt.idVM.parameters(),i)),u=function(e){_.extend(a,e[0]),r(!0),n(!1)},p=function(){return i[s]=c(),d.load().then(u,function(){r(!0),n(!0)}),!1},m=function(e,t,o){o.onunload=function(){r(!1),n(!1),c(l)}};return{complete:r,error:n,l:d,newValue:c,submit:p,toggler:Tt.toggleProp(!1,!0),unload:m}},view:function(t,o){var r=o.data,n=t.l()?"por favor, aguarde...":r.callToAction;return e(".w-col.w-col-2",[e("button.btn.btn-small.btn-terciary",{onclick:t.toggler.toggle},r.outerLabel),t.toggler()?e(".dropdown-list.card.u-radius.dropdown-list-medium.zindex-10",{config:t.unload},[e("form.w-form",{onsubmit:t.submit},t.complete()?t.error()?[e('.w-form-error[style="display:block;"]',[e("p","Houve um problema na requisição. "+r.errorMessage)])]:[e('.w-form-done[style="display:block;"]',[e("p",r.successMessage)])]:[e("label",r.innerLabel),void 0===r.forceValue?e('input.w-input.text-field[type="text"][placeholder="'+r.placeholder+'"]',{onchange:e.withAttr("value",t.newValue),value:t.newValue()}):"",e('input.w-button.btn.btn-small[type="submit"][value="'+n+'"]')])]):""])}},yr={controller:function(t){var r=t.data,n=e.prop(!1),i={},a=e.prop(!1),s=(e.prop(!1),t.item()),l=e.prop(s.description||""),c=(r.getKey,e.prop("")),d={},u={},p=e.prop([]),m=(r.radios,r.getKey),f=t.getKeyValue,b=r.updateKey,g=t.updateKeyValue,h=r.validate,_=r.selectedItem||e.prop();u[b]="eq";var v=w.filtersVM(u);v[b](g),d[m]="eq";var y=w.filtersVM(d);y[m](f);var j=w.loaderWithToken(r.getModel.getPageOptions(y.parameters())),k=w.loaderWithToken(r.updateModel.patchOptions(v.parameters(),i)),x=function(e){if(e.length>0){var t=o.findWhere(p(),{id:e[0][r.selectKey]});_(t)}else a({message:"Nenhum item atualizado"});n(!0)},z=function(e){var t=r.addEmpty;p(e),o.isUndefined(t)||p().unshift(t)},S=function(){j.load().then(z,a)},C=function(){if(c()){var e=h(p(),c());o.isUndefined(e)?(i[r.selectKey]=c()===-1?null:c(),k.load().then(x,a)):(n(!0),a({message:e}))}return!1},E=function(e,t,o){o.onunload=function(){n(!1),a(!1),c("")}},P=function(t){l(t),e.redraw()};return S(),{complete:n,description:l,setDescription:P,error:a,setLoader:k,getLoader:j,newID:c,submit:C,toggler:Tt.toggleProp(!1,!0),unload:E,radios:p}},view:function(t,r){var n=r.data,i=r.item(),a=t.setLoader()||t.getLoader()?"por favor, aguarde...":n.callToAction;return e(".w-col.w-col-2",[e("button.btn.btn-small.btn-terciary",{onclick:t.toggler.toggle},n.outerLabel),t.toggler()?e(".dropdown-list.card.u-radius.dropdown-list-medium.zindex-10",{config:t.unload},[e("form.w-form",{onsubmit:t.submit},t.complete()?t.error()?[e('.w-form-error[style="display:block;"]',[e("p",t.error().message)])]:[e('.w-form-done[style="display:block;"]',[e("p","Recompensa alterada com sucesso!")])]:[t.radios()?o.map(t.radios(),function(o,r){return e(".w-radio",[e("input#r-"+r+'.w-radio-input[type=radio][name="admin-radio"][value="'+o.id+'"]',{checked:o.id===(i[n.selectKey]||i.id),onclick:function(){t.newID(o.id),t.setDescription(o.description)}}),e('label.w-form-label[for="r-'+r+'"]',"R$"+o.minimum_value)])}):Tt.loader(),e("strong","Descrição"),e("p",t.description()),e('input.w-button.btn.btn-small[type="submit"][value="'+a+'"]')])]):""])}},jr={controller:function(t){var r=t.data,n=e.prop(!1),i=e.prop(!1),a=(e.prop(!1),t.item);r.requestOptions.config=function(e){Tt.authenticityToken()&&e.setRequestHeader("X-CSRF-Token",Tt.authenticityToken())};var s=o.compose(r.model.getRowWithToken,Tt.idVM.id(a[r.updateKey]).parameters),l=e.prop(!1),c=function(){return s().then(u)},d=function(e){l(!1),n(!0),i(!0)},u=function(e){o.extend(a,e[0]),n(!0),i(!1)},p=function(){return l(!0),e.request(r.requestOptions).then(c,d),!1},m=function(e,t,o){o.onunload=function(){n(!1),i(!1)}};return{l:l,complete:n,error:i,submit:p,toggler:Tt.toggleProp(!1,!0),unload:m}},view:function(t,o){var r=o.data,n=t.l()?"por favor, aguarde...":r.callToAction;return e(".w-col.w-col-2",[e("button.btn.btn-small.btn-terciary",{onclick:t.toggler.toggle},r.outerLabel),t.toggler()?e(".dropdown-list.card.u-radius.dropdown-list-medium.zindex-10",{config:t.unload},[e("form.w-form",{onsubmit:t.submit},t.complete()?t.error()?[e('.w-form-error[style="display:block;"]',[e("p","Houve um problema na requisição.")])]:[e('.w-form-done[style="display:block;"]',[e("p","Requisição feita com sucesso.")])]:[e("label",r.innerLabel),e('input.w-button.btn.btn-small[type="submit"][value="'+n+'"]')])]):""])}},kr={controller:function(t){var r=void 0,n=t.item.project_id,i=function(){var t=S.projectAccount,i=t.getRowOptions(Tt.idVM.id(n).parameters()),a=e.prop({});return r=w.loaderWithToken(i),n&&r.load().then(o.compose(a,o.first)),a},a=void 0,s=function(){var r=S.userDetail,n=t.item.user_id,i=r.getRowOptions(Tt.idVM.id(n).parameters()),s=e.prop({});return a=w.loaderWithToken(i),n&&a.load().then(o.compose(s,o.first)),s},l={toggler:Tt.toggleProp(!1,!0),submit:function(e){return function(){return console.log("new value",e),l.complete(!1),hr.updateProject(n,{user_id:e}).then(function(){l.complete(!0),l.success(!0),l.error(!1)})["catch"](function(){l.complete(!0),l.success(!0),l.error(!0)}),!1}},complete:e.prop(!1),error:e.prop(!1),success:e.prop(!1),newValue:e.prop("")},c=({toggler:Tt.toggleProp(!1,!0)},function(e){return function(){e.complete(!1),e.error(!1),e.success(!1),e.newValue("")}});return{user:s(),bankAccount:i(),actions:{changeUserAction:l},actionUnload:c}},view:function(t,o){var r=(t.actions,o.item),n=t.user(),i=t.bankAccount(),a=n.address||{};return e("#admin-contribution-detail-box",[e(".divider.u-margintop-20.u-marginbottom-20"),e(".w-row.u-marginbottom-30",[e(".w-col.w-col-2",[e("button.btn.btn-small.btn-terciary",{onclick:t.actions.changeUserAction.toggler.toggle},"Trocar realizador"),t.actions.changeUserAction.toggler()?e(".dropdown-list.card.u-radius.dropdown-list-medium.zindex-10",{config:t.actionUnload(t.actions.changeUserAction)},[e("form.w-form",{onsubmit:t.actions.changeUserAction.submit},t.actions.changeUserAction.complete()?t.actions.changeUserAction.error()?[e('.w-form-error[style="display:block;"]',[e("p","Houve um problema na requisição. Verifique se o usuário que vai receber o projeto possui dados válidos.")])]:[e('.w-form-done[style="display:block;"]',[e("p","Usuário transferido com sucesso")])]:[e("label","Id do novo realizador:"),e('input.w-input.text-field[type="tel"][placeholder="ex: 239049"]',{onchange:e.withAttr("value",t.actions.changeUserAction.newValue),value:t.actions.changeUserAction.newValue()}),e('input.w-button.btn.btn-small[type="submit"][value="Transferir"]',{onclick:t.actions.changeUserAction.submit(t.actions.changeUserAction.newValue())})])]):""]),e(".w-col.w-col-2",[e("a.btn.btn-small.btn-terciary",{href:"/projects/"+r.project_id+"/contributions_report"},"Relatório de apoios")])]),e(".w-row.card.card-terciary.u-radius",[e(".w-col.w-col-4",[e(".fontsize-smaller.fontweight-semibold.lineheight-tighter.u-marginbottom-20","Detalhes do projeto"),e(".fontsize-smallest.fontweight-semibold.u-marginbottom-20","catarse.me/"+r.permalink),e(".fontsize-smallest.lineheight-looser.u-marginbottom-20",[e("span.fontweight-semibold","Meta:")," R$ "+Tt.formatNumber(r.goal,2,3)+" ",e("br"),e("span.fontweight-semibold","Alcançado:")," R$ "+Tt.formatNumber(r.pledged,2,3)+" "]),e(".fontsize-smallest.lineheight-looser",[e("span.fontweight-semibold","Início: "),Tt.momentify(r.project_online_date,"DD/MM/YYYY, HH:mm"),e("br"),e("span.fontweight-semibold","Término: "),Tt.momentify(r.project_expires_at,"DD/MM/YYYY, HH:mm"),e("br"),e("span.fontweight-semibold","Últ. atualização: "),Tt.momentify(r.updated_at,"DD/MM/YYYY, HH:mm"),e("br"),e("span.fontweight-semibold","Novidades: "),r.posts_count,e("br"),e("span.fontweight-semibold","Últ. novidade: "),Tt.momentify(r.last_post,"DD/MM/YYYY, HH:mm")])]),e(".w-col.w-col-4",[e(".fontsize-smaller.fontweight-semibold.lineheight-tighter.u-marginbottom-20","Dados bancários"),e(".fontsize-smallest.lineheight-looser",[e("span.fontweight-semibold","Banco: "),i.bank_name,e("br"),e("span.fontweight-semibold","Agencia: "),i.agency+"-"+i.agency_digit,e("br"),e("span.fontweight-semibold","Conta: "),i.account+"-"+i.account_digit,e("br"),i.account_type,e("br"),e("span.fontweight-semibold","Nome: "),i.owner_name,e("br"),e("span.fontweight-semibold","CPF: "),i.owner_document])]),e(".w-col.w-col-4",[e(".fontsize-smaller.fontweight-semibold.lineheight-tighter.u-marginbottom-20","Detalhes do realizador"),e(".fontsize-smallest.lineheight-looser.u-marginbottom-20",[e("span.fontweight-semibold","Nome: "),n.name,e("br"),e("span.fontweight-semibold","CPF: "),n.owner_document,e("br"),e("span.fontweight-semibold","Inscrição estadual: "),n.state_inscription,e("br"),e("span.fontweight-semibold","Email: "),n.email,e("br"),e("span.fontweight-semibold","Endereço: "),e.trust("&nbsp;")," "+a.address_street+", "+a.address_number+" "+a.address_complement+" - "+a.address_city+" - "+a.address_state+" "+a.address_zip_code,e("br"),e("span.fontweight-semibold","Telefone:"),a.phone_number]),e(".fontsize-smallest.lineheight-looser",[n.total_published_projects+" projetos criados ",e("br"),e.trust("&nbsp;"),e("br")])])])])}},xr=o.partial(Tt.mask,"99/99/9999"),zr={view:function(t,r){return e(".w-col.w-col-3.w-col-small-6",[e('label.fontsize-smaller[for="'+r.index+'"]',r.label),e(".w-row",[e(".w-col.w-col-5.w-col-small-5.w-col-tiny-5",[e('input.w-input.text-field.positive[id="'+r.index+'"][type="text"]',{onkeyup:e.withAttr("value",o.compose(r.first,xr)),value:r.first()})]),e(".w-col.w-col-2.w-col-small-2.w-col-tiny-2",[e(".fontsize-smaller.u-text-center.lineheight-looser","e")]),e(".w-col.w-col-5.w-col-small-5.w-col-tiny-5",[e('input.w-input.text-field.positive[type="text"]',{onkeyup:e.withAttr("value",o.compose(r.last,xr)),value:r.last()})])])])}},Sr={view:function(t,o){return e(".w-col.w-col-3.w-col-small-6",[e('label.fontsize-smaller[for="'+o.index+'"]',o.label),e(".w-row",[e(".w-col.w-col-5.w-col-small-5.w-col-tiny-5",[e('input.w-input.text-field.positive[id="'+o.index+'"][type="text"]',{onchange:e.withAttr("value",o.first),value:o.first()})]),e(".w-col.w-col-2.w-col-small-2.w-col-tiny-2",[e(".fontsize-smaller.u-text-center.lineheight-looser","e")]),e(".w-col.w-col-5.w-col-small-5.w-col-tiny-5",[e('input.w-input.text-field.positive[type="text"]',{onchange:e.withAttr("value",o.last),value:o.last()})])])])}},Cr={view:function(t,r){var n=o.isFunction(r.options)?r.options():r.options;return e("select"+r.classes+'[id="'+r.id+'"]',{onchange:function(e){r.valueProp(e.target.value),r.onchange()},value:r.valueProp()},o.map(n,function(t){return e("option",{value:t.value},t.option)}))}},Er={view:function(t,o){var r=o.wrapper_class||".w-col.w-col-3.w-col-small-6";return e(r,[e('label.fontsize-smaller[for="'+o.index+'"]',o.custom_label?e.component(o.custom_label[0],o.custom_label[1]):o.label),e.component(Cr,{id:o.index,onchange:_.isFunction(o.onchange)?o.onchange:Function.prototype,classes:".w-select.text-field.positive",valueProp:o.vm,options:o.options})])}},Pr={controller:function(){var t=Nt,r=Ot,n=e.prop([]),i=w.filtersVM,a=e.prop(""),s=[{component:Vt,data:{vm:r.full_text_index,placeholder:"Busque por projeto, permalink, email, nome do realizador..."}},{component:Er,data:{label:"Com o estado",index:"state",name:"state",vm:r.state,options:[{value:"",option:"Qualquer um"},{value:"successful",option:"successful"},{value:"waiting_funds",option:"waiting_funds"},{value:"online",option:"online"},{value:"failed",option:"failed"},{value:"draft",option:"draft"}]}},{component:Er,data:{label:"Modalidade",index:"mode",name:"mode",vm:r.mode,options:[{value:"",option:"Qualquer um"},{value:"aon",option:"Tudo ou nada"},{value:"flex",option:"Flex"}]}},{component:Er,data:{label:"Recomendado",index:"recommended",name:"recommended",vm:r.recommended,options:[{value:"",option:"Qualquer um"},{value:!0,option:"Sim"},{value:!1,option:"Não"}]}},{component:Sr,data:{label:"Meta entre",first:r.goal.gte,last:r.goal.lte}},{component:Sr,data:{label:"Progresso % entre",first:r.progress.gte,last:r.progress.lte}},{component:zr,data:{label:"Atualizado entre",first:r.updated_at.gte,last:r.updated_at.lte}},{component:zr,data:{label:"Expira entre",first:r.project_expires_at.gte,last:r.project_expires_at.lte}},{component:zr,data:{label:"Criado entre",first:r.created_at.gte,last:r.created_at.lte}}],l=function(){return S.category.getPage(i({}).order({name:"asc"}).parameters()).then(function(e){n(e);var t=o.map(n(),function(e){return{value:e.name,option:e.name}});t.unshift({value:"",option:"Qualquer uma"}),s.unshift({component:Er,data:{label:"Categoria",index:"category",name:"category_name",vm:r.category_name,options:t}})})},c=function(){return t.firstPage(r.parameters()).then(null,function(e){a(e.message)}),!1};return l(),{filterVM:r,filterBuilder:s,listVM:{list:t,error:a},submit:c}},view:function(t){var o="Projetos";return e("",[e.component(Lt,{form:t.filterVM.formDescriber,filterBuilder:t.filterBuilder,label:o,submit:t.submit}),e.component(Yt,{vm:t.listVM,filterVM:t.filterVM,label:o,listItem:_r,listDetail:kr})])}},Mr={view:function(t,o){return e("span#menu-search",[e(".w-form.w-hidden-small.w-hidden-tiny.header-search[id='discover-form-wrapper']",[e("form.discover-form[accept-charset='UTF-8'][action='/pt/explore?ref=ctrse_header'][id='search-form'][method='get']",[e("div",{style:{display:"none"}},e("input[name='utf8'][type='hidden'][value='✓']")),e("input.w-input.text-field.prefix.search-input[autocomplete='off'][id='pg_search'][name='pg_search'][placeholder='Busque projetos'][type='text']")]),e(".search-pre-result.w-hidden[data-searchpath='/pt/auto_complete_projects']",[e(".result",e(".u-text-center",e("img[alt='Loader'][src='/assets/catarse_bootstrap/loader.gif']"))),e("a.btn.btn-small.btn-terciary.see-more-projects[href='javascript:void(0);']"," ver todos")])]),e("a.w-inline-block.w-hidden-small.w-hidden-tiny.btn.btn-dark.btn-attached.postfix[href='javascript:void(0);'][id='pg_search_submit']",{onclick:function(){n("#search-form").submit()}},e("img.header-lupa[alt='Lupa'][data-pin-nopin='true'][src='/assets/catarse_bootstrap/lupa.png']"))])}},Dr={controller:function(t){var r=e.prop(),n=e.prop([]),i=e.prop({}),a=t.user.user_id,s=e.prop(0),l=w.filtersVM({user_id:"eq"}),c=function(){var e=mo.displayName(i());return e&&!o.isEmpty(e)?o.first(e.split(" ")):""};return mo.fetchUser(a,!0,i),l.user_id(a),S.balance.getRowWithToken(l.parameters()).then(function(e){var t=o.first(e)||{amount:0,user_id:a};s(t.amount)}),{contributedProjects:r,latestProjects:n,userDetails:i,userName:c,toggleMenu:Tt.toggleProp(!1,!0),userBalance:s}},view:function(t,o){var r=t.userDetails();return e(".w-dropdown.user-profile",[e(".w-dropdown-toggle.dropdown-toggle.w-clearfix[id='user-menu']",{onclick:t.toggleMenu.toggle},[e(".user-name-menu",[e(".fontsize-smaller.lineheight-tightest.text-align-right",t.userName()),t.userBalance()>0?e(".fontsize-smallest.fontweight-semibold.text-success","R$ "+Tt.formatNumber(t.userBalance(),2,3)):""]),e("img.user-avatar[alt='Thumbnail - "+r.name+"'][height='40'][src='"+Tt.useAvatarOrDefault(r.profile_img_thumbnail)+"'][width='40']")]),t.toggleMenu()?e("nav.w-dropdown-list.dropdown-list.user-menu.w--open[id='user-menu-dropdown']",{style:"display:block;"},[e(".w-row",[e(".w-col.w-col-12",[e(".fontweight-semibold.fontsize-smaller.u-marginbottom-10","Meu histórico"),e("ul.w-list-unstyled.u-marginbottom-20",[e("li.lineheight-looser",e("a.alt-link.fontsize-smaller[href='/pt/users/"+r.id+"/edit#balance']",e("span",["Saldo ",t.userBalance()>0?e("span.fontcolor-secondary","R$ "+Tt.formatNumber(t.userBalance(),2,3)):""]))),e("li.lineheight-looser",e("a.alt-link.fontsize-smaller[href='/pt/users/"+r.id+"/edit#contributions']","Histórico de apoio")),e("li.lineheight-looser",e("a.alt-link.fontsize-smaller[href='/pt/users/"+r.id+"/edit#projects']","Projetos criados")),e("li.w-hidden-main.w-hidden-medium.lineheight-looser",e("a.alt-link.fontsize-smaller[href='/pt/users/"+r.id+"/edit#projects']","Projetos criados"))]),e(".fontweight-semibold.fontsize-smaller.u-marginbottom-10","Configurações"),e("ul.w-list-unstyled.u-marginbottom-20",[e("li.lineheight-looser",e("a.alt-link.fontsize-smaller[href='/connect-facebook/']","Encontre amigos")),e("li.lineheight-looser",e("a.alt-link.fontsize-smaller[href='/pt/users/"+r.id+"/edit#about_me']","Perfil público")),e("li.lineheight-looser",e("a.alt-link.fontsize-smaller[href='/pt/users/"+r.id+"/edit#notifications']","Notificações")),e("li.lineheight-looser",e("a.alt-link.fontsize-smaller[href='/pt/users/"+r.id+"/edit#settings']","Dados cadastrais"))]),e(".divider.u-marginbottom-20"),o.user.is_admin_role?e(".fontweight-semibold.fontsize-smaller.u-marginbottom-10","Admin"):"",o.user.is_admin_role?e("ul.w-list-unstyled.u-marginbottom-20",[e("li.lineheight-looser",e("a.alt-link.fontsize-smaller[href='/pt/new-admin#/users']","Usuários")),e("li.lineheight-looser",e("a.alt-link.fontsize-smaller[href='/pt/new-admin']","Apoios")),e("li.lineheight-looser",e("a.alt-link.fontsize-smaller[href='/pt/new-admin#/balance-transfers']","Saques")),e("li.lineheight-looser",e("a.alt-link.fontsize-smaller[href='/pt/admin/financials']","Rel. Financeiros")),e("li.lineheight-looser",e("a.alt-link.fontsize-smaller[href='/pt/new-admin#/projects']","Admin projetos")),e("li.lineheight-looser",e("a.alt-link.fontsize-smaller[href='/pt/new-admin#/subscriptions']","Admin assinaturas")),e("li.lineheight-looser",e("a.alt-link.fontsize-smaller[href='/pt/new-admin#/notifications']","Admin notificações")),e("li.lineheight-looser",e("a.alt-link.fontsize-smaller[href='/pt/dbhero']","Dataclips"))]):"",e(".fontsize-mini","Seu e-mail de cadastro é: "),e(".fontsize-smallest.u-marginbottom-20",[e("span.fontweight-semibold",r.email+" "),e("a.alt-link[href='/pt/users/"+r.id+"/edit#about_me']","alterar e-mail")]),e(".divider.u-marginbottom-20"),e("a.alt-link[href='/pt/logout']","Sair")])])]):""])}},qr={controller:function(t){var o=Tt.getUser(),r=function(){return(t.menuTransparency?"overlayer":"")+" "+(t.withAlert||t.withFixedAlert?"with-global-alert":"")},n=function(){return t.absoluteHome?{href:Tt.rootUrl()}:{config:e.route}};return{user:o,menuCss:r,homeAttrs:n}},view:function(t,o){return e("header.main-header",{"class":t.menuCss()},[e(".w-row",[e(".w-clearfix.w-col.w-col-8.w-col-small-8.w-col-tiny-8",[e("a.header-logo.w-inline-block[href='/?ref=ctrse_header'][title='Catarse']",t.homeAttrs(),e("img[alt='Logo big'][src='/assets/catarse_bootstrap/logo_big.png']")),o.menuShort?"":e("div#menu-components",[e("a.w-hidden-small.w-hidden-tiny.header-link.w-nav-link[href='https://crowdfunding.catarse.me/comece']","Comece seu projeto"),e("a.w-hidden-small.w-hidden-tiny.header-link.w-nav-link[href='/explore?ref=ctrse_header']",{config:e.route},"Explore"),e.component(Mr)])]),e(".text-align-right.w-col.w-col-4.w-col-small-4.w-col-tiny-4",[t.user?e.component(Dr,{user:t.user}):e("a.w-nav-link.header-link.w-nav-link.btn-edit.u-right[href='/pt/login?ref=ctrse_header']","Login")])]),o.menuShort?"":e(".header-controls-mobile.w-hidden-main.w-hidden-medium",[e("a.header-link.w-nav-link[href='/pt/start?ref=ctrse_header']",{onclick:function(){return e.route("/start")}},"Comece seu projeto"),e("a.header-link.w-nav-link[href='/pt/explore?ref=ctrse_header']",{onclick:function(){return e.route("/explore")}},"Explore")])])}},Ar={view:function(){return e("footer.main-footer.main-footer-neg",[e("section.w-container",e(".w-row",[e(".w-col.w-col-9",e(".w-row",[e(".w-col.w-col-4.w-col-small-4.w-col-tiny-4.w-hidden-tiny",[e(".footer-full-signature-text.fontsize-small","Bem-vindo"),e("a.link-footer[href='http://crowdfunding.catarse.me/quem-somos?ref=ctrse_footer']",["Quem Somos",e.trust("&nbsp;"),e("span.badge.badge-success","Novidade‍")]),e("a.link-footer[href='http://crowdfunding.catarse.me/paratodos?ref=ctrse_footer']"," Como funciona"),e("a.link-footer[href='http://blog.catarse.me']"," Blog"),e("a.link-footer[href='https://www.catarse.me/pt/team?ref=ctrse_footer']",[" Nosso time ",e.trust("&lt;"),"3"]),e("a.link-footer[href='https://www.catarse.me/pt/press?ref=ctrse_footer']"," Imprensa"),e("a.link-footer[href='http://ano.catarse.me/2017?ref=ctrse_footer']",["Retrospectiva 2017",e.trust("&nbsp;"),e("span.badge.badge-success","Novidade")]),e(".footer-full-signature-text.fontsize-small","Redes Sociais"),e("a.link-footer[href='http://facebook.com/catarse.me']",[e("span.fa.fa-facebook-square.fa-lg"),e.trust("&nbsp;&nbsp;"),"Facebook"]),e("a.link-footer[href='http://twitter.com/catarse']",[e("span.fa.fa-twitter-square.fa-lg"),e.trust("&nbsp;&nbsp;"),"Twitter"]),e("a.link-footer[href='http://instagram.com/catarse']",[e("span.fa.fa-instagram.fa-lg"),e.trust("&nbsp;&nbsp;"),"Instagram"]),e("a.link-footer[href='http://github.com/catarse/catarse']",[e("span.fa.fa-github-square.fa-lg"),e.trust("&nbsp;&nbsp;"),"Github"])]),e(".w-col.w-col-4.w-col-small-4.w-col-tiny-4.footer-full-firstcolumn",[e(".footer-full-signature-text.fontsize-small","Ajuda"),e("a.link-footer[href='http://suporte.catarse.me?ref=ctrse_footer/']"," Central de Suporte"),Tt.getUser()?e("a.link-footer[href='https://suporte.catarse.me/hc/pt-br/signin?return_to=https%3A%2F%2Fsuporte.catarse.me%2Fhc%2Fpt-br%2Frequests%2Fnew&locale=19'][target=\"_BLANK\"]"," Contato"):e("a.link-footer[href='http://suporte.catarse.me/hc/pt-br/requests/new'][target=\"_BLANK\"]"," Contato"),e("a.link-footer[href='https://www.ofinanciamentocoletivo.com.br/?ref=ctrse_footer']"," Escola Catarse"),e("a.link-footer[href='http://crowdfunding.catarse.me/nossa-taxa?ref=ctrse_footer']"," Nossa Taxa"),e("a.link-footer[href='http://pesquisa.catarse.me/']"," Retrato FC Brasil 2013/2014"),e("a.link-footer[href='http://suporte.catarse.me/hc/pt-br/articles/115002214043-Responsabilidades-e-Seguran%C3%A7a?ref=ctrse_footer']"," Responsabilidades e Segurança"),e("a.link-footer[href='https://crowdfunding.catarse.me/legal/termos-de-uso'][target=\"_BLANK\"]"," Termos de uso"),e("a.link-footer[href='https://crowdfunding.catarse.me/legal/politica-de-privacidade'][target=\"_BLANK\"]"," Política de privacidade")]),e(".w-col.w-col-4.w-col-small-4.w-col-tiny-4.footer-full-lastcolumn",[e(".footer-full-signature-text.fontsize-small","Faça uma campanha"),e("a.link-footer[href='/pt/start?ref=ctrse_footer']"," Comece seu projeto"),e("a.link-footer[href='http://crowdfunding.catarse.me/financiamento-coletivo-musica-independente?ref=ctrse_footer']"," Música no Catarse"),e("a.u-marginbottom-30.link-footer[href='https://crowdfunding.catarse.me/publicacoes-independentes-financiamento-coletivo?ref=ctrse_footer']"," Publicações Independentes"),e(".footer-full-signature-text.fontsize-small","Apoie projetos no Catarse"),e("a.link-footer[href='/pt/explore?ref=ctrse_footer']"," Explore projetos"),e("a.w-hidden-main.w-hidden-medium.w-hidden-small.link-footer[href='http://blog.catarse.me?ref=ctrse_footer']"," Blog"),e("a.w-hidden-main.w-hidden-medium.w-hidden-small.link-footer[href='http://suporte.catarse.me/hc/pt-br/requests/new']"," Contato"),e("a.w-hidden-tiny.link-footer[href='/pt/explore?filter=score&ref=ctrse_footer']"," Populares"),e("a.w-hidden-tiny.link-footer[href='/pt/explore?filter=online&ref=ctrse_footer']"," No ar"),e("a.w-hidden-tiny.link-footer[href='/pt/explore?filter=finished&ref=ctrse_footer']"," Finalizados")])])),e(".w-col.w-col-3.column-social-media-footer",[e(".footer-full-signature-text.fontsize-small","Assine nossa news"),e(".w-form",e("form[accept-charset='UTF-8'][action='"+Tt.getNewsletterUrl()+"'][id='mailee-form'][method='post']",[e(".w-form.footer-newsletter",e("input.w-input.text-field.prefix[id='EMAIL'][label='email'][name='EMAIL'][placeholder='Digite seu email'][type='email']")),e('button.w-inline-block.btn.btn-edit.postfix.btn-attached[style="padding:0;"]',e("img.footer-news-icon[alt='Icon newsletter'][src='/assets/catarse_bootstrap/icon-newsletter.png']"))])),e(".footer-full-signature-text.fontsize-small","Change language"),e("[id='google_translate_element']")])])),e(".w-container",e(".footer-full-copyleft",[e("img.u-marginbottom-20[alt='Logo footer'][src='/assets/logo-footer.png']"),e(".lineheight-loose",e("a.link-footer-inline[href='http://github.com/catarse/catarse']"," Feito com amor | "+(new Date).getFullYear()+" | Open source"))]))]);
}},Tr=o.partial(Tt.i18nScope,"users.edit.email_confirmation"),Rr={controller:function(t){var o=Tt.getUserID(),r=mo.fetchUser(o),n=e.prop(!1),i=e.prop(!1);return{confirmedEmail:n,hideAlert:i,user:r,checkEmail:function(){return e.request({method:"PUT",url:"/users/"+o+".json",data:{user:{confirmed_email_at:!0}},config:Tt.setCsrfToken}).then(function(t){n(!0),window.setTimeout(function(){i(!0),e.redraw(!0)},4e3)})}}},view:function(n,i){var a=n.user();if(a){var s=r().isBefore(r(a.created_at).add(2,"days"));return!a||s||a.email_active||n.hideAlert()?e("div"):e(".card-alert.section.u-text-center",{style:i.menuTransparency?{"padding-top":"100px"}:{}},[e(".w-container",n.confirmedEmail()?[e(".fontsize-large.fontweight-semibold",t.t("confirmed_title",Tr())),e(".fontsize-large.fontweight-semibold.u-marginbottom-20",t.t("confirmed_sub",Tr()))]:[e(".fontsize-large.fontweight-semibold",o.isNull(a.name)?"Olá":t.t("hello",Tr({name:a.name}))),e(".fontsize-large.fontweight-semibold.u-marginbottom-20",t.t("hello_sub",Tr())),e(".fontsize-base.u-marginbottom-10",t.t("hello_email",Tr({email:a.email}))),e(".w-row",[e(".w-col.w-col-3"),e(".w-col.w-col-3",[e("button.btn.btn-medium.btn-terciary.w-button",{onclick:n.checkEmail},"Sim!")]),e(".w-col.w-col-3",[e('a.btn.btn-medium.w-button[href="/users/'+a.id+'/edit#about_me"]',"Editar o email")]),e(".w-col.w-col-3")])])])}return e("div")}},Ir=w.paginationVM(S.user,"id.desc",{Prefer:"count=exact"}),Nr=w.filtersVM({full_text_index:"@@",deactivated_at:"is.null"}),Or=function(e){return(e||"").toString().trim()};Nr.deactivated_at(null).order({id:"desc"}),Nr.deactivated_at.toFilter=function(){var e=JSON.parse(Nr.deactivated_at());return e},Nr.full_text_index.toFilter=function(){var e=Or(Nr.full_text_index());return e&&l(e)||void 0};var Fr={view:function(t,o){var r=o.item;return e(".w-row.admin-user",[e(".w-col.w-col-3.w-col-small-3.u-marginbottom-10",[e('img.user-avatar[src="'+Tt.useAvatarOrDefault(r.profile_img_thumbnail)+'"]')]),e(".w-col.w-col-9.w-col-small-9",[e(".fontweight-semibold.fontsize-smaller.lineheight-tighter.u-marginbottom-10",[e('a.alt-link[target="_blank"][href="/users/'+r.id+'/edit"]',r.name||r.email)]),e(".fontsize-smallest","Usuário: "+r.id),e(".fontsize-smallest.fontcolor-secondary","Email: "+r.email),o.additional_data])])}},Vr={view:function(t,o){return e(".w-row",[e(".w-col.w-col-4",[e.component(Fr,o)])])}},Lr={controller:function(t){var r=t.data,n=e.prop(!1),i=e.prop(!1),a=(e.prop(!1),r.property),s={},l=t.item;r.requestOptions.config=function(e){Tt.authenticityToken()&&e.setRequestHeader("X-CSRF-Token",Tt.authenticityToken())};var c=e.prop(!1),d=function(){return e.request(o.extend({},{data:s},r.requestOptions))},u=e.prop(""),p=e.prop(""),m=function(e){c(!1),p(e.errors[0]),n(!0),i(!0)},f=function(e){c(!1),o.extend(l,e[0]),n(!0),i(!1)},w=function(){return c(!0),s[a]=u(),d().then(f,m),!1},b=function(e,t,o){o.onunload=function(){n(!1),i(!1)}};return{complete:n,error:i,error_message:p,l:c,newPassword:u,submit:w,toggler:Tt.toggleProp(!1,!0),unload:b}},view:function(t,o){var r=o.data,n=t.l()?"por favor, aguarde...":r.callToAction;return e(".w-col.w-col-2",[e("button.btn.btn-small.btn-terciary",{onclick:t.toggler.toggle},r.outerLabel),t.toggler()?e(".dropdown-list.card.u-radius.dropdown-list-medium.zindex-10",{config:t.unload},[e("form.w-form",{onsubmit:t.submit},t.complete()?t.error()?[e('.w-form-error[style="display:block;"]',[e("p",t.error_message())])]:[e('.w-form-done[style="display:block;"]',[e("p","Senha alterada com sucesso.")])]:[e("label",r.innerLabel),e('input.w-input.text-field[type="text"][name="'+r.property+'"][placeholder="'+r.placeholder+'"]',{onchange:e.withAttr("value",t.newPassword),value:t.newPassword()}),e('input.w-button.btn.btn-small[type="submit"][value="'+n+'"]')])]):""])}},Br={controller:function(t){var o=e.prop([]),r=function(e){var t=S.notification;t.getPageWithToken(w.filtersVM({user_id:"eq",sent_at:"is.null"}).user_id(e.id).sent_at(!0).order({sent_at:"desc"}).parameters()).then(o)};return r(t.user),{notifications:o}},view:function(t){return e(".w-col.w-col-4",[e(".fontweight-semibold.fontsize-smaller.lineheight-tighter.u-marginbottom-20","Histórico de notificações"),t.notifications().map(function(t){return e(".w-row.fontsize-smallest.lineheight-looser.date-event",[e(".w-col.w-col-24",[e(".fontcolor-secondary",Tt.momentify(t.sent_at,"DD/MM/YYYY, HH:mm")," - ",e('a[target="blank"][href="/notifications/'+t.relation+"/"+t.id+'"]',t.template_name),t.origin?" - "+t.origin:"")])])})])}},Yr=o.partial(Tt.i18nScope,"users.balance"),Ur={controller:function(t){var r=e.prop({}),n=w.paginationVM(S.balanceTransaction,"created_at.desc",{Prefer:"count=exact"});return S.balanceTransaction.pageSize(2),mo.getUserBalance(t.user_id).then(o.compose(r,o.first)),n.firstPage({user_id:"eq."+t.user_id}),{userBalance:r,transactionsListVM:n}},view:function(t,r){var n=t.transactionsListVM.collection(),i=t.userBalance()||{amount:0};return e(r.wrapperClass||".w-col.w-col-8",[e(".fontsize-smaller.fontweight-semibold.lineheight-tighter.u-marginbottom-20",I18n.t("totals_transactions_title",Yr({value:Tt.formatNumber(i.amount,2,3)}))),o.map(n,function(t,r){return e(".divider.fontsize-smallest.lineheight-looser",[e(".w-row.fontweight-semibold",[e(".w-col.w-col-2",[e(".fontcolor-secondary",Tt.momentify(t.created_at))]),e(".w-col.w-col-6",[I18n.t("day_balance",Yr())]),e(".w-col.w-col-2",e.trust("&nbsp;")),e(".w-col.w-col-2",[e("span",I18n.t("shared.currency",{amount:Tt.formatNumber(t.total_amount,2,3)}))])]),e(".w-row",[o.map(t.source,function(t,o){var r=t.amount<0;return e(".divider.fontsize-smallest.lineheight-looser.w-row",[e(".w-col.w-col-2",[]),e(".w-col.w-col-6",[e("div",I18n.t("event_names."+t.event_name,Yr({service_fee:t.origin_objects.service_fee?100*t.origin_objects.service_fee:"",project_name:t.origin_objects.project_name,contributitor_name:t.origin_objects.contributor_name})))]),e(".w-col.w-col-2",[e(r?".text-error":".text-success",[r?"- ":"+ ",I18n.t("shared.currency",{amount:Tt.formatNumber(Math.abs(t.amount),2,3)})])])])})])])}),e(".w-row",[e(".w-col.w-col-3.w-col-push-4",[t.transactionsListVM.isLoading()?Tt.loader():e("button#load-more.btn.btn-terciary",{onclick:t.transactionsListVM.nextPage},I18n.t("shared.load_more"))])])])}},Wr={controller:function(e){return{actions:{reset:{property:"password",callToAction:"Redefinir",innerLabel:"Nova senha de Usuário:",outerLabel:"Redefinir senha",placeholder:"ex: 123mud@r",model:S.user},ban:{updateKey:"id",callToAction:"Banir usuário",innerLabel:"Tem certeza que deseja banir o usuário?",outerLabel:"Banir usuário",model:S.user},reactivate:{property:"deactivated_at",updateKey:"id",callToAction:"Reativar",innerLabel:"Tem certeza que deseja reativar esse usuário?",successMessage:"Usuário reativado com sucesso!",errorMessage:"O usuário não pôde ser reativado!",outerLabel:"Reativar usuário",forceValue:null,model:S.user}}}},view:function(t,r){var n=t.actions,i=r.item,a=(r.details,function(e,t){return o.extend({},e,{requestOptions:{url:"/users/"+t+"/ban",method:"POST"}})}),s=function(e,t){return o.extend({},e,{requestOptions:{url:"/users/"+t+"/new_password",method:"POST"}})};return e("#admin-contribution-detail-box",[e(".divider.u-margintop-20.u-marginbottom-20"),e(".w-row.u-marginbottom-30",[e.component(Lr,{data:s(n.reset,i.id),item:i}),e.component(jr,{data:a(n.ban,i.id),item:i}),i.deactivated_at?e.component(vr,{data:n.reactivate,item:i}):""]),e(".w-row.card.card-terciary.u-radius",[e(Br,{user:i,wrapperClass:".w-col.w-col-4"}),e(Ur,{user_id:i.id})])])}},$r={controller:function(){var t=Ir,o=Nr,r=e.prop(""),n=[{component:Vt,data:{vm:o.full_text_index,placeholder:"Busque por nome, e-mail, Ids do usuário..."}},{component:Er,data:{label:"Com o estado",index:"status",name:"deactivated_at",vm:o.deactivated_at,options:[{value:"",option:"Qualquer um"},{value:null,option:"ativo"},{value:!0,option:"desativado"}]}}],i=function(){return t.firstPage(o.parameters()).then(null,function(e){r(e.message)}),!1};return{filterVM:o,filterBuilder:n,listVM:{list:t,error:r},submit:i}},view:function(t){var o="Usuários";return e("",[e.component(Lt,{form:t.filterVM.formDescriber,filterBuilder:t.filterBuilder,label:o,submit:t.submit}),e.component(Yt,{vm:t.listVM,label:o,listItem:Vr,listDetail:Wr})])}},Hr=w.paginationVM(S.contributionDetail,"id.desc",{Prefer:"count=exact"}),Qr=w.filtersVM({full_text_index:"@@",delivery_status:"eq",state:"eq",gateway:"eq",value:"between",created_at:"between"}),Gr=function(e){return(e||"").toString().trim()};Qr.state(""),Qr.delivery_status(""),Qr.gateway(""),Qr.order({id:"desc"}),Qr.created_at.lte.toFilter=function(){var e=Gr(Qr.created_at.lte());return e&&Tt.momentFromString(e).endOf("day").format("")},Qr.created_at.gte.toFilter=function(){var e=Gr(Qr.created_at.gte());return e&&Tt.momentFromString(e).format()},Qr.full_text_index.toFilter=function(){var e=Gr(Qr.full_text_index());return e&&l(e)||void 0};var Xr={view:function(t,o){var r=o.item;return e(".w-row.admin-project",[e(".w-col.w-col-3.w-col-small-3.u-marginbottom-10",[e("img.thumb-project.u-radius[src="+r.project_img+"][width=50]")]),e(".w-col.w-col-9.w-col-small-9",[e(".fontweight-semibold.fontsize-smaller.lineheight-tighter.u-marginbottom-10",[e('a.alt-link[target="_blank"][href="/'+r.permalink+'"]',r.project_name)]),e(".fontsize-smallest.fontweight-semibold",r.project_state),e(".fontsize-smallest.fontcolor-secondary",Tt.momentify(r.project_online_date)+" a "+Tt.momentify(r.project_expires_at))])])}},Jr={view:function(t,o){var r=o.item;return e(".w-row.admin-contribution",[e(".fontweight-semibold.lineheight-tighter.u-marginbottom-10.fontsize-small","R$"+r.value),e(".fontsize-smallest.fontcolor-secondary",Tt.momentify(r.created_at,"DD/MM/YYYY HH:mm[h]")),e(".fontsize-smallest",["ID do Gateway: ",e('a.alt-link[target="_blank"][href="https://dashboard.pagar.me/#/transactions/'+r.gateway_id+'"]',r.gateway_id)])])}},Kr={view:function(t,o){var r=o.item,n={profile_img_thumbnail:r.user_profile_img,id:r.user_id,name:r.user_name,email:r.email},i=e(".fontsize-smallest.fontcolor-secondary","Gateway: "+r.payer_email);return e.component(Fr,{item:n,additional_data:i})}},Zr=o.partial(Tt.i18nScope,"projects.payment"),en={controller:function(t){var o=t.item,r=null,n=void 0,i=void 0,a=void 0;return r=function(){if(o.gateway_data)switch(o.gateway.toLowerCase()){case"moip":return{first_digits:o.gateway_data.cartao_bin,last_digits:o.gateway_data.cartao_final,brand:o.gateway_data.cartao_bandeira};case"pagarme":return{first_digits:o.gateway_data.card_first_digits,last_digits:o.gateway_data.card_last_digits,brand:o.gateway_data.card_brand}}},n=function(){switch(o.payment_method.toLowerCase()){case"boletobancario":return e("span#boleto-detail","");case"cartaodecredito":var t=r();return t?e("#creditcard-detail.fontsize-smallest.fontcolor-secondary.lineheight-tight",[t.first_digits+"******"+t.last_digits,e("br"),t.brand+" "+o.installments+"x"]):""}},i=function(){switch(o.payment_method.toLowerCase()){case"boletobancario":return".fa-barcode";case"cartaodecredito":return".fa-credit-card";default:return".fa-question"}},a=function(){switch(o.state){case"paid":return".text-success";case"refunded":return".text-refunded";case"pending":case"pending_refund":return".text-waiting";default:return".text-error"}},{displayPaymentMethod:n,paymentMethodClass:i,stateClass:a}},view:function(o,r){var n=r.item;return e(".w-row.payment-status",[e(".fontsize-smallest.lineheight-looser.fontweight-semibold",[e("span.fa.fa-circle"+o.stateClass())," "+t.t(n.state,Zr())]),e(".fontsize-smallest.fontweight-semibold",[e("span.fa"+o.paymentMethodClass())," ",e('a.link-hidden[href="#"]',n.payment_method)]),e(".fontsize-smallest.fontcolor-secondary.lineheight-tight",[o.displayPaymentMethod()])])}},tn={controller:function(){return{itemBuilder:[{component:Kr,wrapperClass:".w-col.w-col-4"},{component:Xr,wrapperClass:".w-col.w-col-4"},{component:Jr,wrapperClass:".w-col.w-col-2"},{component:en,wrapperClass:".w-col.w-col-2"}]}},view:function(t,o){return e(".w-row",_.map(t.itemBuilder,function(t){return e(t.wrapperClass,[e.component(t.component,{item:o.item,key:o.key})])}))}},on={view:function(t,o){var r=o.contribution;return e(".w-col.w-col-4",[e(".fontweight-semibold.fontsize-smaller.lineheight-tighter.u-marginbottom-20","Detalhes do apoio"),e(".fontsize-smallest.lineheight-looser",["Valor: R$"+Tt.formatNumber(r.value,2,3),e("br"),"Taxa: R$"+Tt.formatNumber(r.gateway_fee,2,3),e("br"),"Aguardando Confirmação: "+(r.waiting_payment?"Sim":"Não"),e("br"),"Anônimo: "+(r.anonymous?"Sim":"Não"),e("br"),"Id pagamento: "+r.gateway_id,e("br"),"Apoio: "+r.contribution_id,e("br"),"Chave: \n",e("br"),r.key,e("br"),"Meio: "+r.gateway,e("br"),"Operadora: "+(r.gateway_data&&r.gateway_data.acquirer_name),e("br"),r.is_second_slip?[e('a.link-hidden[href="#"]',"Boleto bancário")," ",e("span.badge","2a via")]:""])])}},rn={controller:function(e){var t=e.contribution,r=o.reduce([{date:t.paid_at,name:"Apoio confirmado"},{date:t.pending_refund_at,name:"Reembolso solicitado"},{date:t.refunded_at,name:"Estorno realizado"},{date:t.created_at,name:"Apoio criado"},{date:t.refused_at,name:"Apoio cancelado"},{date:t.deleted_at,name:"Apoio excluído"},{date:t.chargeback_at,name:"Chargeback"}],function(e,t){return null!==t.date&&void 0!==t.date?(t.originalDate=t.date,t.date=Tt.momentify(t.date,"DD/MM/YYYY, HH:mm"),e.concat(t)):e},[]);return{orderedEvents:o.sortBy(r,"originalDate")}},view:function(t){return e(".w-col.w-col-4",[e(".fontweight-semibold.fontsize-smaller.lineheight-tighter.u-marginbottom-20","Histórico da transação"),t.orderedEvents.map(function(t){return e(".w-row.fontsize-smallest.lineheight-looser.date-event",[e(".w-col.w-col-6",[e(".fontcolor-secondary",t.date)]),e(".w-col.w-col-6",[e("div",t.name)])])})])}},nn={controller:function(t){var o=void 0,r=function(){var r=e.prop({});if(t.contribution.shipping_fee_id){var n=S.shippingFee.getRowOptions(Tt.idVM.id(t.contribution.shipping_fee_id).parameters());o=w.loaderWithToken(n),o.load().then(_.compose(r,_.first))}return r};return{shippingFee:r()}},view:function(t,o){var r=o.reward(),n=o.contribution,i=parseInt(r.paid_count)+parseInt(r.waiting_payment_count),a=t.shippingFee();return e(".w-col.w-col-4",[e(".fontweight-semibold.fontsize-smaller.lineheight-tighter.u-marginbottom-20","Recompensa"),e(".fontsize-smallest.lineheight-looser",r.id?["ID: "+r.id,e("br"),"Local de entrega: "+(a.destination?a.destination+" R$ "+a.value:"Nenhum"),e("br"),"Envio: "+I18n.t("shared.shipping_options."+r.shipping_options),e("br"),"Valor mínimo: R$"+Tt.formatNumber(r.minimum_value,2,3),e("br"),e.trust("Disponíveis: "+i+" / "+(r.maximum_contributions||"&infin;")),e("br"),"Aguardando confirmação: "+r.waiting_payment_count,e("br"),"Estimativa da Entrega: "+Tt.momentify(r.deliver_at),e("br"),e("div",["Status da Entrega: ",Tt.contributionStatusBadge(n)]),r.title?["Título: "+r.title,e("br")]:"","Descrição: "+r.description]:"Apoio sem recompensa")])}},an={controller:function(t){var r=void 0,n=function(){var n=S.rewardDetail,i=t.item.reward_id,a=n.getRowOptions(Tt.idVM.id(i).parameters()),s=e.prop({});return r=w.loaderWithToken(a),i&&r.load().then(o.compose(s,o.first)),s};return{reward:n(),actions:{transfer:{property:"user_id",updateKey:"id",callToAction:"Transferir",innerLabel:"Id do novo apoiador:",outerLabel:"Transferir Apoio",placeholder:"ex: 129908",successMessage:"Apoio transferido com sucesso!",errorMessage:"O apoio não foi transferido!",model:S.contributionDetail},reward:{getKey:"project_id",updateKey:"contribution_id",selectKey:"reward_id",radios:"rewards",callToAction:"Alterar Recompensa",outerLabel:"Recompensa",getModel:S.rewardDetail,updateModel:S.contributionDetail,selectedItem:n(),addEmpty:{id:-1,minimum_value:10,description:"Sem recompensa"},validate:function(e,r){var n=o.findWhere(e,{id:r});return t.item.value>=n.minimum_value?void 0:"Valor mínimo da recompensa é maior do que o valor da contribuição."}},refund:{updateKey:"id",callToAction:"Reembolso direto",innerLabel:"Tem certeza que deseja reembolsar esse apoio?",outerLabel:"Reembolsar Apoio",model:S.contributionDetail},remove:{property:"state",updateKey:"id",callToAction:"Apagar",innerLabel:"Tem certeza que deseja apagar esse apoio?",outerLabel:"Apagar Apoio",forceValue:"deleted",successMessage:"Apoio removido com sucesso!",errorMessage:"O apoio não foi removido!",model:S.contributionDetail}},l:r}},view:function(t,r){var n=t.actions,i=r.item,a=t.reward,s=function(e,t){return o.extend({},e,{requestOptions:{url:"/admin/contributions/"+t+"/gateway_refund",method:"PUT"}})};return e("#admin-contribution-detail-box",[e(".divider.u-margintop-20.u-marginbottom-20"),e(".w-row.u-marginbottom-30",[e.component(vr,{data:n.transfer,item:i}),t.l()?Tt.loader:e.component(yr,{data:n.reward,item:a,getKeyValue:i.project_id,updateKeyValue:i.contribution_id}),e.component(jr,{data:s(n.refund,i.id),item:i}),e.component(vr,{data:n.remove,item:i})]),e(".w-row.card.card-terciary.u-radius",[e.component(on,{contribution:i}),e.component(rn,{contribution:i}),t.l()?Tt.loader:e.component(nn,{reward:a,contribution:i,key:i.key})])])}},sn={controller:function(){var t=Hr,o=Qr,r=e.prop(""),n=[{component:Vt,data:{vm:o.full_text_index,placeholder:"Busque por projeto, email, Ids do usuário e do apoio..."}},{component:Er,data:{label:"Status da entrega",name:"delivery_status",vm:o.delivery_status,options:[{value:"",option:"Qualquer um"},{value:"delivered",option:"delivered"},{value:"undelivered",option:"undelivered"},{value:"error",option:"error"},{value:"received",option:"received"}]}},{component:Er,data:{label:"Com o estado",name:"state",vm:o.state,options:[{value:"",option:"Qualquer um"},{value:"paid",option:"paid"},{value:"refused",option:"refused"},{value:"pending",option:"pending"},{value:"pending_refund",option:"pending_refund"},{value:"refunded",option:"refunded"},{value:"chargeback",option:"chargeback"},{value:"deleted",option:"deleted"}]}},{component:Er,data:{label:"gateway",name:"gateway",vm:o.gateway,options:[{value:"",option:"Qualquer um"},{value:"Pagarme",option:"Pagarme"},{value:"MoIP",option:"MoIP"},{value:"PayPal",option:"PayPal"},{value:"Credits",option:"Créditos"}]}},{component:Sr,data:{label:"Valores entre",first:o.value.gte,last:o.value.lte}},{component:zr,data:{label:"Período do apoio",first:o.created_at.gte,last:o.created_at.lte}}],i=function(){return r(!1),t.firstPage(o.parameters()).then(null,function(e){r(e.message)}),!1};return{filterVM:o,filterBuilder:n,listVM:{list:t,error:r},data:{label:"Apoios"},submit:i}},view:function(t){return e("#admin-root-contributions",[e.component(Lt,{form:t.filterVM.formDescriber,filterBuilder:t.filterBuilder,submit:t.submit}),e.component(Yt,{vm:t.listVM,listItem:tn,listDetail:an})])}},ln=g.paginationVM(S.userSubscription,"id.desc",{Prefer:"count=exact"}),cn=g.filtersVM({status:"eq",search_index:"fts(portuguese)",payment_method:"eq"}),dn=function(e){return(e||"").toString().trim()};cn.status(""),cn.payment_method(""),cn.order({id:"desc"}),cn.search_index.toFilter=function(){var e=dn(cn.search_index());return e&&l(e)||void 0};var un={controller:function(t){var r=e.prop({});return hr.fetchProject(t.item.project_external_id,!1).then(function(e){r(o.first(e))}),{project:r}},view:function(t,o){var r=t.project();return e(".w-row.admin-project",r?[e(".w-col.w-col-3.w-col-small-3.u-marginbottom-10",[e("img.thumb-project.u-radius[src="+r.large_image+"][width=50]")]),e(".w-col.w-col-9.w-col-small-9",[e(".fontweight-semibold.fontsize-smaller.lineheight-tighter.u-marginbottom-10",[e('a.alt-link[target="_blank"][href="/'+r.permalink+'"]',r.name)]),e(".fontsize-smallest.fontcolor-secondary",""+Tt.momentify(r.zone_online_date))])]:"")}},pn={view:function(t,o){var r=o.item;return e(".w-row.admin-contribution",[e(".fontweight-semibold.fontsize-small","R$"+r.amount/100+" por mês"),e(".fontsize-smaller.fontweight-semibold","("+r.paid_count+" mês ativo)")])}},mn={controller:function(t){var o=e.prop({});return mo.fetchUser(t.item.user_external_id,!1).then(function(e){o(_.first(e))}),{user:o}},view:function(t,o){var r=o.item,n=r.checkout_data?r.checkout_data.customer:{},i={profile_img_thumbnail:t.user()?t.user().profile_img_thumbnail:"",id:r.user_external_id,name:n.name,email:r.user_email},a=e(".fontsize-smallest.fontcolor-secondary","Gateway: "+n.email);return t.user()?e.component(Fr,{item:i,additional_data:a}):Tt.loader()}},fn=o.partial(Tt.i18nScope,"projects.subscription_fields"),wn={controller:function(e){var t=e.subscription,o={boleto:"fa-barcode",credit_card:"fa-credit-card"};return{subscription:t,paymentClass:o}},view:function(o,r){var n=o.subscription,i=o.paymentClass;return e("span",[e("span.fa."+i[n.payment_method],""),t.t(n.payment_method,fn())])}},bn=o.partial(Tt.i18nScope,"projects.subscription_fields"),gn={controller:function(){var e={active:"fa-circle.text-success",started:"fa-circle.text-waiting",inactive:"fa-circle.text-error",canceled:"fa-times-circle.text-error",canceling:"fa-times-circle-o.text-error",deleted:"fa-circle.text-error",error:"fa-circle.text-error"};return{statusClass:e}},view:function(o,n){var i=n.subscription,a=o.statusClass;return e("span",[e("span.fontsize-smaller",[e("span.fa."+(a[i.status]||"Erro")," "),t.t("status."+i.status,bn())]),"started"===i.status?e(".fontcolor-secondary.fontsize-mini.fontweight-semibold.lineheight-tightest","em "+r(i.created_at).format("DD/MM/YYYY")):""])}},hn={view:function(t,o){var r=o.item;return e(".w-row.admin-contribution",[e("div",e(gn,{subscription:r})),e("div",e(wn,{subscription:r}))])}},_n={controller:function(){return{itemBuilder:[{component:mn,wrapperClass:".w-col.w-col-4"},{component:un,wrapperClass:".w-col.w-col-4"},{component:pn,wrapperClass:".w-col.w-col-2"},{component:hn,wrapperClass:".w-col.w-col-2"}]}},view:function(t,o){return e(".w-row",_.map(t.itemBuilder,function(t){return e(t.wrapperClass,[e.component(t.component,{item:o.item,key:o.key})])}))}},vn={controller:function(t){var r=void 0,n=void 0,i=function(){var r=v.filtersVM({id:"eq"});r.id(t.item.reward_id),n=v.loaderWithToken(S.projectReward.getRowOptions(r.parameters()));var i=e.prop({});return n.load().then(function(e){i(o.first(e))}),i},a=g.filtersVM({subscription_id:"eq"});a.subscription_id(t.key);var s=e.prop({}),l=function(){var o=e.prop([]),r=x.filtersVM({user_id:"eq",project_id:"eq"});r.user_id(t.item.user_id),r.project_id(t.item.project_id);var n=x.loaderWithToken(S.userNotification.getPageOptions(r.parameters()));return n.load().then(o),o},c=function(){var t=e.prop([]),o=g.loaderWithToken(S.subscriptionTransition.getPageOptions(a.parameters()));return o.load().then(t),t},d=function(){var t=e.prop([]);S.commonPayments.pageSize(!1);var r=g.loaderWithToken(S.commonPayments.getPageOptions(a.parameters()));return r.load().then(function(r){s(o.first(r)),o.map(r,function(t,r){o.extend(t,{selected:e.prop(0===r)})}),t(r)}),t},u=function(e){o.map(e,function(e){e.selected(!1)})};return{payments:d(),transitions:c(),notifications:l(),currentPayment:s,clearSelected:u,reward:i(),l:r}},view:function(t,r){var n=t.payments(),i=t.transitions(),a=t.notifications(),s=t.reward(),l=t.currentPayment;return e(".card.card-terciary.w-row",n?[e(".w-col.w-col-4",e("div",[e(".fontweight-semibold.fontsize-smaller.lineheight-tighter.u-marginbottom-20","Histórico da transação"),o.map(i,function(t){return e(".fontsize-smallest.lineheight-looser.w-row",[e(".w-col.w-col-6",e("div",Tt.momentify(t.created_at,"DD/MM/YYYY hh:mm"))),e(".w-col.w-col-6",e("span",t.from_status+" -> "+t.to_status))])}),e(".divider"),o.map(n,function(o,r){return e(".fontsize-smallest.lineheight-looser.w-row"+(o.selected()?".fontweight-semibold":""),[e(".w-col.w-col-6",e("div",Tt.momentify(o.created_at,"DD/MM/YYYY hh:mm"))),e(".w-col.w-col-6",e("span."+(o.selected()?"link-hidden-dark":"alt-link"),{onclick:function(){t.clearSelected(n),o.selected(!0),l(o)}},o.status))])}),e(".fontweight-semibold.fontsize-smaller.lineheight-tighter.u-marginbottom-20.u-margintop-20","Notificações"),o.map(a,function(t){return e(".fontsize-smallest.lineheight-looser.w-row",[e(".w-col.w-col-6",e("div",Tt.momentify(t.created_at,"DD/MM/YYYY hh:mm"))),e(".w-col.w-col-6",e("span",t.label))])})])),e(".w-col.w-col-4",e("div",[e(".fontweight-semibold.fontsize-smaller.lineheight-tighter.u-marginbottom-20","Detalhes do apoio mensal"),e(".fontsize-smallest.lineheight-loose",l()?["Início: "+Tt.momentify(l().created_at,"DD/MM/YYYY hh:mm"),e("br"),"Confirmação: "+Tt.momentify(l().paid_at,"DD/MM/YYYY hh:mm"),e("br"),"Valor: R$"+l().amount/100,e("br"),o.isEmpty(s)?"Sem recompensa":"Recompensa: R$"+s.data.minimum_value/100+" - "+s.data.title+" - "+s.data.description.substring(0,90)+"(...)",e("br"),"Id pagamento: "+l().id,e("br"),"Id gateway: "+l().gateway_id,e("br"),"Apoio:",e.trust("&nbsp;"),l().subscription_id,e("br"),"credit_card"===l().payment_method?["Cartão ",e.trust("&nbsp;"),l().payment_method_details.first_digits+"******"+l().payment_method_details.last_digits,e.trust("&nbsp;"),e.trust("&nbsp;"),l().payment_method_details.brand]:"Boleto"]:"")])),e(".w-col.w-col-4")]:"")}},yn={controller:function(){var t=ln,o=cn,r=e.prop(""),n=[{component:Vt,data:{vm:o.search_index,placeholder:"Busque por projeto, permalink, email, nome do realizador..."}},{component:Er,data:{label:"Com o estado",name:"status",vm:o.status,options:[{value:"",option:"Qualquer um"},{value:"started",option:"started"},{value:"active",option:"active"},{value:"inactive",option:"inactive"},{value:"canceled",option:"canceled"},{value:"canceling",option:"canceling"},{value:"deleted",option:"deleted"},{value:"error",option:"error"}]}}],i=function(){return r(!1),t.firstPage(o.parameters()).then(null,function(e){r(e.message)}),!1};return{filterVM:o,filterBuilder:n,listVM:{list:t,error:r},data:{label:"Assinaturas"},submit:i}},view:function(t){var o="Assinaturas";return e("#admin-root-subscriptions",[e.component(Lt,{form:t.filterVM.formDescriber,filterBuilder:t.filterBuilder,label:o,submit:t.submit}),e.component(Yt,{vm:t.listVM,listItem:_n,listDetail:vn})])}},jn=w.paginationVM(S.balanceTransfer,"created_at.asc",{Prefer:"count=exact"}),kn=w.filtersVM({full_text_index:"@@",state:"eq",transfer_id:"eq",created_date:"between",transferred_date:"between",amount:"between"}),xn=function(e){return(e||"").toString().trim()};kn.state(""),kn.transfer_id(""),kn.created_date.lte.toFilter=function(){var e=xn(kn.created_date.lte());return e&&Tt.momentFromString(e).endOf("day").format("")},kn.created_date.gte.toFilter=function(){var e=xn(kn.created_date.gte());return e&&Tt.momentFromString(e).endOf("day").format("")},kn.transferred_date.lte.toFilter=function(){var e=xn(kn.transferred_date.lte());return e&&Tt.momentFromString(e).endOf("day").format("")},kn.transferred_date.gte.toFilter=function(){var e=xn(kn.transferred_date.gte());return e&&Tt.momentFromString(e).endOf("day").format("")},kn.getAllBalanceTransfers=function(e){S.balanceTransfer.pageSize(!1);var t=w.loaderWithToken(S.balanceTransfer.getPageOptions(e.parameters())).load();return S.balanceTransfer.pageSize(9),t};var zn={view:function(t,o){return e(".modal-backdrop",[e(".modal-dialog-outer",[e(".modal-dialog-inner.modal-dialog-small.fontcolor-primary",[e("a.w-inline-block.fa.fa-lg.modal-close"+(o.hideCloseButton?"":".fa-close")+'[href="javascript:void(0);"]',{onclick:o.displayModal.toggle}),e.component(o.content[0],o.content[1])])])])}},Sn={view:function(t,o){var r=o.item;return e(".w-row",[e(".w-col.w-col-1.w-col-tiny-1",[e(".w-checkbox.w-clearfix",[e("input.w-checkbox-input[type='checkbox']",{disabled:"pending"!=r.state,checked:o.listWrapper.isSelected(r.id),onchange:function(e){e.currentTarget.checked?o.listWrapper.selectItem(r):o.listWrapper.unSelectItem(r)}})])]),e(".w-col.w-col-3",[e(".fontsize-smaller.fontweight-semibold.lineheight-tighter",[""+r.user_name,e("span.fontcolor-secondary.fontsize-smallest","("+r.user_public_name+")")]),e(".fontcolor-secondary.fontsize-smallest",r.user_email),e(".fontcolor-secondary.fontsize-smallest","USER_ID: "+r.user_id)]),e(".w-col.w-col-2",[e("span.fontsize-small","R$ "+Tt.formatNumber(r.amount,2,3))]),e(".w-col.w-col-2.w-hidden-small.w-hidden-tiny",[e("span",r.state),r.transfer_id?e(".fontcolor-secondary.fontsize-smallest",e('a[href="https://dashboard.pagar.me/#/transfers/'+r.transfer_id+'"]',"ID: "+r.transfer_id)):""]),e(".w-col.w-col-2",[e(".fontsize-smallest",["Solicitado em: ",e("span.fontsize-small.lineheight-tightest",Tt.momentify(r.created_at)),e("br"),e("span.fontsize-smallest.lineheight-tightest","("+Tt.momentify(r.transfer_limit_date)+")")])]),e(".w-col.w-col-2",[e(".fontsize-smallest",["Confirmado em: ",r.transferred_at?e("span.fontsize-small.lineheight-tightest",Tt.momentify(r.transferred_at)):""])])])}},Cn={controller:function(t){var o=t.toggleOpt||Tt.toggleProp(!0,!1),r=function(){setTimeout(function(){o(!1),e.redraw()},3e3)};return{displayNotification:o,setPopTimeout:r}},view:function(t,o){return t.displayNotification()?e(".flash.w-clearfix.card.card-notification.u-radius.zindex-20",{config:t.setPopTimeout,"class":o.error?"card-error":""},[e('img.icon-close[src="/assets/catarse_bootstrap/x.png"][width="12"][alt="fechar"]',{onclick:t.displayNotification.toggle}),e(".fontsize-small",e.trust(o.message))]):e("span")}},En=o.partial(Tt.i18nScope,"admin.balance_transfers"),Pn={controller:function(r){var n=e.prop(null),i=e.prop(!1),a=e.prop({}),s=r.item.last_transition_metadata||{transfer_data:{}},l=s.transfer_data||{},c=l.bank_account,d=e.prop({}),u=e.prop({}),p={admin_notes:e.prop(r.item.admin_notes)},m=e.prop(!1),f=function(){m(!0),e.request({method:"PUT",url:"/admin/balance_transfers/"+r.item.id,data:{balance_transfer:{admin_notes:p.admin_notes()}},config:Tt.setCsrfToken}).then(function(e){i(!0),a({message:t.t("admin_notes.success_update",En()),toggleOpt:i}),m(!1)},function(e){i(!0),a({message:t.t("admin_notes.failed_update",En()),error:!0,toggleOpt:i}),m(!1)})};return o.isUndefined(c)||u(c.conta?{account:c.conta,account_digit:c.conta_dv,account_type:null,agency:c.agencia,agency_digit:c.agencia_dv,bank_code:c.bank_code,bank_name:null,owner_document:c.document_number,owner_name:c.legal_name}:c),mo.getUserBankAccount(r.item.user_id).then(o.compose(n,o.first)),{metaBank:c,userBankAccount:n,transitionBankAccount:u,userBalance:d,fields:p,submitNotes:f,loadingNotes:m,showPopNotification:i,popNotificationAttributes:a}},view:function(r,n){var i=o.isUndefined(r.metaBank)?r.userBankAccount():r.transitionBankAccount();return e("#admin-balance-transfer-item-detail-box",[e(".divider.u-margintop-20.u-marginbottom-20"),e(".w-row.card.card-terciary.u-radius",[e(".w-col.w-col-4",[i?[e(".fontsize-smaller.fontweight-semibold.lineheight-tighter.u-marginbottom-20","Dados bancários"),e(".fontsize-smallest.lineheight-looser",[e("span.fontweight-semibold","Banco:"),i.bank_code+" - "+(i.bank_name?i.bank_name:""),e("br"),e("span.fontweight-semibold","Agencia:")," "+i.agency+" - "+(i.agency_digit?i.agency_digit:""),e("br"),e("span.fontweight-semibold","Conta:")," "+i.account+" - "+(i.account_digit?i.account_digit:""),e("br"),e("span.fontweight-semibold","Nome:"),i.owner_name,e("br"),e("span.fontweight-semibold","CPF:"),i.owner_document])]:Tt.loader(),r.loadingNotes()?Tt.loader():e("",[e("textarea.text-field.height-mini.w-input",{value:r.fields.admin_notes(),onkeyup:e.withAttr("value",r.fields.admin_notes)}),e(".u-text-center",e("button.btn.btn-terciary",{onclick:r.submitNotes},t.t("shared.save_text"))),r.showPopNotification()?e(Cn,r.popNotificationAttributes()):""])]),e(Ur,{user_id:n.item.user_id})])])}},Mn={controller:function(t){var r=jn,n=kn,i=e.prop(""),a=e.prop(!1),s=[{component:Vt,data:{vm:n.full_text_index,placeholder:"Busque pelo email, ids do usuario, ids de transferencia e eventos de saldo"}},{component:Er,data:{label:"Status",name:"state",vm:n.state,options:[{value:"",option:"Qualquer um"},{value:"pending",option:"Pendente"},{value:"authorized",option:"Autorizado"},{value:"processing",
option:"Processando"},{value:"transferred",option:"Concluido"},{value:"error",option:"Erro"},{value:"rejected",option:"Rejeitado"},{value:"gateway_error",option:"Erro no gateway"}]}},{component:zr,data:{label:"Data da solicitação",first:n.created_date.gte,last:n.created_date.lte}},{component:zr,data:{label:"Data da confirmação",first:n.transferred_date.gte,last:n.transferred_date.lte}},{component:Sr,data:{label:"Valores entre",first:n.amount.gte,last:n.amount.lte}}],l=e.prop([]),c=Tt.toggleProp(!1,!0),d=Tt.toggleProp(!1,!0),u=Tt.toggleProp(!1,!0),p=e.prop(!1),m=e.prop(!1),f=Tt.toggleProp(!1,!0),w=function(e){return o.find(l(),function(t){return t.id==e})},b=function(e){o.find(l(),function(t){return t.id==e.id})||l().push(e),a(!0)},g=function(e){var t=o.reject(l(),function(t){return t.id==e.id});l(t),o.isEmpty(t)&&a(!1)},h=function(){return i(!1),r.firstPage(n.parameters()).then(null,function(e){i(e.message)}),!1},_=function(t){var r={view:function(t,r){return f(!1),e("",[e(".modal-dialog-header",[e(".fontsize-large.u-text-center",r.modalTitle)]),e(".modal-dialog-content",[e(".w-row.fontweight-semibold",[e(".w-col.w-col-6","Nome"),e(".w-col.w-col-3","Valor"),e(".w-col.w-col-3","Solicitado em")]),o.map(l(),function(t,o){return e(".divider.fontsize-smallest.lineheight-looser",[e(".w-row",[e(".w-col.w-col-6",[e("span",t.user_name)]),e(".w-col.w-col-3",[e("span","R$ "+Tt.formatNumber(t.amount,2,3))]),e(".w-col.w-col-3",[e("span",Tt.momentify(t.created_at))])])])}),e(".w-row.fontweight-semibold.divider",[e(".w-col.w-col-6","Total"),e(".w-col.w-col-3","R$ "+Tt.formatNumber(o.reduce(l(),function(e,t){return e+t.amount},0),2,3)),e(".w-col.w-col-3")]),e(".w-row.u-margintop-40",[e(".w-col.w-col-1"),e(".w-col.w-col-5",e("a.btn.btn-medium.w-button",{onclick:r.onClickCallback},r.ctaText)),e(".w-col.w-col-5",e("a.btn.btn-medium.btn-terciary.w-button",{onclick:r.displayModal.toggle},"Voltar")),e(".w-col.w-col-1")])])])}};return[r,t]},v=function(){e.request({method:"POST",url:"/admin/balance_transfers/batch_manual",data:{transfer_ids:o.uniq(o.map(l(),function(e){return e.id}))},config:Tt.setCsrfToken}).then(function(t){l([]),r.firstPage(n.parameters()),d(!1),e.redraw()})},y=function(){e.request({method:"POST",url:"/admin/balance_transfers/batch_approve",data:{transfer_ids:o.uniq(o.map(l(),function(e){return e.id}))},config:Tt.setCsrfToken}).then(function(t){l([]),r.firstPage(n.parameters()),c(!1),e.redraw()})},j=function(){e.request({method:"POST",url:"/admin/balance_transfers/batch_reject",data:{transfer_ids:o.uniq(o.map(l(),function(e){return e.id}))},config:Tt.setCsrfToken}).then(function(t){l([]),u(!1),r.firstPage(),e.redraw()})},k=function(){l([]),a(!1)},x=function(){p(!0),e.redraw(),n.getAllBalanceTransfers(n).then(function(t){o.map(o.where(t,{state:"pending"}),b),p(!1),e.redraw()})},z=function(){return e("",[e("button.btn.btn-inline.btn-small.btn-terciary.u-marginright-20.w-button",{onclick:x},p()?"carregando...":"Selecionar todos"),l().length>1?e("button.btn.btn-inline.btn-small.btn-terciary.u-marginright-20.w-button",{onclick:k},"Desmarcar todos ("+l().length+")"):"",a()?e(".w-inline-block",[e("button.btn.btn-inline.btn-small.btn-terciary.w-button",{onclick:f.toggle},["Marcar como ("+l().length+")"]),f()?e(".card.dropdown-list.dropdown-list-medium.u-radius.zindex-10[id='transfer']",[e("a.dropdown-link.fontsize-smaller[href='javascript:void(0);']",{onclick:function(e){return c.toggle()}},"Aprovada"),e("a.dropdown-link.fontsize-smaller[href='javascript:void(0);']",{onclick:function(e){return d.toggle()}},"Transferencia manual"),e("a.dropdown-link.fontsize-smaller[href='javascript:void(0);']",{onclick:function(e){return u.toggle()}},"Recusada")]):""]):""])};return{displayApprovalModal:c,displayRejectModal:u,displayManualModal:d,generateWrapperModal:_,approveSelectedIDs:y,manualTransferSelectedIDs:v,rejectSelectedIDs:j,filterVM:n,filterBuilder:s,listVM:{hasInputAction:!0,inputActions:z,list:r,selectedItemsIDs:l,selectItem:b,unSelectItem:g,selectedAny:a,isSelected:w,redrawProp:m,error:i},data:{label:"Pedidos de saque"},submit:h}},view:function(t,o){return e("",[e(Lt,{filterBuilder:t.filterBuilder,submit:t.submit}),t.displayApprovalModal()?e(zn,{displayModal:t.displayApprovalModal,content:t.generateWrapperModal({modalTitle:"Aprovar saques",ctaText:"Aprovar",displayModal:t.displayApprovalModal,onClickCallback:t.approveSelectedIDs})}):"",t.displayManualModal()?e(zn,{displayModal:t.displayManualModal,content:t.generateWrapperModal({modalTitle:"Transferencia manual de saques",ctaText:"Aprovar",displayModal:t.displayManualModal,onClickCallback:t.manualTransferSelectedIDs})}):"",t.displayRejectModal()?e(zn,{displayModal:t.displayRejectModal,content:t.generateWrapperModal({modalTitle:"Rejeitar saques",ctaText:"Rejeitar",displayModal:t.displayRejectModal,onClickCallback:t.rejectSelectedIDs})}):"",e(Yt,{vm:t.listVM,listItem:Sn,listDetail:Pn})])}},Dn={controller:function(t){var o=(t.builder,e.prop("")),r=e.prop(!1),n=function(){return!!Tt.validateEmail(o())||(r(!0),!1)};return{email:o,submit:n,error:r}},view:function(t,o){var r=t.error?"":".positive.error";return e('form.w-form[id="email-form"][method="post"][action="'+o.builder.customAction+'"]',{onsubmit:t.submit},[e(".w-col.w-col-5",[e("input"+r+'.w-input.text-field.medium[name="EMAIL"][placeholder="Digite seu email"][type="text"]',{config:Tt.RDTracker("landing-flex"),onchange:e.withAttr("value",t.email),value:t.email()}),t.error()?e("span.fontsize-smaller.text-error","E-mail inválido"):""]),e(".w-col.w-col-3",[e('input.w-button.btn.btn-large[type="submit"][value="Cadastrar"]')])])}},qn={controller:function(t){var r=t.project,n=e.prop([]),i=w.paginationVM(S.contributor,"user_id.desc",{Prefer:"count=exact"}),a=w.filtersVM({project_id:"eq",is_follow:"eq"}).project_id(r.project_id).is_follow(!0);return i.collection().length||i.firstPage(a.parameters()).then(function(){n(o.sample(i.collection(),2))}),{project:r,listVM:i,friendsSample:n}},view:function(t,r){var n=(t.project,t.listVM.collection().length),i=r.wrapper||".friend-backed-card";return e(i,[e(".friend-facepile",[o.map(t.friendsSample(),function(t){var r=o.isEmpty(t.data.profile_img_thumbnail)?"/assets/catarse_bootstrap/user.jpg":t.data.profile_img_thumbnail;return e("img.user-avatar[src='"+r+"']")})]),e("p.fontsize-smallest.friend-namepile.lineheight-tighter",[e("span.fontweight-semibold",o.map(t.friendsSample(),function(e){return e.data.name.split(" ")[0]}).join(n>2?", ":" e ")),n>2?[" e ",e("span.fontweight-semibold","mais "+(n-t.friendsSample().length))]:"",n>1?" apoiaram":" apoiou"])])}},An=o.partial(Tt.i18nScope,"projects.card"),Tn={controller:function(t){var r=t.project,n=r.progress.toFixed(2),i=Tt.translatedTime(r.remaining_time),a=Tt.translatedTime(r.elapsed_time),s=t.type||"small",l=function(){var e={small:{wrapper:".w-col.w-col-4",innerWrapper:".card-project.card.u-radius",thumb:".card-project-thumb",descriptionWrapper:"",description:".card-project-description.alt",title:".fontweight-semibold.u-text-center-small-only.lineheight-tight.u-marginbottom-10.fontsize-base",author:".w-hidden-small.w-hidden-tiny.fontsize-smallest.fontcolor-secondary.u-marginbottom-20",headline:".w-hidden-small.w-hidden-tiny.fontcolor-secondary.fontsize-smaller",city:".w-hidden-small.w-hidden-tiny.card-project-author.altt"},medium:{wrapper:".w-col.w-col-6",innerWrapper:".card-project.card.u-radius",thumb:".card-project-thumb.medium",descriptionWrapper:"",description:".card-project-description.alt",title:".fontsize-large.fontweight-semibold.u-marginbottom-10",author:".w-hidden-small.w-hidden-tiny.fontsize-smallest.fontcolor-secondary.u-marginbottom-20",headline:".w-hidden-small.w-hidden-tiny.fontcolor-secondary.fontsize-smaller",city:".w-hidden-small.w-hidden-tiny.card-project-author.altt"},big:{wrapper:".card.u-radius.card-project",innerWrapper:".w-row",thumb:".w-col.w-col-8.w-col-medium-6.card-project-thumb.big",descriptionWrapper:".w-col.w-col-4.w-col-medium-6",description:".card-project-description.big",title:".fontsize-large.fontweight-semibold.u-marginbottom-10",author:".fontsize-smallest.fontcolor-secondary.u-marginbottom-20",headline:".fontcolor-secondary.fontsize-smaller",city:".w-hidden"}};return e[s]},c=function(e){return o.contains(["successful","failed","waiting_funds"],e.state)},d=function(t){return hr.isSubscription(t)?e('img.product-label[src="https://s3.amazonaws.com/cdn.catarse/assets/assinatura-label.png"]'):t.expires_at?c(t)?[e(".fontsize-smaller.fontweight-loose","Encerrado"),e(".fontsize-smallest.lineheight-tightest",Tt.momentify(t.expires_at))]:[e(".fontsize-smaller.fontweight-semibold",i.total+" "+i.unit),e(".fontsize-smallest.lineheight-tightest",i.total>1?"Restantes":"Restante")]:[e(".fontsize-smallest.lineheight-tight",["Iniciado há",e("br"),a.total+" "+a.unit])]};return{cardCopy:d,css:l,type:s,progress:n,remainingTextObj:i,elapsedTextObj:a,isFinished:c}},view:function(o,r){var n=r.project,i=n.user?n.user.public_name||n.user.name:n.owner_public_name||n.owner_name,a=n.address?n.address.city+" - "+n.address.state_acronym:n.city_name+" - "+n.state_acronym;return e(o.css().wrapper,[e(o.css().innerWrapper,[e("a"+o.css().thumb+'[href="/'+n.permalink+"?ref="+r.ref+'"]',{onclick:hr.routeToProject(n,r.ref),style:{"background-image":"url("+(n.project_img||n.large_image)+")",display:"block"}}),e(o.css().descriptionWrapper,[e(o.css().description,[e(o.css().title,[e('a.link-hidden[href="/'+n.permalink+"?ref="+r.ref+'"]',{onclick:hr.routeToProject(n,r.ref)},n.project_name||n.name)]),e(o.css().author,t.t("by",An())+" "+i),e(o.css().headline,[e('a.link-hidden[href="/'+n.permalink+"?ref="+r.ref+'"]',{onclick:hr.routeToProject(n,r.ref)},n.headline)])]),e(o.css().city,[e(".fontsize-smallest.fontcolor-secondary",[e("span.fa.fa-fw.fa-map-marker.fa-1"," "),a])]),e(Wt,{progress:o.progress,project:n}),e(".card-project-stats",[e(".w-row",[e(".w-col.w-col-4.w-col-small-4.w-col-tiny-4",[e(".fontsize-base.fontweight-semibold",Math.floor(n.progress)+"%")]),e(".w-col.w-col-4.w-col-small-4.w-col-tiny-4.u-text-center-small-only",[e(".fontsize-smaller.fontweight-semibold","R$ "+Tt.formatNumber(n.pledged)),e(".fontsize-smallest.lineheight-tightest",t.t("pledged."+n.mode,An()))]),e(".w-col.w-col-4.w-col-small-4.w-col-tiny-4.u-text-right",o.cardCopy(n))])])]),r.showFriends&&"big"===o.type?e(".w-col.w-col-4.w-col-medium-6",[e.component(qn,{project:n})]):""]),r.showFriends&&"big"!==o.type?e.component(qn,{project:n}):""])}},Rn={view:function(t,r){var n=r.collection,i=r.title||n.title,a=r.ref,s=r.showFriends,l=r.wrapper||".w-section.section.u-marginbottom-40";return n.loader()||n.collection().length>0?e(l,[e(".w-container",[o.isUndefined(n.title)&&o.isUndefined(n.hash)?"":e(".w-row.u-marginbottom-30",[e(s?".w-col.w-col-8.w-col-small-6.w-col-tiny-6":".w-col.w-col-10.w-col-small-6.w-col-tiny-6",[e(".fontsize-large.lineheight-looser",i)]),e(s?".w-col.w-col-4.w-col-small-6.w-col-tiny-6":".w-col.w-col-2.w-col-small-6.w-col-tiny-6",[e(".w-row",[s?e(".w-col.w-col-6",[e('a.btn.btn-no-border.btn-small.btn-terciary[href="/connect-facebook?ref='+a+'"]',"Encontrar amigos")]):"",e(s?".w-col.w-col-6":".w-col.w-col-12",e('a.btn.btn-small.btn-terciary[href="/explore?ref='+a+"&filter="+n.hash+'"]',{config:e.route},"Ver todos"))])])]),n.loader()?Tt.loader():e(".w-row",o.map(n.collection(),function(t){return e.component(Tn,{project:t,ref:a,showFriends:s})}))])]):e("div")}},In={controller:function(e){return{showAnswer:Tt.toggleProp(!1,!0)}},view:function(t,o){return e(".card.qa-card.u-marginbottom-20.u-radius.btn-terciary",[e(".fontsize-base",{onclick:function(){t.showAnswer.toggle(),o.onclick&&o.onclick()}},o.question),t.showAnswer()?e("p.u-margintop-20.fontsize-small",e.trust(o.answer)):""])}},Nn={controller:function(){var t=e.prop([]),o=e.prop([]),r=(e.prop(),_.partial(_.sample,_,3)),n={customAction:"http://fazum.catarse.me/obrigado-landing-catarse-flex"},i=function(e,t){t||Tt.discuss("https://catarse.me/flex","flex_page")},a=w.filtersVM({mode:"eq",state:"eq",recommended:"eq"}),s=w.loaderWithToken(S.statistic.getRowOptions());a.mode("flex").state("online").recommended(!0);var l=w.loader(S.project.getPageOptions(a.parameters()));return s.load().then(t),l.load().then(_.compose(o,r)),{addDisqus:i,builder:n,statsLoader:s,stats:t,projectsLoader:l,projects:{loader:l,collection:o}}},view:function(t,o){var r=_.first(t.stats());return[e(".w-section.hero-full.hero-zelo",[e(".w-container.u-text-center",[e("img.logo-flex-home[src='/assets/logo-flex.png'][width='359']"),e(".w-row",[e(".w-col.fontsize-large.u-marginbottom-60.w-col-push-2.w-col-8","Vamos construir uma nova modalidade de crowdfunding! Cadastre seu email e saiba como inscrever o seu projeto no flex!")]),e(".w-row",[e(".w-col.w-col-2"),e.component(Dn,{builder:t.builder}),e(".w-col.w-col-2")])])]),[e(".section",[e(".w-container",[e(".fontsize-largest.u-margintop-40.u-text-center","Pra quem será?"),e(".fontsize-base.u-text-center.u-marginbottom-60","Iniciaremos a fase de testes com categorias de projetos específicas"),e("div",[e(".w-row.u-marginbottom-60",[e(".w-col.w-col-6",[e(".u-text-center.u-marginbottom-20",[e("img[src='https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/560e393a01b66e250aca67cb_icon-zelo-com.png'][width='210']"),e(".fontsize-largest.lineheight-loose","Causas")]),e("p.fontsize-base","Flexibilidade para causas de impacto! Estaremos abertos a campanhas de organizações ou pessoas físicas para arrecadação de recursos para causas pessoais, projetos assistenciais, saúde, ajudas humanitárias, proteção aos animais, empreendedorismo socioambiental, ativismo ou qualquer coisa que una as pessoas para fazer o bem.")]),e(".w-col.w-col-6",[e(".u-text-center.u-marginbottom-20",[e("img[src='https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/560e3929a0daea230a5f12cd_icon-zelo-pessoal.png'][width='210']"),e(".fontsize-largest.lineheight-loose","Vaquinhas")]),e("p.fontsize-base","Campanhas simples que precisam de flexibilidade para arrecadar dinheiro com pessoas próximas. Estaremos abertos a uma variedade de campanhas pessoais que podem ir desde cobrir custos de estudos a ajudar quem precisa de tratamento médico. De juntar a grana para fazer aquela festa a comprar presentes para alguém com a ajuda da galera. ")])])])])]),e(".w-section.section.bg-greenlime.fontcolor-negative",[e(".w-container",[e(".fontsize-largest.u-margintop-40.u-marginbottom-60.u-text-center","Como funcionará?"),e(".w-row.u-marginbottom-40",[e(".w-col.w-col-6",[e(".u-text-center",[e("img[src='https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/560e39c578b284493e2a428a_zelo-money.png'][width='180']")]),e(".fontsize-large.u-marginbottom-10.u-text-center.fontweight-semibold","Fique com quanto arrecadar"),e("p.u-text-center.fontsize-base","O flex é para impulsionar campanhas onde todo dinheiro é bem vindo! Você fica com tudo que conseguir arrecadar.")]),e(".w-col.w-col-6",[e(".u-text-center",[e("img[src='https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/560e39d37c013d4a3ee687d2_icon-reward.png'][width='180']")]),e(".fontsize-large.u-marginbottom-10.u-text-center.fontweight-semibold","Não precisa de recompensas"),e("p.u-text-center.fontsize-base","No flex oferecer recompensas é opcional. Você escolhe se oferecê-las faz sentido para o seu projeto e campanha.")])]),e(".w-row.u-marginbottom-40",[e(".w-col.w-col-6",[e(".u-text-center",[e("img[src='https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/560e39fb01b66e250aca67e3_icon-curad.png'][width='180']")]),e(".fontsize-large.u-marginbottom-10.u-text-center.fontweight-semibold","Você mesmo publica seu projeto"),e("p.u-text-center.fontsize-base","Todos os projetos inscritos no flex entram no ar. Agilidade e facilidade para você captar recursos através da internet.")]),e(".w-col.w-col-6",[e(".u-text-center",[e("img[src='https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/560e39e77c013d4a3ee687d4_icon-time.png'][width='180']")]),e(".fontsize-large.u-marginbottom-10.u-text-center.fontweight-semibold","Encerre a campanha quando quiser"),e("p.u-text-center.fontsize-base","Não há limite de tempo de captação. Você escolhe  quando encerrar sua campanha e receber os valores arrecadados.")])])])]),e(".w-section.section",[e(".w-container",[e(".w-editable.fontsize-larger.u-margintop-40.u-margin-bottom-40.u-text-center","Conheça alguns dos primeiros projetos flex"),t.projectsLoader()?Tt.loader():e.component(Rn,{collection:t.projects,ref:"ctrse_flex",wrapper:".w-row.u-margintop-40"})])]),e(".w-section.divider"),e(".w-section.section",[e(".w-container",[e(".fontsize-larger.u-text-center.u-marginbottom-60.u-margintop-40","Dúvidas"),e(".w-row.u-marginbottom-60",[e(".w-col.w-col-6",[e.component(In,{question:"Quais são as taxas da modalidade flexível? ",answer:"Como no Catarse, enviar um projeto não custa nada! A taxa cobrada no serviço Catarse flex é de 13% sobre o valor arrecadado."}),e.component(In,{question:"De onde vem o dinheiro do meu projeto?",answer:"Família, amigos, fãs e membros de comunidades que você faz parte são seus maiores colaboradores. São eles que irão divulgar sua campanha para as pessoas que eles conhecem, e assim o círculo de apoiadores vai aumentando e a sua campanha ganha força."}),e.component(In,{question:'Qual a diferença entre o flexível e o "tudo ou nada"?',answer:'Atualmente o Catarse utiliza apenas o modelo "tudo ou nada", onde você só fica com o dinheiro se bater a meta de arrecadação dentro do prazo da campanha. O modelo flexível é diferente pois permite que o realizador fique com o que arrecadar, independente de atingir ou não a meta do projeto no prazo da campanha. Não haverá limite de tempo para as campanhas. Nosso sistema flexível será algo novo em relação aos modelos que existem atualmente no mercado.'})]),e(".w-col.w-col-6",[e.component(In,{question:"Posso inscrever projetos para a modalidade flexível já?",answer:"Sim. Cadastre seu email e saiba como inscrever o seu projeto no flex!"}),e.component(In,{question:"Por quê vocês querem fazer o Catarse flex?",answer:"Acreditamos que o ambiente do crowdfunding brasileiro ainda tem espaço para muitas ações, testes e experimentações para entender de fato o que as pessoas precisam. Sonhamos com tornar o financiamento coletivo um hábito no Brasil. O Catarse flex é mais um passo nessa direção."}),e.component(In,{question:"Quando vocês irão lançar o Catarse flex?",answer:"Ainda não sabemos quando abriremos o flex para o público em geral, mas você pode cadastrar seu email nessa página e receber um material especial de como inscrever seu projeto."})])])])]),e(".w-section.section-large.u-text-center.bg-purple",[e(".w-container.fontcolor-negative",[e(".fontsize-largest","Inscreva seu projeto!"),e(".fontsize-base.u-marginbottom-60","Cadastre seu email e saiba como inscrever o seu projeto no flex!"),e(".w-row",[e(".w-col.w-col-2"),e.component(Dn,{builder:t.builder}),e(".w-col.w-col-2")])])]),e('.w-section.section-one-column.bg-catarse-zelo.section-large[style="min-height: 50vh;"]',[e(".w-container.u-text-center",[e(".w-editable.u-marginbottom-40.fontsize-larger.lineheight-tight.fontcolor-negative","O flex é um experimento e iniciativa do Catarse, maior plataforma de crowdfunding do Brasil."),e(".w-row.u-text-center",t.statsLoader()?Tt.loader():[e(".w-col.w-col-4",[e(".fontsize-jumbo.text-success.lineheight-loose",Tt.formatNumber(r.total_contributors,0,3)),e("p.start-stats.fontsize-base.fontcolor-negative","Pessoas ja apoiaram pelo menos 01 projeto no Catarse")]),e(".w-col.w-col-4",[e(".fontsize-jumbo.text-success.lineheight-loose",Tt.formatNumber(r.total_projects_success,0,3)),e("p.start-stats.fontsize-base.fontcolor-negative","Projetos ja foram financiados no Catarse")]),e(".w-col.w-col-4",[e(".fontsize-jumbo.text-success.lineheight-loose",r.total_contributed.toString().slice(0,2)+" milhões"),e("p.start-stats.fontsize-base.fontcolor-negative","Foram investidos em ideias publicadas no Catarse")])])])]),e(".w-section.section.bg-blue-one.fontcolor-negative",[e(".w-container",[e(".fontsize-large.u-text-center.u-marginbottom-20","Recomende o Catarse flex para amigos! "),e(".w-row",[e(".w-col.w-col-2"),e(".w-col.w-col-8",[e(".w-row",[e(".w-col.w-col-6.w-col-small-6.w-col-tiny-6.w-sub-col-middle",[e("div",[e("img.icon-share-mobile[src='https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/53a3f66e05eb6144171d8edb_facebook-xxl.png']"),e('a.w-button.btn.btn-large.btn-fb[href="http://www.facebook.com/sharer/sharer.php?u=https://www.catarse.me/flex?ref=facebook&title='+encodeURIComponent("Conheça o novo Catarse Flex!")+'"][target="_blank"]',"Compartilhar")])]),e(".w-col.w-col-6.w-col-small-6.w-col-tiny-6",[e("div",[e("img.icon-share-mobile[src='https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/53a3f65105eb6144171d8eda_twitter-256.png']"),e('a.w-button.btn.btn-large.btn-tweet[href="https://twitter.com/intent/tweet?text='+encodeURIComponent("Vamos construir uma nova modalidade de crowdfunding para o Catarse! Junte-se a nós, inscreva seu email!")+'https://www.catarse.me/flex?ref=twitter"][target="_blank"]',"Tuitar")])])])]),e(".w-col.w-col-2")])])]),e(".w-section.section-large.bg-greenlime",[e(".w-container",[e("#participe-do-debate.u-text-center",{config:Tt.toAnchor()},[e("h1.fontsize-largest.fontcolor-negative","Construa o flex conosco"),e(".fontsize-base.u-marginbottom-60.fontcolor-negative","Inicie uma conversa, pergunte, comente, critique e faça sugestões!")]),e('#disqus_thread.card.u-radius[style="min-height: 50vh;"]',{config:t.addDisqus})])])]]}},On={controller:function(t){var o=(e.prop(0),e.prop(t.width||280)),r=e.prop(0),n=e.prop(0),i=e.prop(0),a=e.prop({top:0,left:0}),s=Tt.toggleProp(0,1),l=function(){s.toggle(),e.redraw()},c=function(e,t){t||a(Tt.cumulativeOffset(e))},d=function(e,t){if(!t){var o=e.offsetHeight+e.offsetParent.offsetHeight,i=window.getComputedStyle(e);window.innerWidth<e.offsetWidth+2*parseFloat(i.paddingLeft)+30?(e.style.width=window.innerWidth-30,n(-a().left+15)):a().left+e.offsetWidth/2<=window.innerWidth&&a().left-e.offsetWidth/2>=0?n(-e.offsetWidth/2):a().left+e.offsetWidth/2>window.innerWidth?n(-e.offsetWidth+e.offsetParent.offsetWidth):a().left-e.offsetWidth/2<0&&n(-e.offsetParent.offsetWidth),r(-o)}};return{width:o,top:r,left:n,opacity:i,tooltip:s,toggle:l,setPosition:d,setParentPosition:c}},view:function(t,o){var r=t.width();return e(o.el,{onclick:t.toggle,config:t.setParentPosition,style:{cursor:"pointer"}},t.tooltip()?[e('.tooltip.dark[style="width: '+r+"px; top: "+t.top()+"px; left: "+t.left()+'px;"]',{config:t.setPosition},[e(".fontsize-smallest",o.text)])]:"")}},Fn=e.prop(""),Vn=function(e){return Fn(e)},Ln={basics:["public_name","permalink","category_id","city","public_tags","name"],goal:["goal","online_days"],goals:["goals.size"],description:["about_html"],budget:["budget"],announce_expiration:["online_days"],card:["uploaded_image","headline"],video:["video_url"],reward:["rewards.size","rewards.minimum_value","rewards.title","rewards.description","rewards.deliver_at","rewards.shipping_fees.value","rewards.shipping_fees.destination"],user_about:["user.uploaded_image","user.public_name","user.about_html"],user_settings:["bank_account.id","bank_account.user_id","bank_account.account","bank_account.agency","bank_account.owner_name","bank_account.owner_document","bank_account.created_at","bank_account.updated_at","bank_account.account_digit","bank_account.agency_digit","bank_account.bank_id","bank_account.account_type","user.name","user.cpf","user.birth_date","user.country_id","user.address_state","user.address_street","user.address_number","user.address_city","user.address_neighbourhood","bank_account","user.phone_number"]},Bn=function(t){var r=void 0;try{r=JSON.parse(Fn())}catch(n){r={}}return o.find(Ln[t],function(e){return r.hasOwnProperty(e)})?e("span.fa.fa-exclamation-circle.fa-fw.fa-lg.text-error"):o.isEmpty(r)?"":e("span.fa.fa-check-circle.fa-fw.fa-lg.text-success")},Yn=function(e,t,r){var n=void 0;try{n=JSON.parse(e)}catch(i){n={}}var a=function(e,t){var i=o.first(o.compact(o.map(t,function(e){return o.first(n[e])})));i&&(r(e,i),r.inlineError(e,!0))};o.each(t,function(e,t){a(e[0],e[1])})},Un=function(){var t=Tt.getCurrentProject();return!o.isEmpty(Fn())&&(e.request({method:"GET",url:"/projects/"+t.project_id+"/validate_publish",config:Tt.setCsrfToken}).then(function(){Vn("")})["catch"](function(t){t&&Vn(t.errors_json),e.redraw()}),!1)},Wn={errorsFor:Bn,validatePublish:Un,railsErrors:Fn,setRailsErrors:Vn,mapRailsErrors:Yn},$n=o.partial(Tt.i18nScope,"projects.dashboard_nav"),Hn=o.partial(Tt.i18nScope,"projects.dashboard_nav_links"),Qn={controller:function(t){var r=document.getElementsByTagName("body")[0],n=Tt.toggleProp(!0,!1),i=e.prop(!1),a=Tt.toggleProp(!0,!1),s=Tt.toggleProp("body-project open","body-project closed"),l=function(){i(!0),e.redraw(),e.request({method:"GET",url:"/projects/"+t.project().project_id+"/validate_publish",config:Tt.setCsrfToken}).then(function(){i(!1),window.location.href="/projects/"+t.project().project_id+"/publish",e.redraw()})["catch"](function(t){i(!1),Wn.setRailsErrors(t.errors_json),e.redraw()})},c=function(e){return o.isEmpty(e.large_image)?o.isEmpty(e.thumb_image)?"/assets/thumb-project.png":e.thumb_image:e.large_image};return t.project().is_published&&n.toggle(!1),t.hidePublish&&a.toggle(!1),{body:r,validating:i,validatePublish:l,editLinksToggle:n,showPublish:a,bodyToggleForNav:s,projectThumb:c}},view:function(r,n){var i=n.project(),a="/projects/"+i.project_id,s=a+"/edit",l=function(e){return"dashboard-nav-link-left "+(i.is_published?"indent":"")+" "+(Tt.hashMatch(e)?"selected":"")},c=e("span.fontsize-smallest.fontcolor-secondary"," (opcional)");return r.body.className=r.bodyToggleForNav(),e("#project-nav",[e(".project-nav-wrapper",[e("nav.w-section.dashboard-nav.side",[e('a#dashboard_preview_link.w-inline-block.dashboard-project-name[href="'+(i.is_published?"/"+i.permalink:s+"#preview")+'"]',{onclick:hr.routeToProject(i,n.ref)},[e('img.thumb-project-dashboard[src="'+(i?r.projectThumb(i):"/assets/thumb-project.png")+'"][width="114"]'),e(".fontcolor-negative.lineheight-tight.fontsize-small",i.name),e('img.u-margintop-10[src="/assets/catarse_bootstrap/badge-'+i.mode+'-h.png"]',{width:hr.isSubscription(i)?130:80})]),e("#info-links.u-marginbottom-20",["draft"===i.state&&hr.isSubscription(i)?e('a#dashboard_home_link[class="'+l("#start")+'"][href="'+s+'#start"]',[e("span.fa.fa-info.fa-lg.fa-fw"),t.t("draft_start_tab",$n())]):e('a#dashboard_home_link[class="dashboard-nav-link-left '+(Tt.locationActionMatch("insights")?"selected":"")+'"][href="'+a+'/insights"]',{config:e.route},[e("span.fa.fa-bar-chart.fa-lg.fa-fw"),t.t("start_tab",$n())]),i.is_published?[hr.isSubscription(i)?e('a#dashboard_subscriptions_link[class="dashboard-nav-link-left '+(Tt.locationActionMatch("subscriptions_report")?"selected":"")+'"][href="'+a+'/subscriptions_report"]',{config:e.route},[e("span.fa.fa.fa-users.fa-lg.fa-fw"),t.t("subscriptions_tab",$n())]):e('a#dashboard_reports_link[class="dashboard-nav-link-left '+(Tt.locationActionMatch("contributions_report")?"selected":"")+'"][href="'+a+'/contributions_report"]',{config:e.route},[e("span.fa.fa.fa-table.fa-lg.fa-fw"),t.t("reports_tab",$n())]),e('a#dashboard_posts_link[class="dashboard-nav-link-left '+(Tt.locationActionMatch("posts")?"selected":"")+'"][href="'+a+'/posts"]',[e("span.fa.fa-bullhorn.fa-fw.fa-lg"),t.t("posts_tab",$n()),i.posts_count>0?e("span.badge",i.posts_count):e("span.badge.badge-attention","Nenhuma")]),hr.isSubscription(i)?"":e('a#dashboard_surveys_link[class="dashboard-nav-link-left '+(Tt.locationActionMatch("surveys")?"selected":"")+'"][href="'+a+'/surveys"]',{config:e.route},[e("span.fa.fa.fa-check-square-o.fa-lg.fa-fw"),t.t("surveys_tab",$n())]),e('a#dashboard_fiscal_link[class="dashboard-nav-link-left '+(Tt.locationActionMatch("fiscal")?"selected":"")+'"][href="'+a+'/fiscal"]',{config:e.route},[e("span.fa.fa.fa-book.fa-lg.fa-fw"),t.t("fiscal_tab",$n())])]:""]),e(".edit-project-div",[i.is_published?e("button#toggle-edit-menu.dashboard-nav-link-left",{onclick:r.editLinksToggle.toggle},[e("span.fa.fa-pencil.fa-fw.fa-lg"),t.t("edit_project",$n())]):"",r.editLinksToggle()?e("#edit-menu-items",[e("#dashboard-links",[!i.is_published||i.is_admin_role?[e('a#basics_link[class="'+l("#basics")+'"][href="'+s+'#basics"]',Wn.errorsFor("basics"),t.t("basics_tab",Hn())),hr.isSubscription(i)?"":e('a#goal_link[class="'+l("#goal")+'"][href="'+s+'#goal"]',Wn.errorsFor("goal"),t.t("goal_tab",Hn()))]:"",hr.isSubscription(i)?e('a#goals_link[class="'+l("#goals")+'"][href="'+s+'#goals"]',Wn.errorsFor("goals"),t.t("goals_tab",Hn())):"",e('a#description_link[class="'+l("#description")+'"][href="'+s+'#description"]',Wn.errorsFor("description"),t.t("description_tab",Hn())),hr.isSubscription(i)?null:e('a#video_link[class="'+l("#video")+'"][href="'+s+'#video"]',[Wn.errorsFor("video"),"Vídeo",e("span.fontsize-smallest.fontcolor-secondary"," (opcional)")]),hr.isSubscription(i)?null:e('a#budget_link[class="'+l("#budget")+'"][href="'+s+'#budget"]',Wn.errorsFor("budget"),t.t("budget_tab",Hn())),e('a#card_link[class="'+l("#card")+'"][href="'+s+'#card"]',Wn.errorsFor("card"),t.t("card_tab_"+i.mode,Hn())),e('a#dashboard_reward_link[class="'+l("#reward")+'"][href="'+s+'#reward"]',[Wn.errorsFor("reward"),"Recompensas",c]),e('a#dashboard_user_about_link[class="'+l("#user_about")+'"][href="'+s+'#user_about"]',Wn.errorsFor("user_about"),t.t("about_you_tab",Hn())),i.is_published||"draft"===i.state||i.is_admin_role?[e('a#dashboard_user_settings_link[class="'+l("#user_settings")+'"][href="'+s+'#user_settings"]',Wn.errorsFor("user_settings"),t.t("account_tab",Hn()))]:"",i.is_published?"":[e('a#dashboard_preview_link[class="'+l("#preview")+'"][href="'+s+'#preview"]',[e("span.fa.fa-fw.fa-eye.fa-lg"),t.t("preview_tab",Hn())])]])]):"",!i.is_published&&r.showPublish()?[r.validating()?Tt.loader():e(".btn-send-draft-fixed","aon"===i.mode?["draft"===i.state?e("button.btn.btn-medium",{onclick:r.validatePublish},[t.t("publish",$n()),e.trust("&nbsp;&nbsp;"),e("span.fa.fa-chevron-right")]):""]:["draft"===i.state?e("button.btn.btn-medium",{onclick:r.validatePublish},[t.t("publish",$n()),e.trust("&nbsp;&nbsp;"),e("span.fa.fa-chevron-right")]):""])]:["flex"===i.mode&&i.is_published?[e(".btn-send-draft-fixed",o.isNull(i.expires_at)?e('a.w-button.btn.btn-medium.btn-secondary-dark[href="'+s+'#announce_expiration"]',t.t("announce_expiration",$n())):"")]:""]])])]),e('a.btn-dashboard href="javascript:void(0);"',{onclick:r.bodyToggleForNav.toggle},[e("span.fa.fa-bars.fa-lg")])])}},Gn={controller:function(e){var t=e.resource,o=function(){return!_.isNull(t.expires_at)&&r().add(8,"days")>=r(t.zone_expires_at)};return{project:t,remainingTextObj:Tt.translatedTime(t.remaining_time),elapsedTextObj:Tt.translatedTime(t.elapsed_time),isFinalLap:o}},view:function(t){var o=t.project,r=o.progress.toFixed(2),n=Tt.projectStateTextClass(o.state,o.has_cancelation_request),i=t.remainingTextObj,a=t.elapsedTextObj;return e(".project-details-card.card.u-radius.card-terciary.u-marginbottom-20",[e("div",[e(".fontsize-small.fontweight-semibold",[e("span.fontcolor-secondary","Status:")," ",e("span",{"class":n.cssClass},t.isFinalLap()&&o.open_for_contributions?"RETA FINAL":n.text)," "]),o.is_published?[e(".meter.u-margintop-20.u-marginbottom-10",[e(".meter-fill",{style:{width:(r>100?100:r)+"%"}})]),e(".w-row",[e(".w-col.w-col-3.w-col-small-3.w-col-tiny-6",[e(".fontcolor-secondary.lineheight-tighter.fontsize-small","financiado"),e(".fontweight-semibold.fontsize-large.lineheight-tight",r+"%")]),e(".w-col.w-col-3.w-col-small-3.w-col-tiny-6",[e(".fontcolor-secondary.lineheight-tighter.fontsize-small","levantados"),e(".fontweight-semibold.fontsize-large.lineheight-tight",["R$ "+Tt.formatNumber(o.pledged,2)])]),e(".w-col.w-col-3.w-col-small-3.w-col-tiny-6",[e(".fontcolor-secondary.lineheight-tighter.fontsize-small","apoios"),e(".fontweight-semibold.fontsize-large.lineheight-tight",o.total_contributions)]),e(".w-col.w-col-3.w-col-small-3.w-col-tiny-6",[_.isNull(o.expires_at)?[e(".fontcolor-secondary.lineheight-tighter.fontsize-small","iniciado há"),e(".fontweight-semibold.fontsize-large.lineheight-tight",a.total+" "+a.unit)]:[e(".fontcolor-secondary.lineheight-tighter.fontsize-small","restam"),e(".fontweight-semibold.fontsize-large.lineheight-tight",i.total+" "+i.unit)]])])]:""])]);
}},Xn={view:function(t,o){return e(".modal-dialog-content.u-text-center",[e(".fa.fa-check-circle.fa-5x.text-success.u-marginbottom-40"),e("p.fontsize-larger.lineheight-tight","Sua campanha está no ar!!! Parabéns por esse primeiro grande passo. Boa sorte nessa jornada ;)")])}},Jn={view:function(t,r){var n=r.project(),i=r.visitorsTotal(),a=Tt.projectStateTextClass(n.state,n.has_cancelation_request),s=Tt.translatedTime(n.remaining_time),l=Tt.translatedTime(n.elapsed_time);return e("",[e(".w-row.u-marginbottom-60.u-margintop-30.u-text-center",[e(".w-col.w-col-2"),e(".w-col.w-col-4",[e(".fontsize-large",[e("span.fontcolor-secondary","Status: "),e("span",{"class":a.cssClass},a.text)])]),e(".w-col.w-col-4",[e(".fontsize-large.fontweight-semibold",[e("span.fa.fa-clock-o"),o.isNull(n.expires_at)?" Iniciado há "+l.total+" "+l.unit:" "+s.total+" "+s.unit+" "+(s.total>1?"restantes":"restante")])]),e(".w-col.w-col-2")]),e(".card.medium.u-marginbottom-60.u-radius.u-text-center",{style:{"white-space":"nowrap"}},[e(".w-row",[e(".w-col.w-col-6",[e(".w-row.u-marginbottom-30.u-margintop-30",[e(".w-col.w-col-4.w-col-small-4.w-col-tiny-4",[e(".fontsize-larger.fontweight-semibold",""+i),"Visitantes"]),e(".w-col.w-col-4.w-col-small-4.w-col-tiny-4",[e(".bg-triangle-funnel.fontcolor-secondary.fontsize-base",Tt.formatNumber(n.total_contributors/i*100||0,2)+"%")]),e(".w-col.w-col-4.w-col-small-4.w-col-tiny-4",[e(".fontsize-larger.fontweight-semibold",""+n.total_contributors),"Apoiadores"])])]),e(".w-col.w-col-6",[e(".w-row.u-marginbottom-30.u-margintop-30",[e(".w-col.w-col-9.w-col-small-6.w-col-tiny-6",[e(".fontsize-larger.fontweight-semibold","R$ "+Tt.formatNumber(n.pledged,2)),"Arrecadados"]),e(".w-col.w-col-3.w-col-small-6.w-col-tiny-6",[e(".fontsize-larger.fontweight-semibold",Tt.formatNumber(n.progress,2)+"%"),"da Meta"])])])]),e(".fontcolor-secondary.fontsize-smallest.u-margintop-20",["Os dados podem levar até 24 horas para serem atualizados.",e("a.alt-link",{href:"https://suporte.catarse.me/hc/pt-br/articles/115002214463-projeto-ONLINE#visitante",target:"_blank"}," Saiba mais"),"."])])])}},Kn={controller:function(t){var o=e.prop(!1),r=e.prop(!1),n=e.prop(!0),i=e.prop(""),a=e.prop(""),s=function(){if("deletar-rascunho"===a()){var s=S.deleteProject.postOptions({_project_id:t.project.project_id});o=w.loaderWithToken(s),o.load().then(function(){r(!0)})["catch"](function(t){n(!1),i("Erro ao deletar projeto. Por favor tente novamente."),e.redraw()})}else n(!1),i('Por favor, corrija os seguintes erros: para deletar definitivamente o projeto você deverá preencher "deletar-rascunho".');return!1};return{deleteProject:s,confirmed:n,deleteSuccess:r,error:i,check:a}},view:function(t,o){return e("div",t.deleteSuccess()?"":e(".modal-dialog-header",e(".fontsize-large.u-text-center",["Confirmar ",e("span.fa.fa-trash","")])),e("form.modal-dialog-content",{onsubmit:t.deleteProject},t.deleteSuccess()?[e(".fontsize-base.u-margintop-30","Projeto deletado com sucesso. Clique no link abaixo para voltar a página inicial."),e("a.btn.btn-inactive.btn-large.u-margintop-30[href='/pt/users/"+Tt.getUser().user_id+"/edit#projects']","Voltar")]:[e(".fontsize-base.u-marginbottom-60",["O projeto será deletado permanentemente e todos os dados que você preencheu na edição do rascunho não poderão ser recuperados."]),e(".fontsize-base.u-marginbottom-10",["Confirme escrevendo ","no campo abaixo ",e("span.fontweight-semibold.text-error","deletar-rascunho")]),e(".w-form",e(".text-error.u-marginbottom-10",t.error()),[e("div",e("input.positive.text-field.u-marginbottom-40.w-input[maxlength='256'][type='text']",{"class":!t.confirmed()&&"error",placeholder:"deletar-rascunho",onchange:e.withAttr("value",t.check)}))]),e("div",e(".w-row",[e(".w-col.w-col-3"),e(".u-text-center.w-col.w-col-6",[e("input.btn.btn-inactive.btn-large.u-marginbottom-20[type='submit'][value='Deletar para sempre']"),e("a.fontsize-small.link-hidden-light[href='#']",{onclick:o.displayDeleteModal.toggle},"Cancelar")]),e(".w-col.w-col-3")]))]))}},Zn={controller:function(e){var t=Tt.toggleProp(!1,!0);return{displayDeleteModal:t}},view:function(t,o){return e("div",[t.displayDeleteModal()?e.component(zn,{displayModal:t.displayDeleteModal,hideCloseButton:!0,content:[Kn,{displayDeleteModal:t.displayDeleteModal,project:o.project}]}):"",e(".before-footer",e(".w-container",e("a.btn.btn-inline.btn-no-border.btn-small.btn-terciary.u-marginbottom-20.u-right.w-button[href='javascript:void(0);']",{onclick:t.displayDeleteModal.toggle,style:{transition:"all 0.5s ease 0s"}},[e.trust("&nbsp;"),"Deletar projeto ",e("span.fa.fa-trash","")])))])}},ei={controller:function(t){var o=e.prop(!1),r=e.prop(!1),n=e.prop(""),i=e.prop(""),a=function(){return"cancelar-projeto"===n()?r(!0):o(!0),!1};return{showNextModal:a,commentHtml:i,showRedactor:r,checkError:o,check:n}},view:function(t,o){return e("form.cancel-project-modal.modal-dialog-content[accept-charset='UTF-8'][action='/pt/projects/"+o.project.id+"'][id='edit_project_"+o.project.id+"'][method='post'][novalidate='novalidate']",t.showRedactor()?[e("input[name='utf8'][type='hidden'][value='✓']"),e("input[name='_method'][type='hidden'][value='patch']"),e("input[name='authenticity_token'][type='hidden'][value='"+Tt.authenticityToken()+"']"),e("input[id='anchor'][name='anchor'][type='hidden'][value='posts']"),e("input[id='cancel_project'][name='cancel_project'][type='hidden'][value='true']"),e(".fontsize-smaller.u-marginbottom-20",'Conte porque você está cancelando sua campanha. Essa mensagem será enviada por email para os seus apoiadores e estará pública na aba "Novidades" do seu projeto no Catarse.'),e(".w-form",[e("label.string.required.field-label.field-label.fontweight-semibold[for='project_posts_attributes_0_title']","Título"),e("input.string.required.w-input.text-field.w-input.text-field.positive[id='project_posts_attributes_0_title'][name='project[posts_attributes][0][title]'][type='text']"),e("label.string.optional.field-label.field-label.fontweight-semibold[for='project_posts_attributes_0_comment']","Texto"),Tt.redactor("project[posts_attributes][0][comment_html]",t.commentHtml)]),e("div",e(".w-row",[e(".w-col.w-col-3"),e(".u-text-center.w-col.w-col-6",[e("input.btn.btn-inactive.btn-large.u-marginbottom-20[name='commit'][type='submit'][value='Cancelar campanha']"),e(".fontsize-small.link-hidden-light[id='modal-close']",{onclick:o.displayModal.toggle},"Cancelar")]),e(".w-col.w-col-3")]))]:[e(".fontsize-small.u-marginbottom-20",["Após o cancelamento, sua campanha será expirada e os seus apoiadores serão reembolsados dentro das próximas 24h horas.",e("span.fontweight-semibold","Essa ação não poderá ser desfeita!"),e("br"),e("span.fontweight-semibold")]),e(".fontsize-small.u-marginbottom-10",["Se você tem certeza que deseja cancelar seu projeto, confirme escrevendo ",e("span.fontweight-semibold.text-error","cancelar-projeto "),"no campo abaixo. Em seguida lhe pediremos para escrever uma mensagem aos apoiadores e seu projeto será então cancelado.",e("span.fontweight-semibold.text-error")]),e(".w-form",[e("input.positive.text-field.u-marginbottom-40.w-input[maxlength='256'][type='text']",{"class":!!t.checkError()&&"error",placeholder:"cancelar-projeto",onchange:e.withAttr("value",t.check)})]),e("div",e(".w-row",[e(".w-col.w-col-3"),e(".u-text-center.w-col.w-col-6",[e("button.btn.btn-inactive.btn-large.u-marginbottom-20",{onclick:t.showNextModal},"Próximo passo >"),e("a.fontsize-small.link-hidden-light[href='#']",{onclick:o.displayModal.toggle},"Cancelar")]),e(".w-col.w-col-3")]))])}},ti={controller:function(e){var t=Tt.toggleProp(!1,!0);return{displayCancelModal:t}},view:function(t,o){return e("div",[t.displayCancelModal()?e.component(zn,{displayModal:t.displayCancelModal,content:[ei,{displayModal:t.displayCancelModal,project:o.project}]}):"",e(".w-row.before-footer",e(".w-col.w-col-12",e(".w-container",e("button.btn.btn-cancel.btn-inline.btn-no-border.btn-small.btn-terciary.u-marginbottom-20.u-right.w-button",{onclick:t.displayCancelModal.toggle,style:{transition:"all 0.5s ease 0s"}},[e("span.fa.fa-times-circle",""),e.trust("&nbsp;"),"Cancelar projeto"]))))])}},oi={controller:function(e){var t=o.first(e.collection()),r=o.isUndefined(t)?[]:t.source,n=function(){return[{fillColor:"rgba(126,194,69,0.2)",strokeColor:"rgba(126,194,69,1)",pointColor:"rgba(126,194,69,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:o.map(r,function(t){return t[e.dataKey]})}]},i=function(t,i){if(!i){var a=t.getContext("2d");new c(a).Line({labels:e.xAxis?o.map(r,function(t){return e.xAxis(t)}):[],datasets:n()})}};return{renderChart:i,source:r}},view:function(t,r){return e(".card.u-radius.medium.u-marginbottom-30",[e(".fontweight-semibold.u-marginbottom-10.fontsize-large.u-text-center",r.label),e(".w-row",[e(".w-col.w-col-12.overflow-auto",[o.isEmpty(t.source)?e(".w-col.w-col-8.w-col-push-2",e("p.fontsize-base",r.emptyState)):e('canvas[id="chart"][width="860"][height="300"]',{config:t.renderChart})])])])}},ri={controller:function(t){var r=e.prop(t.table),n=e.prop(-1),i=function(e,t){var r=n(),i=o.isArray(e[r])&&e[r].length>1?e[r][0]:e[r],a=o.isArray(t[r])&&t[r].length>1?t[r][0]:t[r];return i<a?-1:a<i?1:0},a=function(e){var t=o.first(r()),a=void 0;n()===e?a=o.rest(r()).reverse():(n(e),a=o.rest(r()).sort(i)),r(o.union([t],a))};return a(Math.abs(t.defaultSortIndex)||0),t.defaultSortIndex<0&&a(Math.abs(t.defaultSortIndex)||0),{table:r,sortTable:a}},view:function(t,r){var n=o.first(t.table()),i=o.rest(t.table());return e(".table-outer.u-marginbottom-60",[e(".w-row.table-row.fontweight-semibold.fontsize-smaller.header",o.map(n,function(o,r){var n=function(){return t.sortTable(r)};return e(".w-col.w-col-4.w-col-small-4.w-col-tiny-4.table-col",[e('a.link-hidden[href="javascript:void(0);"]',{onclick:n},[o+" ",e("span.fa.fa-sort")])])})),e(".table-inner.fontsize-small",o.map(i,function(t){return e(".w-row.table-row",o.map(t,function(t){return t=o.isArray(t)&&t.length>1?t[1]:t,e(".w-col.w-col-4.w-col-small-4.w-col-tiny-4.table-col",[e("div",t)])}))}))])}},ni={view:function(t,o){var r=o.resource;return e("#project-reminder-count.card.u-radius.u-text-center.medium.u-marginbottom-80",[e(".fontsize-large.fontweight-semibold","Total de pessoas que clicaram no botão Lembrar-me"),e(".fontsize-smaller.u-marginbottom-30","Um lembrete por email é enviado 48 horas antes do término da sua campanha"),e(".fontsize-jumbo",r.reminder_count)])}},ii=(o.partial(Tt.i18nScope,"projects.successful_onboard.confirm_account"),o.partial(Tt.i18nScope,"projects.successful_onboard.confirm_account"),{view:function(t,o){var r=o.projectTransfer;return e("div",[e(".modal-dialog-header",[e(".fontsize-large.u-text-center","Extrato do projeto")]),e(".modal-dialog-content",[e("p.fontsize-small.u-marginbottom-40",["Confira o extrato do seu projeto, já incluindo as taxas e retenções. Se você tiver dúvidas sobre como esse cálculo é feito, ",e('a.alt-link[href="http://suporte.catarse.me/hc/pt-br/articles/202037493-FINANCIADO-Como-ser%C3%A1-feito-o-repasse-do-dinheiro-"][target="__blank"]',"acesse aqui"),"."]),e("div",[e(".w-row.fontsize-small.u-marginbottom-10",[e(".w-col.w-col-4",[e(".text-success","+ R$ "+Tt.formatNumber(r.pledged,2))]),e(".w-col.w-col-8",[e("div","Arrecadação total ("+r.total_contributions+" apoios)")])]),r.irrf_tax>0?e(".w-row.fontsize-small.u-marginbottom-10",[e(".w-col.w-col-4",[e(".text-success","+ R$ "+Tt.formatNumber(r.irrf_tax,2))]),e(".w-col.w-col-8",[e("div","Retenção IRF (Imposto de Renda na Fonte)")])]):"",e(".w-row.fontsize-small.u-marginbottom-10",[e(".w-col.w-col-4",[e(".text-error","- R$ "+Tt.formatNumber(r.catarse_fee,2))]),e(".w-col.w-col-8",[e("div","Taxa do Catarse e meio de pagamento ("+Tt.formatNumber(100*r.service_fee,2)+"%) ")])]),e(".divider.u-marginbottom-10"),e(".w-row.fontsize-base.fontweight-semibold",[e(".w-col.w-col-4",[e("div","R$ "+Tt.formatNumber(r.total_amount,2))]),e(".w-col.w-col-8",[e("div","Total a ser transferido")])])])])])}}),ai=(o.partial(Tt.i18nScope,"projects.successful_onboard"),_.partial(Tt.i18nScope,"projects.successful_onboard")),si={controller:function(t){var o=w.filtersVM({project_id:"eq"}),r=e.prop([]),n=e.prop([]),i=Tt.toggleProp(!1,!0),a=w.loaderWithToken,s=function(t,o,r){if(!o){var n={tax_link:{action:"onclick",actionSource:function(){i.toggle(),e.redraw()}}};_.map(t.children,function(e){var t=n[e.getAttribute("id")];t&&(e[t.action]=t.actionSource)})}};o.project_id(t.project().project_id);var l=a(S.projectAccount.getRowOptions(o.parameters()));l.load().then(function(e){r(e)});var c=a(S.projectTransfer.getRowOptions(o.parameters()));return c.load().then(n),{projectAccounts:r,projectTransfers:n,lProjectAccount:l,lProjectTransfer:c,showTaxModal:i,listenToReplace:s}},view:function(o,r){var n=(_.first(o.projectAccounts()),_.first(o.projectTransfers())),i=o.lProjectAccount,a=o.lProjectTransfer;return e(".w-section.section",[o.showTaxModal()?e.component(zn,{displayModal:o.showTaxModal,content:[ii,{projectTransfer:n}]}):"",i()||a()?Tt.loader():e(".w-container",[e(".w-row.u-marginbottom-40",[e(".w-col.w-col-6.w-col-push-3",[e(".u-text-center",[e("img.u-marginbottom-20",{src:t.t("finished.icon",ai()),width:94}),e(".fontsize-large.fontweight-semibold.u-marginbottom-20",t.t("finished.title",ai())),e(".fontsize-base.u-marginbottom-30",{config:o.listenToReplace},e.trust(t.t("finished.text",ai({link_news:"/projects/"+r.project().id+"/posts",link_surveys:"/projects/"+r.project().id+"/surveys"}))))])])])])])}},li={controller:function(e){var t=function(){FB&&FB.ui({method:e.messenger?"send":"share",link:e.url,href:e.url})};return{share:t}},view:function(t,o){var r=function(){return o.mobile?"w-hidden-main w-hidden-medium u-marginbottom-20 btn btn-medium btn-fb "+o["class"]:o.big?"btn btn-fb btn-large u-marginbottom-20 w-button "+o["class"]:o.medium?"btn "+(o.messenger?"btn-messenger":"btn-fb")+" btn-medium u-marginbottom-20 w-button "+o["class"]:"btn btn-inline btn-medium btn-terciary u-marginright-20 "+o["class"]};return e("button",{"class":r(),onclick:t.share},[e("span.fa",{"class":o.messenger?"fa-comment":"fa-facebook"}),o.messenger?" Messenger":" Facebook"])}},ci={controller:function(t){var o=e.prop(!1),r=function(r,n){var i=void 0;if(!n){var a=r.parentNode.previousSibling.firstChild;a.innerText=t.value,r.onclick=function(){return d(a),i=document.execCommand("copy"),i?(o(!0),e.redraw()):a.blur(),!1}}};return{setClickHandler:r,showSuccess:o}},view:function(t,o){return e(".clipboard.w-row",[e(".w-col.w-col-10.w-col-small-10.w-col-tiny-10",e("textarea.copy-textarea.text-field.w-input",{style:"margin-bottom:0;"},o.value)),e(".w-col.w-col-2.w-col-small-2.w-col-tiny-2",e("button.btn.btn-medium.btn-no-border.btn-terciary.fa.fa-clipboard.w-button",{config:t.setClickHandler})),t.showSuccess()?e.component(Cn,{message:"Link copiado"}):""])}},di={view:function(t,o){var r=o.project;return e(".card.card-terciary.u-marginbottom-20.u-radius.w-clearfix",[e(".fontsize-base.fontweight-semibold.u-marginbottom-30.u-text-center","Convide seus amigos para apoiar sua campanha"),e(".w-row",[e(".w-sub-col.u-marginbottom-20.w-col.w-col-4",[e.component(li,{url:Tt.projectFullPermalink(r)+"?ref=facebook&utm_source=facebook.com&utm_medium=social&utm_campaign=project_share_insights",medium:!0})]),e(".w-sub-col.u-marginbottom-20.w-col.w-col-4",[e.component(li,{messenger:!0,url:Tt.projectFullPermalink(r)+"?ref=facebook&utm_source=facebook.com&utm_medium=messenger&utm_campaign=project_share_insights",medium:!0})]),e(".w-col.w-col-4",[e(".w-form",[e("form[data-name='Email Form 2'][id='email-form-2'][name='email-form-2']",[e.component(ci,{value:Tt.projectFullPermalink(r)+"?ref=project_link"})])])])])])}},ui=o.partial(Tt.i18nScope,"projects.insights"),pi={controller:function(r){var n=r.filtersVM,i=Tt.toggleProp(!1,!0),a=e.prop([]),s=e.prop(0),l=e.prop([]),c=w.loaderWithToken;"true"===Tt.paramByName("online_success")&&i.toggle();var d=function(e){o.isEmpty(e)||(l(e),s(o.first(e).total))},u=c(S.projectVisitorsPerDay.getRowOptions(n.parameters()));u.load().then(d);var p=c(S.projectContributionsPerDay.getRowOptions(n.parameters()));p.load().then(a);var m=[["Estado","Apoios","R$ apoiados (% do total)"]],f=function(t){return o.isEmpty(t)?[]:o.map(o.first(t).source,function(t){var o=[];return o.push(t.state_acronym||"Outro/other"),o.push(t.total_contributions),o.push([t.total_contributed,[e('input[type="hidden"][value="'+t.total_contributed+'"'),"R$ ",Tt.formatNumber(t.total_contributed,2,3),e("span.w-hidden-small.w-hidden-tiny"," ("+t.total_on_percentage.toFixed(2)+"%)")]]),m.push(o)})},b=c(S.projectContributionsPerLocation.getRowOptions(n.parameters()));b.load().then(f);var g=[[t.t("ref_table.header.origin",ui()),t.t("ref_table.header.contributions",ui()),t.t("ref_table.header.amount",ui())]],h=function(r){return o.isEmpty(r)?[]:o.map(o.first(r).source,function(o){var r=/(ctrse_[\D]*)/,n=r.exec(o.referral_link),i=[];return n&&(o.referral_link="_"===n[0].substr(-1)?n[0].substr(0,n[0].length-1):n[0]),i.push(o.referral_link?t.t("referral."+o.referral_link,ui({defaultValue:o.referral_link})):t.t("referral.others",ui())),i.push(o.total),i.push([o.total_amount,[e('input[type="hidden"][value="'+o.total_contributed+'"'),"R$ ",Tt.formatNumber(o.total_amount,2,3),e("span.w-hidden-small.w-hidden-tiny"," ("+o.total_on_percentage.toFixed(2)+"%)")]]),g.push(i)})},_=c(S.projectContributionsPerRef.getRowOptions(n.parameters()));return _.load().then(h),{lContributionsPerRef:_,lContributionsPerLocation:b,lContributionsPerDay:p,lVisitorsPerDay:u,displayModal:i,filtersVM:n,contributionsPerDay:a,contributionsPerLocationTable:m,contributionsPerRefTable:g,visitorsPerDay:l,visitorsTotal:s}},view:function(r,n){var i=n.project,a=function(o){return e.component(On,{el:o,text:["Informa de onde vieram os apoios de seu projeto. Saiba como usar essa tabela e planejar melhor suas ações de comunicação ",e('a[href="'+t.t("ref_table.help_url",ui())+"\"][target='_blank']","aqui.")],width:380})};return n.l()||(i.user.name=i.user.name||"Realizador"),e(".project-insights",n.l()?Tt.loader():[e(".w-section.section-product."+i.mode),i.is_owner_or_admin?e.component(Qn,{project:e.prop(i)}):"",r.displayModal()?e.component(zn,{displayModal:r.displayModal,content:[Xn]}):"",e(".w-container","successful"!==i.state||i.has_cancelation_request?[e(".w-row.u-marginbottom-40",[e(".w-col.w-col-8.w-col-push-2",[e(".fontweight-semibold.fontsize-larger.lineheight-looser.u-marginbottom-10.u-text-center.dashboard-header",t.t("campaign_title",ui())),"online"!==i.state||i.has_cancelation_request?"":e.component(di,{project:i}),"draft"!==i.state||i.has_cancelation_request?"":e.component(Gn,{resource:i}),e("p."+i.state+"-project-text.u-text-center.fontsize-small.lineheight-loose",i.has_cancelation_request?e.trust(t.t("has_cancelation_request_explanation",ui())):["flex"===i.mode&&o.isNull(i.expires_at)&&"draft"!==i.state?e("span",[e.trust(t.t("finish_explanation",ui())),e('a.alt-link[href="http://suporte.catarse.me/hc/pt-br/articles/213783503-tudo-sobre-Prazo-da-campanha"][target="_blank"]',t.t("know_more",ui()))]):e.trust(t.t("campaign."+i.mode+"."+i.state,ui({username:i.user.name,expires_at:Tt.momentify(i.zone_expires_at),sent_to_analysis_at:Tt.momentify(i.sent_to_analysis_at)})))])])])]:e.component(si,{project:e.prop(i)})),"draft"===i.state?e.component(Zn,{project:i}):"",i.is_published?[e(".divider"),e(".w-section.section-one-column.section.bg-gray.before-footer",[e(".w-container",[e.component(Jn,{project:e.prop(i),visitorsTotal:r.visitorsTotal}),e(".w-row",[e(".w-col.w-col-12.u-text-center",{style:{"min-height":"300px"}},[e(".fontweight-semibold.u-marginbottom-10.fontsize-large.u-text-center",[t.t("visitors_per_day_label",ui()),Tt.newFeatureBadge()]),r.lVisitorsPerDay()?Tt.loader():e.component(oi,{collection:r.visitorsPerDay,dataKey:"visitors",xAxis:function(e){return Tt.momentify(e.day)},emptyState:t.t("visitors_per_day_empty",ui())})])]),e(".w-row",[e(".w-col.w-col-12.u-text-center",{style:{"min-height":"300px"}},[r.lContributionsPerDay()?Tt.loader():e.component(oi,{collection:r.contributionsPerDay,label:t.t("amount_per_day_label",ui()),dataKey:"total_amount",xAxis:function(e){return Tt.momentify(e.paid_at)},emptyState:t.t("amount_per_day_empty",ui())})])]),e(".w-row",[e(".w-col.w-col-12.u-text-center",{style:{"min-height":"300px"}},[r.lContributionsPerDay()?Tt.loader():e.component(oi,{collection:r.contributionsPerDay,label:t.t("contributions_per_day_label",ui()),dataKey:"total",xAxis:function(e){return Tt.momentify(e.paid_at)},emptyState:t.t("contributions_per_day_empty",ui())})])]),e(".w-row",[e(".w-col.w-col-12.u-text-center",[e(".project-contributions-per-ref",[e(".fontweight-semibold.u-marginbottom-10.fontsize-large.u-text-center",[t.t("ref_origin_title",ui())," ",a("span.fontsize-smallest.tooltip-wrapper.fa.fa-question-circle.fontcolor-secondary")]),r.lContributionsPerRef()?Tt.loader():o.isEmpty(o.rest(r.contributionsPerRefTable))?e(".card.u-radius.medium.u-marginbottom-60",e(".w-row.u-text-center.u-margintop-40.u-marginbottom-40",e(".w-col.w-col-8.w-col-push-2",e("p.fontsize-base",t.t("contributions_per_ref_empty",ui()))))):e.component(ri,{table:r.contributionsPerRefTable,defaultSortIndex:-2})])])]),e(".w-row",[e(".w-col.w-col-12.u-text-center",[e(".project-contributions-per-ref",[e(".fontweight-semibold.u-marginbottom-10.fontsize-large.u-text-center",t.t("location_origin_title",ui())),r.lContributionsPerLocation()?Tt.loader():o.isEmpty(o.rest(r.contributionsPerLocationTable))?e(".card.u-radius.medium.u-marginbottom-60",e(".w-row.u-text-center.u-margintop-40.u-marginbottom-40",e(".w-col.w-col-8.w-col-push-2",e("p.fontsize-base",t.t("contributions_per_location_empty",ui()))))):e.component(ri,{table:r.contributionsPerLocationTable,defaultSortIndex:-2})])])]),e(".w-row",[e(".w-col.w-col-12.u-text-center",[e.component(ni,{resource:i})])])])]),i.can_cancel?e.component(ti,{project:i}):""]:""])}},mi={controller:function(t){var r=t.goalDetails().length>0?o.findIndex(t.goalDetails(),function(e){return e.value>t.amount}):0,n=e.prop(r),i=function(){n()<t.goalDetails().length-1&&n(n()+1)},a=function(){n()>0&&(n(n()-1),e.redraw())};return n()===-1&&n(t.goalDetails().length-1),{currentGoalIndex:n,nextGoal:i,previousGoal:a}},view:function(t,o){var r=o.goalDetails().length>0?o.goalDetails():[{title:"N/A",value:"",description:""}],n=t.currentGoalIndex,i=o.amount/r[n()].value*100;return e(".card.card-terciary.flex-column.u-marginbottom-10.u-radius.w-clearfix",[e(".u-right",[e("button.btn-inline.btn-terciary.fa.fa-angle-left.u-radius.w-inline-block",{onclick:t.previousGoal,"class":0===n()?"btn-desactivated":""}),e("button.btn-inline.btn-terciary.fa.fa-angle-right.u-radius.w-inline-block",{onclick:t.nextGoal,"class":n()===r.length-1?"btn-desactivated":""})]),e(".fontsize-small.u-marginbottom-10","Metas"),e(".fontsize-largest.fontweight-semibold",Math.floor(i)+"%"),e(".meter.u-marginbottom-10",e(".meter-fill",{style:{width:(i>100?100:i)+"%"}})),e(".fontcolor-secondary.fontsize-smallest.fontweight-semibold.lineheight-tighter",r[n()].title),e(".fontcolor-secondary.fontsize-smallest","R$"+o.amount+" de R$"+r[n()].value+" por mês")])}},fi=(o.partial(Tt.i18nScope,"projects.insights"),{view:function(t,o){var r=o.newCount,n=o.oldCount,i=Math.abs(r-n),a=!o.inverted&&r>n?"success":"error";return e(".flex-column.card.u-radius.u-marginbottom-10",[e("div",o.label),e(".fontsize-smallest.fontcolor-secondary.lineheight-tighter","Últimos 7 dias"),e(".fontsize-largest.fontweight-semibold",o.info),e(".fontsize-small.fontweight-semibold.lineheight-tighter.text-"+a,[0!==i?e("span.fa.fa-arrow-"+(r>n?"up":"down")," "):"",e(0===i?"span.fontcolor-secondary":"span",i)]),e(".fontsize-mini.fontweight-semibold.fontcolor-secondary.lineheight-tighter","Comparado ao período anterior")])}}),wi=function(e,t,o,r,n){var i=g.filtersVM({project_id:"eq",created_at:"between",from_status:"in",to_status:"in"});i.created_at.gte(r),i.created_at.lte(n),i.project_id(e),i.from_status(o),i.to_status(t);var a=g.loaderWithToken(S.subscriptionTransition.getPageOptions(i.parameters()));return a.load()},bi=function(e,t,o){var r=g.filtersVM({project_id:"eq",created_at:"between",status:"in"});r.created_at.gte(t),r.created_at.lte(o),r.project_id(e),r.status("active");var n=g.loaderWithToken(S.userSubscription.getPageOptions(r.parameters()));return n.load()},gi=function(e,t,o){var r=g.filtersVM({user_id:"eq",project_id:"eq",created_at:"between",status:"in"});r.user_id(e),r.project_id(t),r.status(o);var n=g.loaderWithToken(S.userSubscription.getPageOptions(r.parameters()));return n.load()},hi=function(e){var t=g.filtersVM({id:"eq"});t.id(e);var o=g.loaderWithToken(S.userSubscription.getRowOptions(t.parameters()));return o.load()},_i={getNewSubscriptions:bi,getSubscriptionTransitions:wi,getUserProjectSubscriptions:gi,getSubscription:hi},vi=(o.partial(Tt.i18nScope,"projects.insights"),{controller:function(t){var o=t.filtersVM,n=e.prop([]),i=e.prop([]),a=e.prop([]),s=e.prop([]);_i.getNewSubscriptions(t.project.common_id,r().utc().subtract(1,"weeks").format(),r().utc().format()).then(n),_i.getNewSubscriptions(t.project.common_id,r().utc().subtract(2,"weeks").format(),r().utc().subtract(1,"weeks").format()).then(i),_i.getSubscriptionTransitions(t.project.common_id,["inactive","canceled"],"active",r().utc().subtract(1,"weeks").format(),r().utc().format()).then(a),_i.getSubscriptionTransitions(t.project.common_id,["inactive","canceled"],"active",r().utc().subtract(2,"weeks").format(),r().utc().subtract(1,"weeks").format()).then(s),Jo.fetchGoals(o.project_id());var l=mo.getUserBalance(t.project.user_id);return{weekSubscriptions:n,lastWeekSubscriptions:i,weekTransitions:a,lastWeekTransitions:s,projectGoalsVM:Jo,balanceLoader:l}},view:function(t,n){var i=function(e){return o.reduce(e,function(e,t){return e+t.amount/100},0)},a=i(t.weekSubscriptions()),s=i(t.lastWeekSubscriptions()),l=i(t.weekTransitions()),c=i(t.lastWeekTransitions()),d=n.project,u=n.subscribersDetails,p=t.balanceLoader()&&!o.isNull(o.first(t.balanceLoader()))?o.first(t.balanceLoader()):null,m=u.total_subscriptions>0?u.amount_paid_for_valid_period/u.total_subscriptions:null;return e(".project-insights",n.l()?Tt.loader():[e(".w-section.section-product."+d.mode),d.is_owner_or_admin?e.component(Qn,{project:e.prop(d)}):"",e(".dashboard-header.section-one-column",[e(".u-marginbottom-30.u-text-center",[e(".fontsize-larger.fontweight-semibold","Olá, "+(d.user.public_name||d.user.name)+"!"),e(".fontsize-smaller","Este é o retrato de sua campanha hoje, "+r().format("DD [de] MMMM [de] YYYY"))]),e(".w-container",[e(".flex-row.u-marginbottom-40.u-text-center-small-only",[u&&!o.isEmpty(t.projectGoalsVM.goals())?e.component(mi,{goalDetails:t.projectGoalsVM.goals,amount:u.amount_paid_for_valid_period}):"",e(".card.card-terciary.flex-column.u-marginbottom-10.u-radius",[e(".fontsize-small.u-marginbottom-10","Assinantes ativos"),e(".fontsize-largest.fontweight-semibold",u.total_subscriptions)]),e(".card.card-terciary.flex-column.u-marginbottom-10.u-radius",[e(".fontsize-small.u-marginbottom-10","Receita Mensal"),e(".fontsize-largest.fontweight-semibold","R$"+Tt.formatNumber(u.amount_paid_for_valid_period,2,3))]),e(".card.flex-column.u-marginbottom-10.u-radius",[e(".fontsize-small.u-marginbottom-10",["Saldo",e.trust("&nbsp;")," ",e("a.btn-inline.btn-terciary.fontsize-smallest.u-radius[href='/users/"+d.user_id+"/edit#balance']","Sacar")]),e(".fontsize-largest.fontweight-semibold.text-success.u-marginbottom-10",p&&p.amount?"R$"+Tt.formatNumber(p.amount,2,3):""),e(".fontsize-mini.fontcolor-secondary.lineheight-tighter","O saldo demora até 20 mins após o pagamento para ser atualizado.")])]),"online"!==d.state||d.has_cancelation_request?"":e(".w-container",e.component(di,{project:d})),e(".u-marginbottom-60",[e(".fontsize-large.fontweight-semibold.u-text-center.u-marginbottom-30[id='origem']","Assinaturas"),e(".flex-row.u-marginbottom-40.u-text-center-small-only",[e(fi,{label:"Novos Assinantes",info:t.weekSubscriptions().length,newCount:t.weekSubscriptions().length,oldCount:t.lastWeekSubscriptions().length}),e(fi,{label:"Assinantes perdidos",inverted:!0,info:t.weekTransitions().length,newCount:t.weekTransitions().length,oldCount:t.lastWeekTransitions().length})])]),e(".u-marginbottom-60",[e(".fontsize-large.fontweight-semibold.u-text-center.u-marginbottom-30","Receita"),e(".flex-row.u-marginbottom-40.u-text-center-small-only",[e(".flex-column.card.u-radius.u-marginbottom-10",[e("div","Receita média por assinante"),e(".fontsize-smallest.fontcolor-secondary.lineheight-tighter","em "+r().format("DD/MM/YYYY")),e(".fontsize-largest.fontweight-semibold","R$"+(m?""+Tt.formatNumber(m,2,3):"--"))]),e(fi,{label:"Nova receita",info:"R$"+a,newCount:a,oldCount:s}),e(fi,{label:"Receita perdida",inverted:!0,info:"R$"+l,newCount:l,oldCount:c})])])])])])}}),yi={controller:function(t){var r=w.filtersVM({project_id:"eq"}),n=e.prop([]),i=e.prop(),a=e.prop(!1),s=w.loaderWithToken,l=function(){try{var o=e.route.param("project_id");r.project_id(o)}catch(n){r.project_id(t.root.getAttribute("data-id"))}};l();var c=s(S.projectDetail.getRowOptions(r.parameters()));return c.load().then(function(e){if(n(e),"sub"===o.first(e).mode){var t=j.loaderWithToken(S.projectSubscribersInfo.postOptions({id:o.first(e).common_id}));t.load().then(function(e){i(e),a(!0)})}}),{l:c,load:a,filtersVM:r,subscribersDetails:i,projectDetails:n}},view:function(t,r){var n=o.first(t.projectDetails())||{user:{name:"Realizador"}},i=t.subscribersDetails()||{amount_paid_for_valid_period:0,total_subscriptions:0,total_subscribers:0};return t.l()||(n.user.name=n.user.name||"Realizador"),e(".project-insights",t.l()?Tt.loader():"sub"===n.mode?t.load()?e(vi,{args:r,subscribersDetails:i,project:n,l:t.l,filtersVM:t.filtersVM}):"":e(pi,{args:r,project:n,l:t.l,filtersVM:t.filtersVM}))}},ji=_.partial(Tt.i18nScope,"projects.dashboard_posts"),ki={controller:function(t){var o=function(){Tt.scrollTop(),t.showPreview(!1)},r=function(r){r.preventDefault();var n={title:t.title(),comment_html:t.comment_html(),reward_id:t.reward_id>=1?t.reward_id:null,recipients:t.reward_id>=1?"reward":"-1"==t.reward_id?"public":"backers"};return e.request({method:"POST",url:"/projects/"+t.project_id+"/posts.json",data:{project_post:n,project:t.project_id},config:Tt.setCsrfToken}).then(function(){t.showSuccess(!0),t.comment_html(""),t.title(""),o(),e.redraw()})["catch"](function(o){t.errors("Erro ao enviar mensagem."),t.showError(!0),e.redraw()})};return{sendNotification:r,togglePreview:o}},view:function(o,n){var i=n.comment_html(),a=n.title(),s=n.reward_id>1?e(".fontsize-small.u-marginbottom-30",["A novidade acima será enviada por email para os ",e("span.fontweight-semibold",n.rewardText)," e ficará ",e("span.fontweight-semibold",t.t("backers_only_"+n.mode,ji()))]):"-1"===n.reward_id?e(".fontsize-small.u-marginbottom-30",["A novidade acima será  ",e("span.fontweight-semibold","enviada por email para todos"),t.t("all_backers_"+n.mode,ji()),e("span.fontweight-semibold","visível publicamente "),"na plataforma."]):e(".fontsize-small.u-marginbottom-30",[e("span"," A novidade acima será  "),e("span.fontweight-semibold",t.t("email_backers_"+n.mode,ji())),e("span"," e ficará "),e("span.fontweight-semibold","visível somente para esses na plataforma.")]);return e("div",[e(".dashboard-header.u-text-center",e(".w-container",e(".w-row",[e(".w-col.w-col-3"),e(".w-col.w-col-6",e(".fontsize-larger.fontweight-semibold.lineheight-tight","Revise sua novidade antes de enviar!")),e(".w-col.w-col-3")]))),e(".section",[e(".w-container",e(".card.u-marginbottom-60.u-radius.w-row",[e(".w-col.w-col-1"),e(".u-marginbottom-30.u-margintop-30.w-col.w-col-10.w-hidden-small.w-hidden-tiny",[e(".fontcolor-secondary.fontsize-small.u-text-center",r().format("DD/MM/YYYY")),e(".fontsize-larger.fontweight-semibold.u-marginbottom-30.u-text-center",a),e(".fontsize-base",e.trust(i))]),e(".w-col.w-col-1")])),e(".w-row",[e(".w-col.w-col-3"),e(".w-col.w-col-6",s),e(".w-col.w-col-3")]),e(".u-marginbottom-20.w-row",[e(".w-col.w-col-3"),e(".w-sub-col.w-col.w-col-4",e("button.btn.btn-large",{
onclick:o.sendNotification},[e("span.fa.fa-paper-plane","")," ",e.trust("&nbsp;"),"Enviar"])),e(".w-col.w-col-2",e("button.btn.btn-large.btn-terciary",{onclick:o.togglePreview},"Editar")),e(".w-col.w-col-3")])])])}},xi=o.partial(Tt.i18nScope,"projects.dashboard_posts"),zi={controller:function(r){var n=void 0,i=e.prop(!1),a=e.prop(!1),s=e.prop(!1),l=e.prop(!1),c=e.prop(!1),d=e.prop(),u=w.loaderWithToken,p=e.prop(""),m={title:e.prop(""),comment_html:e.prop(""),reward_id:e.prop("-1")},f=w.filtersVM({project_id:"eq"}),b=function(){var e=String(m.title());return 0===e.length&&l(!0),!l()},g=function(){var e=String(m.comment_html());return 0===e.length&&c(!0),!c()},h=function(){return b()?g()?(Tt.scrollTop(),i(!0)):(p("Mensagem não pode ficar em branco."),s(!0)):(p("Título não pode ficar em branco."),s(!0)),!1},_=r.project_id,v=e.prop([]),y=function(e,t){if(hr.isSubscription(t)){var r=o.find(Bo.rewards(),function(t){return String(t.external_id)===String(e)});return"Assinantes da recompensa R$"+r.data.minimum_value/100+" - "+(r.data.title?r.data.title:r.data.description.substring(0,70)+"...")}var n=o.find(Bo.rewards(),function(t){return String(t.id)===String(e)});return"Apoiadores da recompensa R$"+n.minimum_value+" - "+(n.title?n.title:n.description.substring(0,70)+"...")},j=function(e,r){if("public"===e.recipients)return t.t("everyone_"+r.mode,xi());if("backers"===e.recipients)return t.t("backers_"+r.mode,xi());var n=o.find(Bo.rewards(),function(t){return(hr.isSubscription(r)?t.external_id:t.id)==e.reward_id});return n?y(hr.isSubscription(r)?n.external_id:n.id,r):"..."},k=e.prop(-1),x=function(t){return function(){return k(t.id),e.redraw(!0),n(),!1}},z=function(e,t){t||(n=function(){return e.submit()})},C=function(e){return Math.floor(e.open_count/e.delivered_count*100)||0};S.projectPostDetail.pageSize(!1),f.project_id(_);var E=w.loaderWithToken(S.projectPostDetail.getPageOptions(o.extend(f.parameters(),{order:"created_at.desc"}))),P=u(S.projectDetail.getRowOptions(f.parameters()));return E.load().then(d),P.load().then(function(e){v(e),hr.isSubscription(o.first(v()))?Bo.fetchCommonRewards(o.first(v()).common_id):Bo.fetchRewards(_)}),{listVM:E,l:P,projectPosts:d,showRecipientes:j,fields:m,showPreview:i,togglePreview:h,project_id:_,deletePost:x,rewardText:y,errors:p,showSuccess:a,titleHasError:l,commentHasError:c,showError:s,setPostDeletionForm:z,toDeletePost:k,projectDetails:v,openedPercentage:C}},view:function(r){var n=o.first(r.projectDetails()),i=o.filter(Bo.rewards(),function(e){return(hr.isSubscription(n)?e.subscribed_count:e.paid_count)>0});return n?e(".project-posts",n.is_owner_or_admin?e.component(Qn,{project:e.prop(n)}):"",r.showPreview()?e.component(ki,{showError:r.showError,showSuccess:r.showSuccess,errors:r.errors,showPreview:r.showPreview,project_id:r.project_id,mode:n.mode,comment_html:r.fields.comment_html,title:r.fields.title,reward_id:r.fields.reward_id(),rewardText:r.fields.reward_id()>=1?r.rewardText(r.fields.reward_id(),n):null}):[e(".w-section.section-product."+n.mode),r.showSuccess()?e.component(Cn,{message:t.t("successful",xi())}):"",r.showError()?e.component(Cn,{message:r.errors(),error:!0}):"",e(".dashboard-header.u-text-center",e(".w-container",e(".w-row",[e(".w-col.w-col-3"),e(".w-col.w-col-6",e(".fontsize-larger.fontweight-semibold.lineheight-tight",t.t("send_a_message_"+n.mode,xi()))),e(".w-col.w-col-3")]))),e(".section",e(".w-container",e(".w-row",[e(".w-col.w-col-1"),e(".w-col.w-col-10",[hr.isSubscription(n)?"":e(".u-marginbottom-60.u-text-center",e("._w-inline-block.card.fontsize-small.u-radius",[e("span.fa.fa-lightbulb-o","")," Veja ótimo motivos para ",e("a.alt-link[href='https://catarse.attach.io/B1AHAGm1x'][target='_blank']","falar com seus apoiadores agora mesmo!")])),e(".card.card-terciary.medium.u-marginbottom-80.w-form",[e("form",[e("label.field-label.fontweight-semibold","Destinatários"),e("select.positive.text-field.w-select",{onchange:e.withAttr("value",r.fields.reward_id)},[e("option[value='-1']",{selected:!0},t.t("everyone_"+n.mode,xi())),e("option[value='0']",t.t("backers_"+n.mode,xi())),o.map(i,function(t){return e("option[value='"+(hr.isSubscription(n)?t.external_id:t.id)+"']",r.rewardText(hr.isSubscription(n)?t.external_id:t.id,n))})]),e("label.field-label.fontweight-semibold","Título"),e("input.positive.text-field.w-input[id='post_title'][maxlength='256'][type='text']",{name:"posts[title]",value:r.fields.title(),onfocus:function(){return r.titleHasError(!1)},"class":r.titleHasError()?"error":"",onchange:e.withAttr("value",r.fields.title)}),e("label.field-label.fontweight-semibold","Texto"),e(".preview-container.u-marginbottom-40",{"class":r.commentHasError()?"error":"",onclick:function(){return r.commentHasError(!1)}},Tt.redactor("posts[comment_html]",r.fields.comment_html)),e(".u-marginbottom-20.w-row",[e(".w-col.w-col-3"),e(".w-sub-col.w-col.w-col-6",e("button.btn.btn-large",{onclick:r.togglePreview},t.t("preview",xi()))),e(".w-col.w-col-3")])])]),e(".fontsize-large.fontweight-semibold.u-marginbottom-40","Novidades já enviadas"),e(".table-outer.u-marginbottom-60",[e(".fontsize-smaller.fontweight-semibold.header.table-row.w-row",[e(".table-col.w-col.w-col-5",e("div","Título")),e(".table-col.u-text-center.w-col.w-col-3",e("div","Enviadas")),e(".table-col.u-text-center.w-col.w-col-3",e("div","Abertas")),e(".table-col.w-col.w-col-1")]),r.projectPosts()?e(".fontsize-small.table-inner",[o.map(r.projectPosts(),function(t){return e(".table-row.w-row",[e(".table-col.w-col.w-col-5",[e("a.alt-link.fontsize-base[href='/projects/"+n.project_id+"/posts/"+t.id+"#posts'][target='_blank']",t.title),e(".fontcolor-secondary.fontsize-smallest",[e("span.fontweight-semibold","Enviada em: "),Tt.momentify(t.created_at,"DD/MM/YYYY, h:mm A")]),e(".fontcolor-secondary.fontsize-smallest",[e("span.fontweight-semibold","Destinatários: "),r.showRecipientes(t,n)])]),e(".table-col.u-text-center.w-col.w-col-3",e(".fontsize-base",t.delivered_count)),e(".table-col.u-text-center.w-col.w-col-3",e(".fontsize-base",[t.open_count,e("span.fontcolor-secondary"," ("+r.openedPercentage(t)+"%)")])),e(".table-col.w-col.w-col-1",e("button.btn.btn-no-border.btn-small.btn-terciary.fa.fa-lg.fa-trash",{onclick:r.deletePost(t)}))])}),e("form.w-hidden",{action:"/pt/projects/"+n.project_id+"/posts/"+r.toDeletePost(),method:"POST",config:r.setPostDeletionForm},[e("input[name='utf8'][type='hidden'][value='✓']"),e("input[name='_method'][type='hidden'][value='delete']"),e("input[name='authenticity_token'][type='hidden'][value='"+Tt.authenticityToken()+"']")])]):Tt.loader()])]),e(".w-col.w-col-1")])))]):Tt.loader()}},Si=o.partial(Tt.i18nScope,"projects.reward_fields"),Ci=o.partial(Tt.i18nScope,"projects.dashboard_surveys"),Ei={controller:function(t){var n=w.loaderWithToken,i=w.filtersVM({project_id:"eq"}),a=t.project_id,s=function(t){e.request({method:"GET",config:Tt.setCsrfToken,url:"/projects/"+t.project_id+"/rewards/"+t.id+"/toggle_survey_finish"}).then(function(){t.survey_finished_at?t.survey_finished_at=null:t.survey_finished_at=r().format(),e.redraw()})},l=e.prop([]);i.project_id(a);var c=n(S.projectDetail.getRowOptions(i.parameters()));return Bo.fetchRewards(a).then(function(){o.map(Bo.rewards(),function(e){o.extend(e,{sentCount:"",answeredCount:""});var t=w.loaderWithToken(S.sentSurveyCount.postOptions({reward_id:e.id})),r=w.loaderWithToken(S.answeredSurveyCount.postOptions({reward_id:e.id}));t.load().then(function(t){e.sentCount=t}),r.load().then(function(t){e.answeredCount=t})})}),c.load().then(l),{l:c,project_id:a,toggleOpen:s,rewardVM:Bo,projectDetails:l}},view:function(r){var n=o.first(r.projectDetails()),i=function(e){return!e.survey_sent_at&&(e.maximum_contributions&&e.paid_count>=e.maximum_contributions||"online"!==n.state)},a=function(e){return!e.survey_sent_at&&"online"===n.state&&(!e.maximum_contributions||e.paid_count<e.maximum_contributions)},s=function(o){return i(o)?e(".w-col.w-col-3.w-col-small-small-stack.w-col-tiny-tiny-stack",e("a.btn.btn-small.w-button",{onclick:function(){return e.route("/projects/"+r.project_id+"/rewards/"+o.id+"/surveys/new")}},t.t("create_survey",Ci()))):a(o)?e(".w-col.w-col-3.w-col-small-3.w-col-tiny-tiny-stack",e("a.btn.btn-desactivated.btn-small.btn-terciary.w-button",t.t("create_survey",Ci()))):o.survey_sent_at&&!o.survey_finished_at?e(".w-clearfix.w-col.w-col-3.w-col-small-3.w-col-tiny-3",e(".u-right.w-clearfix",[e(".fontcolor-secondary.fontsize-smallest.lineheight-tighter.u-marginbottom-10","Aceitando respostas?"),e(".u-marginbottom-10.w-clearfix",e("a.toggle.toggle-on.u-right.w-clearfix.w-inline-block",{onclick:function(){r.toggleOpen(o)}},[e(".toggle-btn"),e(".u-right","SIM")])),e(".u-right",[e(".fontcolor-secondary.fontsize-mini.lineheight-tighter","Enviado em:"),e(".fontcolor-secondary.fontsize-mini.lineheight-tighter",Tt.momentify(o.survey_sent_at,"DD/MM/YYYY"))])])):e(".w-clearfix.w-col.w-col-3.w-col-small-3.w-col-tiny-3",e(".u-right",[e(".fontcolor-secondary.fontsize-smallest.lineheight-tighter.u-marginbottom-10","Aceitando respostas?"),e(".u-marginbottom-10.w-clearfix",e("a.toggle.toggle-off.u-right.w-inline-block",{onclick:function(){r.toggleOpen(o)}},[e("div","NÃO"),e(".toggle-btn.toggle-btn--off")])),e(".u-right",[e(".fontcolor-secondary.fontsize-mini.lineheight-tighter","Finalizado em:"),e(".fontcolor-secondary.fontsize-mini.lineheight-tighter",Tt.momentify(o.survey_finished_at,"DD/MM/YYYY"))])]))};return n&&!hr.isSubscription(n)?e(".project-surveys",n.is_owner_or_admin?e.component(Qn,{project:e.prop(n)}):"",e(".section",e(".w-container",e(".w-row",[e(".w-col.w-col-2"),e(".w-col.w-col-8",[e(".fontsize-larger.fontweight-semibold.lineheight-looser.u-text-center",t.t("title",Ci())),e(".fontsize-base.u-text-center",t.t("subtitle",Ci())),e(".u-margintop-20.u-text-center",e(".w-inline-block.card.fontsize-small.u-radius",[e("span.fa.fa-lightbulb-o",""),e.trust("&nbsp;"),e.trust(t.t("help_link",Ci()))]))]),e(".w-col.w-col-2")]))),e(".divider"),e(".before-footer.bg-gray.section",e(".w-container",["online"===n.state?e(".w-row",[e(".w-col.w-col-2"),e(".w-col.w-col-8",e(".card.card-message.u-marginbottom-40.u-radius",e(".fontsize-base",[e("span.fa.fa-exclamation-circle",""),t.t("online_explanation",Ci())]))),e(".w-col.w-col-2")]):"",e(".table-outer.u-marginbottom-60",[e(".fontweight-semibold.header.table-row.w-hidden-small.w-hidden-tiny.w-row",[e(".table-col.w-col.w-col-3",e("div","Recompensa")),e(".table-col.w-col.w-col-9",e(".w-row",[e(".u-text-center-big-only.w-col.w-col-4.w-col-small-4.w-col-tiny-4",e(".w-row",[e(".w-col.w-col-6",e("div","Enviados")),e(".w-col.w-col-6",e("div","Respondidos"))])),e(".u-text-center-big-only.w-col.w-col-5.w-col-small-5.w-col-tiny-5",e("div","Resultados")),e(".w-clearfix.w-col.w-col-3.w-col-small-3.w-col-tiny-3",e(".u-right"))]))]),e(".fontsize-small.table-inner",[o.map(r.rewardVM.rewards(),function(o){return e(".table-row.w-row",[e(".table-col.w-col.w-col-3",[e(".fontsize-base.fontweight-semibold","R$ "+o.minimum_value+" ou mais"),e(".fontsize-smallest.fontweight-semibold",o.title),e(".fontcolor-secondary.fontsize-smallest.u-marginbottom-10",o.description.substring(0,90)+"..."),e(".fontcolor-secondary.fontsize-smallest",[e("span.fontcolor-terciary","Entrega prevista:"),e.trust("&nbsp;"),Tt.momentify(o.deliver_at,"MMMM/YYYY")]),e(".fontcolor-secondary.fontsize-smallest",[e("span.fontcolor-terciary","Envio:"),e.trust("&nbsp;"),t.t("shipping_options."+o.shipping_options,Si())])]),e(".table-col.w-col.w-col-9",e(".u-margintop-20.w-row",[e(".u-text-center-big-only.w-col.w-col-4.w-col-small-4.w-col-tiny-4",e(".w-row",[e(".w-col.w-col-6",i(o)||a(o)?"":e(".fontsize-base",[e("span.fa.fa-paper-plane.fontcolor-terciary"," ")," "+o.sentCount])),e(".w-col.w-col-6",i(o)||a(o)?"":e(".fontsize-base",[e("span.fa.fa-check-circle.fontcolor-terciary","")," "+o.answeredCount,e("span.fontcolor-secondary","("+(0===o.sentCount?"0":Math.floor(o.answeredCount/o.sentCount*100))+"%)")]))])),e(".u-text-center-big-only.w-col.w-col-5.w-col-small-5.w-col-tiny-5",[i(o)||a(o)?"":e("a.btn.btn-inline.btn-small.btn-terciary.fa.fa-eye.fa-lg.w-button[target='_blank']",{onclick:function(){return e.route("/projects/"+n.project_id+"/contributions_report",{rewardId:o.id})}})]),s(o)]))])})])])]))):Tt.loader()}},Pi="open",Mi="multiple",Di=function(){return{type:Pi,question:"",description:"",survey_question_choices_attributes:e.prop([{option:"opção 1"},{option:"opção 2"}]),toggleDropdown:Tt.toggleProp(!1,!0)}},qi=e.prop([Di()]),Ai=Tt.toggleProp(!0,!1),Ti=e.prop([]),Ri=function(t){return e.request({method:"POST",url:"/rewards/"+t+"/surveys",data:{confirm_address:Ai(),survey_open_questions_attributes:o.filter(qi(),{type:Pi}),survey_multiple_choice_questions_attributes:o.filter(qi(),{type:Mi})},config:Tt.setCsrfToken})},Ii=function(e){return function(t,r){return r===o.indexOf(qi(),e)?e:t}},Ni=function(e){return o.compose(qi,o.map(qi(),Ii(e)))},Oi=o.compose(qi,function(){return qi().push(Di()),qi()}),Fi=function(e){qi(o.without(qi(),e))},Vi=function(e){return e.survey_question_choices_attributes().push({option:""}),!1},Li=function(e,t){return e.survey_question_choices_attributes().splice(t,1),!1},Bi=function(){return Ti([]),o.reduce(qi(),function(e,t){return e===!1?e:(t.error=!1,""!==t.question.trim()||(Ti().push(t),t.error=!0,!1))},!0)},Yi={addDashboardQuestion:Oi,confirmAddress:Ai,dashboardQuestions:qi,deleteDashboardQuestion:Fi,updateDashboardQuestion:Ni,deleteMultipleQuestionOption:Li,addMultipleQuestionOption:Vi,submitQuestions:Ri,openQuestionType:Pi,multipleQuestionType:Mi,isValid:Bi},Ui=o.partial(Tt.i18nScope,"projects.reward_fields"),Wi={view:function(o,r){var n=r.reward;return e(".card.u-radius",[e(".fontsize-large.fontweight-semibold.u-marginbottom-10","R$"+n.minimum_value+" ou mais"+(n.title?": "+n.title:"")),e(".fontcolor-secondary.fontsize-small.u-marginbottom-20",n.description.substring(0,140)+"..."),e(".fontcolor-secondary.fontsize-smallest",[e("span.fontcolor-terciary","Entrega prevista: "),Tt.momentify(n.deliver_at,"MMMM/YYYY"),e("span.fontcolor-terciary","    |    "),e("span.fontcolor-terciary","Envio: "),t.t("shipping_options."+n.shipping_options,Ui())])])}},$i=(o.partial(Tt.i18nScope,"activerecord.attributes.address"),{controller:function(e){var t=o.filter(e.surveyVM.dashboardQuestions(),{type:"open"}),r=o.filter(e.surveyVM.dashboardQuestions(),{type:"multiple"}),n=function(){e.showPreview.toggle(),Tt.scrollTop()};return{togglePreview:n,multipleChoiceQuestions:r,openQuestions:t}},view:function(t,r){return e(".section.u-marginbottom-40",e(".section.u-text-center",e(".w-container",e(".w-row",[e(".w-col.w-col-2"),e(".w-col.w-col-8",[e(".fontsize-larger.fontweight-semibold.lineheight-looser","Revise o questionário"),e(".fontsize-base","Os seus apoiadores irão receber um link para o questionário abaixo por email. Veja se está tudo correto antes de enviá-lo!")]),e(".w-col.w-col-2")]))),e(".section",e(".w-container",e(".w-row",[e(".w-col.w-col-1"),e(".w-col.w-col-10",e(".card.card-terciary.medium.u-marginbottom-30",[r.confirmAddress?e(".u-marginbottom-30.w-form",[e(".fontcolor-secondary.fontsize-base.fontweight-semibold","Endereço de entrega da recompensa"),e(".fontcolor-secondary.fontsize-smaller.u-marginbottom-30","Para onde Nome do Realizador deve enviar sua recompensa quando estiver pronta."),e("form",[e(".w-row",[e(".w-sub-col.w-col.w-col-6",[e("label.field-label.fontweight-semibold","País / Country"),e("select.positive.text-field.w-select",[e("option[value='']","Selecione...")])]),e(".w-col.w-col-6",e(".w-row",[e(".w-sub-col-middle.w-col.w-col-6.w-col-small-6.w-col-tiny-6"),e(".w-col.w-col-6.w-col-small-6.w-col-tiny-6")]))]),e("div",[e("label.field-label.fontweight-semibold","Rua"),e("input.positive.text-field.w-input[type='email']")]),e(".w-row",[e(".w-sub-col.w-col.w-col-4",[e("label.field-label.fontweight-semibold","Número"),e("input.positive.text-field.w-input[type='email']")]),e(".w-sub-col.w-col.w-col-4",[e("label.field-label.fontweight-semibold","Complemento"),e("input.positive.text-field.w-input[type='email']")]),e(".w-col.w-col-4",[e("label.field-label.fontweight-semibold","Bairro"),e("input.positive.text-field.w-input[type='email']")])]),e(".w-row",[e(".w-sub-col.w-col.w-col-4",[e("label.field-label.fontweight-semibold","CEP"),e("input.positive.text-field.w-input[type='email']")]),e(".w-sub-col.w-col.w-col-4",[e("label.field-label.fontweight-semibold","Cidade"),e("input.positive.text-field.w-input[type='email']")]),e(".w-col.w-col-4",[e("label.field-label.fontweight-semibold","Estado"),e("select.positive.text-field.w-select",[e("option[value='']","Selecione...")])])]),e(".w-row",[e(".w-sub-col.w-col.w-col-6",[e("label.field-label.fontweight-semibold","Telefone"),e("input.positive.text-field.w-input[type='email']")]),e(".w-col.w-col-6")])])]):"",o.map(t.multipleChoiceQuestions,function(t){return e(".u-marginbottom-30.w-form",[e(".fontcolor-secondary.fontsize-base.fontweight-semibold",t.question),e(".fontcolor-secondary.fontsize-smaller.u-marginbottom-20",t.description),e("form",[o.map(t.survey_question_choices_attributes(),function(t){return e(".fontsize-small.w-radio",[e("input.w-radio-input[type='radio'][value='Radio']"),e("label.w-form-label",t.option)])})])])}),o.map(t.openQuestions,function(t){return e(".u-marginbottom-30.w-form",[e(".fontcolor-secondary.fontsize-base.fontweight-semibold",t.question),e(".fontcolor-secondary.fontsize-smaller.u-marginbottom-20",t.description),e("form",e("input.positive.text-field.w-input[placeholder='Sua resposta'][type='text']"))])})])),e(".w-col.w-col-1")]))),e(".section",[e(".u-marginbottom-30.w-row",[e(".w-col.w-col-2"),e(".w-col.w-col-8",[e(".u-marginbottom-30.u-text-center",[e(".fontsize-small.fontweight-semibold.u-marginbottom-10","O questionário acima será enviado para os "+r.reward.paid_count+" apoiadores da recompensa"),e(Wi,{reward:r.reward})]),e(".card.card-message.fontsize-small.u-marginbottom-30.u-radius",[e("span.fontweight-semibold","OBS:"),e.trust("&nbsp;"),"As perguntas serão reenviadas automaticamente para aqueles que não responderem em até 4 dias. Caso os apoiadores continuem sem enviar as respostas, o questionário será reenviado mais duas vezes."])]),e(".w-col.w-col-2")]),e(".u-marginbottom-20.w-row",[e(".w-col.w-col-3"),e(".w-sub-col.w-col.w-col-4",e("a.btn.btn-large[href='javascript:void(0);']",{onclick:r.sendQuestions},[e("span.fa.fa-paper-plane","")," ",e.trust("&nbsp;"),"Enviar"])),e(".w-col.w-col-2",e("a.btn.btn-large.btn-terciary[href='javascript:void(0);']",{onclick:t.togglePreview},"Editar")),e(".w-col.w-col-3")])]))}}),Hi={view:function(t,o){return e(".fontsize-smaller.text-error.u-marginbottom-20.fa.fa-exclamation-triangle",e("span"," "+o.message))}},Qi={controller:function(e){var t=e.question,r=function(e,t){return function(){return Yi.deleteMultipleQuestionOption(e,t),!1}},n=function(e){return function(){return Yi.addMultipleQuestionOption(e),!1}},i=function(e){return function(r){var n=o.map(t.survey_question_choices_attributes(),function(t,o){return o===e?{option:r}:t});t.survey_question_choices_attributes(n)}};return{addOption:n,deleteOption:r,updateOption:i}},view:function(t,r){var n=r.question,i=r.index;return e(".card.u-marginbottom-30.u-radius.w-form",[e(".dashboard-question",[e(".w-row",[e(".w-col.w-col-4",e("label.fontsize-smaller","Pergunta")),e(".w-col.w-col-8",e('input.positive.text-field.w-input[type="text"]',{"class":n.error?"error":null,name:"reward[surveys_attributes][questions]["+i+"][question]",onchange:e.withAttr("value",function(e){return n.question=e}),onfocus:function(){n.error=!1},value:n.question}),n.error?e(Hi,{message:"O campo pergunta não pode ser vazio."}):null)]),e(".w-row",[e(".w-col.w-col-4",e('label.fontsize-smaller[for="name-3"]',"Descrição")),e(".w-col.w-col-8",e('input.positive.text-field.w-input[type="text"]',{onchange:e.withAttr("value",function(e){return n.description=e}),name:"reward[surveys_attributes][questions]["+i+"][description]"}))]),e(".w-row",[e(".w-col.w-col-4",e("label.fontsize-smaller","Opções")),e(".w-col.w-col-8",[o.map(n.survey_question_choices_attributes(),function(o,r){return e(".w-row",[e(".fa.fa-circle-o.fontcolor-terciary.prefix.u-text-center.w-col.w-col-1.w-col-medium-1.w-col-small-1.w-col-tiny-1"),e(".w-col.w-col-10.w-col-medium-10.w-col-small-10.w-col-tiny-10",e('input.positive.text-field.w-input[type="text"]',{onchange:e.withAttr("value",t.updateOption(r)),name:"reward[surveys_attributes][questions]["+i+"][question][survey_question_choices_attributes]["+r+"][option]",value:o.option})),e(".w-col.w-col-1.w-col-medium-1.w-col-small-1.w-col-tiny-1",e("button.btn.btn-medium.btn-no-border.btn-terciary.fa.fa-trash",{onclick:t.deleteOption(n,r)}))])}),e(".w-row",[e(".w-col.w-col-1.w-col-medium-1.w-col-small-1.w-col-tiny-1"),e(".w-col.w-col-11.w-col-medium-11.w-col-small-11.w-col-tiny-11",e("button.fontcolor-secondary.fontsize-smallest.link-hidden",{onclick:t.addOption(n)},"Adicionar mais uma opção"))])])])])])}},Gi={view:function(t,o){var r=o.question,n=o.index;return e(".card.u-marginbottom-30.u-radius.w-form",[e("div",[e(".w-row",[e(".w-col.w-col-4",e('label.fontsize-smaller[for="name-3"]',"Pergunta")),e(".w-col.w-col-8",e('input.positive.text-field.w-input[name="question"][type="text"]',{"class":r.error?"error":null,name:"reward[surveys_attributes][questions]["+n+"][question]",onchange:e.withAttr("value",function(e){return r.question=e}),value:r.question,onfocus:function(){r.error=!1}}),r.error?e(Hi,{message:"O campo pergunta não pode ser vazio."}):null)]),e(".w-row",[e(".w-col.w-col-4",e('label.fontsize-smaller[for="name-3"]',"Descrição")),e(".w-col.w-col-8",e('input.positive.text-field.w-input[type="text"]',{name:"reward[surveys_attributes][questions]["+n+"][description]",onchange:e.withAttr("value",function(e){return r.description=e}),value:r.description}))])])])}},Xi=(o.partial(Tt.i18nScope,"projects.reward_fields"),{controller:function(t){var o=e.prop(!1),r=w.loaderWithToken,n=Tt.toggleProp(!1,!0),i=Yi.confirmAddress,a=e.prop([]),s=w.filtersVM({id:"eq"}),l=w.filtersVM({project_id:"eq"}),c=t.project_id,d=t.reward_id;s.id(d),l.project_id(c);var u=w.loaderWithToken(S.rewardDetail.getPageOptions(s.parameters())),p=r(S.projectDetail.getRowOptions(l.parameters())),m=e.prop([]);p.load().then(a),u.load().then(m);var f={multiple:[e("span.fa.fa-dot-circle-o"),"  Múltipla escolha"],open:[e("span.fa.fa-align-left"),"  Resposta aberta"]},b=function(e,t){return function(){e.type=t,Yi.updateDashboardQuestion(e)}},g=function(t){return e(".w-col.w-col-4.w-sub-col",e(".text-field.w-dropdown",{onclick:function(){t.toggleDropdown.toggle(),Yi.updateDashboardQuestion(t)}},[e(".dropdown-toggle.w-dropdown-toggle",[f[t.type],e("span.fa.fa-chevron-down.u-right")]),e(".card.dropdown-list.w-dropdown-list",{"class":t.toggleDropdown()?"w--open":null},[e("span.dropdown-link.w-dropdown-link",{onclick:b(t,Yi.openQuestionType)},f.open),e("span.dropdown-link.w-dropdown-link",{onclick:b(t,Yi.multipleQuestionType)},f.multiple)])]))},h=function(){return Yi.addDashboardQuestion(),!1},_=function(e){return function(){return Yi.deleteDashboardQuestion(e),!1}},v=function(){o(!1),Yi.isValid()?(Tt.scrollTop(),n(!0)):(n(!1),o(!0))},y=function(){return Yi.submitQuestions(d).then(e.route("/projects/"+c+"/surveys"))["catch"](console.error),!1};return{reward:m,showError:o,showPreview:n,toggleShowPreview:v,project_id:c,confirmAddress:i,projectDetails:a,choiceDropdown:g,addDashboardQuestion:h,deleteDashboardQuestion:_,sendQuestions:y}},view:function(t){var r=o.first(t.projectDetails()),n=o.first(t.reward());return r?e(".project-surveys",r.is_owner_or_admin?e.component(Qn,{project:e.prop(r)}):"",t.showPreview()?e($i,{confirmAddress:t.confirmAddress(),showPreview:t.showPreview,surveyVM:Yi,reward:n,sendQuestions:t.sendQuestions}):[n?e(".card-terciary.section.u-text-center",e(".w-container",e(".w-row",[e(".w-col.w-col-8.w-col-push-2",e("div",[e(".fontsize-small.fontweight-semibold.u-marginbottom-20","Questionário para os "+n.paid_count+" apoiadores da recompensa"),e(Wi,{reward:n})]))]))):"",e(".divider"),e(".section",e(".w-row",[e(".w-col.w-col-10.w-col-push-1",[e(".card.card-terciary.medium.u-marginbottom-20.u-text-center",[e(".u-marginbottom-20",[e(".fontsize-base.fontweight-semibold.u-marginbottom-10","Confirmar endereço de entrega?"),e("a.toggle.w-clearfix.w-inline-block",{"class":t.confirmAddress()?"toggle-on":"toggle-off",onclick:t.confirmAddress.toggle},[e(".toggle-btn",{"class":t.confirmAddress()?null:"toggle-btn--off"}),t.confirmAddress()?e(".u-right","SIM"):e(".u-left","NÃO")]),e('input[type="hidden"]',{name:"reward[surveys_attributes][confirm_address]"})]),e(".w-row",[e(".w-col.w-col-8.w-col-push-2",e("p.fontcolor-secondary.fontsize-small",'Se essa recompensa será entregue na casa dos apoiadores, deixe essa opção como "SIM". Dessa forma, incluíremos uma pergunta no questionário para que eles confirmem o endereço de entrega.'))])]),o.map(Yi.dashboardQuestions(),function(o,r){return e(".card.card-terciary.medium.u-marginbottom-20.w-row",[t.choiceDropdown(o),e(".w-clearfix.w-col.w-col-8",[e.component("multiple"===o.type?Qi:Gi,{question:o,index:r}),e("button.btn.btn-inline.btn-no-border.btn-small.btn-terciary.fa.fa-lg.fa-trash.u-right",{onclick:t.deleteDashboardQuestion(o)})])])}),e("button.btn.btn-large.btn-message",{onclick:t.addDashboardQuestion},[e("span.fa.fa-plus-circle"),"  Adicionar pergunta"])])])),e(".section",e(".w-container",e(".w-row",[e(".w-col.w-col-4.w-col-push-4",e("a.btn.btn-large[href='javascript:void(0);']",{onclick:t.toggleShowPreview},"Pré-visualizar"),t.showError()?e(".u-text-center.u-margintop-10",e(Hi,{message:"Erro ao salvar formulário."})):null)])))]):Tt.loader()}}),Ji=_.partial(Tt.i18nScope,"pages.jobs"),Ki={view:function(o,r){return e(".page-jobs",[e(".w-section.hero-jobs.hero-medium",[e(".w-containe.u-text-center",[e('img.icon-hero[src="/assets/logo-white.png"]'),e(".u-text-center.u-marginbottom-20.fontsize-largest",t.t("title",Ji()))])]),e(".w-section.section",[e(".w-container.u-margintop-40",[e(".w-row",[e(".w-col.w-col-8.w-col-push-2.u-text-center",[e(".fontsize-large.u-marginbottom-30",t.t("info",Ji())),e('a[href="/projects/new"].w-button.btn.btn-large.btn-inline',t.t("cta",Ji()))])])])])])}},Zi=o.partial(Tt.i18nScope,"pages.press"),ea={controller:function(){var t=e.prop([]),o=w.loader,r=o(S.statistic.getRowOptions());return r.load().then(t),{stats:t}},view:function(r){var n=o.first(r.stats());return e("#press",[e(".hero-jobs.hero-medium",e(".w-container.u-text-center",[e("img.icon-hero[alt='Icon assets'][src='/assets/icon-assets-98f4556940e31b239cdd5fbdd993b5d5ed3bf67dcc3164b805e224d22e1340b7.png']"),e(".u-text-center.u-marginbottom-20.fontsize-largest",t.t("page-title",Zi()))])),e(".section-large.bg-gray",e(".w-container",e(".w-row",e(".w-col.w-col-8.w-col-push-2",e(".u-marginbottom-20.fontsize-large",t.t("abstract.title",Zi())))))),e(".section-large",e(".w-container",e(".w-row",e(".w-col.w-col-8.w-col-push-2",[e(".fontsize-large.fontweight-semibold.u-marginbottom-10",t.t("history.title",Zi())),e(".fontsize-large.u-marginbottom-20",t.t("history.subtitle",Zi())),e.trust(t.t("history.cta_html",Zi()))])))),e(".section-large.bg-gray",e(".w-container",e(".w-row",e(".w-col.w-col-8.w-col-push-2",[e(".fontsize-large.fontweight-semibold.u-marginbottom-10",t.t("stats.title",Zi())),e(".fontsize-large.u-marginbottom-40",t.t("stats.subtitle",Zi())),e(".w-row.w.hidden-small.u-text-center.u-marginbottom-40",[e(".w-col.w-col-4.u-marginbottom-20",[e(".text-success.lineheight-loose.fontsize-larger",Tt.formatNumber(n.total_contributors,0,3)),e(".fontsize-smaller",e.trust(t.t("stats.people_html",Zi())))]),e(".w-col.w-col-4.u-marginbottom-20",[e(".text-success.lineheight-loose.fontsize-larger",Tt.formatNumber(n.total_projects_success,0,3)),e(".fontsize-smaller",e.trust(t.t("stats.projects_html",Zi())))]),e(".w-col.w-col-4.u-marginbottom-20",[e(".text-success.lineheight-loose.fontsize-larger",n.total_contributed.toString().slice(0,2)+" milhões"),e(".fontsize-smaller",e.trust(t.t("stats.money_html",Zi())))])]),e("a.alt-link.fontsize-large[href='https://www.catarse.me/dbhero/dataclips/fa0d3570-9fa7-4af3-b070-2b2e386ef060'][target='_blank']",[e.trust(t.t("stats.cta_html",Zi()))])])))),e(".section-large",e(".w-container",[e(".w-row.u-marginbottom-30.u-text-center",e(".w-col.w-col-8.w-col-push-2",[e("div",e("img[alt='Logo catarse press'][src='/assets/logo-catarse-press-2f2dad49d3e5b256c29e136673b4c4f543c03e0d5548d351ae5a8d1e6e3d2645.png']")),e(".fontsize-base",t.t("assets.title",Zi()))])),e(".w-row",e(".w-col.w-col-4.w-col-push-4.u-text-center",e("a.alt-link.fontsize-large[href='https://www.catarse.me/assets'][target='_blank']",[e.trust(t.t("assets.cta_html",Zi()))])))])),e(".section-large.bg-projectgrid",e(".w-container",[e(".fontsize-large.u-text-center.fontweight-semibold.u-marginbottom-30",t.t("social.title",Zi())),e(".w-row",[e(".w-col.w-col-3",e("a.btn.btn-dark.btn-large.u-marginbottom-10[href='https://www.facebook.com/Catarse.me'][target='_blank']",[e("span.fa.fa-facebook")," Facebook"])),e(".w-col.w-col-3",e("a.btn.btn-dark.btn-large.u-marginbottom-10[href='https://twitter.com/catarse'][target='_blank']",[e("span.fa.fa-twitter")," Twitter"])),e(".w-col.w-col-3",e("a.btn.btn-dark.btn-large.u-marginbottom-10[href='https://instagram.com/catarse/'][target='_blank']",[e("span.fa.fa-instagram")," Instagram"])),e(".w-col.w-col-3",e("a.btn.btn-dark.btn-large.u-marginbottom-10[href='http://blog.catarse.me/'][target='_blank']",[e("span.fa.fa-rss")," Blog do Catarse"]))])])),e(".section-large.bg-blue-one.fontcolor-negative",e(".w-container",e(".w-row",e(".w-col.w-col-6.w-col-push-3",[e(".fontsize-large.fontweight-semibold.u-text-center.u-marginbottom-30",t.t("social.news",Zi())),e(".w-form",e("form[accept-charset='UTF-8'][action='"+Tt.getNewsletterUrl()+"'][id='mailee-form'][method='post']",[e(".w-form.footer-newsletter",e("input.w-input.text-field.prefix[id='EMAIL'][label='email'][name='EMAIL'][placeholder='Digite seu email'][type='email']")),e("button.w-inline-block.btn.btn-edit.postfix.btn-attached[type='submit']",e("img.footer-news-icon[alt='Icon newsletter'][src='/assets/catarse_bootstrap/icon-newsletter-9c3ff92b6137fbdb9d928ecdb34c88948277a32cdde3e5b525e97d57735210f5.png']"))]))])))),e(".section-large.bg-gray.before-footer",e(".w-container",e(".w-row.u-text-center",e(".w-col.w-col-8.w-col-push-2",[e(".fontsize-larger.fontweight-semibold.u-marginbottom-10",t.t("email.title",Zi())),e("div",e("a.alt-link.fontsize-large[href='mailto:"+t.t("email.cta",Zi())+"']",t.t("email.cta",Zi())))]))))])}},ta={controller:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.prop([]),n=e.prop({});return S.statistic.getRow().then(r),t.socket&&o.isFunction(t.socket.on)&&t.socket.on("new_paid_contributions",function(t){n(JSON.parse(t.payload)),S.statistic.getRow().then(r),e.redraw()}),{pageStatistics:r,notificationData:n}},view:function(t){var r=t.notificationData();return e(".w-section.bg-stats.section.min-height-100",[e(".w-container.u-text-center",o.map(t.pageStatistics(),function(t){return[e('img.u-marginbottom-60[src="https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/55ada5dd11b36a52616d97df_symbol-catarse.png"]'),e(".fontcolor-negative.u-marginbottom-40",[e(".fontsize-megajumbo.fontweight-semibold","R$ "+Tt.formatNumber(t.total_contributed,2,3)),e(".fontsize-large","Doados para projetos publicados por aqui")]),e(".fontcolor-negative.u-marginbottom-60",[e(".fontsize-megajumbo.fontweight-semibold",t.total_contributors),e(".fontsize-large","Pessoas já apoiaram pelo menos 1 projeto no Catarse")])]})),o.isEmpty(r)?"":e(".w-container",[e("div",[e(".card.u-radius.u-marginbottom-60.medium",[e(".w-row",[e(".w-col.w-col-4",[e(".w-row",[e(".w-col.w-col-4.w-col-small-4",[e('img.thumb.u-round[src="'+Tt.useAvatarOrDefault(r.user_image)+'"]')]),e(".w-col.w-col-8.w-col-small-8",[e(".fontsize-large.lineheight-tight",r.user_name)])])]),e(".w-col.w-col-4.u-text-center.fontsize-base.u-margintop-20",[e("div","acabou de apoiar o")]),e(".w-col.w-col-4",[e(".w-row",[e(".w-col.w-col-4.w-col-small-4",[e('img.thumb-project.u-radius[src="'+r.project_image+'"][width="75"]')]),e(".w-col.w-col-8.w-col-small-8",[e(".fontsize-large.lineheight-tight",r.project_name)])])])])])])]),e(".u-text-center.fontsize-large.u-marginbottom-10.fontcolor-negative",[e('a.link-hidden.fontcolor-negative[href="https://github.com/catarse"][target="_blank"]',[e("span.fa.fa-github",".")," Open Source com orgulho! "])])]);
}},oa=o.partial(Tt.i18nScope,"projects.dashboard_contribution_reports"),ra={view:function(r,n){var i=n.filterBuilder,a=o.findWhere(i,{label:"payment_state"}),s=o.findWhere(i,{label:"reward_filter"}),l=o.findWhere(i,{label:"delivery_filter"}),c=o.findWhere(i,{label:"survey_filter"}),d=o.findWhere(i,{component:Vt});n.filterVM.project_id();return s.data.options=n.mapRewardsToOptions(),e("div",[e(".dashboard-header",e(".w-container",e(".w-row",[e(".w-col.w-col-3"),e(".w-col.w-col-6",[e(".fontsize-larger.fontweight-semibold.lineheight-looser.u-text-center",t.t("title",oa())),e(".fontsize-base.u-marginbottom-20.u-text-center",t.t("subtitle_html",oa())),e(".u-marginbottom-60.u-text-center",e(".w-inline-block.card.fontsize-small.u-radius",[e("span.fa.fa-lightbulb-o",""),e.trust("&nbsp;"),e.trust(t.t("help_link",oa()))]))]),e(".w-col.w-col-3")]))),e(".card",e(".w-container",e(".w-form",[e("form",{onsubmit:n.submit},e(".u-margintop-20.w-row",[e(".w-col.w-col-8",e(".w-row",[e.component(a.component,a.data),e.component(s.component,s.data),e.component(l.component,l.data),e.component(c.component,c.data)])),e(".w-col.w-col-4",e(".u-margintop-20.w-row",[e.component(d.component,d.data)]))]))])))])}},na=o.partial(Tt.i18nScope,"projects.reward_fields"),ia=o.partial(Tt.i18nScope,"projects.contributions"),aa={controller:function(t){var r=t.project(),i=Tt.toggleProp(!1,!0),a=e.prop("info"),s=function(e){return o.contains(t.selectedContributions(),e.id)},l=function(e){var r=n("input:checkbox").is(":checked");return t.selectedAny(r),s(e)?t.selectedContributions(o.without(t.selectedContributions(),e.id)):t.selectedContributions().push(e.id),!0},c=w.filtersVM({contribution_id:"eq"}),d=function(){return c.contribution_id(t.contribution().id),w.loaderWithToken(S.survey.getPageOptions(c.parameters()))},u=e.prop(),p=function(e){var t={online:{paid:"text-success.fa-circle",refunded:"text-error.fa-circle",pending_refund:"text-error.fa-circle",pending:"text-waiting.fa-circle",refused:"text-error.fa-circle"},failed:{paid:"text-error.fa-circle-o",refunded:"text-refunded.fa-circle",pending_refund:"text-refunded.fa-circle-o",pending:"text-refunded",refused:"text-refunded"},waiting_funds:{paid:"text-success.fa-circle",refunded:"text-error.fa-circle",pending_refund:"text-error.fa-circle",pending:"text-waiting.fa-circle",refused:"text-error.fa-circle"},successful:{paid:"text-success.fa-circle",refunded:"text-error.fa-circle",pending_refund:"text-error.fa-circle",pending:"text-waiting.fa-circle",refused:"text-error.fa-circle"}};return t[r.state][e]};return d().load().then(u),{stateClass:p,survey:u,checked:s,currentTab:a,showDetail:i,selectContribution:l}},view:function(n,i){var a=i.contribution(),s=i.project(),l=o.first(n.survey()),c=o.isEmpty(a.profile_img_thumbnail)?"/assets/catarse_bootstrap/user.jpg":a.profile_img_thumbnail,d=a.reward||{minimum_value:0,description:t.t("contribution.no_reward",ia())},u=function(){return"error"===a.delivery_status?e("span.badge.badge-attention.fontsize-smaller",t.t("status."+a.delivery_status,na())):"delivered"===a.delivery_status?e("span.badge.badge-success.fontsize-smaller",t.t("status."+a.delivery_status,na())):"received"===a.delivery_status?e("span.fontsize-smaller.badge.badge-success",[e("span.fa.fa-check-circle",""),t.t("status."+a.delivery_status,na())]):""};return e("div",[e(".w-clearfix.card"+(n.checked(a)?".card-alert":""),[e(".w-row",[e(".w-col.w-col-1.w-col-small-1.w-col-tiny-1",e(".w-inline-block",e(".w-checkbox.w-clearfix","received"!==a.delivery_status&&"failed"!==s.state?e("input.w-checkbox-input[type='checkbox']",{checked:n.checked(a),value:a.id,onclick:function(){return n.selectContribution(a)}}):""))),e(".w-col.w-col-11.w-col-small-11.w-col-tiny-11",e(".w-row",[e(".w-col.w-col-1.w-col-tiny-1",[e("img.user-avatar.u-marginbottom-10[src='"+c+"']")]),e(".w-col.w-col-11.w-col-tiny-11",[e(".w-row",[e(".w-col.w-col-3",[e(".fontcolor-secondary.fontsize-mini.fontweight-semibold",Tt.momentify(a.created_at,"DD/MM/YYYY, HH:mm")),e(".fontweight-semibold.fontsize-smaller.lineheight-tighter",a.public_user_name||a.user_name),e(".fontsize-smallest.lineheight-looser",[a.has_another?[e("a.link-hidden-light.badge.badge-light","+1 apoio ")]:"",a.anonymous?e("span.fa.fa-eye-slash.fontcolor-secondary",e('span.fontcolor-secondary[style="font-size:11px;"]'," "+t.t("contribution.anonymous_contribution",ia()))):""]),e(".fontsize-smallest.lineheight-looser",a.email)]),e(".w-col.w-col-3",[e(".lineheight-tighter",[e("span.fa.fontsize-smallest."+n.stateClass(a.state)),"   ",e("span.fontsize-large","R$ "+Tt.formatNumber(a.value,2,3))])]),e(".w-col.w-col-3.w-hidden-small.w-hidden-tiny",[e("div",u()),e(".fontsize-smallest.fontweight-semibold",t.t("reward",na())+": "+(d.minimum_value?Tt.formatNumber(d.minimum_value,2,3):"")),e(".fontsize-smallest.fontweight-semibold",d.title),e(".fontsize-smallest.fontcolor-secondary",d.description.substring(0,80)+"...")]),l?l.survey_answered_at?e(".w-col.w-col-3.w-col-push-1",[e(".fontsize-smallest",[e("a.link-hidden","Questionário "),e("span.fontweight-semibold.text-success","respondido")]),e(".fontcolor-terciary.fontsize-smallest","em "+Tt.momentify(l.survey_answered_at,"DD/MM/YYYY"))]):l.finished_at?e(".w-col.w-col-3.w-col-push-1",[e(".fontsize-smallest",[e("a.link-hidden","Questionário "),e("span.fontweight-semibold.text-fail","sem resposta")]),e(".fontcolor-terciary.fontsize-smallest","finalizado em "+Tt.momentify(l.finished_at,"DD/MM/YYYY"))]):e(".w-col.w-col-3.w-col-push-1",[e(".fontsize-smallest",[e("a.link-hidden","Questionário "),e("span.fontweight-semibold.text-waiting","enviado")]),e(".fontcolor-terciary.fontsize-smallest","em "+Tt.momentify(l.sent_at,"DD/MM/YYYY"))]):""])])]))]),e("a.arrow-admin.fa.fa-chevron-down.fontcolor-secondary.w-inline-block",{onclick:n.showDetail.toggle})]),n.showDetail()?e(".card.details-backed-project.w-tabs",[e(".w-tab-menu",[o.map(["info","profile"],function(o){return e("a.dashboard-nav-link.w-inline-block.w-tab-link"+(n.currentTab()===o?".w--current":""),{onclick:function(){return n.currentTab(o)}},e("div",t.t("report."+o,ia())))})]),e(".card.card-terciary.w-tab-content",["info"===n.currentTab()?e(".w-tab-pane.w--tab-active",e(".w-row",[e(".right-divider.w-col.w-col-6",[e(".u-marginbottom-20",[e(".fontsize-base.fontweight-semibold.u-marginbottom-10",t.t("selected_reward.value",ia())+": R$"+a.value),e(en,{item:{payment_method:a.payment_method,state:a.state}}),e(".fontcolor-secondary.fontsize-smallest",Tt.momentify(a.created_at,"DD/MM/YYYY hh:mm"))]),e(".fontsize-base.fontweight-semibold",t.t("reward",na())+":"),e(".fontsize-small.fontweight-semibold.u-marginbottom-10",["R$"+d.minimum_value+" "+(d.title?"- "+d.title:"")+" ",u()]),e("p.fontsize-smaller",d.description),e(".u-marginbottom-10",[e(".fontsize-smaller",[e("span.fontweight-semibold",t.t("deliver_at",na())+" "),Tt.momentify(d.deliver_at,"MMMM/YYYY")]),d.shipping_options?e(".fontsize-smaller",[e("span.fontweight-semibold",t.t("delivery",na())),t.t("shipping_options."+d.shipping_options,na())]):""])]),l?e(".w-col.w-col-6",[e(".fontsize-base.fontweight-semibold",t.t("survey.survey",ia())),e(".fontsize-smaller.lineheight-tighter.u-marginbottom-20",t.t("survey.answered_at",ia({date:r(l.survey_answered_at).format("DD/MM/YYYY")}))),l.confirm_address&&l.address?[e(".fontsize-small",[e(".fontweight-semibold.lineheight-looser",t.t("survey.address_title",ia())),e("p",[a.public_user_name,e("br"),l.address.address_street+", "+l.address.address_number+" "+l.address.address_complement,e("br"),t.t("survey.address_neighbourhood",ia())+" "+l.address.address_neighbourhood,e("br"),l.address.address_zip_code+" "+l.address.address_city+"-"+l.state_name,e("br"),l.country_name])])]:"",o.map(l.multiple_choice_questions,function(t){var r=o.find(t.question_choices,function(e){return e.id===t.survey_question_choice_id});return r?e(".fontsize-small",[e(".fontweight-semibold.lineheight-looser",t.question),e("p",r.option)]):""}),o.map(l.open_questions,function(t){return e(".fontsize-small",[e(".fontweight-semibold.lineheight-looser",t.question),e("p",t.answer)])})]):""])):e(".w-tab-pane",e(".fontsize-small",e("p",["Nome completo: "+a.user_name,e("br"),"Nome público: "+a.public_user_name,e("br"),a.email,e("br"),t.t("user_since",ia({date:Tt.momentify(a.user_created_at,"MMMM YYYY")})),e("br"),t.t("backed_projects",ia({count:a.total_contributed_projects})),e("br"),t.t("created_projects",ia({count:a.total_published_projects}))])))])]):""])}},sa=w.filtersVM({full_text_index:"@@",state:"in",reward_id:"eq",delivery_status:"eq",survey_status:"in",project_id:"eq"}),la=function(e){return(e||"").toString().trim()};sa.state(""),sa.order({id:"desc"}),sa.full_text_index.toFilter=function(){var e=la(sa.full_text_index());return e&&l(e)||void 0},sa.getAllContributions=function(e){S.projectContribution.pageSize(!1);var t=w.loaderWithToken(S.projectContribution.getPageOptions(e.parameters())).load();return S.projectContribution.pageSize(9),t},sa.updateStatus=function(t){return e.request({method:"PUT",url:"/projects/"+sa.project_id()+"/contributions/update_status.json",data:t,config:Tt.setCsrfToken})},sa.withNullParameters=function(){var e=w.filtersVM({full_text_index:"@@",state:"in",reward_id:"is",delivery_status:"eq",project_id:"eq"});return e.full_text_index(sa.full_text_index()),e.order(sa.order()),e.state(sa.state()),e.reward_id(sa.reward_id()),e.delivery_status(sa.delivery_status()),e.project_id(sa.project_id()),e.parameters()};var ca={view:function(t,o){return e("div",e(".modal-dialog-header",e(".fontsize-large.u-text-center",[e("span.fa.fa-check-circle","")," Recompensas a caminho! Obaaa!!!!"])),e(".modal-dialog-content",[e("p.fontsize-small.u-marginbottom-30",[e("span.fontweight-semibold","Você selecionou "+o.amount+" apoios.")," Após sua confirmação, os apoiadores que efetuaram esses apoios ao seu projeto serão notificados de que suas recompensas serão entregues em breve."]),e(".w-form",[e("form",[e(".fontsize-smaller","Se quiser adicionar alguma informação nessa mensagem, use o espaço abaixo! É um ótimo momento para agradecer a essas pessoas que acreditaram em você!"),e("textarea.height-mini.text-field.w-input[placeholder='Digite sua mensagem (opcional)']",{value:o.message(),onchange:e.withAttr("value",o.message)})])]),e(".w-row",[e(".w-col.w-col-1"),e(".w-col.w-col-10",e(".fontsize-small.fontweight-semibold.u-marginbottom-20.u-text-center","Você confirma que a recompensa dos apoios selecionados foram enviadas?")),e(".w-col.w-col-1")]),e(".w-row",[e(".w-col.w-col-1"),e(".w-col.w-col-5",e("a.btn.btn-medium.w-button",{onclick:function(){return o.updateStatus("delivered")}},"Sim!")),e(".w-col.w-col-5",e("a.btn.btn-medium.btn-terciary.w-button",{onclick:o.displayModal.toggle},"Voltar")),e(".w-col.w-col-1")])]))}},da={view:function(t,o){return e("div",e(".modal-dialog-header",e(".fontsize-large.u-text-center",[e("span.fa.fa-exclamation-triangle","")," Ops. Erro no envio!"])),e(".modal-dialog-content",[e("p.fontsize-small.u-marginbottom-30",[e("span.fontweight-semibold","Você selecionou "+o.amount+" apoios.")," Após sua confirmação, os apoiadores que efetuaram esses apoios ao seu projeto serão notificados de que houve um problema com o envio de suas recompensas."]),e(".w-form",[e("form",[e(".fontsize-smaller","Se quiser adicionar alguma informação nessa mensagem, use o espaço abaixo (ex: você pode pedir confirmação de endereço de entrega ou explicar motivos do erro)"),e("textarea.height-mini.text-field.w-input[placeholder='Digite sua mensagem (opcional)']",{value:o.message(),onchange:e.withAttr("value",o.message)})])]),e(".w-row",[e(".w-col.w-col-1"),e(".w-col.w-col-10",e(".fontsize-small.fontweight-semibold.u-marginbottom-20.u-text-center","Você confirma que houve um erro no envio das recompensas dos apoios selecionados?")),e(".w-col.w-col-1")]),e(".w-row",[e(".w-col.w-col-1"),e(".w-col.w-col-5",e("a.btn.btn-medium.w-button",{onclick:function(){return o.updateStatus("error")}},"Sim!")),e(".w-col.w-col-5",e("a.btn.btn-medium.btn-terciary.w-button",{onclick:o.displayModal.toggle},"Voltar")),e(".w-col.w-col-1")])]))}},ua={controller:function(t){var r=Tt.toggleProp(!1,!0),n=e.prop(!1),i=e.prop(!1),a=e.prop(!1),s=Tt.toggleProp(!1,!0),l=Tt.toggleProp(!1,!0),c=e.prop([]),d=e.prop(""),u=function(){sa.getAllContributions(t.filterVM).then(function(e){var t,r=o.filter(e,function(e){return"received"!==e.delivery_status});(t=c()).push.apply(t,F(o.pluck(r,"id"))),n(!o.isEmpty(r))})},p=function(){c([]),n(!1)},m=function(n){var u={contributions:c(),message:d(),delivery_status:n};return"delivered"===n?s.toggle():"error"===n&&l.toggle(),a(!0),r.toggle(),e.redraw(),sa.updateStatus(u).then(function(){a(!1),i(!0),o.map(o.filter(t.list.collection(),function(e){return o.contains(c(),e.id)}),function(e){return e.delivery_status=n})})["catch"](function(){e.redraw()}),!1};return{showSuccess:i,selectAll:u,unselectAll:p,deliveryMessage:d,displayDeliverModal:s,displayErrorModal:l,updateStatus:m,loading:a,showSelectedMenu:r,selectedAny:n,selectedContributions:c}},view:function(t,r){var n=r.list,i="failed"===r.project().state;return e(".w-section.bg-gray.before-footer.section",t.loading()?Tt.loader():[t.displayErrorModal()?e.component(zn,{displayModal:t.displayErrorModal,hideCloseButton:!1,content:[da,{project:r.project,displayModal:t.displayErrorModal,amount:t.selectedContributions().length,updateStatus:t.updateStatus,message:t.deliveryMessage}]}):"",t.displayDeliverModal()?e.component(zn,{displayModal:t.displayDeliverModal,hideCloseButton:!1,content:[ca,{project:r.project,displayModal:t.displayDeliverModal,amount:t.selectedContributions().length,updateStatus:t.updateStatus,message:t.deliveryMessage}]}):"",t.showSuccess()?e.component(Cn,{message:"As informações foram atualizadas"}):"",e(".w-container",[e(".u-marginbottom-40",e(".w-row",[e(".u-text-center-small-only.w-col.w-col-2",e(".fontsize-base.u-marginbottom-10",[e("span.fontweight-semibold",n.isLoading()?"":n.total())," apoios"])),e(".w-col.w-col-6",i?"":[t.selectedAny()?e("button.btn.btn-inline.btn-small.btn-terciary.u-marginright-20.w-button",{onclick:t.unselectAll},"Desmarcar todos"):e("button.btn.btn-inline.btn-small.btn-terciary.u-marginright-20.w-button",{onclick:t.selectAll},"Selecionar todos"),t.selectedAny()?e(".w-inline-block",[e("button.btn.btn-inline.btn-small.btn-terciary.w-button",{onclick:t.showSelectedMenu.toggle},["Marcar ",e("span.w-hidden-tiny","entrega")," como"]),t.showSelectedMenu()?e(".card.dropdown-list.dropdown-list-medium.u-radius.zindex-10[id='transfer']",[e("a.dropdown-link.fontsize-smaller[href='#']",{onclick:function(){return t.displayDeliverModal.toggle()}},"Entregue"),e("a.dropdown-link.fontsize-smaller[href='#']",{onclick:function(){return t.displayErrorModal.toggle()}},"Erro na entrega")]):""]):""]),e(".w-clearfix.w-col.w-col-4",e("a.alt-link.fontsize-small.lineheight-looser.u-right",{onclick:function(){return r.showDownloads(!0)}},[e("span.fa.fa-download","")," Baixar relatórios"]))])),o.map(n.collection(),function(o){var n=e.prop(o);return e.component(aa,{project:r.project,contribution:n,selectedContributions:t.selectedContributions,selectedAny:t.selectedAny})})]),e(".w-section.section.bg-gray",[e(".w-container",[e(".w-row.u-marginbottom-60",[e(".w-col.w-col-2.w-col-push-5",[n.isLoading()?Tt.loader():n.isLastPage()?"":e("button#load-more.btn.btn-medium.btn-terciary",{onclick:n.nextPage},"Carregar mais")])])])])])}},pa={view:function(t,r){var n=r.project(),i=o.filter(r.rewards,function(e){return e.paid_count>0});return e("section.min-height-70",e(".w-section",e("article",e(".section.project-metrics",e(".w-container",e(".w-row",[e(".w-col.w-col-2"),e(".w-col.w-col-8",e(".card.u-radius.u-marginbottom-20.card-terciary",[e(".fontsize-small.fontweight-semibold.u-marginbottom-20",[e("span.fa.fa-download",e.trust("&nbsp;")),"Baixar relatórios"]),e(".card.u-radius.u-marginbottom-20",[e("span.fontweight-semibold",e.trust("Atenção:")),"Ao realizar o download desses dados, você se compromete a armazená-los em local seguro e respeitar o direitos dos usuários conforme o que está previsto nos Termos de Uso e na política de privacidade do Catarse."]),e("ul.w-list-unstyled",[e("li.fontsize-smaller.u-marginbottom-10",e("div",["Apoiadores confirmados ",e.trust("&nbsp;"),e("a.alt-link[href='/pt/reports/contribution_reports_for_project_owners.csv?project_id="+n.project_id+"&amp;state=paid']","CSV"),e.trust("&nbsp;"),"\\",e.trust("&nbsp;"),e("a.alt-link[href='/pt/reports/contribution_reports_for_project_owners.xls?project_id="+n.project_id+"&amp;state=paid']","XLS")])),e("li.divider.u-marginbottom-10"),e("li.fontsize-smaller.u-marginbottom-10",e("div",["Apoiadores pendentes",e.trust("&nbsp;"),e.trust("&nbsp;"),e("a.alt-link[href='/pt/reports/contribution_reports_for_project_owners.csv?project_id="+n.project_id+"&amp;state=pending&amp;waiting_payment=true']","CSV"),e.trust("&nbsp;"),"\\",e.trust("&nbsp;"),e("a.alt-link[href='/pt/reports/contribution_reports_for_project_owners.xls?project_id="+n.project_id+"&amp;state=pending&amp;waiting_payment=true']","XLS")])),e("li.divider.u-marginbottom-10"),e("li.fontsize-smaller.u-marginbottom-10",e("div",["Apoiadores que não selecionaram recompensa",e.trust("&nbsp;"),e.trust("&nbsp;"),e("a.alt-link[href='/pt/reports/contribution_reports_for_project_owners.csv?project_id="+n.project_id+"&amp;reward_id=0&amp;state=paid']","CSV"),e.trust("&nbsp;"),"\\",e.trust("&nbsp;"),e("a.alt-link[href='/pt/reports/contribution_reports_for_project_owners.xls?project_id="+n.project_id+"&amp;reward_id=0&amp;state=paid']","XLS")])),o.map(i,function(t){return[e("li.divider.u-marginbottom-10"),e("li.fontsize-smaller.u-marginbottom-10",e("div",["R$ "+t.minimum_value+" "+t.description.substring(0,40)+"...;",e("a.alt-link[href='/pt/reports/contribution_reports_for_project_owners.csv?project_id="+n.project_id+"&amp;reward_id="+t.id+"&amp;state=paid']","CSV"),e.trust("&nbsp;"),"\\",e.trust("&nbsp;"),e("a.alt-link[href='/pt/reports/contribution_reports_for_project_owners.xls?project_id="+n.project_id+"&amp;reward_id="+t.id+"&amp;state=paid']","XLS")]))]}),e("li.divider.u-marginbottom-10")])])),e(".w-col.w-col-2")]))))))}},ma={controller:function(e){return{modalToggle:Tt.toggleProp(!1,!0)}},view:function(t,o){return e("span",[o.text,e.trust("&nbsp;"),e('a.fa.fa-question-circle.fontcolor-secondary[href="#"]',{onclick:t.modalToggle.toggle},""),t.modalToggle()?e.component(zn,{displayModal:t.modalToggle,content:o.content}):""])}},fa=o.partial(Tt.i18nScope,"projects.contributions_report.legend_labels"),wa={controller:function(e){var o=function(e){return t.t(e,fa())};return{stages:{online:[{label:o("online.paid.label"),text:o("online.paid.text"),i_class:".fa.fa-circle.text-success"},{label:o("online.pending.label"),text:o("online.pending.text"),i_class:".fa.fa-circle.text-waiting"},{label:o("online.refunded.label"),text:o("online.refunded.text"),i_class:".fa.fa-circle.text-error"}],failed:[{label:o("failed.refunded.label"),text:o("failed.refunded.text"),i_class:".fa.fa-circle.text-refunded"}],successful:[{label:o("successful.paid.label"),text:o("successful.paid.text"),i_class:".fa.fa-circle.text-success"},{label:o("successful.refunded.label"),text:o("successful.refunded.text"),i_class:".fa.fa-circle.text-error"}]}}},view:function(t,r){var n=o.first(r.project()),i="waiting_funds"==n.state?"online":n.state;return e("div",[e(".modal-dialog-header",[e(".fontsize-large.u-text-center","Status do apoio")]),e(".modal-dialog-content",o.map(t.stages[i],function(t,o){return e(".u-marginbottom-20",[e(".fontsize-small.fontweight-semibold",[e("span"+t.i_class),"  "+t.label]),e(".fontsize-smaller",e.trust(t.text))])}))])}},ba={view:function(t,o){return e("div",[e(".modal-dialog-header",[e(".fontsize-large.u-text-center","Status da entrega")]),e(".modal-dialog-content",[e(".fontsize-smaller.u-marginbottom-30","Todo apoio tem, por padrão, o status de entrega 'Não enviada'. Para ajudar no seu controle da entrega de recompensas, você pode alterar esses status e filtrar a pesquisa de apoios com os seguintes rótulos:"),e(".u-marginbottom-20",[e(".fontsize-smaller.fontweight-semibold",["Não enviada",e.trust("&nbsp;")]),e(".fontsize-smaller","Você ainda não enviou a recompensa para o apoiador.")]),e("div",e("span.fontsize-smaller.badge.badge-success","Entregue")),e(".u-marginbottom-20",e(".fontsize-smaller","Você já enviou a recompensa para o apoiador.")),e(".u-marginbottom-20",[e("div",e("span.fontsize-smaller.badge.badge-attention","Erro na entrega")),e(".fontsize-smaller","Você enviou a recompensa, mas houve algum problema com o envio (ex: endereço incorreto).")]),e(".u-marginbottom-20",[e("div",e("span.fontsize-smaller.badge.badge-success",[e("span.fa.fa-check-circle","")," Recebida"])),e(".fontsize-smaller","O apoiador marcou a recompensa como 'Recebida' no seu painel de controle o/")])]),e(".divider.u-marginbottom-10"),e(".fontcolor-secondary.fontsize-smaller.u-marginbottom-30",["Obs: mesmo que a recompensa não seja física (como uma cópia digital, por exemplo), você pode mesmo assim usar o sistema acima!"])])}},ga={controller:function(t){var r=w.paginationVM(S.projectContribution,"id.desc",{Prefer:"count=exact"}),n=sa,i=e.prop([{}]),a=e.prop([]),s=e.prop(!1),l=e.prop([]),c=function(e){var t=[{value:"",option:"Todos"}],o={online:[{value:"paid",option:"Confirmado"},{value:"pending",option:"Iniciado"},{value:"refunded,chargeback,deleted,pending_refund",option:"Contestado"}],waiting_funds:[{value:"paid",option:"Confirmado"},{value:"pending",option:"Iniciado"},{value:"refunded,chargeback,deleted,pending_refund",option:"Contestado"}],failed:[{value:"refunded",option:"Reembolsado"}],successful:[{value:"paid",option:"Confirmado"},{value:"refunded,chargeback,deleted,pending_refund",option:"Contestado"}]};t=t.concat(o[e]||[]),l(t)},d=function(){return"null"===n.reward_id()?r.firstPage(n.withNullParameters()).then(null):r.firstPage(n.parameters()).then(null),!1},u=[{component:Vt,data:{inputWrapperClass:".w-input.text-field",btnClass:".btn.btn-medium",vm:n.full_text_index,placeholder:"Busque por nome ou email do apoiador"}},{label:"reward_filter",component:Er,data:{label:"Recompensa",onchange:d,name:"reward_id",vm:n.reward_id,wrapper_class:".w-sub-col.w-col.w-col-3",options:[]}},{label:"delivery_filter",component:Er,data:{custom_label:[ma,{content:[ba],text:"Status da entrega"}],onchange:d,name:"delivery_status",vm:n.delivery_status,wrapper_class:".w-sub-col.w-col.w-col-3",options:[{value:"",option:"Todos"},{value:"undelivered",option:"Não entregue"},{value:"delivered",option:"Entregue"},{value:"error",option:"Erro no envio"},{value:"received",option:"Recebida"}]}},{label:"survey_filter",component:Er,data:{label:"Status do questionário",onchange:d,name:"survey_status",vm:n.survey_status,wrapper_class:".w-col.w-col-3",options:[{value:"",option:"Todos"},{value:"not_sent",option:"Não enviado"},{value:"sent,answered",option:"Enviado"},{value:"sent",option:"Não Respondido"},{value:"answered",option:"Respondido"}]}},{label:"payment_state",component:Er,data:{custom_label:[ma,{text:"Status do apoio",content:[wa,{project:i}]}],name:"state",onchange:d,vm:n.state,wrapper_class:".w-sub-col.w-col.w-col-3",options:l}}];n.project_id(t.project_id);var p=w.loaderWithToken(S.rewardDetail.getPageOptions({project_id:"eq."+n.project_id()})),m=w.loaderWithToken(S.projectDetail.getPageOptions({project_id:"eq."+n.project_id()}));p.load().then(a),m.load().then(function(e){i(e),c(o.first(e).state)});var f=function(){var e=[];return p()||(e=o.map(a(),function(e){return{value:e.id,option:"R$ "+Tt.formatNumber(e.minimum_value,2,3)+" - "+(e.title?e.title:e.description).substring(0,20)}})),e.unshift({value:null,option:"Sem recompensa"}),e.unshift({value:"",option:"Todas"}),e};return r.collection().length||(e.route.param("rewardId")&&n.reward_id(e.route.param("rewardId")),r.firstPage(n.parameters())),{listVM:r,filterVM:n,filterBuilder:u,submit:d,lProject:m,rewards:a,project:i,showDownloads:s,mapRewardsToOptions:f}},view:function(t){var r=t.listVM;return t.lProject()?e("",Tt.loader()):e("",[e.component(Qn,{project:e.prop(o.first(t.project()))}),t.showDownloads()?e(pa,{project:e.prop(o.first(t.project())),rewards:t.rewards()}):[e(".w-section.section-product."+o.first(t.project()).mode),e.component(ra,{submit:t.submit,filterBuilder:t.filterBuilder,form:t.filterVM.formDescriber,mapRewardsToOptions:t.mapRewardsToOptions,filterVM:t.filterVM}),e.component(ua,{submit:t.submit,list:r,showDownloads:t.showDownloads,filterVM:t.filterVM,project:e.prop(o.first(t.project()))})]])}},ha={view:function(t,o){var r=o.collection,n=o.cssClass;return e(".w-col.w-col-4"+n,[r.isLoading()?Tt.loader():r.isLastPage()?"":e("button#load-more.btn.btn-medium.btn-terciary.w-button",{onclick:r.nextPage},"Carregar mais")])}},_a={controller:function(t){var o=e.prop(t.following||!1),r=w.filtersVM({follow_id:"eq"}),n=e.prop(!1),i=e.prop(!1),a=S.userFollow.postOptions({follow_id:t.follow_id}),s=function(){return r.follow_id(t.follow_id),S.userFollow.deleteOptions(r.parameters())}(),l=function(){var e=w.loaderWithToken(a);n(!0),e.load().then(function(){o(!0),n(!1)})},c=function(){var e=w.loaderWithToken(s);n(!0),e.load().then(function(){o(!1),n(!1)})};return{following:o,follow:l,unfollow:c,loading:n,hover:i}},view:function(t,o){if(Tt.userSignedIn()&&Tt.getUserID()!=o.follow_id){var r=o.disabledClass||".w-button.btn.btn-medium.btn-terciary.u-margintop-20",n=o.enabledClass||".w-button.btn.btn-medium.u-margintop-20";return t.loading()?Tt.loader():t.following()?e("a"+n,{onclick:t.unfollow,onmouseover:function(){return t.hover(!0)},onmouseout:function(){return t.hover(!1)}},t.hover()?"Deixar de seguir":"Seguindo"):e("a"+r,{onclick:t.follow},"Seguir")}return e("")}},va={controller:function(t){var o=e.prop(!1),r=e.prop(!1),n=t,i=e.prop(!1),a=Tt.getUser()||{name:"",email:""},s=e.prop(mo.displayName(a)),l=e.prop(a.email),c=e.prop(""),d=function(){if(o())return!1;i(!0),c(c().split("\n").join("<br />"));var e=S.directMessage.postOptions({from_name:s(),from_email:l(),user_id:Tt.getUser().user_id,content:c(),project_id:t().project_id,to_user_id:n().id});return o=w.loaderWithToken(e),o.load().then(r(!0)),i(!1),!1};return{sendMessage:d,submitDisabled:i,sendSuccess:r,userDetails:t,from_name:s,from_email:l,content:c,l:o}},view:function(t,r){var n=e(".modal-dialog-content.u-text-center",[e(".fa.fa-check-circle.fa-5x.text-success.u-marginbottom-40"),e("p.fontsize-large","Sua mensagem foi enviada com sucesso para "+t.userDetails().name+". Você vai receber uma cópia no seu email e pode seguir a conversa por lá!")]),i=[e(".modal-dialog-content",[e(".w-form",[e("form",{onsubmit:Tt.validate().submit([{prop:t.from_name,rule:"text"},{prop:t.from_email,rule:"email"},{prop:t.content,rule:"text"}],t.sendMessage)},[e(".w-row",[e(".w-col.w-col-6.w-sub-col",[e("label.fontsize-smaller","Seu nome"),e("input.w-input.text-field[value='"+t.from_name()+"'][type='text'][required='required']",{onchange:e.withAttr("value",t.from_name),"class":Tt.validate().hasError(t.from_name)?"error":""})]),e(".w-col.w-col-6",[e("label.fontsize-smaller","Seu email"),e("input.w-input.text-field[value='"+t.from_email()+"'][type='text'][required='required']",{onchange:e.withAttr("value",t.from_email),"class":Tt.validate().hasError(t.from_email)?"error":""})])]),e("label","Mensagem"),e("textarea.w-input.text-field.height-small[required='required']",{onchange:e.withAttr("value",t.content),"class":Tt.validate().hasError(t.content)?"error":""}),e(".u-marginbottom-10.fontsize-smallest.fontcolor-terciary","Você receberá uma cópia desta mensagem em seu email."),e(".w-row",Tt.validationErrors().length?o.map(Tt.validationErrors(),function(t){return e("span.fontsize-smallest.text-error",[e("span.fa.fa-exclamation-triangle")," "+t.message,e("br")])}):""),e(".modal-dialog-nav-bottom",e(".w-row",e(".w-col.w-col-6.w-col-push-3",t.l()?Tt.loader():e('input.w-button.btn.btn-large[type="submit"][value="Enviar mensagem"]',{disabled:t.submitDisabled()}))))])])])];return e("div",[e(".modal-dialog-header",e(".fontsize-large.u-text-center","Enviar mensagem")),t.sendSuccess()?n:i])}},ya=(o.partial(Tt.i18nScope,"projects.subscription_fields"),{controller:function(e){return{displayModal:Tt.toggleProp(!1,!0)}},view:function(t,n){var i=n.subscription,a=o.extend(n.user,{project_id:i.project_external_id}),s=n.reward,l=[va,e.prop(a)];return e(".details-backed-project.card",e(".card.card-terciary",e(".w-row",[e(".w-col.w-col-12",[e(".u-marginbottom-20.card.u-radius",[e(".fontsize-small.fontweight-semibold.u-marginbottom-10","Detalhes da assinatura"),e(".fontsize-smaller",[e("div",[e("span.fontcolor-secondary","Status: "),e(gn,{subscription:i})]),e("div",[e("span.fontcolor-secondary","Valor da assinatura: "),"R$"+i.amount/100]),e("div",[e("span.fontcolor-secondary","Recompensa: "),o.isEmpty(s)?"Sem recompensa":"R$"+s.minimum_value+" - "+s.title+" - "+s.description.substring(0,90)+"(...)"]),e("div",[e("span.fontcolor-secondary","Meio de pagamento: "),e(wn,{subscription:i})]),e("div",[e("span.fontcolor-secondary","Tempo de assinatura: "),i.paid_count+" meses"]),e(".fontsize-base.u-margintop-10",[e("span.fontcolor-secondary","Total apoiado: "),e.trust("&nbsp;"),e("span.fontweight-semibold.text-success","R$"+i.total_paid/100)])])]),e(".u-marginbottom-20.card.u-radius",[e(".fontsize-small.fontweight-semibold.u-marginbottom-10","Perfil"),e(".fontsize-smaller",[e("div",i.user_email),e("div","Conta no Catarse desde "+r(a.created_at).format("MMMM YYYY")),e(".u-marginbottom-10",["Apoiou "+a.total_contributed_projects+" projetos ",e.trust("&nbsp;"),"| ",e.trust("&nbsp;"),"Criou "+a.total_published_projects+" projetos"]),t.displayModal()?e.component(zn,{displayModal:t.displayModal,content:l}):"",e("a.btn.btn-small.btn-inline.btn-edit.u-marginright-10.w-button",{onclick:t.displayModal.toggle},"Enviar mensagem"),e(_a,{follow_id:a.id,following:a.following_this_user,enabledClass:"a.btn.btn-small.btn-inline.btn-terciary.w-button",disabledClass:"a.btn.btn-small.btn-inline.btn-terciary.w-button"})])])])])))}}),ja=(o.partial(Tt.i18nScope,"projects.subscription_fields"),{controller:function(t){var r=t.subscription,n=e.prop(),i=Tt.toggleProp(!1,!0),a=e.prop();if(r.user_external_id){var s=w.filtersVM({id:"eq"}).id(r.user_external_id),l=w.loaderWithToken(S.userDetail.getRowOptions(s.parameters()));l.load().then(function(e){a(o.first(e))})}if(r.reward_external_id){var c=w.filtersVM({id:"eq"}).id(r.reward_external_id),d=w.loaderWithToken(S.rewardDetail.getRowOptions(c.parameters()));d.load().then(function(e){n(o.first(e))})}return{toggleDetails:i,reward:n,user:a}},view:function(t,n){var i=n.subscription,a=t.user(),s=t.toggleDetails()?".card-detailed-open":"";return e("div"+s,[e(".card.card-clickable",{onclick:t.toggleDetails.toggle},t.user()?e(".w-row",[e(".table-col.w-col.w-col-3",e(".w-row",[e(".w-col.w-col-3",e("img.u-marginbottom-10.user-avatar[src='"+Tt.useAvatarOrDefault(t.user().profile_img_thumbnail)+"']")),e(".w-col.w-col-9",[e(".fontsize-smaller.fontweight-semibold.lineheight-tighter",t.user().name),e(".fontcolor-secondary.fontsize-smallest",i.user_email)])])),e(".table-col.w-col.w-col-2",e(".fontsize-smaller",o.isEmpty(t.reward())?"":t.reward().description.substring(0,20)+"...")),e(".table-col.w-col.w-col-1.u-text-center",[e(".fontsize-smaller","R$"+Tt.formatNumber(i.amount/100,0,3)),e(".fontcolor-secondary.fontsize-mini.fontweight-semibold.lineheight-tightest",[e(wn,{subscription:i})])]),e(".w-col.w-col-2.u-text-center",[e(".fontsize-smaller","R$"+Tt.formatNumber(i.total_paid/100,0,3)),e(".fontcolor-secondary.fontsize-mini.fontweight-semibold.lineheight-tightest",i.paid_count+" meses")]),e(".w-col.w-col-2.u-text-center",e(".fontsize-smaller",i.paid_at?r(i.paid_at).format("DD/MM/YYYY"):"")),e(".w-col.w-col-2.u-text-center",e(gn,{subscription:i})),e("button.w-inline-block.arrow-admin.fa.fa-chevron-down.fontcolor-secondary")]):""),t.toggleDetails()?e(ya,{subscription:i,reward:t.reward(),
user:a}):""])}}),ka=g.filtersVM({status:"in",search_index:"fts(portuguese)",reward_external_id:"eq",payment_method:"eq",project_id:"eq"}),xa=function(e){return(e||"").toString().trim()};ka.status(""),ka.payment_method(""),ka.order({created_at:"desc"}),ka.search_index.toFilter=function(){var e=xa(ka.search_index());return e&&l(e)||void 0},ka.getAllSubscriptions=function(e){S.userSubscription.pageSize(!1);var t=g.loaderWithToken(S.userSubscription.getPageOptions(e.parameters())).load();return S.userSubscription.pageSize(9),t},ka.withNullParameters=function(){var e=g.filtersVM({status:"in",reward_external_id:"is",search_index:"fts(portuguese)",payment_method:"eq",project_id:"eq"});return e.order(ka.order()),e.status(ka.status()),e.reward_external_id(ka.reward_external_id()),e.payment_method(ka.payment_method()),e.search_index(ka.search_index()),e.project_id(ka.project_id()),e.parameters()};var za={view:function(){return e("span",["Status da assinatura ",e("a.fontsize-smallest.tooltip-wrapper.fa.fa-question-circle.fontcolor-secondary",{href:"https://suporte.catarse.me/hc/pt-br/articles/115005632746-Catarse-Assinaturas-FAQ-Realizadores#status",target:"_blank"})])}},Sa={controller:function(t){var r=ka,n=sa,i=e.prop(!1),a=e.prop(!0),s=e.prop([]),l=g.paginationVM(S.userSubscription,"created_at.desc",{Prefer:"count=exact"}),c=function(){return"null"===r.reward_external_id()?l.firstPage(r.withNullParameters()).then(null):l.firstPage(r.parameters()).then(null),!1},d=[{component:Vt,label:"text_filter",data:{label:"Busca",vm:r.search_index,onchange:c,wrapper_class:".w-sub-col.w-col.w-col-5.u-margintop-20",inputWrapperClass:".w-input.text-field.positive",btnClass:".btn.btn-medium.u-marginbottom-10",placeholder:"Busque por nome ou email do assinante..."}},{label:"reward_filter",component:Er,data:{label:"Recompensa",onchange:c,name:"reward_external_id",vm:r.reward_external_id,wrapper_class:".w-sub-col.w-col.w-col-2",options:[]}},{label:"status_filter",component:Er,data:{custom_label:[za,null],onchange:c,name:"status",vm:r.status,wrapper_class:".w-sub-col.w-col.w-col-3",options:[{value:"",option:"Todos"},{value:"active",option:"Ativa"},{value:"started",option:"Iniciada"},{value:"canceling",option:"Cancelamento solicitado"},{value:"inactive",option:"Inativa"}]}},{label:"payment_filter",component:Er,data:{label:"Meio de pagamento",onchange:c,name:"payment_method",vm:r.payment_method,wrapper_class:".w-sub-col.w-col.w-col-2",options:[{value:"",option:"Todos"},{value:"credit_card",option:"Cartão de crédito"},{value:"boleto",option:"Boleto"}]}}],u=function(){i(!0),a(!1),e.redraw()},p=e.prop([{}]);n.project_id(t.project_id);var m=w.loaderWithToken(S.rewardDetail.getPageOptions({project_id:"eq."+n.project_id()}));m.load().then(s);var f=function(){var e=[];return m()||(e=o.map(s(),function(e){return{value:e.id,option:"R$ "+Tt.formatNumber(e.minimum_value,2,3)+" - "+(e.title?e.title:e.description).substring(0,20)}})),e.unshift({value:null,option:"Sem recompensa"}),e.unshift({value:"",option:"Todas"}),e},b=w.loaderWithToken(S.projectDetail.getPageOptions({project_id:"eq."+n.project_id()}));return b.load().then(function(e){r.project_id(o.first(e).common_id),l.firstPage(r.parameters()).then(function(){a(!1)})["catch"](u),p(e)}),{filterVM:r,mapRewardsToOptions:f,filterBuilder:d,submit:c,subscriptions:l,lProject:b,project:p}},view:function(t,r){var n=t.subscriptions.collection(),i=t.filterBuilder,a=o.findWhere(i,{label:"status_filter"}),s=o.findWhere(i,{label:"text_filter"}),l=o.findWhere(i,{label:"reward_filter"}),c=o.findWhere(i,{label:"payment_filter"});return l.data.options=t.mapRewardsToOptions(),t.lProject()?e("",Tt.loader()):e("div",[e.component(Qn,{project:e.prop(o.first(t.project()))}),e(".dashboard-header",e(".w-container",e(".w-row",[e(".w-col.w-col-3"),e(".w-col.w-col-6",e(".fontsize-larger.fontweight-semibold.lineheight-looser.u-marginbottom-30.u-text-center","Base de assinantes")),e(".w-col.w-col-3")]))),e(".divider.u-margintop-30"),e(".card",e(".w-container",e(".w-form",[e("form",{onsubmit:t.submit},e(".u-margintop-20.w-row",[e(".w-col.w-col-12.u-text-center",e(".w-row",[e.component(a.component,a.data),e.component(l.component,l.data),e.component(c.component,c.data),e.component(s.component,s.data)]))]))]))),e(".before-footer.bg-gray.section",[e(".w-container",[e("div",e(".w-row",[e(".u-marginbottom-20.u-text-center-small-only.w-col.w-col-6",e(".w-inline-block.fontsize-base.u-marginright-10",[e("span.fontweight-semibold",t.subscriptions.total())," pessoas",e.trust("&nbsp;")])),e(".w-col.w-col-6",e("a.alt-link.fontsize-small.u-right[href='/projects/"+r.project_id+"/subscriptions_report_download']",{config:e.route},[e("span.fa.fa-download",e.trust("&nbsp;")),"Baixar relatórios"]))])),e(".u-marginbottom-60",[e(".card.card-secondary.fontsize-smallest.fontweight-semibold.lineheight-tighter.u-marginbottom-10",e(".w-row",[e(".table-col.w-col.w-col-3",e("div","Assinante")),e(".table-col.w-col.w-col-2",e("div","Recompensa")),e(".table-col.w-col.w-col-1.u-text-center",e("div","Apoio mensal")),e(".table-col.w-col.w-col-2.u-text-center",e("div","Total apoiado")),e(".table-col.w-col.w-col-2.u-text-center",e("div","Último apoio")),e(".table-col.w-col.w-col-2.u-text-center",e("div","Status da Assinatura"))])),e(".fontsize-small",[o.map(n,function(t){return e(ja,{subscription:t})})])])]),e(".bg-gray.section",e(".w-container",e(".u-marginbottom-60.w-row",[e(ha,{collection:t.subscriptions,cssClass:".w-col-push-4"})])))])])}},Ca={controller:function(t){var o=sa,r=e.prop([{}]);o.project_id(t.project_id);var n=w.loaderWithToken(S.projectDetail.getPageOptions({project_id:"eq."+o.project_id()}));return n.load().then(function(e){r(e)}),{project:r}},view:function(t,r){return e(".section.project-metrics",e(".w-container",e(".w-row",[e.component(Qn,{project:e.prop(o.first(t.project()))}),e(".w-col.w-col-2"),e(".w-col.w-col-8",e(".card.u-radius.u-marginbottom-20.card-terciary",[e(".fontsize-small.fontweight-semibold.u-marginbottom-20",[e("span.fa.fa-download",e.trust("&nbsp;")),"Baixar relatórios"]),e(".card.u-radius.u-marginbottom-20",[e("span.fontweight-semibold",e.trust("Atenção:")),"Ao realizar o download desses dados, você se compromete a armazená-los em local seguro e respeitar o direitos dos usuários conforme o que está previsto nos Termos de Uso e na política de privacidade do Catarse."]),e("ul.w-list-unstyled",[e("li.fontsize-smaller.u-marginbottom-10",e("div",["Base de assinantes ",e.trust("&nbsp;"),e("a.alt-link[href='/projects/"+r.project_id+"/subscriptions_report_for_project_owners.csv']","CSV"),e.trust("&nbsp;"),"\\",e.trust("&nbsp;"),e("a.alt-link[href='/projects/"+r.project_id+"/subscriptions_report_for_project_owners.xls']","XLS")])),e("li.divider.u-marginbottom-10"),e("li.fontsize-smaller.u-marginbottom-10",e("div",["Relatório de apoios confirmados",e.trust("&nbsp;"),e.trust("&nbsp;"),e("a.alt-link[href='/projects/"+r.project_id+"/subscriptions_monthly_report_for_project_owners.csv']","CSV"),e.trust("&nbsp;"),"\\",e.trust("&nbsp;"),e("a.alt-link[href='/projects/"+r.project_id+"/subscriptions_monthly_report_for_project_owners.xls']","XLS")]))])])),e(".w-col.w-col-2")])))}},Ea={controller:function(e){return hr.init(e.project_id,e.project_user_id),hr},view:function(t){var o=t.currentProject;return o().is_owner_or_admin?e.component(Qn,{project:o}):""}},Pa={view:function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=o.action||"/pt/explore?ref=ctrse_explore_pgsearch",n=o.method||"GET";return e("#search.w-container.w-hidden-main.w-hidden-medium",[e(".w-row",[e(".w-col.w-col-10.u-marginbottom-20",[e(".w-form",[e("form#email-form",{action:r,method:n},[e(".w-row",[e(".w-col.w-col-10.w-col-small-10.w-col-tiny-10",[e('input[type="text"][name="pg_search"][placeholder="Busque projetos"]#pg_search_inside.w-input.text-field.negative.prefix')]),e(".w-col.w-col-2.w-col-small-2.w-col-tiny-2",[e("button.w-inline-block.btn.btn-dark.btn-attached.postfix",[e('img.header-lupa[src="https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/54e44178b2135fce2b6cd235_lupa.png"]')])])])])])])])])}},Ma={view:function(t,o){var r=o.category;return e(".w-col.w-col-2.w-col-small-6.w-col-tiny-6",[e("a.w-inline-block.btn-category[href='#by_category_id/"+r.id+"']",[e("div",[r.name,e("span.badge.explore",r.online_projects)])])])}},Da={controller:function(e){return{largeBg:function(){return!o.isUndefined(e)&&(!o.isUndefined(e.largeBg)&&e.largeBg)}()}},view:function(t,o){return e(".w-section.section"+(t.largeBg?".bg-backs-carrosel.section-large":""),[e(".w-container",[e(".card.card-big",[e(".w-row",[e(".w-col.w-col-8",[e(".fontsize-largest.u-marginbottom-20","Encontre projetos incríveis junto com seus amigos"),e(".fontsize-small","O universo do Catarse junto com a sua rede do Facebook te farão descobrir projetos incríveis!")]),e(".w-col.w-col-4",[e('a.w-button.btn.btn-fb.btn-large.u-margintop-30.u-marginbottom-10[href="/connect-facebook"]',"Conecte seu facebook"),e(".fontsize-smallest.fontcolor-secondary.u-text-center","Nós nunca postaremos nada no facebook sem sua permissão")])])])])])}},qa=o.partial(Tt.i18nScope,"pages.explore"),Aa={controller:function(r){var n=w.filtersVM,i=$t(),a=i.filters,s=Tt.paramByName("filter")||"all",l="all",c=e.prop(a[s]),d=function(e){c(a[e]),E()},u=function(){c(a[s]),i.setContextFilters(["finished","all","contributed_by_friends"])},p=Tt.getUser()||{},m=p.has_fb_auth,f=function(t){return e.component(On,{el:".tooltip-wrapper.fa.fa-question-circle.fontcolor-secondary",text:t,width:380})},b=function(){var t="",o="",r=!1;return"all"===c().keyName?(r=!0,t="Ordenados por popularidade ",o="O nosso fator popularidade é uma mistura da seleção do time do Catarse com um valor que é calculado pela velocidade de arrecadação do projeto"):"finished"===c().keyName?(r=!0,t="Ordenados por R$ alcançado ",o="Os projetos com maior meta de arrecadação alcançada ficam no topo"):"contributed_by_friends"===c().keyName&&(r=!0,t="Projetos apoiados por amigos ",o="Projetos apoiados por amigos"),r?e(".fontsize-smaller.fontcolor-secondary",[t,f(o)]):""},g=e.prop(!1),h=e.prop([]),_=e.prop(),v=function(e){return o.find(h(),function(t){return t.id===parseInt(e)})},y=o.compose(v,_),j=function(){return S.category.getPageWithToken(n({}).order({name:"asc"}).parameters()).then(h)},k=t.translations[t.currentLocale()].projects.index.explore_categories,x=function(e){return!o.isUndefined(k[e])},z=function(e){return o.size(o.filter(e,function(e){return e.score>=1}))>=3},C=e.prop({collection:e.prop([]),isLoading:function(){return!0},isLastPage:function(){return!0}}),E=function(){var t=window.location.hash.match(/\#([^\/]*)\/?(\d+)?/),r=t&&t[2]&&v(t[2]),i=function(){var e=n({category_id:"eq"});return t&&t[1]&&a[t[1]]||r&&{title:r.name,filter:e.category_id(r.id)}},s=i()||c(),l=Tt.paramByName("pg_search"),d=function(){var t=w.loaderWithToken(S.projectSearch.postOptions({query:l})),o={collection:e.prop([]),isLoading:t,isLastPage:function(){return!0},nextPage:function(){return!1}};return t.load().then(o.collection),o},u=function(){var e=w.paginationVM(S.project),t=o.extend({},c().filter.parameters(),s.filter.order({open_for_contributions:"desc",state_order:"asc",state:"desc",score:"desc",pledged:"desc"}).parameters());return e.firstPage(t),e},p=function(){var e=w.paginationVM(S.finishedProject),t=o.extend({},c().filter.parameters(),s.filter.order({state_order:"asc",state:"desc",pledged:"desc"}).parameters());return e.firstPage(t),e};o.isString(l)&&l.length>0&&null===t?(g(!0),P("Busca "+l),C(d())):"finished"===c().keyName?(g(!1),C(p())):(g(!1),P(s.title),C(o.isNull(t)||"finished"!=t[1]?u():p())),_(r&&r.id),M(t||o.isString(l)&&l.length>0?!1:!0)},P=e.prop(),M=Tt.toggleProp(!1,!0);return window.addEventListener("hashchange",function(){u(),E(),e.redraw()},!1),u(),S.project.pageSize(9),j().then(E),r.filter&&c(a[r.filter]),c()||c(a[s]),{categories:h,changeFilter:d,fallbackFilter:l,projects:C,category:y,title:P,hint:b,filtersMap:a,currentFilter:c,projectFiltersVM:i,toggleCategories:M,isSearch:g,hasFBAuth:m,checkForMinScoredProjects:z,categoryId:_,hasSpecialFooter:x,externalLinkCategories:k}},view:function(r,n){var i=r.categoryId,a=r.projects().collection(),s=a.length,l=r.currentFilter().keyName,c="contributed_by_friends"===l,d=r.hasSpecialFooter(i()),u=[];return r.projects().isLoading()||!o.isEmpty(a)||r.isSearch()||c&&!r.hasFBAuth||(r.projectFiltersVM.removeContextFilter(r.currentFilter()),r.changeFilter(r.fallbackFilter)),e("#explore",{config:Tt.setPageTitle(t.t("header_html",qa()))},[e(".w-section.hero-search",[e.component(Pa),e(".w-container.u-marginbottom-10",[e(".u-text-center.u-marginbottom-40",[e('a#explore-open.link-hidden-white.fontweight-light.fontsize-larger[href="javascript:void(0);"]',{onclick:function(){return r.toggleCategories.toggle()}},["Explore projetos incríveis ",e("span#explore-btn.fa.fa-angle-down"+(r.toggleCategories()?".opened":""),"")])]),e("#categories.category-slider"+(r.toggleCategories()?".opened":""),[e(".w-row.u-marginbottom-30",[o.map(r.categories(),function(t){return e.component(Ma,{category:t})})])])])]),e(".w-section",[e(".w-container",[e(".w-row",[e(".w-col.w-col-9.w-col-small-8.w-col-tiny-8",[e(".fontsize-larger",r.title()),r.hint()]),e(".w-col.w-col-3.w-col-small-4.w-col-tiny-4",r.isSearch()?"":e("select.w-select.text-field.positive",{onchange:e.withAttr("value",r.changeFilter)},o.map(r.projectFiltersVM.getContextFilters(),function(t,o){var n=r.currentFilter()===t;return e("option",{value:t.keyName,selected:n},t.nicename)})))])])]),c&&o.isEmpty(a)?r.hasFBAuth?"":e.component(Da):"",e(".w-section.section",[e(".w-container",[e(".w-row",[e(".w-row",o.map(a,function(t,n){var i="small",d="ctrse_explore";return r.isSearch()?d="ctrse_explore_pgsearch":c?d="ctrse_explore_friends":"all"===l&&t.score>=1&&(0===n?(i="big",d="ctrse_explore_featured_big",u=[s-1,s-2]):1===n||2===n?r.checkForMinScoredProjects(a)?(i="medium",d="ctrse_explore_featured_medium",u=[]):(i="big",d="ctrse_explore_featured_big",u=[s-1]):d="ctrse_explore_featured"),o.indexOf(u,n)>-1&&!r.projects().isLastPage()?"":e.component(Tn,{project:t,ref:d,type:i,showFriends:c})})),r.projects().isLoading()?Tt.loader():o.isEmpty(a)&&r.hasFBAuth?e(".fontsize-base.w-col.w-col-12","Nenhum projeto para mostrar."):""])])]),e(".w-section.u-marginbottom-80",[e(".w-container",[e(".w-row",[e(".w-col.w-col-2.w-col-push-5",[r.projects().isLastPage()||r.projects().isLoading()||o.isEmpty(a)?"":e("a.btn.btn-medium.btn-terciary[href='#loadMore']",{onclick:function(){return r.projects().nextPage(),!1}},"Carregar mais")])])])]),e(".w-section.section-large.before-footer.u-margintop-80.bg-gray.divider",[e(".w-container.u-text-center",[e("img.u-marginbottom-20.icon-hero",{src:d?r.externalLinkCategories[i()].icon:"https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/56f4414d3a0fcc0124ec9a24_icon-launch-explore.png"}),e("h2.fontsize-larger.u-marginbottom-60",d?r.externalLinkCategories[i()].title:"Lance sua campanha no Catarse!"),e(".w-row",[e(".w-col.w-col-4.w-col-push-4",[d?e("a.w-button.btn.btn-large",{href:r.externalLinkCategories[i()].link+"?ref=ctrse_explore"},r.externalLinkCategories[i()].cta):e("a.w-button.btn.btn-large",{href:"/start?ref=ctrse_explore"},"Aprenda como")])])])])])}},Ta=function(){var e=t.translations[t.currentLocale()].projects.home,o=e.banners;return{banners:o}},Ra={controller:function(t){var o=void 0,r=e.prop(0),n=e.prop(1600),i=t.sliderTime||6500,a=function(){r(r()>0?r()-1:t.slides.length-1)},s=function(){r(r()<t.slides.length-1?r()+1:0)},l=function(){o=setInterval(function(){s(),e.redraw()},i)},c=function(){clearInterval(o),l()},d=function(t,r,i){r||(n(Math.max(document.documentElement.clientWidth,window.innerWidth||0)),e.redraw()),i.onunload=function(){return clearInterval(o)}};return l(),{config:d,selectedSlideIdx:r,translationSize:n,decrementSlide:a,incrementSlide:s,resetSliderTimer:c}},view:function(t,r){var n=r.slideClass||"",i=r.wrapperClass||"",a=r.effect||"slide",s=function(e,o){e(o),t.resetSliderTimer(),r.onchange&&r.onchange()},l=function(e,o){var r="transform: "+o+"; -webkit-transform: "+o+"; -ms-transform:"+o,n=e===t.selectedSlideIdx()?"opacity: 1; visibility: visible;":"opacity: 0; visibility: hidden;";return"fade"===a?n:r};return e(".w-slider."+i,{config:t.config},[e(".fontsize-larger",r.title),e(".w-slider-mask",[o.map(r.slides,function(o,r){var i=(r-t.selectedSlideIdx())*t.translationSize(),a="translate3d("+i+"px, 0, 0)";return e(".slide.w-slide."+n,{style:l(r,a)+" "+o.customStyle},[e(".w-container",[e(".w-row",[e(".w-col.w-col-8.w-col-push-2",o.content)])])])}),e("#slide-prev.w-slider-arrow-left.w-hidden-small.w-hidden-tiny",{onclick:function(){return s(t.decrementSlide)}},[e(".w-icon-slider-left.fa.fa-lg.fa-angle-left.fontcolor-terciary")]),e("#slide-next.w-slider-arrow-right.w-hidden-small.w-hidden-tiny",{onclick:function(){return s(t.incrementSlide)}},[e(".w-icon-slider-right.fa.fa-lg.fa-angle-right.fontcolor-terciary")]),e(".w-slider-nav.w-slider-nav-invert.w-round.slide-nav",o(r.slides.length).times(function(o){return e(".slide-bullet.w-slider-dot"+(t.selectedSlideIdx()===o?".w-active":""),{onclick:function(){return s(t.selectedSlideIdx,o)}})}))])])}},Ia={getBlogPosts:function(){var t=e.deferred(),r=o.first(document.getElementsByTagName("body")).getAttribute("data-blog");return r?t.resolve(JSON.parse(r)):e.request({method:"GET",url:"/posts"}).then(t.resolve)["catch"](t.reject),t.promise}},Na={controller:function(t){var o=e.prop([]),r=e.prop(!1);return Ia.getBlogPosts().then(o)["catch"](r),{posts:o,error:r}},view:function(t,r){return e("section.section-large.bg-gray.before-footer[id='blog']",e(".w-container",[e(".u-text-center",[e("a[href='http://blog.catarse.me'][target='blank']",e("img.u-marginbottom-10[alt='Icon blog'][src='/assets/icon-blog.png']")),e(".fontsize-large.u-marginbottom-60.text-success",e("a.link-hidden-success[href='http://blog.catarse.me'][target='__blank']","Blog do Catarse"))]),e(".w-row",o.map(t.posts(),function(t){return e(".w-col.w-col-4.col-blog-post",[e('a.link-hidden.fontweight-semibold.fontsize-base.u-marginbottom-10[href="'+t[1][1]+"\"][target='__blank']",t[0][1]),e(".fontsize-smaller.fontcolor-secondary.u-margintop-10",e.trust(Tt.strip(t[6][1].substr(0,130))+"..."))])})),t.error()?e(".w-row",e(".w-col.w-col-12.u-text-center","Erro ao carregar posts...")):""]))}},Oa=o.partial(Tt.i18nScope,"projects.home"),Fa={controller:function(t){var r=o.partial(o.sample,o,6),n=w.loaderWithToken,i=S.project,a=$t().filters,s=w.filtersVM({user_id:"eq"}),l=w.paginationVM(S.userFriend,"user_id.desc",{Prefer:"count=exact"}),c=Tt.getUser()||{},d=c.has_fb_auth,u=Ta();i.pageSize(20),s.user_id(c.user_id),d&&!l.collection().length&&l.firstPage(s.parameters());var p=o.map(["score","contributed_by_friends"],function(t){var s=a[t],l=n(i.getPageOptions(o.extend({},{order:"score.desc"},s.filter.parameters()))),c=e.prop([]);return l.load().then(o.compose(c,r)),{title:s.nicename,hash:"score"===t?"all":t,collection:c,loader:l,showFriends:"contributed_by_friends"===t}});return{collections:p,slidesContent:u.banners,hasFBAuth:d}},view:function(r){var n=function(){return o.map(r.slidesContent,function(t){var o="background-image: url("+t.image+");",r=e(".w-container.u-text-center",[e(".w-row.u-marginbottom-40",[e("h1.fontcolor-negative.fontsize-megajumbo.u-marginbottom-20",e.trust(t.title)),e("h2.fontcolor-negative.fontsize-large",e.trust(t.subtitle))]),e("a.btn.btn-large.u-marginbottom-10.btn-inline",{href:t.link},t.cta)]);return{content:r,customStyle:o}})};return e("#projects-home-component",{config:Tt.setPageTitle(t.t("header_html",Oa()))},[e.component(Ra,{slides:n(),effect:"fade",slideClass:"hero-slide start",wrapperClass:"hero-full hero-full-slide",sliderTime:1e4}),o.map(r.collections,function(t){return e.component(Rn,{collection:t,title:t.title,ref:"home_"+("all"===t.hash?"score":t.hash),showFriends:t.showFriends})}),r.hasFBAuth?"":e.component(Da,{largeBg:!0}),e.component(Na)])}},Va={controller:function(){return{displayEmbed:Tt.toggleProp(!1,!0)}},view:function(t,o){return e(".pop-share.fontcolor-primary",{style:"display: block;"},[e(".w-hidden-main.w-hidden-medium.w-clearfix",[e("a.btn.btn-small.btn-terciary.btn-inline.u-right",{onclick:o.displayShareBox.toggle},"Fechar"),e(".fontsize-small.fontweight-semibold.u-marginbottom-30","Compartilhe este projeto")]),e(".w-widget.w-widget-twitter.w-hidden-small.w-hidden-tiny.share-block",[e('iframe[allowtransparency="true"][width="120px"][height="22px"][frameborder="0"][scrolling="no"][src="//platform.twitter.com/widgets/tweet_button.8d007ddfc184e6776be76fe9e5e52d69.en.html#_=1442425984936&count=horizontal&dnt=false&id=twitter-widget-1&lang=en&original_referer=https%3A%2F%2Fwww.catarse.me%2Fpt%2F'+o.project().permalink+"&size=m&text=Confira%20o%20projeto%20"+o.project().name+"%20no%20%40catarse&type=share&url=https%3A%2F%2Fwww.catarse.me%2Fpt%2F"+o.project().permalink+'%3Fref%3Dtwitter%26utm_source%3Dtwitter.com%26utm_medium%3Dsocial%26utm_campaign%3Dproject_share&via=catarse"]')]),e('a.w-hidden-small.widget-embed.w-hidden-tiny.fontsize-small.link-hidden.fontcolor-secondary[href="javascript:void(0);"]',{onclick:t.displayEmbed.toggle},"< embed >"),t.displayEmbed()?e(".embed-expanded.u-margintop-30",[e(".fontsize-small.fontweight-semibold.u-marginbottom-20","Insira um widget em seu site"),e(".w-form",[e('input.w-input[type="text"][value="<iframe frameborder="0" height="340px" src="https://www.catarse.me/pt/projects/'+o.project().project_id+'/embed" width="300px" scrolling="no"></iframe>"]')]),e(".card-embed",[e('iframe[frameborder="0"][height="350px"][src="/projects/'+o.project().project_id+'/embed"][width="300px"][scrolling="no"]')])]):"",o.project().permalink?e.component(li,{mobile:!0,url:"https://www.catarse.me/"+o.project().permalink+"?ref=facebook&utm_source=facebook.com&utm_medium=social&utm_campaign=project_share"}):"",e('a.w-hidden-main.w-hidden-medium.btn.btn-medium.btn-tweet.u-marginbottom-20[href="https://twitter.com/intent/tweet?text=Acabei%20de%20apoiar%20o%20projeto%20'+encodeURIComponent(o.project().name)+"%20https://www.catarse.me/"+o.project().permalink+'%3Fref%3Dtwitter%26utm_source%3Dtwitter.com%26utm_medium%3Dsocial%26utm_campaign%3Dproject_share"][target="_blank"]',[e("span.fa.fa-twitter")," Tweet"]),e('a.w-hidden-main.w-hidden-medium.btn.btn-medium[data-action="share/whatsapp/share"]',{href:"whatsapp://send?text="+encodeURIComponent("https://www.catarse.me/"+o.project().permalink+"/?ref=whatsapp&utm_source=whatsapp&utm_medium=social&utm_campaign=project_share")},[e("span.fa.fa-whatsapp")," Whatsapp"])])}},La={view:function(t,r){var n=r.project,i=n().address||{state_acronym:"",city:""};return o.isNull(i)?"":e("a.btn.btn-inline.btn-small.btn-transparent.link-hidden-light.u-marginbottom-10"+(r.isDark?".fontcolor-negative":"")+'[href="/pt/explore?pg_search='+i.state_acronym+'"]',{onclick:Tt.analytics.event({cat:"project_view",act:"project_location_link",lbl:i.city+" "+i.state_acronym,project:n()})},[e("span.fa.fa-map-marker")," "+i.city+", "+i.state_acronym])}},Ba={view:function(t,o){var r=o.project;return r?e("a.btn.btn-inline.btn-small.btn-transparent.link-hidden-light"+(o.isDark?".fontcolor-negative":"")+'[href="/pt/explore#by_category_id/'+r().category_id+'"]',{onclick:Tt.analytics.event({cat:"project_view",act:"project_category_link",lbl:r().category_name,project:r()})},[e("span.fa.fa-tag")," ",r().category_name]):""}},Ya={controller:function(){return{displayShareBox:Tt.toggleProp(!1,!0)}},view:function(t,o){var r=o.project,n=hr.isSubscription(r);return e("#project-highlight",[r().video_embed_url?e(".w-embed.w-video.project-video",{style:"min-height: 240px;"},[e('iframe.embedly-embed[itemprop="video"][src="'+r().video_embed_url+'"][frameborder="0"][allowFullScreen]')]):e(".project-image",{style:"background-image:url('"+(r().original_image||r().project_img)+"');"}),e(".w-hidden-small.w-hidden-tiny",[e.component(La,{project:r,isDark:n}),e.component(Ba,{project:r,isDark:n})]),n?null:e(".project-blurb",r().headline),e(".project-share.w-hidden-small.w-hidden-tiny",e(".u-marginbottom-30.u-text-center-small-only",[e(".w-inline-block.fontcolor-secondary.fontsize-smaller.u-marginright-20","Compartilhar:"),r().permalink?e.component(li,{"class":n?"btn-terciary-negative":null,url:"https://www.catarse.me/"+r().permalink+"?ref=facebook&utm_source=facebook.com&utm_medium=social&utm_campaign=project_share"}):"",r().permalink?e.component(li,{"class":n?"btn-terciary-negative":null,messenger:!0,url:"https://www.catarse.me/"+r().permalink+"?ref=facebook&utm_source=facebook.com&utm_medium=messenger&utm_campaign=project_share"}):"",e("button#more-share.btn.btn-inline.btn-medium.btn-terciary",{"class":n?"btn-terciary-negative":null,style:{transition:"all 0.5s ease 0s"},onclick:t.displayShareBox.toggle},["···"," Mais"]),t.displayShareBox()?e(Va,{project:r,displayShareBox:t.displayShareBox}):""]))])}},Ua={view:function(t,r){var n=r.project(),i=n.mode,a="aon"===i?"/assets/aon-badge.png":"sub"===i?"/assets/catarse_bootstrap/badge-sub-h.png":"/assets/flex-badge.png",s="aon"===i?"Campanha Tudo-ou-nada ":"Campanha Flexível ",l=o.isNull(n.goal)?"não definida":Tt.formatNumber(n.goal),c=function(t){return e.component(On,{el:t,text:"aon"===i?"Somente receberá os recursos se atingir ou ultrapassar a meta até o dia "+Tt.momentify(n.zone_expires_at,"DD/MM/YYYY")+".":"O realizador receberá todos os recursos quando encerrar a campanha, mesmo que não tenha atingido esta meta.",width:280})};return"sub"===i?e("#"+i,[o.isEmpty(n)?"":e('img.u-marginbottom-10[src="'+a+"\"][width='130']"),e(".fontsize-smallest.lineheight-tighter","Assine esse projeto mensalmente.")]):e("#"+i+".w-row",[e(".w-col.w-col-2.w-col-small-2.w-col-tiny-2",[o.isEmpty(n)?"":e('img[src="'+a+"\"][width='30']")]),e(".w-col.w-col-10.w-col-small-10.w-col-tiny-10",[e(".fontsize-base.fontweight-semibold","Meta R$ "+Tt.selfOrEmpty(l,"--")),e(".w-inline-block.fontsize-smallest",[o.isEmpty(n)?"":s,c("span.w-inline-block.tooltip-wrapper.fa.fa-question-circle.fontcolor-secondary")])])])}},Wa={controller:function(t){var o=e.prop(!1),r=t.project,n=w.filtersVM({project_id:"eq"}),i="reminder",a=e.prop(!1),s=function(){if(!Tt.getUser())return Tt.storeAction(i,r().project_id),Tt.navigateToDevise();var t=r().in_reminder?S.projectReminder.deleteOptions(n.parameters()):S.projectReminder.postOptions({project_id:r().project_id});o=w.loaderWithToken(t),o.load().then(function(){r().in_reminder=!r().in_reminder,r().in_reminder?(a(!0),setTimeout(function(){a(!1),e.redraw()},5e3)):a(!1)})};return Tt.callStoredAction(i)==r().project_id&&s(),n.project_id(r().project_id),{l:o,submitReminder:s,popNotification:a}},view:function(t,o){var r="button"===o.type?"":".u-text-center.u-marginbottom-30",n="button"===o.type?"w-button btn btn-terciary btn-no-border":"btn-link link-hidden fontsize-large",i=(o.hideTextOnMobile||!1,o.project),a=Tt.analytics.event({cat:"project_view",act:"project_floatingreminder_click",project:i()},t.submitReminder);return e("#project-reminder"+r,[e("a.btn.btn-small.btn-terciary.w-hidden-main.w-hidden-medium[data-ix='popshare'][href='#']",{onclick:a},i().in_reminder?[e("span.fa.fa-heart")," Lembrete ativo"]:[e("span.fa.fa-heart-o")," Lembrar-me"]),e('button[class="w-hidden-small w-hidden-tiny '+n+" "+(i().in_reminder?"link-hidden-success":"fontcolor-secondary")+' fontweight-semibold"]',{onclick:a},[t.l()?Tt.loader():e(i().in_reminder?"span.fa.fa-heart":"span.fa.fa-heart-o")]),t.popNotification()?e.component(Cn,{message:"Ok! Vamos te mandar um lembrete por e-mail 48 horas antes do fim da campanha"}):""])}},$a={controller:function(t){var o=t.project||e.prop({}),r=Tt.toggleProp(!1,!0),n="message",i=function(){return Tt.getUser()?void r(!0):(Tt.storeAction(n,o().project_id),Tt.navigateToDevise())};return Tt.callStoredAction(n)==o().project_id&&r(!0),{displayModal:r,sendMessage:i}},view:function(t,r){var n=r.project,i=[va,e.prop(o.extend(r.userDetails(),{project_id:n().id}))],a=r.userDetails();return e("#user-card",o.isEmpty(a)?"carregando...":e(".u-marginbottom-30.u-text-center-small-only",[t.displayModal()?e.component(zn,{displayModal:t.displayModal,content:i}):"",e(".w-row",[e(".w-col.w-col-4",[e('img.thumb.u-marginbottom-30.u-round[width="100"][itemprop="image"][src="'+mo.displayImage(a)+'"]')]),e(".w-col.w-col-8",[e('.fontsize-small.link-hidden.fontweight-semibold.u-marginbottom-10.lineheight-tight[itemprop="name"]',[e("a.link-hidden"+(r.isDark?".link-hidden-white":"")+'[href="'+(o.isNull(a.deactivated_at)?"/users/"+a.id:"javascript:void(0);")+'"]',{config:e.route,onclick:function(){return!!o.isNull(a.deactivated_at)&&(e.route("/users/"+a.id,{user_id:a.id}),void Tt.analytics.event({cat:"project_view",act:"project_creator_link",lbl:a.id,project:n()}))}},mo.displayName(a))]),o.isNull(a.deactivated_at)?e(".fontsize-smallest",[Tt.pluralize(a.total_published_projects," criado"," criados"),e.trust("&nbsp;&nbsp;|&nbsp;&nbsp;"),Tt.pluralize(a.total_contributed_projects," apoiado"," apoiados")]):"",o.isNull(a.deactivated_at)?e("ul.w-hidden-tiny.w-hidden-small.w-list-unstyled.fontsize-smaller.fontweight-semibold.u-margintop-20.u-marginbottom-20",[o.isEmpty(a.facebook_link)?"":e("li",[e("a.link-hidden"+(r.isDark?".link-hidden-white":"")+'[itemprop="url"][href="'+a.facebook_link+'"][target="_blank"]',{onclick:Tt.analytics.event({cat:"project_view",act:"project_creator_fb",lbl:a.facebook_link,project:n()})},"Perfil no Facebook")]),o.isEmpty(a.twitter_username)?"":e("li",[e("a.link-hidden"+(r.isDark?".link-hidden-white":"")+'[itemprop="url"][href="https://twitter.com/'+a.twitter_username+'"][target="_blank"]',{onclick:Tt.analytics.event({cat:"project_view",act:"project_creator_twitter",lbl:a.twitter_username,project:n()})},"Perfil no Twitter")]),o.map(a.links,function(t){var i=Tt.parseUrl(t.link);return o.isEmpty(i.hostname)?"":e("li",[e("a.link-hidden"+(r.isDark?".link-hidden-white":"")+'[itemprop="url"][href="'+t.link+'"][target="_blank"]',{onclick:Tt.analytics.event({cat:"project_view",act:"project_creator_otherlinks",lbl:t.link,project:n()})},i.hostname)])})]):"",o.isEmpty(a)?"":[o.isNull(a.deactivated_at)?e(_a,{enabledClass:"a.w-button.btn.btn-terciary"+(r.isDark?".btn-terciary-negative":"")+".btn-small..u-marginbottom-10",disabledClass:"a.w-button.btn.btn-terciary"+(r.isDark?".btn-terciary-negative":"")+".btn-small.u-marginbottom-10",follow_id:a.id,following:a.following_this_user}):"",e("a.w-button.btn.btn-terciary"+(r.isDark?".btn-terciary-negative":"")+".btn-small[href='javascript:void(0);']",{onclick:Tt.analytics.event({cat:"project_view",act:"project_creator_sendmsg",lbl:a.id,project:n()},t.sendMessage)},"Contato")],r.project().is_admin_role?e("p",a.email):""])])]))}},Ha=o.partial(Tt.i18nScope,"projects.project_sidebar"),Qa={controller:function(t){var o=t.project,r=function(e,t){if(!t){var r=void 0,n=0,i=0,a=0,s=o().pledged/o().progress,l=o().total_contributors/o().progress,c=document.getElementById("progressBar"),d=document.getElementById("pledged"),u=document.getElementById("contributors"),p=function(){n<=parseInt(o().progress)?(c.style.width=n+"%",d.innerText="R$ "+Tt.formatNumber(i),u.innerText=parseInt(a)+" pessoas",e.innerText=n+"%",i+=s,a+=l,n+=1):clearInterval(r)},m=function(){r=setInterval(p,28)};setTimeout(function(){m()},1800)}},n=function(){return hr.isSubscription(t.project)?(e.route("/projects/"+o().project_id+"/subscriptions/start"),!1):(Tt.navigateTo("/projects/"+o().project_id+"/contributions/new"),!1)};return{animateProgress:r,displayShareBox:Tt.toggleProp(!1,!0),navigate:n}},view:function(r,n){var i=n.project,a=i().elapsed_time,s=i().remaining_time,l=function(){var e={waiting_funds:"card-waiting",successful:"card-success",failed:"card-error",draft:"card-dark",in_analysis:"card-dark",approved:"card-dark"};return e[i().state]?"card u-radius zindex-10 "+e[i().state]:""},c=function(){var e={approved:t.t("display_status.approved",Ha()),online:Tt.existy(i().zone_expires_at)&&i().open_for_contributions?t.t("display_status.online",Ha({
date:Tt.momentify(i().zone_expires_at)})):"",failed:t.t("display_status.failed",Ha({date:Tt.momentify(i().zone_expires_at),goal:"R$ "+Tt.formatNumber(i().goal,2,3)})),rejected:t.t("display_status.rejected",Ha()),in_analysis:t.t("display_status.in_analysis",Ha()),successful:t.t("display_status.successful",Ha({date:Tt.momentify(i().zone_expires_at)})),waiting_funds:t.t("display_status.waiting_funds",Ha()),draft:t.t("display_status.draft",Ha())};return e[i().state]},d=hr.isSubscription(i),u=n.subscriptionData&&n.subscriptionData()?n.subscriptionData():e.prop(),p=d?o.find(n.goalDetails(),function(e){return e.value>u.amount_paid_for_valid_period})||o.last(n.goalDetails())||{value:"--"}:null,m=d?u.amount_paid_for_valid_period:i().pledged,f=d?u.amount_paid_for_valid_period/p.value*100:i().progress,w=d?u.total_subscriptions:i().total_contributors;return e("#project-sidebar.aside",[e(".project-stats",[e(".project-stats-inner"+(d?".dark":""),[e(".project-stats-info",[e(".u-marginbottom-20",[e("#pledged."+(d?"fontsize-larger":"fontsize-largest")+".fontweight-semibold.u-text-center-small-only",["R$ "+(m?Tt.formatNumber(m):"0"),d?e("span.fontsize-large"," por mês"):null]),d?e(".fontsize-small.u-text-center-small-only",[t.t("subscribers_call",Ha()),e("span#contributors.fontweight-semibold",t.t("contributors_count",Ha({count:w})))]):e(".fontsize-small.u-text-center-small-only",[t.t("contributors_call",Ha()),e("span#contributors.fontweight-semibold",t.t("contributors_count",Ha({count:w}))),!i().expires_at&&a?" em "+t.t("datetime.distance_in_words.x_"+a.unit,{count:a.total},Ha()):""])]),e(".meter",[e("#progressBar.meter-fill",{style:{width:f+"%"}})]),d?e(".fontsize-smaller.fontweight-semibold.u-margintop-10",(f?parseInt(f):"0")+"% de R$"+p.value+" por mês"):e(".w-row.u-margintop-10",[e(".w-col.w-col-5.w-col-small-6.w-col-tiny-6",[e(".fontsize-small.fontweight-semibold.lineheight-tighter",(f?parseInt(f):"0")+"%")]),e(".w-col.w-col-7.w-col-small-6.w-col-tiny-6.w-clearfix",[e(".u-right.fontsize-small.lineheight-tighter",s&&s.total?[e("span.fontweight-semibold",s.total),t.t("remaining_time."+s.unit,Ha({count:s.total}))]:"")])])]),e(".w-row",[e.component(Ua,{project:i})])]),i().open_for_contributions&&!n.hasSubscription?e(".back-project-btn-div",[e(".back-project--btn-row",[e('a#contribute_project_form.btn.btn-large.u-marginbottom-20[href="javascript:void(0);"]',{onclick:Tt.analytics.event({cat:"contribution_create",act:"contribution_button_click",project:i()},r.navigate)},t.t("submit_"+i().mode,Ha()))]),d?null:e(".back-project-btn-row-right",e.component(Wa,{project:i,type:"link"}))]):"",e(".friend-backed-card.project-page",[!o.isUndefined(i())&&i().contributed_by_friends?e.component(qn,{project:i(),wrapper:"div"}):""]),e('div[class="fontsize-smaller u-marginbottom-30 '+l()+'"]',c())]),e(".project-share.w-hidden-main.w-hidden-medium",[e.component(La,{project:i}),e.component(Ba,{project:i}),e(".u-marginbottom-30.u-text-center-small-only",e("button.btn.btn-inline.btn-medium.btn-terciary"+(hr.isSubscription(i)?".btn-terciary-negative":""),{onclick:r.displayShareBox.toggle},"Compartilhar este projeto")),r.displayShareBox()?e(Va,{project:i,displayShareBox:r.displayShareBox}):""]),e(".user-c",e.component($a,{userDetails:n.userDetails,isDark:hr.isSubscription(i),project:i}))])}},Ga={view:function(t,r){var n=r.project,i=hr.isSubscription(n);return o.isUndefined(n())?e("div",""):e(".w-section.page-header"+(i?".transparent-background":""),[e(".w-container",[r.children,e('h1.u-text-center.fontsize-larger.fontweight-semibold.project-name[itemprop="name"]',Tt.selfOrEmpty(n().name||n().project_name)),i?e(".w-row",e(".w-col.w-col-6.w-col-push-3",e("p.fontsize-small.lineheight-tight.u-margintop-10.u-text-center",n().headline))):e('h2.u-text-center.fontsize-base.lineheight-looser[itemprop="author"]',["por ",n().user?mo.displayName(n().user):n().owner_public_name?n().owner_public_name:n().owner_name])])])}},Xa={controller:function(){var e=function(e,t){mo.toggleDelivery(e,t).then(function(){var e=t.reward_sent_at?"delivered":"undelivered";t.delivery_status="received"===t.delivery_status?e:"received"})};return{toggleDelivery:e}},view:function(t,o){var r=o.contribution;return R.canBeDelivered(r)?e(".u-text-center.w-col.w-col-1",{onclick:function(){return t.toggleDelivery(r.project_id,r)}},[e(".fontsize-smallest",e("a.checkbox-big"+("received"===r.delivery_status?".checkbox--selected.fa.fa-check.fa-lg":""),"")),e(".fontcolor-secondary.fontsize-smallest.lineheight-looser","Recebi!")]):e("")}},Ja=o.partial(Tt.i18nScope,"payment.state"),Ka=o.partial(Tt.i18nScope,"users.contribution_row"),Za={controller:function(e){var t=Tt.toggleProp(!1,!0),o=function(e,t){mo.toggleDelivery(e,t).then(function(){var e=t.reward_sent_at?"delivered":"undelivered";t.delivery_status="received"===t.delivery_status?e:"received"})};return{toggleAnonymous:mo.toggleAnonymous,displayModal:t,contribution:e.contribution,toggleDelivery:o}},view:function(r){var n=r.contribution,i=[va,e.prop({id:n.project_user_id,name:n.project_owner_name,project_id:n.project_id})],a=n.survey&&n.survey.finished_at,s=n.survey_answered_at;return o.isEmpty(n)?e("div",""):e("div",r.displayModal()?e.component(zn,{displayModal:r.displayModal,content:i}):"",[e(".card.w-row",[e(".u-marginbottom-20.w-col.w-col-3",[e(".u-marginbottom-10.w-row",[e(".u-marginbottom-10.w-col.w-col-4",e("a.w-inline-block[href='/"+n.permalink+"']",e("img.thumb-project.u-radius[alt='"+n.project_name+"'][src='"+n.project_image+"'][width='50']"))),e(".w-col.w-col-8",e(".fontsize-small.fontweight-semibold.lineheight-tight",e("a.link-hidden[href='/"+n.permalink+"']",n.project_name)))]),e("a.btn.btn-edit.btn-inline.btn-small.w-button[href='javascript:void(0);']",{onclick:function(){r.displayModal.toggle()}},t.t("contact_author",Ka()))]),e(".u-marginbottom-20.w-col.w-col-3",[e(".fontsize-base.fontweight-semibold.lineheight-looser","R$ "+n.value),e(".w-embed",e("div",[e(".w-hidden-main.w-hidden-medium.fontsize-smallest.fontweight-semibold",t.t("status",Ka())),e(".fontsize-smaller.fontweight-semibold",[e(".lineheight-tighter"),e("span.fa.fa-circle.fontsize-smallest."+("paid"===n.state?"text-success":"pending"===n.state?"text-waiting":"text-error"),e.trust("&nbsp;")),t.t(n.state,Ja({date:Tt.momentify(n[n.state+"_at"])}))]),e(".fontsize-smallest",n.installments>1?n.installments+" x R$ "+n.installment_value+" ":"","BoletoBancario"===n.payment_method?"Boleto Bancário":"Cartão de Crédito"),R.canShowReceipt(n)?e("a.alt-link.u-margintop-10[href='/projects/"+n.project_id+"/contributions/"+n.contribution_id+"/receipt'][target='__blank']",t.t("show_receipt",Ka())):"",n.gateway_data&&R.canShowSlip(n)?e("a.alt-link.u-margintop-10[href='"+n.gateway_data.boleto_url+"'][target='__blank']",t.t("print_slip",Ka())):"",n.gateway_data&&R.canGenerateSlip(n)?e("a.alt-link.u-margintop-10[href='/projects/"+n.project_id+"/contributions/"+n.contribution_id+"/second_slip'][target='__blank']",t.t("slip_copy",Ka())):"",e(".w-checkbox.fontsize-smallest.fontcolor-secondary.u-margintop-10",[e("input.w-checkbox-input[id='anonymous'][name='anonymous'][type='checkbox']"+(n.anonymous?"[checked='checked']":"")+"[value='1']",{onclick:function(){return r.toggleAnonymous(n.project_id,n)}}),e("label.w-form-label",t.t("anonymous",Ka()))])]))]),e(".u-marginbottom-20.w-col.w-col-3",[n.reward_id?[e(".fontsize-smallest.fontweight-semibold",n.reward_title),e("p.fontcolor-secondary.fontsize-smallest",e.trust(Tt.simpleFormat(n.reward_description.substring(0,90)+" (...)")))]:" "+t.t("no_reward",Ka())+" ",n.deliver_at?e(".fontsize-smallest",[e("span.fontweight-semibold",t.t("delivery_estimate",Ka())+" "),Tt.momentify(n.deliver_at,"MMMM/YYYY")]):"",R.canBeDelivered(n)?e(".fontsize-smallest",[e("span.fontweight-semibold",t.t("delivery_status",Ka())),e.trust("&nbsp;"),Tt.contributionStatusBadge(n)]):""]),e(Xa,{contribution:n}),n.survey?[!s&&a?e(".u-text-center.w-col.w-col-2",e(".fontsize-smaller.fontweight-semibold.lineheight-tighter",e("a.link-error[href='/contributions/"+n.contribution_id+"/surveys/"+n.survey.survey_id+"'][target='_blank']",[e("span[xmlns='http://www.w3.org/1999/xhtml']"),e("span.fa.fa-exclamation-circle[xmlns='http://www.w3.org/1999/xhtml']",""),e.trust("&nbsp;"),"Questionário",e("br"),"Não respondido"]))):s?e(".u-text-center.w-col.w-col-2",[e(".fontsize-smaller.fontweight-semibold.lineheight-tighter",e("a.link-hidden-dark[href='/contributions/"+n.contribution_id+"/surveys/"+n.survey.survey_id+"'][target='_blank']",["Questionário",e("br"),"Respondido"])),e(".fontcolor-secondary.fontsize-smallest","em "+Tt.momentify(s,"DD/MM/YYYY"))]):e(".u-text-center.w-col.w-col-2",e("a.btn.w-button[href='/contributions/"+n.contribution_id+"/surveys/"+n.survey.survey_id+"']",t.t("answer_survey",Ka())))]:""])])}},es={controller:function(e){var t=e.contribution,r=e.rewardDetails,n=o.findWhere(r(),{id:t.reward_id});return{contribution:t,chosenReward:n}},view:function(t,o){var r=o.contribution;return e(Za,{contribution:r})}},ts=e.prop([]),os=e.prop([]),rs=function(t){var o=t.data,r=e.prop(),n=36,i=74,a={id:e.prop(o.id||""),countryID:e.prop(o.country_id||n),stateID:e.prop(o.state_id||""),addressStreet:e.prop(o.address_street||""),addressNumber:e.prop(o.address_number||""),addressComplement:e.prop(o.address_complement||""),addressNeighbourhood:e.prop(o.address_neighbourhood||""),addressCity:e.prop(o.address_city||""),addressState:e.prop(o.address_state||""),addressZipCode:e.prop(o.address_zip_code||""),phoneNumber:e.prop(o.phone_number||"")};return{international:r,defaultCountryID:n,defaultForeignCountryID:i,fields:a,states:ts,countries:os}};rs.states=ts,rs.countries=os;var ns=_.partial(Tt.i18nScope,"projects.contributions.edit.errors"),is=e.prop(),as=S.commonPayment,ss=S.commonSubscriptionUpgrade,ls=S.commonPaymentInfo,cs=S.commonCreditCard,ds=S.commonCreditCards,us=function(e){return as.postWithToken({data:_.extend({},e,{payment_id:is()})},null,Tt.isDevEnv()?{"X-forwarded-For":"127.0.0.1"}:{})},ps=function(e){return ss.postWithToken({data:e},null,Tt.isDevEnv()?{"X-forwarded-For":"127.0.0.1"}:{})},ms=function(e){return cs.postWithToken({data:{card_hash:e}})},fs=function(t){return e.request({method:"PUT",url:"/users/"+t.id+".json",data:{user:t},config:Tt.setCsrfToken})},ws=function(e){var t=new window.PagarMe.creditCard;return t.cardHolderName=e.name(),t.cardExpirationMonth=e.expMonth(),t.cardExpirationYear=e.expYear(),t.cardNumber=e.number(),t.cardCVV=e.cvv(),t},bs=function(e,t){return{id:Tt.getUser().id,cpf:e.ownerDocument(),name:e.completeName(),address_attributes:{country_id:t.country_id,state_id:t.state_id,address_street:t.address_street,address_neighbourhood:t.address_neighbourhood,address_number:t.address_number,address_zip_code:t.address_zip_code,address_city:t.address_city,address_complement:t.address_complement,phone_number:t.phone_number}}},gs=function(o){return function(r){var n=r.message||t.t("submission.encryption_error",ns());o.isLoading(!1),o.submissionError(t.t("submission.error",ns({message:n}))),e.redraw()}},hs=function(e){return ls.postWithToken({id:e},null,Tt.isDevEnv()?{"X-forwarded-For":"127.0.0.1"}:{})},_s=function(e){return ds.getRowWithToken(Tt.idVM.id(e.id).parameters())},vs=10,ys=function(){var t=e.route.param("subscription_status");return"inactive"===t||"canceled"===t},js=function(t,o,r,n){return e.route("/projects/"+hr.currentProject().project_id+"/subscriptions/thank_you?project_id="+hr.currentProject().project_id+"&payment_method="+t+"&payment_confirmed="+o+(r?"&payment_id="+r:"")+(n&&!ys()?"&is_edit=1":""))},ks=function Gu(e,t,o,r){return vs<=0?e.resolve(js(o,!1,t,r)):void hs(t).then(function(n){return _.isNull(n.gateway_payment_method)||_.isUndefined(n.gateway_payment_method)?_.isNull(n.gateway_errors)?Tt.sleep(4e3).then(function(){return vs-=1,Gu(e,t,o)}):e.reject(_.first(n.gateway_errors)):e.resolve(js(n.gateway_payment_method,!0,t,r))})["catch"](function(){return e.reject({})})},xs=function(t,o){return function(r){var n=r.id,i=r.catalog_payment_id,a=e.deferred(),s=o?i:n;return s?(is(s),ks(a,s,t,o)):js(t,!1,null,o),a.promise}},zs=5,Ss=function Xu(e){return function(t){return zs<=0?e.reject({message:"Could not save card"}):(_s(t).then(function(o){var r=O(o,1),n=r[0];return _.isEmpty(n.gateway_data)?_.isEmpty(n.gateway_errors)?Tt.sleep(4e3).then(function(){return zs-=1,Xu(e)(t)}):e.reject(_.first(n.gateway_errors)):e.resolve({creditCardId:t})})["catch"](function(t){return e.reject({message:t.message})}),e)}},Cs=function(t,o){var r=e.deferred();return ms(t).then(Ss(r))["catch"](r.reject),r.promise},Es=function(t,o,r,n){if(!o)return!1;o.isLoading(!0),e.redraw();var i=_.first(document.querySelectorAll("[name=pagarme-encryption-key]")),a=i.getAttribute("content");window.PagarMe.encryption_key=a;var s=ws(o.creditCardFields),l=o.fields,c=l.address(),d=c.phone_number?c.phone_number.match(/\(([^)]*)\)/)[1]:null,u=c.phone_number?c.phone_number.substr(5,c.phone_number.length):null,p=c.state_id?_.findWhere(n.states(),{id:c.state_id}):c.address_state,m=_.findWhere(n.countries(),{id:c.country_id})||{};s.generateHash(function(t){var i={subscription:!0,anonymous:l.anonymous(),user_id:r.userCommonId,project_id:r.projectCommonId,amount:r.amount,payment_method:"credit_card",credit_card_owner_document:o.creditCardFields.cardOwnerDocument(),is_international:c.country_id!==n.defaultCountryID,customer:{name:l.completeName(),document_number:l.ownerDocument(),address:{neighborhood:c.address_neighbourhood,street:c.address_street,street_number:c.address_number,zipcode:c.address_zip_code,country:m.name,state:p.acronym?p.acronym:p,city:c.address_city,complementary:c.address_complement},phone:{ddi:"55",ddd:d,number:u}}};r.rewardCommonId&&_.extend(i,{reward_id:r.rewardCommonId}),r.subscription_id&&_.extend(i,{id:r.subscription_id});var a=function(t){var o=t.creditCardId,n=e.deferred();return o&&_.extend(i,{card_id:o.id,credit_card_id:o.id}),r.subscription_id?ps(i).then(n.resolve)["catch"](n.reject):us(i).then(n.resolve)["catch"](n.reject),n.promise};fs(bs(l,c)).then(function(){return Cs(t,o)}).then(a).then(xs(i.payment_method,Boolean(r.subscription_id)))["catch"](gs(o))})},Ps=function(t,o){t.isLoading(!0),e.redraw();var r=t.fields,n=r.address(),i=n.phone_number.match(/\(([^)]*)\)/)[1],a=n.phone_number.substr(5,n.phone_number.length),s=_.findWhere(rs.states(),{id:n.state_id}),l=(_.findWhere(rs.countries(),{id:n.country_id}),{subscription:!0,anonymous:r.anonymous(),user_id:o.userCommonId,project_id:o.projectCommonId,amount:o.amount,payment_method:"boleto",customer:{name:r.completeName(),document_number:r.ownerDocument(),address:{neighborhood:n.address_neighbourhood,street:n.address_street,street_number:n.address_number,zipcode:n.address_zip_code,country:"Brasil",state:s.acronym,city:n.address_city,complementary:n.address_complement},phone:{ddi:"55",ddd:i,number:a}}});o.rewardCommonId&&_.extend(l,{reward_id:o.rewardCommonId}),o.subscription_id&&_.extend(l,{id:o.subscription_id});var c=function(){var t=e.deferred();return o.subscription_id?ps(l).then(t.resolve)["catch"](t.reject):us(l).then(t.resolve)["catch"](t.reject),t.promise};fs(bs(r,n)).then(c).then(xs(l.payment_method,Boolean(o.subscription_id)))["catch"](gs(t))},Ms={sendCreditCardPayment:Es,sendSlipPayment:Ps,paymentInfo:hs},Ds={controller:function(t){var o=e.prop(!1),r=function(){var r=g.loaderWithToken(S.cancelSubscription.postOptions({id:t.subscription.id}));r.load().then(function(){o(!0),t.subscription.status="canceling",e.redraw()})};return{cancelSubscription:r,canceling:o}},view:function(t,o){var r=e(".modal-dialog-content",[e(".fontsize-megajumbo.u-text-center.u-marginbottom-20","🙁"),e(".fontsize-base.u-marginbottom-20",["Sua assinatura de ",e("span.fontweight-semibold","R$"+o.subscription.amount/100)," para o projeto ",e("span.fontweight-semibold",o.subscription.project.project_name)," foi cancelada. Como sua próxima data de vencimento é no dia "+Tt.momentify(o.subscription.next_charge_at,"DD/MM/YYYY")+", sua assinatura ainda estará ativa até este dia. Mas não se preocupe, que você não terá mais nenhuma cobrança em seu nome daqui pra frente.",e("br"),e("br"),"Se por algum motivo você quiser um reembolso de seu apoio mensal, entre em contato direto com ",e("a.alt-link[href='/users/"+o.subscription.project.project_user_id+"#about']",o.subscription.project.owner_name),".",e("br"),e("br"),"Até logo!"])]),n=[e(".modal-dialog-content",[e(".modal-dialog-nav-bottom",e(".w-row",[e(".w-col.w-col-2"),e(".u-text-center.w-col.w-col-5",e("a.btn.btn-large.u-marginbottom-20",{onclick:t.cancelSubscription},"Cancelar assinatura")),e(".w-col.w-col-3",e("a.btn.btn-large.u-marginbottom-20.btn-terciary.btn-no-border",{onclick:o.displayModal.toggle},"Voltar")),e(".w-col.w-col-2")])),e(".fontsize-base",["Tem certeza que você quer solicitar o cancelamento de sua assinatura de ",e("span.fontweight-semibold","R$"+o.subscription.amount/100)," para o projeto ",e("span.fontweight-semibold",o.subscription.project.project_name),"?"])])];return e("div",[e(".modal-dialog-header",e(".fontsize-large.u-text-center","Cancelar sua assinatura")),t.canceling()?r:n])}},qs=(o.partial(Tt.i18nScope,"payment.state"),o.partial(Tt.i18nScope,"users.contribution_row")),As={controller:function(t){var o=t.subscription,r=Tt.toggleProp(!1,!0),n=Tt.toggleProp(!1,!0),i=e.prop({}),a=w.filtersVM({project_id:"eq"}).project_id(o.project_external_id),s=w.loaderWithToken(S.project.getRowOptions(a.parameters()));if(s.load().then(function(e){o.project=e[0],i({id:o.project.project_user_id,name:o.project.owner_name,project_id:o.project.project_id})}),"boleto"===o.payment_method&&o.last_payment_id&&Ms.paymentInfo(o.last_payment_id).then(function(e){o.boleto_url=e.boleto_url,o.boleto_expiration_date=e.boleto_expiration_date,o.payment_status=e.status}),o.reward_external_id){var l=w.filtersVM({id:"eq"}).id(o.reward_external_id),c=w.loaderWithToken(S.rewardDetail.getRowOptions(l.parameters()));c.load().then(function(e){o.reward=e[0]})}return{toggleAnonymous:mo.toggleAnonymous,displayModal:r,displayCancelModal:n,subscription:o,contactModalInfo:i}},view:function(n){var i=n.subscription;return o.isEmpty(i)||o.isEmpty(i.project)?e("div",""):e("div",n.displayCancelModal()&&!o.isEmpty(n.contactModalInfo())?e.component(zn,{displayModal:n.displayCancelModal,content:[Ds,{displayModal:n.displayCancelModal,subscription:i}]}):"",n.displayModal()&&!o.isEmpty(n.contactModalInfo())?e.component(zn,{displayModal:n.displayModal,content:[va,n.contactModalInfo]}):"",[e(".card.w-row",[e(".u-marginbottom-20.w-col.w-col-3",[e(".u-marginbottom-10.w-row",[e(".u-marginbottom-10.w-col.w-col-4",e("a.w-inline-block[href='/"+i.project.permalink+"']",e("img.thumb-project.u-radius[alt='"+i.project.project_name+"'][src='"+i.project.project_img+"'][width='50']"))),e(".w-col.w-col-8",e(".fontsize-small.fontweight-semibold.lineheight-tight",[e("a.link-hidden[href='/"+i.project.permalink+"']",i.project.project_name),e('img[alt="Badge Assinatura"][src="/assets/catarse_bootstrap/badge-sub-h.png"]')]))]),e("a.btn.btn-edit.btn-inline.btn-small.w-button[href='javascript:void(0);']",{onclick:function(){n.displayModal.toggle()}},t.t("contact_author",qs()))]),e(".u-marginbottom-20.w-col.w-col-3",[e(".fontsize-base.fontweight-semibold.lineheight-looser","R$ "+Tt.formatNumber(parseFloat((i.checkout_data||i).amount)/100)+" por mês"),e(".fontcolor-secondary.fontsize-smaller.fontweight-semibold","Iniciou há "+r(i.created_at).locale("pt").fromNow(!0)),e(".u-marginbottom-10",[e(gn,{subscription:i}),e.trust("&nbsp;&nbsp;&nbsp;"),e(wn,{subscription:i})])]),e(".u-marginbottom-20.w-col.w-col-3",[i.reward?[e(".fontsize-smallest.fontweight-semibold",i.reward.title),e("p.fontcolor-secondary.fontsize-smallest",e.trust(Tt.simpleFormat(i.reward.description.substring(0,90)+" (...)")))]:i.reward_external_id?null:" "+t.t("no_reward",qs())+" "]),e(".u-marginbottom-10.u-text-center.w-col.w-col-3","started"===i.status?[e(".card-alert.fontsize-smaller.fontweight-semibold.u-marginbottom-10.u-radius",[e("span.fa.fa-exclamation-triangle"),e.trust("&nbsp;"),"Aguardando confirmação do pagamento"]),i.boleto_url?e("a.btn.btn-inline.btn-small.w-button[target=_blank][href="+i.boleto_url+"]","Imprimir boleto"):null]:"inactive"===i.status?["pending"===i.payment_status&&i.boleto_url&&i.boleto_expiration_date?[e(".card-alert.fontsize-smaller.fontweight-semibold.u-marginbottom-10.u-radius",[e("span.fa.fa-exclamation-triangle")," O boleto de sua assinatura vence dia "+Tt.momentify(i.boleto_expiration_date)]),e("a.btn.btn-inline.btn-small.w-button[target=_blank][href="+i.boleto_url+"]","Imprimir boleto")]:[e(".card-alert.fontsize-smaller.fontweight-semibold.u-marginbottom-10.u-radius",[e("span.fa.fa-exclamation-triangle"),e.trust("&nbsp;"),"Sua assinatura está inativa por falta de pagamento"]),e("a.btn.btn-inline.btn-small.w-button[target=_blank][href=/projects/"+i.project_external_id+"/subscriptions/start?subscription_id="+i.id+(i.reward_external_id?"&reward_id="+i.reward_external_id:"")+"&subscription_status="+i.status+"]","Assinar novamente")]]:"canceled"===i.status&&"online"==i.project.status?[e("a.btn.btn-terciary.u-marginbottom-20.btn-inline.w-button",{href:"/projects/"+i.project_external_id+"/subscriptions/start?subscription_id="+i.id+(i.reward_external_id?"&reward_id="+i.reward_external_id:"")+"&subscription_status="+i.status},"Reativar assinatura"),e(".card-error.fontsize-smaller.fontweight-semibold.u-marginbottom-10.u-radius",[e("span.fa.fa-exclamation-triangle"),e.trust("&nbsp;")," Você cancelou sua assinatura"])]:"canceling"===i.status?e(".u-radius.fontsize-smaller.u-marginbottom-10.fontweight-semibold.card-error",e("div",[e("span.fa.fa-exclamation-triangle"," ")," Sua assinatura será cancelada no dia "+Tt.momentify(i.next_charge_at,"DD/MM/YYYY")+". Até lá, ela ainda será considerada ativa."])):"active"===i.status?["pending"!==i.payment_status?e("a.btn.btn-terciary.u-marginbottom-20.btn-inline.w-button",{href:"/projects/"+i.project_external_id+"/subscriptions/start?"+(i.reward_external_id?"reward_id="+i.reward_external_id:"")+"&subscription_id="+i.id+"&subscription_status="+i.status},"Editar assinatura"):"","pending"===i.payment_status&&i.boleto_url&&i.boleto_expiration_date?[r(i.boleto_expiration_date).isBefore(Date.now())?e(".card-alert.fontsize-smaller.fontweight-semibold.u-marginbottom-10.u-radius",[e("span.fa.fa-exclamation-triangle")," O boleto de sua assinatura venceu dia "+Tt.momentify(i.boleto_expiration_date)]):[e(".card-alert.fontsize-smaller.fontweight-semibold.u-marginbottom-10.u-radius",[e("span.fa.fa-exclamation-triangle")," O boleto de sua assinatura vence dia "+Tt.momentify(i.boleto_expiration_date)]),e("a.btn.btn-inline.btn-small.u-marginbottom-20.w-button[target=_blank][href="+i.boleto_url+"]","Imprimir boleto")]]:"",e("button.btn-link.fontsize-smallest.link-hidden-light",{onclick:function(){n.displayCancelModal.toggle()}},"Cancelar assinatura")]:null)])])}},Ts={controller:function(e){var t=e.subscription;return{subscription:t}},view:function(t,o){var r=o.subscription;return e(As,{subscription:r})}},Rs={controller:function(e){var t=e.project,r=Tt.getUser(),n=e.userProjectSubscriptions,i=e.hasSubscription;return Tt.isProjectPage()&&r&&!o.isUndefined(t())&&(hr.isSubscription(t)||R.getUserProjectContributions(r.user_id,t().project_id,["paid","refunded","pending_refund"]).then(e.projectContributions)),{hasSubscription:i,userProjectSubscriptions:n,projectContributions:e.projectContributions,showContributions:Tt.toggleProp(!1,!0)}},view:function(t,r){var n=r.project,i=r.rewardDetails,a=o.filter(t.userProjectSubscriptions(),function(e){return"active"===e.status}),s=o.sortBy(t.userProjectSubscriptions(),function(e){return o.indexOf(["active","started","canceling","inactive","canceled"],e.status)}),l=!o.isEmpty(t.projectContributions())||t.hasSubscription()?e(".card.card-terciary.u-radius.u-marginbottom-40"+(hr.isSubscription(n)?".fontcolor-primary":""),[e(".fontsize-small.u-text-center",[e("span.fa.fa-thumbs-up"),e("span.fontweight-semibold",hr.isSubscription(n)?" Você tem uma assinatura neste projeto! ":" Você é apoiador deste projeto! "),e("a.alt-link[href='javascript:void(0);']",{onclick:t.showContributions.toggle},"Detalhes")]),t.showContributions()?e(".u-margintop-20.w-row",hr.isSubscription(n)?o.map(a.length>0?a:s,function(t){return e.component(Ts,{subscription:t,project:n()})}):o.map(t.projectContributions(),function(t){return e.component(es,{contribution:t,rewardDetails:i})})):""]):"",c=Boolean(n().cover_image);return o.isUndefined(n())?e(""):e("#project-header",[e(".w-section.section-product."+n().mode),e((hr.isSubscription(n)?".dark":"")+".project-main-container",{"class":c?"project-with-background":null,style:c?'background-image: linear-gradient(180deg, rgba(0, 4, 8, .82), rgba(0, 4, 8, .82)), url("'+n().cover_image+'");':null},[e(Ga,{project:n,children:l}),e(".w-section.project-main"+(hr.isSubscription(n)?".transparent-background":""),[e(".w-container",[e(".w-row",[e(".w-col.w-col-8.project-highlight",e.component(Ya,{project:n})),e(".w-col.w-col-4",e.component(Qa,{project:n,hasSubscription:t.hasSubscription(),subscriptionData:r.subscriptionData,userDetails:r.userDetails,goalDetails:r.goalDetails}))])])])])])}},Is=o.partial(Tt.i18nScope,"projects.project_sidebar"),Ns={controller:function(t){var o="project-nav-fixed",r=e.prop(!1),n=e.prop(-1),i=t.project,a=function(e){return function(){var t=e.getBoundingClientRect();window.scrollY<=n()&&r()&&(n(-1),r(!1),e.classList.remove(o)),(t.top<0||window.scrollY>n()&&n()>0)&&(r()||(n(window.scrollY),r(!0),e.classList.add(o)))}},s=function(e,t){if(!t){var o=a(e);window.addEventListener("scroll",o)}},l=function(t){return t.preventDefault(),hr.isSubscription(i)?(e.route("/projects/"+i().project_id+"/subscriptions/start"),!1):(Tt.navigateTo("/projects/"+i().project_id+"/contributions/new"),!1)};return{navDisplay:s,isFixed:r,navigate:l}},view:function(r,n){var i=n.project,a=n.rewardDetails;return e("nav-wrapper",i()?[e(".w-section.project-nav",{config:r.navDisplay},[e(".w-container",[e(".w-row",[e(".w-col.w-col-8",[o.isEmpty(a())?e('a[id="rewards-link"][class="w-hidden-main w-hidden-medium dashboard-nav-link mf '+(Tt.hashMatch("#contribution_suggestions")||Tt.mobileScreen()&&Tt.hashMatch("")?"selected":"")+'"][href="/'+i().permalink+'#contribution_suggestions"]',{style:"float: left;",onclick:Tt.analytics.event({cat:"project_view",act:"project_contribsuggestions_view",project:i()})},"Valores Sugeridos"):e('a[id="rewards-link"][class="w-hidden-main w-hidden-medium dashboard-nav-link mf  '+(Tt.hashMatch("#rewards")||Tt.mobileScreen()&&Tt.hashMatch("")?"selected":"")+'"][href="/'+i().permalink+'#rewards"]',{style:"float: left;",onclick:Tt.analytics.event({cat:"project_view",act:"project_rewards_view",project:i()})},"Recompensas"),e('a[id="about-link"][class="dashboard-nav-link mf '+(Tt.hashMatch("#about")||!Tt.mobileScreen()&&Tt.hashMatch("")?"selected":"")+'"][href="#about"]',{style:"float: left;",onclick:Tt.analytics.event({cat:"project_view",act:"project_about_view",project:i()})},"Sobre"),e('a[id="posts-link"][class="dashboard-nav-link mf '+(Tt.hashMatch("#posts")?"selected":"")+'"][href="/'+i().permalink+'#posts"]',{style:"float: left;",onclick:Tt.analytics.event({cat:"project_view",act:"project_posts_view",project:i()})},["Novidades ",e("span.badge",i()?i().posts_count:"")]),e('a[id="contributions-link"][class="w-hidden-small w-hidden-tiny dashboard-nav-link mf '+(Tt.hashMatch("#contributions")?"selected":"")+'"][href="#contributions"]',{style:"float: left;",onclick:Tt.analytics.event({cat:"project_view",act:"project_contributions_view",project:i()})},hr.isSubscription(i)?["Assinantes ",e("span.badge.w-hidden-small.w-hidden-tiny",n.subscriptionData()?n.subscriptionData().total_subscriptions:"-")]:["Apoiadores ",e("span.badge.w-hidden-small.w-hidden-tiny",i()?i().total_contributors:"-")]),e('a[id="comments-link"][class="dashboard-nav-link mf '+(Tt.hashMatch("#comments")?"selected":"")+'"][href="#comments"]',{style:"float: left;",onclick:Tt.analytics.event({cat:"project_view",act:"project_comments_view",project:i()})},["Comentários ",i()?e('fb:comments-count[href="http://www.catarse.me/'+i().permalink+'"][class="badge project-fb-comment w-hidden-small w-hidden-tiny"][style="display: inline"]',e.trust("&nbsp;")):"-"])]),i()?e(".w-col.w-col-4.w-hidden-small.w-hidden-tiny",i().open_for_contributions&&!n.hasSubscription()?[e(".w-row.project-nav-back-button",[hr.isSubscription(i)?e(".w-col.w-col-12",[e('a.w-button.btn[href="/projects/'+i().project_id+'/subscriptions/start"]',{onclick:Tt.analytics.event({cat:"contribution_create",act:"contribution_floatingbtn_click",project:i()},r.navigate)},t.t("submit_"+i().mode,Is()))]):e(".w-col.w-col-6.w-col-medium-8",[e('a.w-button.btn[href="/projects/'+i().project_id+'/contributions/new"]',{onclick:Tt.analytics.event({cat:"contribution_create",act:"contribution_floatingbtn_click",project:i()})},"Apoiar ‍este projeto")]),e(".w-col.w-col-6.w-col-medium-4",{onclick:Tt.analytics.event({cat:"project_view",act:"project_floatingreminder_click",project:i()})},[hr.isSubscription(i)?null:e.component(Wa,{project:i,type:"button",hideTextOnMobile:!0})])])]:""):""])])]),r.isFixed()&&!i().is_owner_or_admin?e(".w-section.project-nav"):""]:"")}},Os={view:function(t,r){var n=r.project(),i=function(e){return"/projects/"+n.project_id+"/contributions/new?value="+100*e},a=[10,25,50,100];return e("#suggestions",o.map(a,function(t){return n?e((n.open_for_contributions?'a[href="'+i(t)+'"].card-reward':"")+".card-big.card-secondary.u-marginbottom-20",[e(".fontsize-larger","R$ "+t)]):""}))}},Fs={controller:function(t){var o=e.prop({}),r=t.contribution.user_external_id;return t.isSubscription&&mo.fetchUser(r,!0,o).then(function(){t.contribution.data.profile_img_thumbnail=o().profile_img_thumbnail,t.contribution.data.total_contributed_projects+=o().total_contributed_projects,t.contribution.data.total_published_projects+=o().total_published_projects}),{userDetails:o}},view:function(t,r){var n=r.contribution;return e(".card.card-backer.u-marginbottom-20.u-radius.u-text-center",[e('a[href="/users/'+n.user_id+'"][style="display: block;"]',{onclick:Tt.analytics.event({cat:"project_view",act:"project_backer_link",lbl:n.user_id,project:r.project()})},[e('img.thumb.u-marginbottom-10.u-round[src="'+(o.isEmpty(n.data.profile_img_thumbnail)?"/assets/catarse_bootstrap/user.jpg":n.data.profile_img_thumbnail)+'"]')]),e('a.fontsize-base.fontweight-semibold.lineheigh-tight.link-hidden-dark[href="/users/'+n.user_id+'"]',{onclick:Tt.analytics.event({cat:"project_view",act:"project_backer_link",lbl:n.user_id,project:r.project()})},mo.displayName(n.data)),e(".fontcolor-secondary.fontsize-smallest.u-marginbottom-10",Tt.selfOrEmpty(n.data.city)+", "+Tt.selfOrEmpty(n.data.state)),e(".fontsize-smaller",[e("span.fontweight-semibold",n.data.total_contributed_projects)," apoiados  |  ",e("span.fontweight-semibold",n.data.total_published_projects)," criado"]),e(".btn-bottom-card.w-row",[e(".w-col.w-col-3.w-col-small-4.w-col-tiny-3"),e(".w-col.w-col-6.w-col-small-4.w-col-tiny-6",[e(_a,{follow_id:n.user_id,following:n.is_follow})]),e(".w-col.w-col-3.w-col-small-4.w-col-tiny-3")])])}},Vs=o.partial(Tt.i18nScope,"projects.contributions"),Ls={controller:function(t){var r=e.prop([]),n=hr.isSubscription(t.project())?v.paginationVM(S.projectSubscriber):w.paginationVM(S.contributor),i=w.filtersVM({project_id:"eq"}),a=w.filtersVM({status:"in",project_id:"eq"}),s=w.filtersVM({project_id:"eq"}),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[[]],r=0;return o.map(e,function(e,o){t[r].length>=3&&(r+=1,t[r]=[]),t[r].push(e)}),t},c=e.prop({});hr.isSubscription(t.project())?a.project_id(t.project().common_id).status("active"):s.project_id(t.project().project_id),i.project_id(t.project().project_id),n.collection().length||n.firstPage(hr.isSubscription(t.project())?a.parameters():s.parameters());var d=w.loader(S.projectContributionsPerDay.getRowOptions(i.parameters()));
d.load().then(r);var u=[["Estado","Apoios","R$ apoiados (% do total)"]],p=function(t){return o.isEmpty(t)?[]:o.map(o.first(t).source,function(t){var o=[];return o.push(t.state_acronym||"Outro/other"),o.push(t.total_contributions),o.push([t.total_contributed,[e('input[type="hidden"][value="'+t.total_contributed+'"'),"R$ ",Tt.formatNumber(t.total_contributed,2,3),e("span.w-hidden-small.w-hidden-tiny"," ("+t.total_on_percentage.toFixed(2)+"%)")]]),u.push(o)})},m=w.loader(S.projectContributionsPerLocation.getRowOptions(i.parameters()));m.load().then(p);var f=w.loader(S.projectContributiorsStat.getRowOptions(i.parameters()));return f.load().then(function(e){return c(o.first(e))}),{listVM:n,filterVM:s,groupedCollection:l,lContributionsStats:f,contributionsPerLocationTable:u,lContributionsPerLocation:m,contributionsPerDay:r,lContributionsPerDay:d,contributionsStats:c}},view:function(r,n){var i=r.listVM,a=hr.isSubscription(n.project())?n.subscriptionData():r.contributionsStats(),s=r.groupedCollection(i.collection());return e("#project_contributions",e("#contributions_top",[e(".section.w-section",e(".w-container",e(".w-row",r.lContributionsStats()?Tt.loader():o.isEmpty(a)?"":[e(".u-marginbottom-20.u-text-center-small-only.w-col.w-col-6",[e(".fontsize-megajumbo",hr.isSubscription(n.project())?a.total_subscriptions:a.total),e(".fontsize-large",t.t("people_back."+n.project().mode,Vs()))]),e(".w-col.w-col-6",e(".card.card-terciary.u-radius",e(".w-row",[e(".u-marginbottom-20.w-col.w-sub-col.w-col-6.w-col-small-6",[e(".fontweight-semibold.u-marginbottom-10",t.t("new_backers."+n.project().mode,Vs())),e(".fontsize-largest.u-marginbottom-10",Math.floor(a.new_percent)+"%"),e(".fontsize-smallest",t.t("new_backers_explanation."+n.project().mode,Vs()))]),e(".w-col.w-sub-col.w-col-6.w-col-small-6",[e(".divider.u-marginbottom-20.w-hidden-main.w-hidden-medium.w-hidden-small"),e(".fontweight-semibold.u-marginbottom-10",t.t("recurring_backers."+n.project().mode,Vs())),e(".fontsize-largest.u-marginbottom-10",Math.ceil(a.returning_percent)+"%"),e(".fontsize-smallest",t.t("recurring_backers_explanation."+n.project().mode,Vs()))])])))]))),e(".divider.w-section"),e(".section.w-section",e(".w-container",[e(".fontsize-large.fontweight-semibold.u-marginbottom-40.u-text-center",t.t("backers."+n.project().mode,Vs())),e(".project-contributions.w-clearfix",o.map(s,function(t,r){return e(".w-row",o.map(t,function(t){return e(".project-contribution-item.w-col.w-col-4",[e(Fs,{project:n.project,contribution:t,isSubscription:hr.isSubscription(n.project())})])}))})),e(".w-row.u-marginbottom-40.u-margintop-20",[e(".w-col.w-col-2.w-col-push-5",[i.isLoading()?Tt.loader():i.isLastPage()?"":e("button#load-more.btn.btn-medium.btn-terciary",{onclick:i.nextPage},"Carregar mais")])])]))]),hr.isSubscription(n.project())?"":e(".before-footer.bg-gray.section.w-section",e(".w-container",[e(".w-row.u-marginbottom-60",[e(".w-col.w-col-12.u-text-center",{style:{"min-height":"300px"}},[r.lContributionsPerDay()?Tt.loader():e.component(oi,{collection:r.contributionsPerDay,label:"R$ arrecadados por dia",dataKey:"total_amount",xAxis:function(e){return Tt.momentify(e.paid_at)},emptyState:"Apoios não contabilizados"})])]),e(".w-row",e(".w-col.w-col-12.u-text-center",[e(".fontweight-semibold.u-marginbottom-10.fontsize-large.u-text-center","De onde vem os apoios"),r.lContributionsPerLocation()?Tt.loader():o.isEmpty(o.rest(r.contributionsPerLocationTable))?"":e.component(ri,{table:r.contributionsPerLocationTable,defaultSortIndex:-2})]))])))}},Bs=o.partial(Tt.i18nScope,"projects.contributions"),Ys={controller:function(t){var o="selectedReward",r=t.reward,n=Bo,i=e.prop(0),a=e.prop(""),s=function(e){return i(i()===e?0:e),!1},l=function(e,t){return!t&&e.focus()},c=function(e){a(e);var t=n.shippingFeeForCurrentReward(a)?Number(n.shippingFeeForCurrentReward(a).value):0,o=Number(n.selectedReward().minimum_value);n.applyMask(""+Tt.formatNumber(t+o,2,3))},d=function(){var t=Tt.monetaryToFloat(n.contributionValue),o=Bo.hasShippingOptions(n.selectedReward())?n.shippingFeeForCurrentReward(a):{value:0};if(!a()&&Bo.hasShippingOptions(n.selectedReward()))n.error("Por favor, selecione uma opção de frete válida.");else if(t<n.selectedReward().minimum_value+o.value)n.error("O valor de apoio para essa recompensa deve ser de no mínimo R$"+n.selectedReward().minimum_value+" "+(hr.isSubscription(hr.currentProject())?"":"+ frete R$"+Tt.formatNumber(o.value,2,3))+" ");else{n.error("");var r=window.encodeURIComponent(String(t).replace(".",","));if(hr.isSubscription(hr.currentProject()))return n.contributionValue(t),e.route("/projects/"+hr.currentProject().project_id+"/subscriptions/checkout",{contribution_value:t,reward_id:n.selectedReward().id}),!1;Tt.navigateTo("/projects/"+hr.currentProject().project_id+"/contributions/fallback_create?contribution%5Breward_id%5D="+n.selectedReward().id+"&contribution%5Bvalue%5D="+r+"&contribution%5Bshipping_fee_id%5D="+o.id)}return!1},u=function(){return n.selectedReward()&&n.selectedReward().id===r.id},p=function(){return i()===r.id},m=function(){return r.description.length>110};if(Tt.getStoredObject(o)){var f=Tt.getStoredObject(o),w=f.value;Tt.removeStoredObject(o),n.selectedReward(r),n.contributionValue(Tt.applyMonetaryMask(w+",00")),d()}return n.getStates(),{setInput:l,reward:r,submitContribution:d,toggleDescriptionExtended:s,isRewardOpened:u,isLongDescription:m,isRewardDescriptionExtended:p,selectDestination:c,selectedDestination:a,error:n.error,applyMask:n.applyMask,selectReward:n.selectReward,locationOptions:n.locationOptions,contributionValue:n.contributionValue}},view:function(r,n){var i=r.reward,a=n.project,s=hr.isSubscription(a);return e('div[class="'+(Tt.rewardSouldOut(i)||n.hasSubscription()?"card-gone":"card-reward "+(a.open_for_contributions?"clickable":""))+' card card-secondary u-marginbottom-10"]',{onclick:Tt.analytics.event({cat:"contribution_create",act:"contribution_reward_click",lbl:i.minimum_value,project:a,extraData:{reward_id:i.id,reward_value:i.minimum_value}},r.selectReward(i)),config:r.isRewardOpened(i)?Tt.scrollTo():Function.prototype},[i.minimum_value>=100&&!s?e(".tag-circle-installment",[e(".fontsize-smallest.fontweight-semibold.lineheight-tightest","3x"),e(".fontsize-mini.lineheight-tightest","s/ juros")]):"",e(".u-marginbottom-20",[e(".fontsize-base.fontweight-semibold","R$ "+Tt.formatNumber(i.minimum_value)+" ou mais"+(s?" por mês":""))]),e(".fontsize-smaller.fontweight-semibold",i.title),e(".fontsize-smaller.reward-description"+(Tt.rewardSouldOut(i)?"":".fontcolor-secondary"),{"class":r.isLongDescription()?r.isRewardOpened()?"opened "+(r.isRewardDescriptionExtended()?"extended":""):"":"opened extended"},e.trust(Tt.simpleFormat(Tt.strip(i.description)))),r.isLongDescription()&&r.isRewardOpened()?e('a[href="javascript:void(0);"].alt-link.fontsize-smallest.gray.link-more.u-marginbottom-20',{onclick:function(){return r.toggleDescriptionExtended(i.id)}},[r.isRewardDescriptionExtended()?"menos ":"mais ",e("span.fa.fa-angle-down",{"class":r.isRewardDescriptionExtended()?"reversed":""})]):"",s?null:e(".u-marginbottom-20.w-row",[e(".w-col.w-col-6",o.isEmpty(i.deliver_at)?"":[e(".fontcolor-secondary.fontsize-smallest",e("span","Entrega prevista:")),e(".fontsize-smallest",Tt.momentify(i.deliver_at,"MMM/YYYY"))]),e(".w-col.w-col-6",Bo.hasShippingOptions(i)||"presential"===i.shipping_options?[e(".fontcolor-secondary.fontsize-smallest",e("span","Envio:")),e(".fontsize-smallest",t.t("shipping_options."+i.shipping_options,Bs()))]:"")]),i.maximum_contributions>0?[Tt.rewardSouldOut(i)?e(".u-margintop-10",[e("span.badge.badge-gone.fontsize-smaller","Esgotada")]):e(".u-margintop-10",[e("span.badge.badge-attention.fontsize-smaller",[e("span.fontweight-bold","Limitada"),a.open_for_contributions?" ("+Tt.rewardRemaning(i)+" de "+i.maximum_contributions+" disponíveis)":""])])]:"",e(".fontcolor-secondary.fontsize-smallest.fontweight-semibold",Tt.pluralize.apply(null,s?[i.paid_count," assinante"," assinantes"]:[i.paid_count," apoio"," apoios"])),i.waiting_payment_count>0?e(".maximum_contributions.in_time_to_confirm.clearfix",[e(".pending.fontsize-smallest.fontcolor-secondary",Tt.pluralize(i.waiting_payment_count," apoio em prazo de confirmação"," apoios em prazo de confirmação."))]):"",!a.open_for_contributions||Tt.rewardSouldOut(i)||n.hasSubscription()?"":[r.isRewardOpened()?e(".w-form",[e("form.u-margintop-30",{onsubmit:r.submitContribution},[e(".divider.u-marginbottom-20"),Bo.hasShippingOptions(i)?e("div",[e(".fontcolor-secondary.u-marginbottom-10","Local de entrega"),e("select.positive.text-field.w-select",{onchange:e.withAttr("value",r.selectDestination),value:r.selectedDestination()},o.map(r.locationOptions(i,r.selectedDestination),function(t){return e("option",{selected:t.value===r.selectedDestination(),value:t.value},[t.name+" ",""!=t.value?"+R$"+Tt.formatNumber(t.fee,2,3):null])}))]):"",e(".fontcolor-secondary.u-marginbottom-10","Valor do apoio"+(s?" mensal":"")),e(".w-row.u-marginbottom-20",[e(".w-col.w-col-3.w-col-small-3.w-col-tiny-3",e(".back-reward-input-reward.placeholder","R$")),e(".w-col.w-col-9.w-col-small-9.w-col-tiny-9",e('input.w-input.back-reward-input-reward[type="tel"]',{config:r.setInput,onkeyup:e.withAttr("value",r.applyMask),value:r.contributionValue()}))]),e('input.w-button.btn.btn-medium[type="submit"][value="Continuar >"]'),r.error().length>0?e(".text-error",[e("br"),e("span.fa.fa-exclamation-triangle")," "+r.error()]):""])]):""]])}},Us={controller:function(t){var r=Tt.toggleProp(!1,!0),n=e.prop(!1),i=e.prop(!1),a=Tt.getUser()||{},s=e.prop(a.email),l=e.prop(""),c=e.prop(""),d=e.prop(!1),u=e.prop(!1),p="report",m=hr.currentProject(),f=m&&Tt.callStoredAction(p)==m.project_id,b=function(){return o.isEmpty(a)?(Tt.storeAction(p,m.project_id),Tt.navigateToDevise()):void r.toggle()},g=function(){var e=!0;return u(!1),d(!1),o.isEmpty(c())&&(d(!0),e=!1),o.isEmpty(l())&&(u(!0),e=!1),e},h=function(){if(!g())return!1;i(!0);var e=S.projectReport.postOptions({email:s(),details:l(),reason:c(),project_id:m.project_id}),t=w.loaderWithToken(e);return t.load().then(n(!0)),i(!1),!1},_=function(e,t){!t&&f&&Tt.animateScrollTo(e)};return!o.isEmpty(a)&&f&&r(!0),{checkScroll:_,checkLogin:b,displayForm:r,sendSuccess:n,submitDisabled:i,sendReport:h,user:a,detailsError:u,reasonError:d,details:l,reason:c}},view:function(t,o){return e(".card.card-terciary.u-radius",[e(".fontsize-small.u-marginbottom-20",["Este projeto desrespeita",e.trust("&nbsp;"),e("a.alt-link[href='http://suporte.catarse.me/hc/pt-br/articles/202387638'][target='_blank']","nossas regras? ")]),t.sendSuccess()?e(".w-form",e("p","Obrigado! A sua denúncia foi recebida.")):[e(".a.w-button.btn.btn-medium.btn-terciary.btn-inline[href='javascript:void(0);']",{onclick:t.checkLogin},"Denunciar este projeto"),t.displayForm()?e("#report-form.u-margintop-30",e(".w-form",e("form",{onsubmit:t.sendReport,config:t.checkScroll},[e(".fontsize-small.fontweight-semibold.u-marginbottom-10","Por que você está denunciando este projeto?"),e("select.w-select.text-field.positive[required='required']",{onchange:e.withAttr("value",t.reason)},[e("option[value='']","Selecione um motivo"),e("option[value='Violação de propriedade intelectual']","Violação de propriedade intelectual"),e("option[value='Calúnia, injúria, difamação ou discriminação']","Calúnia, injúria, difamação ou discriminação"),e("option[value='Escopo de projeto proibido']","Escopo de projeto proibido"),e("option[value='Recompensas proibidas']","Recompensas proibidas"),e("option[value='Cenas de sexo explícitas e gratuitas']","Cenas de sexo explícitas e gratuitas"),e("option[value='Abuso de SPAM']","Abuso de SPAM"),e("option[value='Outros']","Outros")]),t.reasonError()?e(Hi,{message:"Selecione um motivo"}):"",e("textarea.w-input.text-field.positive.u-marginbottom-30",{placeholder:"Por favor, dê mais detalhes que nos ajudem a identificar o problema",onchange:e.withAttr("value",t.details)}),e(".w-row",t.detailsError()?e(Hi,{message:"Informe os detalhes da denúncia"}):""),e("input.w-button.btn.btn-medium.btn-inline.btn-dark[type='submit'][value='Enviar denúncia']",{disabled:t.submitDisabled()})]))):""]])}},Ws={view:function(t,r){var n=r.project()||{open_for_contributions:!1};return e("#rewards",[e(".reward.u-marginbottom-30",o.map(o.sortBy(r.rewardDetails(),function(e){return Number(e.row_order)}),function(t){return e(Ys,{reward:t,project:n,hasSubscription:r.hasSubscription})})),r.showReport?e.component(Us):null])}},$s={controller:function(t){var r=t.subscriptionData()||{amount_paid_for_valid_period:0},n=t.goalDetails().length>0?o.findIndex(t.goalDetails(),function(e){return e.value>r.amount_paid_for_valid_period}):0,i=e.prop(n),a=function(){i()<t.goalDetails().length-1&&i(i()+1)},s=function(){i()>0&&(i(i()-1),e.redraw())};return i()===-1&&i(t.goalDetails().length-1),{currentGoalIndex:i,nextGoal:a,previousGoal:s,subscriptionData:r}},view:function(t,o){var r=o.goalDetails().length>0?o.goalDetails():[{title:"N/A",value:"",description:""}],n=t.subscriptionData,i=t.currentGoalIndex,a=n.amount_paid_for_valid_period/r[i()].value*100;return e("div",e(".card.u-marginbottom-30.u-radius"+o.style,[e(".w-clearfix",[e(".u-right",[e("button.btn.btn-inline.btn-small.btn-terciary.fa.fa-angle-left.w-button",{onclick:t.previousGoal,"class":0===i()?"btn-desactivated":""}),e("button.btn.btn-inline.btn-small.btn-terciary.fa.fa-angle-right.w-button",{onclick:t.nextGoal,"class":i()===r.length-1?"btn-desactivated":""})]),e(".fontsize-base.fontweight-semibold.u-marginbottom-20.w-hidden-small.w-hidden-tiny",e("span","Metas"))]),e(".fontsize-small.fontweight-semibold",[e("span.fontcolor-secondary.fontsize-smallest.u-right",i()+1+" de "+r.length),r[i()].title]),e(".u-marginbottom-10",[e(".meter",e(".meter-fill",{style:{width:(a>100?100:a)+"%"}})),e(".fontsize-smaller.fontweight-semibold.u-margintop-10","R$"+n.amount_paid_for_valid_period+" de R$"+r[i()].value+" por mês")]),e(".fontsize-smaller",[r[i()].description])]))}},Hs={view:function(t,n){var i=n.project()||{},a=function(){var e=r(i.zone_online_date).diff(r(i.zone_expires_at)),t=r.duration(e);return-Math.ceil(t.asDays())},s=function(){return i.is_published&&Tt.existy(i.zone_expires_at)?e(".funding-period",[e(".fontsize-small.fontweight-semibold.u-text-center-small-only","Período de campanha"),e(".fontsize-small.u-text-center-small-only",Tt.momentify(i.zone_online_date)+" - "+Tt.momentify(i.zone_expires_at)+" ("+a()+" dias)")]):""};return e("#project-about",[e(".project-about.w-col.w-col-8",{config:Tt.UIHelper()},[e("p.fontsize-base",[e("strong","O projeto")]),e('.fontsize-base[itemprop="about"]',e.trust(Tt.selfOrEmpty(i.about_html,"..."))),i.budget?[e("p.fontsize-base.fontweight-semibold","Orçamento"),e("p.fontsize-base",e.trust(i.budget))]:"",e.component(Us)]),e(".w-col.w-col-4.w-hidden-small.w-hidden-tiny",[hr.isSubscription(i)?n.subscriptionData()?e($s,{goalDetails:n.goalDetails,subscriptionData:n.subscriptionData}):Tt.loader():"",o.isEmpty(n.rewardDetails())?[e(".fontsize-base.fontweight-semibold.u-marginbottom-30","Sugestões de apoio"),e.component(Os,{project:n.project}),s()]:[e(".fontsize-base.fontweight-semibold.u-marginbottom-30","Recompensas"),e.component(Ws,{project:n.project,hasSubscription:n.hasSubscription,rewardDetails:n.rewardDetails}),s()]])])}},Qs={view:function(t,r){return e(".w-col.w-col-12",[hr.isSubscription(r.project)?r.subscriptionData()?e.component($s,{goalDetails:r.goalDetails,subscriptionData:r.subscriptionData}):Tt.loader():"",e.component(Ws,o.extend({},{rewardDetails:r.rewardDetails,hasSubscription:r.hasSubscription},r.c_opts))])}},Gs={controller:function(){var e=function(e,t){return function(e,t){t||Tt.fbParse()}};return{loadComments:e}},view:function(t,o){var r=o.project();return e(".w-row",[e(".w-col.w-col-7",e('.fb-comments[data-href="http://www.catarse.me/'+r.permalink+'"][data-num-posts=50][data-width="610"]',{config:t.loadComments()})),e(".w-col.w-col-5",e.component(Us))])}},Xs=o.partial(Tt.i18nScope,"projects.posts"),Js={controller:function(e){var t=w.paginationVM(S.projectPostDetail),r=w.filtersVM({project_id:"eq",id:"eq"}),n=function(e,t){t||Tt.animateScrollTo(e)};return r.project_id(e.project().project_id),o.isNumber(e.post_id)&&r.id(e.post_id),t.collection().length||t.firstPage(r.parameters()),{listVM:t,filterVM:r,scrollTo:n}},view:function(r,n){var i=r.listVM,a=n.project()||{};return e("#posts.project-posts.w-section",{config:r.scrollTo},[e(".w-container.u-margintop-20",[a.is_owner_or_admin?[i.isLoading()?"":o.isEmpty(i.collection())?e(".w-hidden-small.w-hidden-tiny",[e(".fontsize-base.u-marginbottom-30.u-margintop-20","Toda novidade publicada no Catarse é enviada diretamente para o email de quem já apoiou seu projeto e também fica disponível para visualização no site. Você pode optar por deixá-la pública, ou visível somente para seus apoiadores aqui nesta aba.")]):"",e(".w-row.u-marginbottom-20",[e(".w-col.w-col-4.w-col-push-4",[e("a.btn.btn-edit.btn-small[href='/pt/projects/"+a.project_id+"/posts']","Escrever novidade")])])]:"",o.map(i.collection(),function(t){return e(".w-row",[o.isEmpty(t.comment_html)?[e(".fontsize-small.fontcolor-secondary.u-text-center",Tt.momentify(t.created_at)),e("p.fontweight-semibold.fontsize-larger.u-text-center.u-marginbottom-30",[e('a.link-hidden[href="/projects/'+t.project_id+"/posts/"+t.id+'#posts"]',t.title)]),e(".card.card-message.u-radius.card-big.u-text-center.u-marginbottom-60",[e(".fa.fa-lock.fa-3x.fontcolor-secondary",""),"sub"===a.mode?[e(".fontsize-base.fontweight-semibold.u-marginbottom-20","Post exclusivo para assinantes"+(t.reward_id?" da recompensa de R$"+t.minimum_value:"")),e('a.btn.btn-medium.btn-inline.w-button[href="/projects/'+t.project_id+"/subscriptions/start"+(t.reward_id?"?reward_id="+t.reward_id:"")+'"]',"Acessar esse post")]:[e(".fontsize-base.fontweight-semibold.u-marginbottom-20","Post exclusivo para apoiadores"+(t.reward_id?" da recompensa de R$"+t.minimum_value:"")),e('a.btn.btn-medium.btn-inline.w-button[href="/projects/'+t.project_id+"/contributions/new"+(t.reward_id?"?reward_id="+t.reward_id:"")+'"]',"Acessar esse post")]])]:[e(".w-col.w-col-1"),e(".w-col.w-col-10",[e(".post",[e(".u-marginbottom-60 .w-clearfix",[e(".fontsize-small.fontcolor-secondary.u-text-center",Tt.momentify(t.created_at)),e("p.fontweight-semibold.fontsize-larger.u-text-center.u-marginbottom-30",[e('a.link-hidden[href="/projects/'+t.project_id+"/posts/"+t.id+'#posts"]',t.title)]),e(".fontsize-base",e.trust(t.comment_html))]),e(".divider.u-marginbottom-60")])]),e(".w-col.w-col-1")]])}),e(".w-row",[o.isUndefined(n.post_id)?i.isLoading()?e(".w-col.w-col-2.w-col-push-5",Tt.loader()):0===i.collection().length&&0===n.projectContributions().length?a.is_owner_or_admin?"":e(".w-col.w-col-10.w-col-push-1",e("p.fontsize-base",e.trust(t.t("empty",Xs({project_user_name:n.userDetails().name,project_id:a.project_id}))))):e(".w-col.w-col-2.w-col-push-5",i.isLastPage()?0===i.collection().length?"Nenhuma novidade.":"":e("button#load-more.btn.btn-medium.btn-terciary",{onclick:i.nextPage},"Carregar mais")):""])])])}},Ks={controller:function(t){var r=e.prop(window.location.hash),n=function(n){var i={project:n,post_id:t.post_id,subscriptionData:t.subscriptionData},a={"#rewards":e(Qs,{c_opts:i,project:n,hasSubscription:t.hasSubscription,goalDetails:t.goalDetails,subscriptionData:t.subscriptionData,rewardDetails:t.rewardDetails}),"#contribution_suggestions":e.component(Os,i),"#contributions":e.component(Ls,i),"#about":e.component(Hs,o.extend({},{hasSubscription:t.hasSubscription,rewardDetails:t.rewardDetails,subscriptionData:t.subscriptionData,goalDetails:t.goalDetails},i)),"#comments":e.component(Gs,i),"#posts":e.component(Js,o.extend({},{projectContributions:t.projectContributions,userDetails:t.userDetails},i))};return o.isNumber(t.post_id)&&!window.location.hash&&(window.location.hash="posts"),r(window.location.hash),o.isEmpty(r())||"#_=_"===r()||"#preview"===r()?a[Tt.mobileScreen()?"#rewards":"#about"]:a[r()]};return Tt.redrawHashChange(),hr.checkSubscribeAction(),{displayTabContent:n,hash:r}},view:function(t,o){return e('section.section[itemtype="http://schema.org/CreativeWork"]',[e(""+("#contributions"!==t.hash()?".w-container":".about-tab-content"),[e(".w-row",o.project()?t.displayTabContent(o.project):Tt.loader())])])}},Zs={controller:function(t){var r=t.project_id,n=t.project_user_id,i=t.post_id,a=Tt.getUser(),s=e.prop(!0),l=e.prop([]);r&&!o.isNaN(Number(r))?hr.init(r,n):hr.getCurrentProject(),i&&(window.location.hash="#posts");try{Tt.analytics.windowScroll({cat:"project_view",act:"project_page_scroll",project:r?{id:r,user_id:n}:null}),Tt.analytics.event({cat:"project_view",act:"project_page_view",project:r?{id:r,user_id:n}:null}).call()}catch(c){console.error(c)}var d=function(){if(Tt.isProjectPage()&&a&&s()&&(s(!1),hr.isSubscription(hr.currentProject()))){var e=["started","active","canceling","canceled","inactive"];_i.getUserProjectSubscriptions(a.common_id,hr.currentProject().common_id,e).then(l)}},u=function(){return!o.isEmpty(l())&&o.find(l(),function(e){return e.project_id===hr.currentProject().common_id})};return{loadUserSubscriptions:d,projectVM:hr,hasSubscription:u,userProjectSubscriptions:l}},view:function(t,o){var r=t.projectVM.currentProject,n=t.projectVM;return e(".project-show",{config:n.setProjectPageTitle()},r()?[t.loadUserSubscriptions(),e.component(Rs,{project:r,hasSubscription:t.hasSubscription,userProjectSubscriptions:t.userProjectSubscriptions,subscriptionData:n.subscriptionData,rewardDetails:n.rewardDetails,userDetails:n.userDetails,projectContributions:n.projectContributions,goalDetails:n.goalDetails}),e.component(Ns,{project:r,hasSubscription:t.hasSubscription,subscriptionData:n.subscriptionData,rewardDetails:n.rewardDetails}),e.component(Ks,{project:r,post_id:o.post_id,hasSubscription:t.hasSubscription,rewardDetails:n.rewardDetails,subscriptionData:n.subscriptionData,goalDetails:n.goalDetails,userDetails:n.userDetails,projectContributions:n.projectContributions}),r()&&r().is_owner_or_admin?e.component(Qn,{project:r}):""]:Tt.loader())}},el=o.partial(Tt.i18nScope,"projects.contributions.edit.errors"),tl=o.partial(Tt.i18nScope,"projects.contributions.edit_international.errors"),ol=function(){var n=e.prop({}),i=36,a=e.prop(!1),s=e.prop(!1),l=function(e){Tt.authenticityToken()&&e.setRequestHeader("X-CSRF-Token",Tt.authenticityToken())},c={completeName:e.prop(""),anonymous:Tt.toggleProp(!1,!0),address:e.prop({country_id:i}),ownerDocument:e.prop(""),errors:e.prop([])},d={name:e.prop(""),number:e.prop(""),expMonth:e.prop(""),expYear:e.prop(""),save:e.prop(!1),cvv:e.prop(""),errors:e.prop([]),cardOwnerDocument:e.prop("")},u=function(e){var t=o.first(e)||{address:{}};o.isEmpty(t.address)||c.address(o.omit(t.address,"id")),c.completeName(t.name),c.ownerDocument(t.owner_document),d.cardOwnerDocument(t.owner_document)},p=function(){return[[null,"Mês"],[1,"01 - Janeiro"],[2,"02 - Fevereiro"],[3,"03 - Março"],[4,"04 - Abril"],[5,"05 - Maio"],[6,"06 - Junho"],[7,"07 - Julho"],[8,"08 - Agosto"],[9,"09 - Setembro"],[10,"10 - Outubro"],[11,"11 - Novembro"],[12,"12 - Dezembro"]]},m=function(){for(var e=r().year(),t=["Ano"],o=e;o<=e+25;o++)t.push(o);return t},f=function(){return parseInt(c.address().country_id)!==i},w=function(e){return f()?tl(e):el(e)},b=function(){return f()?{locale:"en"}:{locale:"pt"}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"aon";return t.translations[t.currentLocale()].projects.faq[e]},h=Tt.getUser()||{},_=function(e){return o.map(e,function(e){var r=c[e]();Tt.existy(r)&&!o.isEmpty(String(r).trim())||c.errors().push({field:e,message:t.t("validation.empty_field",w())})})},v=function(){var e=c.ownerDocument()||"",t=String(e).replace(/[\.|\-|\/]*/g,""),o=!1,r="";e.length>14?(o=Tt.validateCnpj(e),r="CNPJ inválido."):(o=Tt.validateCpf(t),r="CPF inválido."),o||c.errors().push({field:"ownerDocument",message:r})},y=function(){return c.errors([]),!!c.validate()&&(_(["completeName"]),f()||(_(["ownerDocument"]),v()),o.isEmpty(c.errors()))},j=function(t){var o=e.prop();return e.request({method:"GET",config:l,url:"/payment/pagarme/"+t+"/slip_data"}).then(o),o},k=function(o,r,n,i,a){e.request({method:"post",url:"/payment/pagarme/"+o+"/pay_slip.json",dataType:"json"}).then(function(s){"failed"==s.payment_status?n(t.t("submission.slip_submission",w())):s.boleto_url&&(a(!0),window.location.href="/projects/"+r+"/contributions/"+o),i(!1),e.redraw()})["catch"](function(o){n(t.t("submission.slip_submission",w())),i(!1),a(!1),e.redraw()})},x=function(o,r,n,i,a){n(!1),e.redraw(),y()?q(o,r).then(function(){k(o,r,n,i,a)})["catch"](function(){i(!1),n(t.t("submission.slip_validation",w())),e.redraw()}):(i(!1),n(t.t("submission.slip_validation",w())),e.redraw())},z=e.prop([]),S=function(t){var r={id:-1};return e.request({method:"GET",config:l,url:"/users/"+t+"/credit_cards"}).then(function(e){return o.isArray(e)?e.push(r):e=[],z(e)})},C=function(e){if(window.SimilityScript&&Tt.getSimilityCustomer()){var t=Tt.getUser()||{},o={customer_id:Tt.getSimilityCustomer(),session_id:e,user_id:t.user_id},r=new window.SimilityScript(o);r.execute()}},E=function(t,o){return C(o),e.request({method:"POST",url:"/payment/pagarme/"+o+"/pay_credit_card",data:t,config:l})},P=function(e,t,o){var r={card_id:e.card_key,payment_card_installments:t};return E(r,o)},M=function(){var e=new window.PagarMe.creditCard;return e.cardHolderName=d.name(),e.cardExpirationMonth=d.expMonth(),e.cardExpirationYear=d.expYear(),e.cardNumber=d.number(),e.cardCVV=d.cvv(),e},D=function(r,n){var i=e.deferred();return e.request({method:"GET",url:"/payment/pagarme/"+r+"/get_encryption_key",config:l}).then(function(e){window.PagarMe.encryption_key=e.key;var a=M(),s=a.fieldErrors();o.keys(s).length>0?i.reject({message:t.t("submission.card_invalid",w())}):a.generateHash(function(e){var t={card_hash:e,save_card:d.save().toString(),payment_card_installments:n};E(t,r).then(i.resolve)["catch"](i.reject)})})["catch"](function(e){o.isEmpty(e.message)?i.reject({message:t.t("submission.encryption_error",w())}):i.reject(e)}),i.promise},q=function(t,o){var r={anonymous:c.anonymous(),payer_document:c.ownerDocument(),payer_name:c.completeName(),address_attributes:c.address(),card_owner_document:d.cardOwnerDocument()};return e.request({method:"PUT",url:"/projects/"+o+"/contributions/"+t+".json",data:{contribution:r},config:l})},A=function(o,r,n){return function(i){if("failed"===i.payment_status){var l=i.message||t.t("submission.payment_failed",w());s(!1),a(t.t("submission.error",w({message:l}))),e.redraw(),o.reject()}else window.location.href="/projects/"+r+"/contributions/"+n}},T=function(o){return function(r){var n=r.message||t.t("submission.payment_failed",w());s(!1),a(t.t("submission.error",w({message:n}))),e.redraw(),o.reject()}},R=function(e,t,o,r,n){return function(){return t().id&&t().id!==-1?P(t(),n(),o).then(A(e,r,o))["catch"](T(e)):D(o,n).then(A(e,r,o))["catch"](T(e))}},I=function(t,o,r,n){var i=e.deferred();return y()?(s(!0),a(!1),e.redraw(),q(r,n).then(R(i,t,r,n,o))["catch"](function(){s(!1),i.reject()})):(s(!1),i.reject()),i.promise},N=function(e){return function(){var t=(c.errors(),o.findWhere(c.errors(),{field:e})),r=o.compose(c.errors,o.without);return r(c.errors(),t)}},O=function(e){return function(){var t=(c.errors(),o.findWhere(d.errors(),{field:e})),r=o.compose(d.errors,o.without);return r(d.errors(),t)}},F=e.prop([{value:10,number:1}]),V=function(t){return e.request({method:"GET",url:"/payment/pagarme/"+t+"/get_installment",config:Tt.setCsrfToken}).then(F)},L=o.partial(Tt.mask,"9999 9999 9999 9999"),B=o.compose(d.number,L),Y=function(){return mo.fetchUser(h.user_id,!1).then(u)};return{fetchUser:Y,fields:c,validate:y,isInternational:f,resetFieldError:N,getSlipPaymentDate:j,paySlip:x,installments:F,getInstallments:V,savedCreditCards:z,getSavedCreditCards:S,applyCreditCardMask:B,creditCardFields:d,resetCreditCardFieldError:O,expMonthOptions:p,expYearOptions:m,sendPayment:I,submissionError:a,isLoading:s,pagarme:n,locale:b,faq:g,similityExecute:C}},rl=o.partial(Tt.i18nScope,"projects.contributions"),nl={controller:function(t){var r=function(e,t){return t?null:e.focus()},n=function(e){return Bo.selectedReward()&&e.id===Bo.selectedReward().id},i=e.prop(""),a=Tt.getParams("reward_id"),s=Tt.getParams("value"),l=e.prop(e.route.param("subscription_id")),c=e.route.param("subscription_status"),d=e.prop("inactive"===c||"canceled"===c);s&&Bo.setValue(Tt.formatNumber(Number(s/100),2,3));var u=function(o){var r=Tt.monetaryToFloat(Bo.contributionValue),n=Bo.hasShippingOptions(Bo.selectedReward())?Bo.shippingFeeForCurrentReward(i):{value:0};if(!i()&&Bo.hasShippingOptions(Bo.selectedReward()))Bo.error("Por favor, selecione uma opção de frete válida.");else if(r<Bo.selectedReward().minimum_value+n.value)Bo.error("O valor de apoio para essa recompensa deve ser de no mínimo R$"+Bo.selectedReward().minimum_value+" "+(hr.isSubscription(hr.currentProject())?"":"+ frete R$"+Tt.formatNumber(n.value,2,3)));else if(Bo.error(""),t.isSubscription){var a=Bo.selectedReward().id;e.route("/projects/"+hr.currentProject().project_id+"/subscriptions/checkout?contribution_value="+r+(a?"&reward_id="+a:"")+(l()?"&subscription_id="+e.route.param("subscription_id"):"")+(d()?"&subscription_status="+c:""))}else{var s=window.encodeURIComponent(String(r).replace(".",","));Tt.navigateTo("/projects/"+hr.currentProject().project_id+"/contributions/fallback_create?contribution%5Breward_id%5D="+Bo.selectedReward().id+"&contribution%5Bvalue%5D="+s+"&contribution%5Bshipping_fee_id%5D="+n.id)}return o.stopPropagation(),!1},p=function(e){i(e);var t=Bo.shippingFeeForCurrentReward(i)?Number(Bo.shippingFeeForCurrentReward(i).value):0,o=Number(Bo.selectedReward().minimum_value);Bo.applyMask(""+Tt.formatNumber(t+o,2,3))},m=function(e){return o.isEmpty(e)?{id:null,description:"",minimum_value:5,shipping_options:null,row_order:-999999}:e};return t.reward.id===Number(a)&&Bo.selectReward(t.reward).call(),Bo.getStates(),{normalReward:m,isSelected:n,setInput:r,submitContribution:u,selectDestination:p,selectedDestination:i,locationOptions:Bo.locationOptions,states:Bo.getStates(),selectReward:Bo.selectReward,error:Bo.error,applyMask:Bo.applyMask,contributionValue:Bo.contributionValue}},view:function(r,n){var i=r.normalReward(n.reward);return Tt.rewardSouldOut(i)?e(""):e("span.radio.w-radio.w-clearfix.back-reward-radio-reward",{"class":r.isSelected(i)?"selected":"",onclick:r.selectReward(i)},e('label[for="contribution_reward_id_'+i.id+'"]',[e('input.radio_buttons.optional.w-input.text-field.w-radio-input.back-reward-radio-button[id="contribution_reward_id_'+i.id+'"][type="radio"][value="'+i.id+'"]',{checked:r.isSelected(i),name:"contribution[reward_id]"}),e('label.w-form-label.fontsize-base.fontweight-semibold.u-marginbottom-10[for="contribution_reward_'+i.id+'"]',i.id?"R$ "+Tt.formatNumber(i.minimum_value)+" ou mais"+(n.isSubscription?" por mês":""):"Apoiar sem recompensa"),r.isSelected(i)?e(".w-row.back-reward-money",[Bo.hasShippingOptions(i)?e(".w-sub-col.w-col.w-col-4",[e(".fontcolor-secondary.u-marginbottom-10","Local de entrega"),e("select.positive.text-field.w-select",{onchange:e.withAttr("value",r.selectDestination)},o.map(r.locationOptions(i,r.selectedDestination),function(t){return e("option",{value:t.value},[t.name+" ",""!=t.value?"+R$"+Tt.formatNumber(t.fee,2,3):null])}))]):"",e(".w-sub-col.w-col.w-clearfix",{"class":Bo.hasShippingOptions(i)?"w-col-4":"w-col-8"},[e(".fontcolor-secondary.u-marginbottom-10","Valor do apoio"+(n.isSubscription?" mensal":"")),e(".w-row.u-marginbottom-20",[e(".w-col.w-col-3.w-col-small-3.w-col-tiny-3",e(".back-reward-input-reward.medium.placeholder","R$")),e(".w-col.w-col-9.w-col-small-9.w-col-tiny-9",e("input.back-reward-input-reward.medium.w-input",{autocomplete:"off",min:i.minimum_value,placeholder:i.minimum_value,type:"tel",config:r.setInput,onkeyup:e.withAttr("value",r.applyMask),
value:r.contributionValue()}))]),e(".fontsize-smaller.text-error.u-marginbottom-20.w-hidden",[e("span.fa.fa-exclamation-triangle")," O valor do apoio está incorreto"])]),e(".submit-form.w-col.w-col-4",e("button.btn.btn-medium.u-margintop-30",{onclick:r.submitContribution},["Continuar  ",e("span.fa.fa-chevron-right")]))]):"",r.error().length>0&&r.isSelected(i)?e(".text-error",[e("br"),e("span.fa.fa-exclamation-triangle")," "+r.error()]):"",e(".fontsize-smaller.fontweight-semibold",i.title),e(".back-reward-reward-description",[e(".fontsize-smaller.u-marginbottom-10.fontcolor-secondary",i.description),e(".u-marginbottom-20.w-row",[!i.deliver_at||n.isSubscription?"":e(".w-col.w-col-6",[e(".fontsize-smallest.fontcolor-secondary","Entrega Prevista:"),e(".fontsize-smallest",Tt.momentify(i.deliver_at,"MMM/YYYY"))]),n.isSubscription||!Bo.hasShippingOptions(i)&&"presential"!==i.shipping_options?"":e(".w-col.w-col-6",[e(".fontsize-smallest.fontcolor-secondary","Envio:"),e(".fontsize-smallest",t.t("shipping_options."+i.shipping_options,rl()))])])])]))}},il=_.partial(Tt.i18nScope,"projects.faq"),al={controller:function(o){var r="sub"===o.mode&&o.isEdit?o.isReactivate?"sub_reactivate":"sub_edit":o.mode,n=o.faq.questions,i=e.prop(-1),a=e.prop({name:"..."}),s=function(){return o.vm.isInternational()?"international."+r:""+r},l=function(e){return function(){return i(e===i()?-1:e)}},c=function(){var e={};return _.each(n,function(o,r){_.extend(e,N({},r+1,{question:t.t(s()+".questions."+r+".question",il()),answer:t.t(s()+".questions."+r+".answer",il({userLink:"/users/"+a().id,userName:a().public_name||a().name}))}))}),e};return mo.fetchUser(o.projectUserId,!1).then(function(e){return a(_.first(e))}),{scopedQuestions:c,selectQuestion:l,selectedQuestion:i,tKey:s}},view:function(o,r){var n="sub"===r.mode?e("div",e('img.u-marginbottom-10[width="130"][src="/assets/catarse_bootstrap/badge-sub-h.png"]')):e(".w-col.w-col-2.w-col-small-2.w-col-tiny-2",e("img[width='30']",{src:"aon"===r.mode?"/assets/aon-badge.png":"/assets/flex-badge.png"}));return e(".faq-box.w-hidden-small.w-hidden-tiny.card.u-radius",[e(".w-row.u-marginbottom-30",[n,e(".w-col.w-col-10.w-col-small-10.w-col-tiny-10",e(".w-inline-block.fontsize-smallest.w-inline-block.fontcolor-secondary",t.t(o.tKey()+".description",il())))]),e(".u-marginbottom-20.fontsize-small.fontweight-semibold",t.t(""+(r.vm.isInternational()?"international_title":"title"),il())),e("ul.w-list-unstyled",_.map(o.scopedQuestions(),function(t,r){return[e("li#faq_question_"+r+".fontsize-smaller.alt-link.list-question",{onclick:o.selectQuestion(r)},e("span",[e("span.faq-box-arrow")," "+t.question])),e("li.list-answer",{"class":o.selectedQuestion()===r?"list-answer-opened":""},e("p#faq_answer_"+r+".fontsize-smaller",e.trust(t.answer)))]}))])}},sl=o.partial(Tt.i18nScope,"projects.contributions"),ll={controller:function(){var e=function(){return o.union([{id:null,description:"Obrigado. Eu só quero ajudar o projeto.",minimum_value:10,shipping_options:null,row_order:-9999999}],hr.rewardDetails())},t=function(){var e=Tt.monetaryToFloat(Bo.contributionValue);return e<Bo.selectedReward().minimum_value?Bo.error("O valor de apoio para essa recompensa deve ser de no mínimo R$"+Bo.selectedReward().minimum_value):(Bo.error(""),Tt.navigateTo("/projects/"+hr.currentProject().project_id+"/contributions/fallback_create?contribution%5Breward_id%5D="+Bo.selectedReward().id+"&contribution%5Bvalue%5D="+e)),!1};return hr.getCurrentProject(),{project:hr.currentProject,paymentVM:ol(),submitContribution:t,sortedRewards:function(){return o.sortBy(e(),function(e){return Number(e.row_order)})}}},view:function(r,n){var i=r.project;return e("#contribution-new",o.isEmpty(i())?Tt.loader():[e(".w-section.section-product."+i().mode),e(Ga,{project:i}),e(".w-section.header-cont-new",e(".w-container",e(".fontweight-semibold.lineheight-tight.text-success.fontsize-large.u-text-center-small-only","Escolha a recompensa e em seguida o valor do apoio"))),e(".section",e(".w-container",e(".w-row",[e(".w-col.w-col-8",e(".w-form.back-reward-form",e('form.simple_form.new_contribution[accept-charset="UTF-8"][action="/pt/projects/'+i().id+'/contributions/fallback_create"][id="contribution_form"][method="get"][novalidate="novalidate"]',{onsubmit:r.submitContribution},[e('input[name="utf8"][type="hidden"][value="✓"]'),o.map(r.sortedRewards(),function(t){return e(nl,{reward:t})})]))),e(".w-col.w-col-4",[e(".card.u-marginbottom-20.u-radius.w-hidden-small.w-hidden-tiny",[e(".fontsize-small.fontweight-semibold",t.t("contribution_warning.title",sl())),e(".fontsize-smaller.u-marginbottom-10",t.t("contribution_warning.subtitle",sl())),e(".fontcolor-secondary.fontsize-smallest.u-marginbottom-10",t.t("contribution_warning.info",sl())),e('a.alt-link.fontsize-smallest[target="__blank"][href="'+t.t("contribution_warning.link",sl())+'"]',t.t("contribution_warning.link_label",sl()))]),e.component(al,{mode:i().mode,vm:r.paymentVM,faq:r.paymentVM.faq(i().mode),projectUserId:n.project_user_id})])])))])}},cl=o.partial(Tt.i18nScope,"projects.contributions"),dl={controller:function(){var t=function(){return o.union([{id:null,description:"",minimum_value:5,shipping_options:null,row_order:-9999999}],hr.rewardDetails())},r=e.prop(e.route.param("subscription_id")),n=e.route.param("subscription_status"),i=e.prop("inactive"===n||"canceled"===n),a=function(t){var o=Tt.monetaryToFloat(Bo.contributionValue),a=Bo.selectedReward().id;o<Bo.selectedReward().minimum_value?Bo.error("O valor de apoio para essa recompensa deve ser de no mínimo R$"+Bo.selectedReward().minimum_value):(Bo.error(""),e.route("/projects/"+hr.currentProject().project_id+"/subscriptions/checkout?contribution_value="+o+(a?"&reward_id="+a:"")+(r()?"&subscription_id="+e.route.param("subscription_id"):"")+(i()?"&subscription_status="+n:"")))};return hr.getCurrentProject(),{isEdit:r,isReactivation:i,project:hr.currentProject,paymentVM:ol(),submitContribution:a,sortedRewards:function(){return o.sortBy(t(),function(e){return Number(e.row_order)})}}},view:function(r,n){var i=r.project;if(o.isEmpty(i()))return Tt.loader();var a=r.paymentVM.faq(r.isReactivation()?i().mode+"_reactivate":r.isEdit()?i().mode+"_edit":i().mode);return e("#contribution-new",o.isEmpty(i())?Tt.loader():[e(".w-section.section-product."+i().mode),e(".dark.project-main-container",e(Ga,{project:i})),e(".w-section.header-cont-new",e(".w-container",r.isReactivation()?[e(".fontweight-semibold.lineheight-tight.text-success.fontsize-large.u-text-center-small-only",t.t("subscription_reactivation_title",cl())),e(".fontsize-base",t.t("subscription_edit_subtitle",cl()))]:r.isEdit()?[e(".fontweight-semibold.lineheight-tight.text-success.fontsize-large.u-text-center-small-only",t.t("subscription_edit_title",cl())),e(".fontsize-base",t.t("subscription_edit_subtitle",cl()))]:e(".fontweight-semibold.lineheight-tight.text-success.fontsize-large.u-text-center-small-only",t.t("subscription_start_title",cl())))),e(".section",e(".w-container",e(".w-row",[e(".w-col.w-col-8",e(".w-form.back-reward-form",e('form.simple_form.new_contribution[accept-charset="UTF-8"][action="/projects/'+i().id+'/subscriptions/checkout"][id="contribution_form"][method="get"]',{onsubmit:r.submitContribution},[o.map(r.sortedRewards(),function(t){return e(nl,{reward:t,isSubscription:hr.isSubscription(i),isReactivation:r.isReactivation})})]))),e(".w-col.w-col-4",[e(".card.u-marginbottom-20.u-radius.w-hidden-small.w-hidden-tiny",[e(".fontsize-small.fontweight-semibold",t.t("contribution_warning.title",cl())),e(".fontsize-smaller.u-marginbottom-10",t.t("contribution_warning.subtitle",cl())),e(".fontcolor-secondary.fontsize-smallest.u-marginbottom-10",t.t("contribution_warning.info",cl())),e('a.alt-link.fontsize-smallest[target="__blank"][href="'+t.t("contribution_warning.link",cl())+'"]',t.t("contribution_warning.link_label",cl()))]),e.component(al,{mode:i().mode,vm:r.paymentVM,faq:a,projectUserId:n.project_user_id,isEdit:r.isEdit(),isReactivate:r.isReactivation()})])])))])}},ul={controller:function(e){var t=e.defaultCountryID,o=e.defaultForeignCountryID,r=e.international;return{defaultCountryID:t,defaultForeignCountryID:o,international:r}},view:function(t,o){var r=t.international,n=o.fields;return e("div",e(".w-row",[e(".w-col.w-col-4",e(".fontsize-small.fontweight-semibold","Nacionalidade:")),e(".w-col.w-col-4",e(".fontsize-small.w-radio",[e("input.w-radio-input[name='nationality'][type='radio']",{checked:!r(),onclick:function(){n.countryID(t.defaultCountryID),r(!1)}}),e("label.w-form-label","Brasileiro (a)")])),e(".w-col.w-col-4",e(".fontsize-small.w-radio",[e("input.w-radio-input[name='nationality'][type='radio']",{checked:r(),onclick:function(){n.countryID()===t.defaultCountryID&&n.countryID(t.defaultForeignCountryID),r(!0)}}),e("label.w-form-label","International")]))]))}},pl=_.partial(Tt.i18nScope,"projects.contributions.edit"),ml=_.partial(Tt.i18nScope,"projects.contributions.edit_international"),fl=function(t){return"credit_card"===t?[e("span.fa.fa-credit-card")," Cartão de Crédito"]:[e("span.fa.fa-barcode")," Boleto Bancário"]},wl={controller:function(e){var t=function(e){return e.description&&e.description.length>110},o=function(t){return e.args.vm.isInternational()?ml(t):pl(t)};return{isLongDescription:t,toggleDescription:Tt.toggleProp(!1,!0),scope:o}},view:function(t,o){var r=o.vm.isLoading,n=o.args,i=o.args.oldSubscription;return n&&i?e(".modal-backdrop",e(".modal-dialog-outer",e(".modal-dialog-inner.modal-dialog-small",[e("button.modal-close.fa.fa-close.fa-lg.w-inline-block",{onclick:function(){r(!1),o.showModal(!1)}}),e(".modal-dialog-header",e(".fontsize-large.u-text-center","Confirme suas alterações")),e(".modal-dialog-content",[e(".u-marginbottom-10",[e(".fontsize-smaller.fontcolor-secondary","Recompensa"),e("div",[e(".fontsize-smallest.fontweight-semibold",{"class":t.isLongDescription(n.reward())?t.toggleDescription()?"extended":"":"extended"},n.reward().title),e(".fontsize-smallest.fontcolor-secondary",n.reward().description?n.reward().description:e.trust(I18n.t("selected_reward.review_without_reward_html",t.scope(_.extend({value:Number(n.value).toFixed()}))))),t.isLongDescription(n.reward())?e('a.link-more.link-hidden[href="#"]',{onclick:t.toggleDescription.toggle},["mais",e("span.fa.fa-angle-down")]):""])]),e(".divider.u-marginbottom-10"),e(".u-marginbottom-10",i().checkout_data&&i().checkout_data.amount==n.value?"":[e(".fontsize-smaller.fontcolor-secondary","Valor da assinatura"),e(".fontsize-large",[e("span.fontcolor-terciary","R$"+(i().checkout_data?i().checkout_data.amount/100:"")+" "),e("span.fa.fa-angle-right.fontcolor-terciary")," R$"+n.value])]),e(".divider.u-marginbottom-10"),e(".fontsize-smaller.fontcolor-secondary","Pagamento"),e(".w-hidden-small.w-hidden-tiny",[i().payment_method===o.paymentMethod?"":e(".fontsize-large.u-marginbottom-10",[e("span.fontcolor-terciary",[fl(i().checkout_data?i().checkout_data.payment_method:"")," "]),e("span.fa.fa-angle-right.fontcolor-terciary"),[" ",fl(o.paymentMethod)]]),e(".fontsize-smaller",[e("span.fontweight-semibold",[e("span.fa.fa-money.text-success")," Cobrança hoje: "]),"Nenhuma"]),e(".fontsize-smaller.u-marginbottom-10",[e("span.fontweight-semibold",[e("span.fa.fa-calendar-o.text-success")," Próxima cobrança:"]),Tt.momentify(i().next_charge_at||Date.now())+" no valor de R$"+n.value])]),e(".modal-dialog-nav-bottom",e(".w-row",[e(".w-col.w-col-2.w-col-push-2"),e(".u-text-center.w-col.w-col-4",e("button.btn.btn-large.u-marginbottom-20",{onclick:function(){o.confirm(!0),o.showModal(!1),o.pay()}},"Confirmar")),e(".w-col.w-col-4",e("button.btn.btn-large.u-marginbottom-20.btn-terciary.btn-no-border",{onclick:function(){r(!1),o.showModal(!1)}},"Cancelar"))]))])]))):e("div","")}},bl=o.partial(Tt.i18nScope,"projects.contributions.edit"),gl={controller:function(t){var r=t.vm,n=t.isSubscriptionEdit||e.prop(!1),i=hr.isSubscription()?null:r.getSlipPaymentDate(t.contribution_id),a=e.prop(!1),s=e.prop(!1),l=e.prop(!1),c=e.prop(!1),d=e.prop(!1),u=t.isReactivation||e.prop(!1),p=function(){if(r.isLoading(!0),e.redraw(),n()&&!c()&&!u())return d(!0),!1;if(hr.isSubscription()){var i={rewardCommonId:t.reward_common_id,userCommonId:t.user_common_id,projectCommonId:t.project_common_id,amount:100*t.value};return n()?(Ms.sendSlipPayment(r,o.extend({},i,{subscription_id:t.subscriptionId()})),!1):(Ms.sendSlipPayment(r,i),!1)}return r.paySlip(t.contribution_id,t.project_id,s,a,l),!1};return{vm:r,buildSlip:p,slipPaymentDate:i,loading:a,completed:l,error:s,isSubscriptionEdit:n,showSubscriptionModal:d,subscriptionEditConfirmed:c,isReactivation:u}},view:function(r,n){var i=r.isSubscriptionEdit()&&!n.isReactivation()?t.t("subscription_edit",bl()):t.t("pay_slip",bl());return e(".w-row",e(".w-col.w-col-12",e(".u-margintop-30.u-marginbottom-60.u-radius.card-big.card",[hr.isSubscription()?"":e(".fontsize-small.u-marginbottom-20",r.slipPaymentDate()?"Esse boleto bancário vence no dia "+Tt.momentify(r.slipPaymentDate().slip_expiration_date)+".":"carregando..."),e(".fontsize-small.u-marginbottom-40","Ao gerar o boleto, o realizador já está contando com o seu apoio. Pague até a data de vencimento pela internet, casas lotéricas, caixas eletrônicos ou agência bancária."),e(".w-row",e(".w-col.w-col-8.w-col-push-2",[r.vm.isLoading()?Tt.loader():r.completed()?"":e("input.btn.btn-large.u-marginbottom-20",{onclick:r.buildSlip,value:i,type:"submit"}),r.showSubscriptionModal()?e(wl,{args:n,vm:r.vm,showModal:r.showSubscriptionModal,confirm:r.subscriptionEditConfirmed,paymentMethod:"boleto",pay:r.buildSlip}):null,o.isEmpty(r.vm.submissionError())?"":e(".card.card-error.u-radius.zindex-10.u-marginbottom-30.fontsize-smaller",e(".u-marginbottom-10.fontweight-bold",e.trust(r.vm.submissionError()))),r.error()?e.component(Hi,{message:r.error()}):"",e(".fontsize-smallest.u-text-center.u-marginbottom-30",["Ao apoiar, você concorda com os ",e("a.alt-link[href='/pt/terms-of-use']","Termos de Uso "),"e ",e("a.alt-link[href='/pt/privacy-policy']","Política de Privacidade")])]))])))}},hl=/(\d{1,4})/g,_l=[].indexOf||function(e){for(var t=0,o=this.length;t<o;t++)if(t in this&&this[t]===e)return t;return-1},vl=[{type:"elo",patterns:[401178,401179,431274,438935,451416,457393,457631,457632,504175,506699,5067,509,627780,636297,636368,650,6516,6550],format:hl,length:[16],cvvLength:[3],luhn:!0},{type:"maestro",patterns:[5018,502,503,506,56,58,639,6220,67],format:hl,length:[12,13,14,15,16,17,18,19],cvvLength:[3],luhn:!0},{type:"forbrugsforeningen",patterns:[600],format:hl,length:[16],cvvLength:[3],luhn:!0},{type:"dankort",patterns:[5019],format:hl,length:[16],cvvLength:[3],luhn:!0},{type:"visa",patterns:[4],format:hl,length:[13,16],cvvLength:[3],luhn:!0},{type:"mastercard",patterns:[51,52,53,54,55,22,23,24,25,26,27],format:hl,length:[16],cvvLength:[3],luhn:!0},{type:"amex",patterns:[34,37],format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvvLength:[3,4],luhn:!0},{type:"dinersclub",patterns:[30,36,38,39],format:/(\d{1,4})(\d{1,6})?(\d{1,4})?/,length:[14],cvvLength:[3],luhn:!0},{type:"discover",patterns:[60,64,65,622],format:hl,length:[16],cvvLength:[3],luhn:!0},{type:"unionpay",patterns:[62,88],format:hl,length:[16,17,18,19],cvvLength:[3],luhn:!1},{type:"jcb",patterns:[35],format:hl,length:[16],cvvLength:[3],luhn:!0}],yl=function(e){var t=void 0;return e?(null!=(t=Ml(e))?t.type:void 0)||null:null},jl=function(e){var t=void 0,o=void 0,r=void 0;for(o=0,r=vl.length;o<r;o++)if(t=vl[o],t.type===e)return t},kl=function(e,t){var o=void 0,r=void 0,n=void 0;return o=e.currentTarget,n=o.value,r=yl(n)||"unknown",t(r)},xl=function(e,t){var o=void 0,r=void 0;if(o=e.currentTarget,r=o.value,8===e.which&&(null==o.selectionStart||o.selectionStart===r.length))return/\d\s$/.test(r)?(e.preventDefault(),setTimeout(function(){return o.value=t(r.replace(/\d\s$/,""))})):/\s\d?$/.test(r)?(e.preventDefault(),setTimeout(function(){return o.value=t(r.replace(/\d$/,""))})):void 0},zl=function(e){var t=void 0,o=void 0,r=void 0,n=void 0,i=void 0,a=void 0,s=void 0,l=void 0;for(null==e&&(e=""),r="０１２３４５６７８９",n="0123456789",l="",t=e.split(""),i=0,s=t.length;i<s;i++)o=t[i],a=r.indexOf(o),a>-1&&(o=n[a]),l+=o;return l},Sl=function(e,t,o){var r=void 0,n=void 0,i=void 0,a=void 0,s=void 0,l=void 0,c=void 0;try{n=t.selectionStart}catch(s){a=s,n=null}if(l=t.value,t.value=o(e),null!==n&&t===document.activeElement)return n===l.length&&(n=e.length),l!==e&&(c=l.slice(n-1,+n+1||9e9),r=e.slice(n-1,+n+1||9e9),i=e[n],/\d/.test(i)&&c===i+" "&&r===" "+i&&(n+=1)),t.selectionStart=n,t.selectionEnd=n},Cl=function(e,t){var o=e.currentTarget;return setTimeout(function(){var e=void 0;return e=o.value,e=zl(e),e=El(e),Sl(e,o,t)})},El=function(e){var t=void 0,r=void 0,n=void 0,i=void 0;return e=e.replace(/\D/g,""),(t=Ml(e))?(i=t.length[t.length.length-1],e=e.slice(0,i),t.format.global?null!=(n=e.match(t.format))?n.join(" "):void 0:(r=t.format.exec(e),null!=r?(r.shift(),r=o.filter(r,function(e){return e}),r.join(" ")):void 0)):e},Pl=function(e,t){var o=void 0,r=void 0,n=void 0,i=void 0,a=void 0,s=void 0,l=void 0;if(n=String.fromCharCode(e.which),/^\d+$/.test(n)&&(o=e.currentTarget,l=o.value,r=Ml(l+n),i=(l.replace(/\D/g,"")+n).length,s=16,r&&(s=r.length[r.length.length-1]),!(i>=s||null!=o.selectionStart&&o.selectionStart!==l.length)))return a=r&&"amex"===r.type?/^(\d{4}|\d{4}\s\d{6})$/:/(?:^|\s)(\d{4})$/,a.test(l)?(e.preventDefault(),setTimeout(function(){return o.value=t(l+" "+n)})):a.test(l+n)?(e.preventDefault(),setTimeout(function(){return o.value=t(l+n+" ")})):void 0},Ml=function(e){var t=void 0,o=void 0,r=void 0,n=void 0,i=void 0,a=void 0,s=void 0,l=void 0;for(e=(""+e).replace(/\D/g,""),o=0,n=vl.length;o<n;o++)for(t=vl[o],l=t.patterns,r=0,i=l.length;r<i;r++)if(s=l[r],a=""+s,e.substr(0,a.length)===a)return t},Dl=function(e){var t=void 0;return null!=e.selectionStart&&e.selectionStart!==e.selectionEnd||!(null==("undefined"!=typeof document&&null!==document&&null!=(t=document.selection)?t.createRange:void 0)||!document.selection.createRange().text)},ql=function(e){var t=void 0;return!(!e.metaKey&&!e.ctrlKey)||32!==e.which&&(0===e.which||(e.which<33||(t=String.fromCharCode(e.which),!!/[\d\s]/.test(t))))},Al=function(e){var t=void 0,o=void 0,r=void 0,n=void 0;if(t=e.currentTarget,r=String.fromCharCode(e.which),/^\d+$/.test(r)&&!Dl(t))return n=(t.value+r).replace(/\D/g,""),o=Ml(n),o?n.length<=o.length[o.length.length-1]:n.length<=16},Tl=function(e,t,o){e.onkeypress=function(e){ql(e),Al(e),Pl(e,o)},e.oninput=function(e){Cl(e,o),kl(e,t)},e.onkeydown=function(e){return xl(e,o)},e.onkeyup=function(e){kl(e,t)},e.onpaste=function(e){return Cl(e,o)},e.onchange=function(e){CatarseAnalytics.oneTimeEvent({cat:"contribution_finish",act:"contribution_cc_edit"}),Cl(e,o)}},Rl=function(e){var t=void 0,o=void 0,r=void 0,n=void 0,i=void 0,a=void 0;for(i=!0,a=0,o=(""+e).split("").reverse(),r=0,n=o.length;r<n;r++)t=o[r],t=parseInt(t,10),(i=!i)&&(t*=2),t>9&&(t-=9),a+=t;return a%10===0},Il=function(e){var t=void 0,o=void 0;return e=(""+e).replace(/\s+|-/g,""),!!/^\d+$/.test(e)&&(t=Ml(e),!!t&&(o=e.length,_l.call(t.length,o)>=0&&(t.luhn===!1||Rl(e))))},Nl=function(e,t){var o=void 0,r=void 0,n=void 0;return"object"===("undefined"==typeof e?"undefined":I(e))&&"month"in e&&(n=e,e=n.month,t=n.year),!(!e||!t)&&(e=String(e).trim(),t=String(t).trim(),!!/^\d+$/.test(e)&&(!!/^\d+$/.test(t)&&(e>=1&&e<=12&&(2===t.length&&(t=t<70?"20"+t:"19"+t),4===t.length&&(r=new Date(t,e),o=new Date,r.setMonth(r.getMonth()-1),r.setMonth(r.getMonth()+1,1),r>o)))))},Ol=function(e,t){var o=void 0,r=void 0;return e=String(e).trim(),!!/^\d+$/.test(e)&&(o=jl(t),null!=o?(r=e.length,_l.call(o.cvvLength,r)>=0):e.length>=3&&e.length<=4)},Fl={setEvents:Tl,validateCardNumber:Il,validateCardcvv:Ol,validateCardExpiry:Nl},Vl={controller:function(t){var o=t.type||e.prop("unknown"),r=function(e,r){r||Fl.setEvents(e,o,t.value)};return{setCreditCardHandlers:r,cardType:o}},view:function(t,o){return e('input.w-input.text-field[name="'+o.name+'"][required="required"][type="tel"]',{onfocus:o.onfocus,"class":o["class"],config:t.setCreditCardHandlers,onblur:o.onblur})}},Ll=o.partial(Tt.i18nScope,"projects.contributions.edit"),Bl=o.partial(Tt.i18nScope,"projects.contributions.edit_international"),Yl={controller:function(r){var n=r.vm,i=r.isSubscriptionEdit||e.prop(!1),a=e.prop(!1),s=(e.prop(!1),e.prop(!1)),l=e.prop(!0),c=e.prop(!0),d=e.prop({id:-1}),u=e.prop("1"),p=e.prop(!1),m=e.prop("unknown"),f=o.partial(Tt.mask,"999.999.999-99"),w=o.partial(Tt.mask,"99.999.999/9999-99"),b=function(e,t,n){if(!i())return Ms.sendCreditCardPayment(e,t,n,r.addressVM),!1;if(!a()&&!r.isReactivation())return s(!0),!1;var l=o.extend({},n,{subscription_id:r.subscriptionId()});return Ms.sendCreditCardPayment(e,t,l,r.addressVM),!1},g=function(){if(n.creditCardFields.errors([]),d().id===-1&&(v(),_(),y(),k()),0===n.creditCardFields.errors().length)if(r.isSubscription){var e={rewardCommonId:r.reward_common_id,userCommonId:r.user_common_id,projectCommonId:r.project_common_id,amount:100*r.value};b(d,n,e)}else n.sendPayment(d,u,r.contribution_id,r.project_id);return!1},h=function(e,t){if(e){var r=o.reject(n.creditCardFields.errors(),function(e){return o.isEqual(e,t)});n.creditCardFields.errors(r)}else n.creditCardFields.errors().push(t)},_=function(){var e=Fl.validateCardcvv(n.creditCardFields.cvv(),m()),o={field:"cvv",message:t.t("errors.inline.creditcard_cvv",q())};h(e,o)},v=function(){var e=Fl.validateCardExpiry(n.creditCardFields.expMonth(),n.creditCardFields.expYear()),o={field:"expiry",message:t.t("errors.inline.creditcard_expiry",q())};h(e,o)},y=function(){var e=Fl.validateCardNumber(n.creditCardFields.number()),o={field:"number",message:t.t("errors.inline.creditcard_number",q())};h(e,o)},j=function(){var e=n.creditCardFields.cardOwnerDocument(),t=String(e).replace(/[\.|\-|\/]*/g,""),o=!1,r="";e.length>14?(o=Tt.validateCnpj(e),r="CNPJ inválido."):(o=Tt.validateCpf(t),r="CPF inválido."),h(o,{field:"cardOwnerDocument",message:r})},k=function(){var e=n.creditCardFields.name().replace(/ /g,""),r=/^[a-zA-Z]*$/,i={field:"name",message:t.t("errors.inline.creditcard_name",q())},a=!(o.isEmpty(e)||!r.test(e));h(a,i)},x=o.compose(n.creditCardFields.name,Tt.noNumbersMask),z=function(e){var t=Tt.numbersOnlyMask(e.substr(0,4));return n.creditCardFields.cvv(t)},S=function(e){e.length>14?n.creditCardFields.cardOwnerDocument(w(e)):n.creditCardFields.cardOwnerDocument(f(e))},C=function(t){var r=o.findWhere(n.creditCardFields.errors(),{field:t});return r?e.component(Hi,{message:r.message}):""},E=function(t){return e.component(On,{el:".tooltip-wrapper.fa.fa-question-circle.fontcolor-secondary",text:t,width:380})},P=function(e,t){return d()===e},M=function(e,t){if(!t){var o=document.createElement("script");o.src="//assets.pagar.me/js/pagarme.min.js",document.body.appendChild(o),o.onload=function(){n.pagarme(window.PagarMe)}}},D=function(e){d(e),p(e.id===-1?!0:!1)},q=function(e){return n.isInternational()?Bl(e):Ll(e)};return r.isSubscription||n.getInstallments(r.contribution_id).then(function(){l(!1),e.redraw()}),r.hideSave?p(!0):n.getSavedCreditCards(r.user_id).then(function(t){c(!1),D(t[0]),e.redraw()}),{vm:n,onSubmit:g,fieldHasError:C,buildTooltip:E,loadingInstallments:l,loadingSavedCreditCards:c,installments:n.installments,selectedInstallment:u,savedCreditCards:n.savedCreditCards,creditCard:n.creditCardFields,creditCardType:m,checkCreditCard:y,checkCreditCardName:k,applyCreditCardNameMask:x,applyCreditCardMask:n.applyCreditCardMask,applyDocumentMask:S,checkCardOwnerDocument:j,applyCvvMask:z,checkcvv:_,selectCreditCard:D,isCreditCardSelected:P,expMonths:n.expMonthOptions(),expYears:n.expYearOptions(),loadPagarme:M,scope:q,showForm:p,showSubscriptionModal:s,sendSubscriptionPayment:b,subscriptionEditConfirmed:a,isSubscriptionEdit:i}},view:function(r,n){var i=r.vm.isInternational();return e(".w-form.u-marginbottom-40",{config:r.loadPagarme},[e('form[name="email-form"]',{onsubmit:r.onSubmit},[!n.hideSave&&!r.loadingSavedCreditCards()&&r.savedCreditCards().length>1?e(".my-credit-cards.w-form.back-payment-form-creditcard.records-choice.u-marginbottom-40",o.map(r.savedCreditCards(),function(n,i){return e("div#credit-card-record-"+i+".w-row.creditcard-records",{style:"cursor:pointer;",onclick:function(){return r.selectCreditCard(n)}},[e(".w-col.w-col-1.w-sub-col",e(".w-radio.w-clearfix.back-payment-credit-card-radio-field",e("input",{checked:r.isCreditCardSelected(n,i),name:"payment_subscription_card",type:"radio",value:n.card_key}))),n.id===-1?e(".w-col.w-col-11",e(".fontsize-small.fontweight-semibold.fontcolor-secondary",t.t("credit_card.use_another",r.scope()))):[e(".w-col.w-col-2.w-sub-col.w-sub-col-middle",e(".fontsize-small.fontweight-semibold.text-success",n.card_brand.toUpperCase())),e(".w-col.w-col-5.w-sub-col.w-sub-col-middle",e(".fontsize-small.fontweight-semibold.u-marginbottom-20","XXXX.XXXX.XXXX."+n.last_digits)),e(".w-col.w-col-4",r.loadingInstallments()||r.installments().length<=1?"":e("select.w-select.text-field.text-field-creditcard",{onchange:e.withAttr("value",r.selectedInstallment),value:r.selectedInstallment()},o.map(r.installments(),function(t){return e("option",{value:t.number},t.number+" X R$ "+t.amount)})))]])})):!n.hideSave&&r.loadingSavedCreditCards()?e(".fontsize-small.u-marginbottom-40",t.t("credit_card.loading",r.scope())):"",r.showForm()?e("#credit-card-payment-form.u-marginbottom-40",[e("div#credit-card-name",[e(".w-row",[e(i?".w-col.w-col-12":".w-col.w-col-6.w-col-tiny-6.w-sub-col-middle",[e('label.field-label.fontweight-semibold[for="credit-card-name"]',t.t("credit_card.name",r.scope())),e(".fontsize-smallest.fontcolor-terciary.u-marginbottom-10.field-label-tip.u-marginbottom-10",t.t("credit_card.name_tip",r.scope())),e('input.w-input.text-field[name="credit-card-name"][type="text"]',{onfocus:r.vm.resetCreditCardFieldError("name"),"class":r.fieldHasError("name")?"error":"",onblur:r.checkCreditCardName,onkeyup:e.withAttr("value",r.applyCreditCardNameMask),value:r.creditCard.name()}),r.fieldHasError("name")]),i?"":e(".w-col.w-col-6.w-col-tiny-6.w-sub-col-middle",[e('label.field-label.fontweight-semibold[for="credit-card-document"]',t.t("credit_card.document",r.scope())),e(".fontsize-smallest.fontcolor-terciary.u-marginbottom-10.field-label-tip.u-marginbottom-10",t.t("credit_card.document_tip",r.scope())),e('input.w-input.text-field[name="credit-card-document"]',{onfocus:r.vm.resetCreditCardFieldError("cardOwnerDocument"),"class":r.fieldHasError("cardOwnerDocument")?"error":"",onblur:r.checkCardOwnerDocument,onkeyup:e.withAttr("value",r.applyDocumentMask),value:r.creditCard.cardOwnerDocument()}),r.fieldHasError("cardOwnerDocument")])])]),e("div#credit-card-number",[e('label.field-label.fontweight-semibold[for="credit-card-number"]',t.t("credit_card.number",r.scope())),e(".fontsize-smallest.fontcolor-terciary.u-marginbottom-10.field-label-tip.u-marginbottom-10",t.t("credit_card.number_tip",r.scope())),e.component(Vl,{onfocus:r.vm.resetCreditCardFieldError("number"),onblur:r.checkCreditCard,"class":r.fieldHasError("number")?"error":"",value:r.creditCard.number,name:"credit-card-number",type:r.creditCardType}),r.fieldHasError("number")]),e("div#credit-card-date",[e('label.field-label.fontweight-semibold[for="expiration-date"]',[t.t("credit_card.expiry",r.scope())]),e(".fontsize-smallest.fontcolor-terciary.u-marginbottom-10.field-label-tip.u-marginbottom-10",t.t("credit_card.expiry_tip",r.scope())),e(".w-row",[e(".w-col.w-col-6.w-col-tiny-6.w-sub-col-middle",e('select.w-select.text-field[name="expiration-date_month"]',{onfocus:r.vm.resetCreditCardFieldError("expiry"),"class":r.fieldHasError("expiry")?"error":"",onchange:e.withAttr("value",r.creditCard.expMonth),value:r.creditCard.expMonth()},o.map(r.expMonths,function(t){return e("option",{value:t[0]},t[1])}))),e(".w-col.w-col-6.w-col-tiny-6",e('select.w-select.text-field[name="expiration-date_year"]',{onfocus:r.vm.resetCreditCardFieldError("expiry"),"class":r.fieldHasError("expiry")?"error":"",onchange:e.withAttr("value",r.creditCard.expYear),onblur:r.checkExpiry,value:r.creditCard.expYear()},o.map(r.expYears,function(t){return e("option",{value:t},t)}))),e(".w-col.w-col-12",r.fieldHasError("expiry"))])]),e("div#credit-card-cvv",[e('label.field-label.fontweight-semibold[for="credit-card-cvv"]',[t.t("credit_card.cvv",r.scope()),r.buildTooltip(t.t("credit_card.cvv_tooltip",r.scope()))]),e(".fontsize-smallest.fontcolor-terciary.u-marginbottom-10.field-label-tip.u-marginbottom-10",t.t("credit_card.cvv_tip",r.scope())),e(".w-row",[e(".w-col.w-col-8.w-col-tiny-6.w-sub-col-middle",e('input.w-input.text-field[name="credit-card-cvv"][type="tel"]',{onfocus:r.vm.resetCreditCardFieldError("cvv"),"class":r.fieldHasError("cvv")?"error":"",onkeyup:e.withAttr("value",r.applyCvvMask),onblur:r.checkcvv,value:r.creditCard.cvv()}),r.fieldHasError("cvv")),e(".w-col.w-col-4.w-col-tiny-6.u-text-center",e('img[src="https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/57298c1c7e99926e77127bdd_cvv-card.jpg"][width="176"]'))])]),hr.isSubscription()||r.loadingInstallments()||r.installments().length<=1?"":e(".w-row",[e(".w-col.w-col-6",[e('label.field-label.fontweight-semibold[for="split"]',t.t("credit_card.installments",r.scope())),e('select.w-select.text-field[name="split"]',{onchange:e.withAttr("value",r.selectedInstallment),value:r.selectedInstallment()},o.map(r.installments(),function(t){return e('option[value="'+t.number+'"]',t.number+" X R$ "+t.amount)}))]),e(".w-col.w-col-6")]),n.hideSave?"":e(".w-checkbox.w-clearfix",[e('input#payment_save_card.w-checkbox-input[type="checkbox"][name="payment_save_card"]',{onchange:e.withAttr("checked",r.creditCard.save),checked:r.creditCard.save()}),e('label.w-form-label[for="payment_save_card"]',t.t("credit_card.save_card",r.scope()))])]):"",e(".w-row",[e(".w-col.w-col-8.w-col-push-2",[o.isEmpty(r.vm.submissionError())?"":e(".card.card-error.u-radius.zindex-10.u-marginbottom-30.fontsize-smaller",e(".u-marginbottom-10.fontweight-bold",e.trust(r.vm.submissionError()))),r.vm.isLoading()?Tt.loader():e('input.btn.btn-large.u-marginbottom-20[type="submit"]',{value:r.isSubscriptionEdit()&&!n.isReactivation()?t.t("subscription_edit",r.scope()):t.t("credit_card.finish_payment",r.scope())}),e(".fontsize-smallest.u-text-center.u-marginbottom-30",e.trust(t.t("credit_card.terms_of_use_agreement",r.scope())))])]),r.showSubscriptionModal()?e(wl,{args:n,vm:r.vm,showModal:r.showSubscriptionModal,confirm:r.subscriptionEditConfirmed,paymentMethod:"credit_card",pay:r.onSubmit}):null])])}},Ul=o.partial(Tt.i18nScope,"projects.contributions.edit"),Wl=o.partial(Tt.i18nScope,"projects.contributions.edit_international"),$l={controller:function(t){var o=e.prop(!1),r=function(){return t.vm.isInternational()?Wl():Ul()};return{isSlip:o,scope:r,vm:t.vm}},view:function(o,r){return e("#catarse_pagarme_form",[e(".u-text-center-small-only.u-marginbottom-30",[e(".fontsize-large.fontweight-semibold",t.t("payment_info",o.scope())),e(".fontsize-smallest.fontcolor-secondary.fontweight-semibold",[e("span.fa.fa-lock"),t.t("safe_payment",o.scope())])]),e(".flex-row.u-marginbottom-40",[e("a.w-inline-block.btn-select.flex-column.u-marginbottom-20.u-text-center[href='javascript:void(0);']",{onclick:function(){return o.isSlip(!1)},"class":o.isSlip()?"":"selected"},[e(".fontsize-base.fontweight-semibold",t.t("credit_card_select",o.scope())),e(".fontcolor-secondary.fontsize-smallest.u-marginbottom-20",t.t("debit_card_info",o.scope())),e("img[src='https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/57299bd8f326a24d4828a0fd_credit-cards.png']")]),r.vm.isInternational()?e(".flex-column"):e("a.w-inline-block.btn-select.flex-column.u-marginbottom-20.u-text-center[href='javascript:void(0);']",{onclick:function(){return o.isSlip(!0)},"class":o.isSlip()?"selected":""},[e(".fontsize-base.fontweight-semibold.u-marginbottom-20","Boleto bancário"),e("img[src='https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/57299c6ef96a6e44489a7a07_boleto.png'][width='48']")])]),o.isSlip()?r.vm.isInternational()?"":e("#boleto-section",[e.component(gl,r)]):e("#credit-card-section",[e.component(Yl,r)])]);
}},Hl={controller:function(t){var r=w.loader(S.country.getPageOptions()),n=e.prop(),i=t.defaultCountryID,a=t.defaultForeignCountryID,s=t.fields,l=t.international(""!==s.countryID()&&s.countryID()!==i),c=function(e){s.countryID(parseInt(e)),t.international(parseInt(e)!==i)};return r.load().then(function(e){n(o.sortBy(e,"name_en")),t.addVM&&t.addVM.countries(n())}),{changeCountry:c,defaultCountryID:i,defaultForeignCountryID:a,fields:s,international:l,countries:n}},view:function(t,r){var n=t.fields;return r.countryName&&r.countryName(t.countries()&&n.countryID()?o.find(t.countries(),function(e){return e.id===parseInt(n.countryID())}).name_en:""),e(".u-marginbottom-30.w-row",[e(".w-col.w-col-6",[e(".field-label.fontweight-semibold",["País / ",e("em","Country")," *"]),e("select#country.positive.text-field.w-select",{onchange:function(e){t.changeCountry(e.target.value)}},[o.isEmpty(t.countries())?"":o.map(t.countries(),function(o){return e("option",{selected:o.id===t.fields.countryID(),value:o.id},o.name_en)})])]),e(".w-col.w-col-6")])}},Ql=o.partial(Tt.i18nScope,"activerecord.attributes.address"),Gl={controller:function(t){var r=t.parsedErrors,n=w.loader(S.state.getPageOptions()),i=t.fields().address(),a=rs({data:i}),s=a.defaultCountryID,l=a.defaultForeignCountryID,c=e.prop(),d=e.prop(""),u=t.addressFields||a.fields,p={countryID:e.prop(!!r&&r.hasError("country_id")),stateID:e.prop(!!r&&r.hasError("state")),addressStreet:e.prop(!!r&&r.hasError("street")),addressNumber:e.prop(!!r&&r.hasError("number")),addressComplement:e.prop(!1),addressNeighbourhood:e.prop(!!r&&r.hasError("neighbourhood")),addressCity:e.prop(!!r&&r.hasError("city")),addressState:e.prop(!!r&&r.hasError("state")),addressZipCode:e.prop(!!r&&r.hasError("zipcode")),phoneNumber:e.prop(!!r&&r.hasError("phonenumber"))},m=o.partial(Tt.mask,"(99) 9999-99999"),f=o.partial(Tt.mask,"99999-999"),b=o.compose(u.addressZipCode,f),g=o.compose(u.phoneNumber,m),h=t.disableInternational?e.prop(!1):t.international||a.international,_=function(){var e=!1,t=u.phoneNumber(),o=String(t).replace(/[\(|\)|\-|\s]*/g,"");if(o.length<10)p.phoneNumber(!0),e=!0;else{var r=Number(o.charAt(2));r>=2&&r<=9||(p.phoneNumber(!0),e=!0)}return e};o.extend(t.fields(),{validate:function(){var e=!1,t=h()?["id","stateID","addressComplement","addressNumber","addressNeighbourhood","phoneNumber"]:["id","addressComplement","addressState","phoneNumber"];if(o.mapObject(p,function(e,t){e(!1)}),o.mapObject(o.omit(u,t),function(t,o){t()||(p[o](!0),e=!0)}),!h()){var r=_();e=e||r}return!e}});var v=function(t){u.addressZipCode(t),9===t.length&&e.request({method:"GET",url:"https://api.pagar.me/1/zipcodes/"+t}).then(function(e){u.addressStreet(e.street),u.addressNeighbourhood(e.neighborhood),u.addressCity(e.city),u.stateID(o.find(c(),function(t){return t.acronym===e.state}).id),p.addressStreet(!1),p.addressNeighbourhood(!1),p.addressCity(!1),p.stateID(!1),p.addressZipCode(!1)})["catch"](function(e){d(e.errors[0].message),p.addressZipCode(!0)})};return n.load().then(function(e){c(e),rs.states(c())}),{lookupZipCode:v,zipCodeErrorMessage:d,errors:p,applyPhoneMask:g,applyZipcodeMask:b,defaultCountryID:s,defaultForeignCountryID:l,fields:u,international:h,states:c}},view:function(r,n){var i=r.fields,a=r.international,s=r.defaultCountryID,l=r.defaultForeignCountryID,c=r.errors,d={id:i.id(),country_id:i.countryID(),state_id:i.stateID(),address_street:i.addressStreet(),address_number:i.addressNumber(),address_complement:i.addressComplement(),address_neighbourhood:i.addressNeighbourhood(),address_city:i.addressCity(),address_state:i.addressState(),address_zip_code:i.addressZipCode(),phone_number:i.phoneNumber()};return n.fields().address(d),n.stateName&&n.stateName(r.states()&&i.stateID()?o.find(r.states(),function(e){return e.id===parseInt(i.stateID())}).name:""),e("#address-form.u-marginbottom-30.w-form",[n.hideNationality?"":e(".u-marginbottom-30",e(ul,{fields:i,defaultCountryID:s,defaultForeignCountryID:l,international:a})),a()?e("form",[n.disableInternational?"":e(Hl,{countryName:n.countryName,fields:i,addVM:n.addVM,international:a,defaultCountryID:s,defaultForeignCountryID:l}),e("div",[e(".w-row",e(".w-col.w-col-12",[e(".field-label.fontweight-semibold","Address *"),e("input.positive.text-field.w-input[required='required'][type='text']",{"class":c.addressStreet()?"error":"",value:r.fields.addressStreet(),onchange:e.withAttr("value",r.fields.addressStreet)}),c.addressStreet()?e(Hi,{message:"Please fill in an address."}):""])),e("div",e(".w-row",[e(".w-sub-col.w-col.w-col-4",[e(".field-label.fontweight-semibold","Zip Code *"),e("input.positive.text-field.w-input[required='required'][type='text']",{"class":c.addressZipCode()?"error":"",value:r.fields.addressZipCode(),onchange:e.withAttr("value",r.fields.addressZipCode)}),c.addressZipCode()?e(Hi,{message:"ZipCode is required"}):""]),e(".w-sub-col.w-col.w-col-4",[e(".field-label.fontweight-semibold","City *"),e("input.positive.text-field.w-input[required='required'][type='text']",{"class":c.addressCity()?"error":"",value:r.fields.addressCity(),onchange:e.withAttr("value",r.fields.addressCity)}),c.addressCity()?e(Hi,{message:"City is required"}):""]),e(".w-col.w-col-4",[e(".field-label.fontweight-semibold","State *"),e("input#address-state.positive.text-field.w-input[required='required'][type='text']",{"class":c.addressState()?"error":"",value:r.fields.addressState(),onchange:e.withAttr("value",r.fields.addressState)}),c.addressState()?e(Hi,{message:"State is required"}):""])]))])]):e(".w-form",[e("div",[n.disableInternational?null:e(Hl,{countryName:n.countryName,fields:i,international:a,defaultCountryID:s,defaultForeignCountryID:l}),e("div",[e(".w-row",[e(".w-col.w-col-6",[e(".field-label",[e("span.fontweight-semibold",t.t("address_zip_code",Ql())+" *"),e("a.fontsize-smallest.alt-link.u-right[href='http://www.buscacep.correios.com.br/sistemas/buscacep/'][target='_blank']",t.t("zipcode_unknown",Ql()))]),e("input.positive.text-field.w-input[placeholder='Digite apenas números'][required='required'][type='text']",{"class":c.addressZipCode()?"error":"",value:r.fields.addressZipCode(),onkeyup:e.withAttr("value",function(e){return r.applyZipcodeMask(e)}),oninput:function(e){r.lookupZipCode(e.target.value)}}),c.addressZipCode()?e(Hi,{message:r.zipCodeErrorMessage()?r.zipCodeErrorMessage():"Informe um CEP válido."}):""]),e(".w-col.w-col-6")]),e(".w-row",[e(".field-label.fontweight-semibold",t.t("address_street",Ql())+" *"),e("input.positive.text-field.w-input[maxlength='256'][required='required'][type='text']",{"class":c.addressStreet()?"error":"",value:r.fields.addressStreet(),onchange:e.withAttr("value",r.fields.addressStreet)}),c.addressStreet()?e(Hi,{message:"Informe um endereço."}):""]),e(".w-row",[e(".w-sub-col.w-col.w-col-4",[e(".field-label.fontweight-semibold",t.t("address_number",Ql())+" *"),e("input.positive.text-field.w-input[required='required'][type='text']",{"class":c.addressNumber()?"error":"",value:r.fields.addressNumber(),onchange:e.withAttr("value",r.fields.addressNumber)}),c.addressNumber()?e(Hi,{message:"Informe um número."}):""]),e(".w-sub-col.w-col.w-col-4",[e(".field-label.fontweight-semibold",t.t("address_complement",Ql())),e("input.positive.text-field.w-input[required='required'][type='text']",{value:r.fields.addressComplement(),onchange:e.withAttr("value",r.fields.addressComplement)})]),e(".w-col.w-col-4",[e(".field-label.fontweight-semibold",t.t("address_neighbourhood",Ql())+" *"),e("input.positive.text-field.w-input[required='required'][type='text']",{"class":c.addressNeighbourhood()?"error":"",value:r.fields.addressNeighbourhood(),onchange:e.withAttr("value",r.fields.addressNeighbourhood)}),c.addressNeighbourhood()?e(Hi,{message:"Informe um bairro."}):""])]),e(".w-row",[e(".w-sub-col.w-col.w-col-6",[e(".field-label.fontweight-semibold",t.t("address_city",Ql())+" *"),e("input.positive.text-field.w-input[required='required'][type='text']",{"class":c.addressCity()?"error":"",value:r.fields.addressCity(),onchange:e.withAttr("value",r.fields.addressCity)}),c.addressCity()?e(Hi,{message:"Informe uma cidade."}):""]),e(".w-sub-col.w-col.w-col-2",[e(".field-label.fontweight-semibold",t.t("address_state",Ql())+" *"),e("select#address-state.positive.text-field.w-select",{"class":c.stateID()?"error":"",onchange:e.withAttr("value",r.fields.stateID)},[e("option",{value:""}),o.isEmpty(r.states())?"":o.map(r.states(),function(t){return e("option",{value:t.id,selected:t.id===r.fields.stateID()},t.acronym)})]),c.stateID()?e(Hi,{message:"Informe um estado."}):""]),e(".w-col.w-col-4",[e(".field-label.fontweight-semibold",t.t("phone_number",Ql())+" *"),e("input#phone.positive.text-field.w-input[placeholder='Digite apenas números'][required='required'][type='text']",{"class":c.phoneNumber()?"error":"",value:r.fields.phoneNumber(),onkeyup:e.withAttr("value",function(e){return r.applyPhoneMask(e)}),onchange:e.withAttr("value",r.fields.phoneNumber)}),c.phoneNumber()?e(Hi,{message:"Informe um telefone válido."}):""])])])])])])}},Xl=o.partial(Tt.i18nScope,"projects.contributions.edit"),Jl=o.partial(Tt.i18nScope,"projects.contributions.edit_international"),Kl={controller:function(t){var r=hr.currentProject,n=ol(),i=e.prop(!1),a=e.prop(),s=o.partial(Tt.mask,"999.999.999-99"),l=o.partial(Tt.mask,"99.999.999/9999-99"),c=e.prop(!1),d=Tt.getUserID(),u=mo.getCurrentUser(),p=e.prop({}),m=w.loader(S.country.getPageOptions()),f=e.prop(),b=e.prop(e.route.param("subscription_id")),g=e.prop(Boolean(b())),h=e.route.param("subscription_status"),_=e.prop("inactive"===h||"canceled"===h);g&&_i.getSubscription(b()).then(function(e){return p(o.first(e))})["catch"](f),o.isNull(d)&&(hr.storeSubscribeAction(e.route()),Tt.navigateToDevise());var v=e.prop(Bo.selectedReward()||Bo.noReward),y=void 0;y=o.isString(Bo.contributionValue())?Tt.monetaryToFloat(Bo.contributionValue):Bo.contributionValue();var j=e.route.param("contribution_value"),k=e.route.param("reward_id");j&&(y=Bo.contributionValue(Number(j))),k&&Bo.fetchRewards(Tt.getCurrentProject().project_id).then(function(){v(o.findWhere(Bo.rewards(),{id:Number(k)})),Bo.selectedReward(v()),e.redraw()});var x=function(){n.validate()&&i(!0)},z=function(t){var r=o.findWhere(n.fields.errors(),{field:t});return r?e.component(Hi,{message:r.message}):""},C=function(e){e.length>14?(c(!0),n.fields.ownerDocument(l(e))):(c(!1),n.fields.ownerDocument(s(e)))},E=function(e){return function(t){CatarseAnalytics.oneTimeEvent({cat:"contribution_finish",act:n.isInternational?"contribution_address_br":"contribution_address_int"}),o.isFunction(e)&&e(t)}},P=function(e){return n.isInternational()?Jl(e):Xl(e)},M=function(e){return e.description&&e.description.length>110};return n.fetchUser().then(function(){a(rs({data:n.fields.address()})),m.load().then(function(e){a().countries(o.sortBy(e,"name_en"))})}),hr.getCurrentProject(),{addressChange:E,applyDocumentMask:C,fieldHasError:z,validateForm:x,showPaymentForm:i,reward:v,value:y,addVM:a,scope:P,isCnpj:c,isEdit:g,subscriptionId:b,isReactivation:_,vm:n,user:u,project:r,isLongDescription:M,oldSubscription:p,toggleDescription:Tt.toggleProp(!1,!0),subscriptionStatus:h}},view:function(r){var n=r.user(),i=r.addVM(),a=r.project(),s=Tt.formatNumber(r.value,2,3),l=e(".w-row",[e(".w-checkbox.w-clearfix",[e("input.w-checkbox-input[id='anonymous'][name='anonymous'][type='checkbox']",{onclick:function(){return CatarseAnalytics.event({cat:"contribution_finish",act:"contribution_anonymous_change"})},onchange:function(){r.vm.fields.anonymous.toggle()},checked:r.vm.fields.anonymous()}),e("label.w-form-label.fontsize-smallest[for='anonymous']",t.t("fields.anonymous",r.scope()))]),r.vm.fields.anonymous()?e(".card.card-message.u-radius.zindex-10.fontsize-smallest",e("div",[e("span.fontweight-bold",[t.t("anonymous_confirmation_title",r.scope()),e("br")]),e("br"),t.t("anonymous_confirmation",r.scope())])):""]);return e("#project-payment",i&&n&&!o.isEmpty(a)?[e(".w-section.section-product."+hr.currentProject().mode),e(".w-section.w-clearfix.section",[e(".w-col",e(".w-clearfix.w-hidden-main.w-hidden-medium.card.u-radius.u-marginbottom-20",[e(".fontsize-smaller.fontweight-semibold.u-marginbottom-20",t.t("selected_reward.value",r.scope())),e(".w-clearfix",[e(".fontsize-larger.text-success.u-left","R$ "+s),e('a.alt-link.fontsize-smaller.u-right[href="/projects/'+hr.currentProject().project_id+"/subscriptions/start?"+(r.reward().id?"reward_id="+r.reward().id:"")+(r.isEdit()?"&subscription_id="+r.subscriptionId():"")+(r.subscriptionStatus?"&subscription_status="+r.subscriptionStatus:"")+'"]',"Editar")]),e(".divider.u-marginbottom-10.u-margintop-10"),e(".back-payment-info-reward",[e(".fontsize-smaller.fontweight-semibold.u-marginbottom-10",t.t("selected_reward.reward",r.scope())),e(".fontsize-smallest.fontweight-semibold",r.reward().title),e(".fontsize-smallest.reward-description.opened.fontcolor-secondary",{"class":r.isLongDescription(r.reward())?r.toggleDescription()?"extended":"":"extended"},r.reward().description?r.reward().description:e.trust(t.t("selected_reward.review_without_reward_html",r.scope(o.extend({value:s}))))),r.isLongDescription(r.reward())?e('a[href="javascript:void(0);"].link-hidden.link-more.u-marginbottom-20',{onclick:r.toggleDescription.toggle},[r.toggleDescription()?"menos ":"mais ",e("span.fa.fa-angle-down",{"class":r.toggleDescription()?"reversed":""})]):"",r.reward().deliver_at?e(".fontcolor-secondary.fontsize-smallest.u-margintop-10",[e("span.fontweight-semibold","Entrega prevista:")," "+Tt.momentify(r.reward().deliver_at,"MMM/YYYY")]):"",Bo.hasShippingOptions(r.reward())||"presential"===r.reward().shipping_options?e(".fontcolor-secondary.fontsize-smallest",[e("span.fontweight-semibold","Forma de envio: "),t.t("shipping_options."+r.reward().shipping_options,{scope:"projects.contributions"})]):""])]))]),e(".w-container",e(".w-row",[e(".w-col.w-col-8",[e(".w-form",[e("form.u-marginbottom-40",[e(".u-marginbottom-40.u-text-center-small-only",[e(".fontweight-semibold.lineheight-tight.fontsize-large",t.t("title",r.scope())),e(".fontsize-smaller",t.t("required",r.scope()))]),n.name&&n.owner_document?e(".card.card-terciary.u-radius.u-marginbottom-40",[e(".w-row.u-marginbottom-20",[e(".w-col.w-col-2.w-col-small-2.w-col-tiny-2.w-hidden-tiny",[e('img.thumb.u-margintop-10.u-round[src="'+Tt.useAvatarOrDefault(n.profile_img_thumbnail)+'"][width="100"]')]),e(".w-col.w-col-10.w-col-small-10.w-col-tiny-10",[e(".fontcolor-secondary.fontsize-smallest.u-marginbottom-10",[a?"Dados do apoiador ":"Dados do usuário ",e('a.alt-link[href="/not-my-account?redirect_to='+encodeURIComponent(e.route())+'"]',"Não é você?")]),e(".fontsize-base.fontweight-semibold",n.name),n.owner_document?e("label.field-label","CPF/CNPJ: "+n.owner_document):""])]),l]):"",n.name&&n.owner_document?"":e(".card.card-terciary.u-radius.u-marginbottom-40",[e(".w-row",[e(".w-col.w-col-7.w-sub-col",[e("label.field-label.fontweight-semibold[for='complete-name']",t.t("fields.complete_name",r.scope())),e("input.positive.w-input.text-field[id='complete-name'][name='complete-name']",{onfocus:r.vm.resetFieldError("completeName"),"class":!!r.fieldHasError("completeName")&&"error",type:"text",onchange:e.withAttr("value",r.vm.fields.completeName),value:r.vm.fields.completeName(),placeholder:"Nome Completo"}),r.fieldHasError("completeName")]),e(".w-col.w-col-5",i.international()?"":[e("label.field-label.fontweight-semibold[for='document']",t.t("fields.owner_document",r.scope())),e("input.positive.w-input.text-field[id='document']",{onfocus:r.vm.resetFieldError("ownerDocument"),"class":!!r.fieldHasError("ownerDocument")&&"error",type:"tel",onkeyup:e.withAttr("value",r.applyDocumentMask),value:r.vm.fields.ownerDocument()}),r.fieldHasError("ownerDocument")])]),l]),e(".card.card-terciary.u-radius.u-marginbottom-40",e(Gl,{addVM:i,addressFields:i.fields,fields:e.prop(r.vm.fields),international:i.international,hideNationality:!0}))])]),e(".w-row.u-marginbottom-40",r.showPaymentForm()?"":e(".w-col.w-col-push-3.w-col-6",e("button.btn.btn-large",{onclick:function(){return CatarseAnalytics.event({cat:"contribution_finish",act:"contribution_next_click"},r.validateForm)}},t.t("next_step",r.scope())))),r.showPaymentForm()?e.component($l,{addressVM:i,vm:r.vm,project_id:hr.currentProject().project_id,isSubscriptionEdit:r.isEdit,isReactivation:r.isReactivation,subscriptionId:r.subscriptionId,user_id:n.id,reward:r.reward,reward_common_id:r.reward().common_id,project_common_id:hr.currentProject().common_id,user_common_id:n.common_id,isSubscription:!0,oldSubscription:r.oldSubscription,value:r.value,hideSave:!0}):""]),e(".w-col.w-col-4",[e(".card.u-marginbottom-20.u-radius.w-hidden-small.w-hidden-tiny",[e(".fontsize-smaller.fontweight-semibold.u-marginbottom-20",t.t("selected_reward.value",r.scope())),e(".w-clearfix",[e(".fontsize-larger.text-success.u-left","R$ "+s),e('a.alt-link.fontsize-smaller.u-right[href="/projects/'+hr.currentProject().project_id+"/subscriptions/start?"+(r.reward().id?"reward_id="+r.reward().id:"")+(r.isEdit()?"&subscription_id="+r.subscriptionId():"")+(r.subscriptionStatus?"&subscription_status="+r.subscriptionStatus:"")+'"]',{config:e.route},t.t("selected_reward.edit",r.scope()))]),e(".divider.u-marginbottom-10.u-margintop-10"),e(".fontsize-smaller.fontweight-semibold.u-marginbottom-10",t.t("selected_reward.payment_plan",r.scope())),e(".fontsize-smaller",[e("span.fontweight-semibold",[e("span.fa.fa-money.text-success")," "+t.t("selected_reward.charged_today",r.scope())+" "]),r.isEdit()&&!r.isReactivation()?" "+t.t("invoice_none",Xl()):"R$ "+s]),e(".fontsize-smaller.u-marginbottom-10",[e("span.fontweight-semibold",[e("span.fa.fa-calendar-o.text-success")," "+t.t("selected_reward.next_charge",r.scope())+" "]),r.isEdit()&&!r.isReactivation()?r.oldSubscription().next_charge_at?Tt.momentify(r.oldSubscription().next_charge_at):Tt.momentify(Date.now()):Tt.lastDayOfNextMonth()]),e(".divider.u-marginbottom-10.u-margintop-10"),e(".back-payment-info-reward",[e(".fontsize-smaller.fontweight-semibold.u-marginbottom-10",t.t("selected_reward.reward",r.scope())),e(".fontsize-smallest.fontweight-semibold",r.reward().title),e(".fontsize-smallest.reward-description.opened.fontcolor-secondary",{"class":r.isLongDescription(r.reward())?r.toggleDescription()?"extended":"":"extended"},r.reward().description?r.reward().description:e.trust(t.t("selected_reward.review_without_reward_html",r.scope(o.extend({value:Number(r.value).toFixed()}))))),r.isLongDescription(r.reward())?e('a[href="javascript:void(0);"].link-hidden.link-more.u-marginbottom-20',{onclick:r.toggleDescription.toggle},[r.toggleDescription()?"menos ":"mais ",e("span.fa.fa-angle-down",{"class":r.toggleDescription()?"reversed":""})]):""])]),e.component(al,{mode:a.mode,isEdit:r.isEdit(),isReactivate:r.isReactivation(),vm:r.vm,faq:r.vm.faq(r.isEdit()?r.isReactivation()?a.mode+"_reactivate":a.mode+"_edit":a.mode),projectUserId:a.user_id})])]))]:Tt.loader())}},Zl=o.partial(Tt.i18nScope,"projects.contributions"),ec={controller:function(t){var r=e.route.param("payment_method"),n=JSON.parse(e.route.param("payment_confirmed")),i=e.route.param("payment_id"),a=e.prop({}),s=e.prop(!1),l=e.route.param("project_id"),c=e.route.param("is_edit"),d=e.prop({}),u=e.prop(),p=mo.getUserRecommendedProjects();return i&&Ms.paymentInfo(i).then(a)["catch"](function(){return s(!0)}),hr.fetchProject(l,!1).then(function(e){return d(o.first(e)),mo.fetchUser(d().user.id,!1)}).then(function(e){return u(o.first(e))})["catch"](function(){return s(!0)}),{displayShareBox:Tt.toggleProp(!1,!0),recommendedProjects:p,paymentMethod:r,paymentConfirmed:n,project:d,projectUser:u,paymentData:a,error:s,isEdit:c}},view:function(r,n){var i=r.project(),a=Tt.getUser(),s=r.projectUser();return e("#thank-you",i?[e(".page-header.u-marginbottom-30",e(".w-container",e(".w-row",e(".w-col.w-col-10.w-col-push-1",[e(".u-marginbottom-20.u-text-center",s?e("img.big.thumb.u-round[src='"+s.profile_img_thumbnail+"']"):Tt.loader()),e("#thank-you.u-text-center",[e("#creditcard-thank-you.fontsize-larger.text-success.u-marginbottom-20",r.isEdit?t.t("thank_you.subscription_edit.thank_you",Zl()):t.t("thank_you.thank_you",Zl())),e(".fontsize-base.u-marginbottom-40",e.trust(t.t(r.isEdit?"thank_you.subscription_edit.text_html":"credit_card"===r.paymentMethod?"thank_you.thank_you_text_html":r.paymentConfirmed?"thank_you_slip.thank_you_text_html":"thank_you.thank_you_slip_unconfirmed_text_html",Zl({total:i.total_contributions,email:a.email,link2:"/pt/users/"+a.user_id+"/edit#contributions",link_email:"/pt/users/"+a.user_id+"/edit#about_me"})))),e(".fontsize-base.fontweight-semibold.u-marginbottom-20","Compartilhe com seus amigos e ajude esse projeto a bater a meta!")]),e(".w-row",[e(".w-hidden-small.w-hidden-tiny",o.isEmpty(i)?Tt.loader():[e(".w-sub-col.w-col.w-col-4",e.component(li,{url:"https://www.catarse.me/"+i.permalink+"?ref=ctrse_thankyou&utm_source=facebook.com&utm_medium=social&utm_campaign=project_share",big:!0})),e(".w-sub-col.w-col.w-col-4",e.component(li,{messenger:!0,big:!0,url:"https://www.catarse.me/"+i.permalink+"?ref=ctrse_thankyou&utm_source=facebook.com&utm_medium=messenger&utm_campaign=thanks_share"})),e(".w-col.w-col-4",e('a.btn.btn-large.btn-tweet.u-marginbottom-20[href="https://twitter.com/intent/tweet?text=Acabei%20de%20apoiar%20o%20projeto%20'+encodeURIComponent(i.name)+"%20https://www.catarse.me/"+i.permalink+'%3Fref%3Dtwitter%26utm_source%3Dtwitter.com%26utm_medium%3Dsocial%26utm_campaign%3Dproject_share"][target="_blank"]',[e("span.fa.fa-twitter")," Twitter"]))]),e(".w-hidden-main.w-hidden-medium",[e(".u-marginbottom-30.u-text-center-small-only",e("button.btn.btn-large.btn-terciary.u-marginbottom-40",{onclick:r.displayShareBox.toggle},"Compartilhe")),r.displayShareBox()?e(Va,{project:e.prop({permalink:i.permalink,name:i.name}),displayShareBox:r.displayShareBox}):""])])])))),r.error()?e(".w-row",e(".w-col.w-col-8.w-col-offset-2",e(".card.card-error.u-radius.zindex-10.u-marginbottom-30.fontsize-smaller",t.translate("thank_you.thank_you_error",Zl())))):r.paymentData().boleto_url?e(".w-row",e(".w-col.w-col-8.w-col-offset-2",e("iframe.slip",{src:r.paymentData().boleto_url,width:"100%",height:"905px",frameborder:"0",style:"overflow: hidden;"}))):e(".section.u-marginbottom-40",e(".w-container",[e(".fontsize-large.fontweight-semibold.u-marginbottom-30.u-text-center",t.t("thank_you.project_recommendations",Zl())),e.component(Rn,{collection:r.recommendedProjects,ref:"ctrse_thankyou_r"})]))]:Tt.loader())}},tc={view:function(t,o){var r=o.user,n=o.hideDetails,i=mo.displayImage(r),a=mo.displayCover(r);return r.id?e(".hero-"+(n?"small":"half"),[e(".w-container.content-hero-profile",e(".w-row.u-text-center",e(".w-col.w-col-8.w-col-push-2",[n?"":e(".u-marginbottom-20",e(".avatar_wrapper",e("img.thumb.big.u-round[alt='User'][src='"+i+"']"))),e(".fontsize-larger.fontweight-semibold.u-marginbottom-20",mo.displayName(r)),n?"":[e(".w-hidden-small.w-hidden-tiny.u-marginbottom-40.fontsize-base",["Chegou junto em "+Tt.momentify(r.created_at,"MMMM [de] YYYY"),e("br"),0===r.total_contributed_projects?"Ainda não apoiou projetos":"Apoiou "+Tt.pluralize(r.total_contributed_projects," projeto"," projetos"),r.total_published_projects>0?" e já criou "+Tt.pluralize(r.total_published_projects," projeto"," projetos"):""]),e(".w-row",[e(".w-col.w-col-4"),e(".w-col.w-col-4",e.component(_a,{disabledClass:".btn.btn-medium.btn-secondary-dark.w-button",following:r.following_this_user,follow_id:r.id})),e(".w-col.w-col-4")])]]))),e(".hero-profile",{style:"background-image:url('"+a+"');"})]):e("")}},oc={controller:function(t){var o=t.userId,r=t.showDraft||!1,n=e.prop(!1),i=w.paginationVM(S.project),a=e.prop(!0),s=w.filtersVM({project_user_id:"eq",state:"in"}),l=["online","waiting_funds","successful","failed"];return r&&l.push("draft"),s.state(l).project_user_id(o).order({updated_at:"desc"}),S.project.pageSize(9),i.firstPage(s.parameters()).then(function(){a(!1)})["catch"](function(t){n(!0),a(!1),e.redraw()}),{projects:i,loader:a,error:n}},view:function(t,r){var n=t.projects.collection();return e(".content[id='created-tab']",t.error()?e.component(Hi,{message:"Erro ao carregar os projetos."}):t.loader()?Tt.loader():[o.isEmpty(n)?e(".w-container",e(".u-margintop-30.u-text-center.w-row",[e(".w-col.w-col-3"),e(".w-col.w-col-6",[e(".fontsize-large.u-marginbottom-30","O que você está esperando para tirar seu projeto do papel aqui no Catarse?"),e(".w-row",[e(".w-col.w-col-3"),e(".w-col.w-col-6",e("a.btn.btn-large[href='/start']","Comece agora!")),e(".w-col.w-col-3")])]),e(".w-col.w-col-3")])):o.map(n,function(t){return e.component(Tn,{project:t,ref:"user_contributed",showFriends:!1})}),o.isEmpty(n)?"":e(".w-row.u-marginbottom-40.u-margintop-30",[e(ha,{collection:t.projects,cssClass:".w-col-push-5"})])])}},rc={controller:function(t){var r=e.prop(),n=t.userId,i=w.paginationVM(S.project),a=e.prop(!1),s=e.prop(!0),l=w.filtersVM({project_id:"in"});return mo.getPublicUserContributedProjects(n,null).then(function(e){r(e),o.isEmpty(r())?s(!1):(l.project_id(o.pluck(r(),"project_id")).order({online_date:"desc"}),S.project.pageSize(9),i.firstPage(l.parameters()).then(function(){s(!1)}))})["catch"](function(t){a(!0),s(!1),e.redraw()}),{projects:i,error:a,loader:s}},view:function(t,r){var n=t.projects.collection();return t.error()?e.component(Hi,{message:"Erro ao carregar os projetos."}):t.loader()?Tt.loader():e(".content[id='contributed-tab']",[o.isEmpty(n)?e(".w-container",e(".u-margintop-30.u-text-center.w-row",[e(".w-col.w-col-3"),e(".w-col.w-col-6",[e(".fontsize-large.u-marginbottom-30","Ora, ora... você ainda não apoiou nenhum projeto no Catarse!"),e(".w-row",[e(".w-col.w-col-3"),e(".w-col.w-col-6",e("a.btn.btn-large[href='/explore']","Que tal apoiar agora?")),e(".w-col.w-col-3")])]),e(".w-col.w-col-3")])):o.map(n,function(t){return e.component(Tn,{project:t,ref:"user_contributed",showFriends:!1})}),o.isEmpty(n)?"":e(".w-row.u-marginbottom-40.u-margintop-30",[e(ha,{collection:t.projects,cssClass:".w-col-push-5"})])])}},nc={controller:function(t){var o=e.prop({}),r=t.userId;return mo.fetchUser(r,!0,o),{userDetails:o,displayModal:Tt.toggleProp(!1,!0)}},view:function(t){var r=t.userDetails(),n=[va,t.userDetails],i=mo.displayImage(r);return e("#user-card",e(".card.card-user.u-radius.u-marginbottom-30[itemprop='author']",[e(".w-row",[e(".w-col.w-col-4.w.col-small-4.w-col-tiny-4.w-clearfix",e("img.thumb.u-round[itemprop='image'][src='"+i+"'][width='100']")),e(".w-col.w-col-8.w-col-small-8.w-col-tiny-8",[e(".fontsize-small.fontweight-semibold.lineheight-tighter[itemprop='name']",e('a.link-hidden[href="/users/'+r.id+'"]',mo.displayName(r))),e(".fontsize-smallest.lineheight-looser[itemprop='address']",r.address_city),e(".fontsize-smallest",Tt.pluralize(r.total_published_projects," projeto"," projetos")+" criados"),e(".fontsize-smallest","apoiou "+Tt.pluralize(r.total_contributed_projects," projeto"," projetos"))])]),e(".project-author-contacts",[e("ul.w-list-unstyled.fontsize-smaller.fontweight-semibold",[o.isEmpty(r.facebook_link)?"":e("li",[e('a.link-hidden[itemprop="url"][href="'+r.facebook_link+'"][target="_blank"]',"Perfil no Facebook")]),o.isEmpty(r.twitter_username)?"":e("li",[e('a.link-hidden[itemprop="url"][href="https://twitter.com/'+r.twitter_username+'"][target="_blank"]',"Perfil no Twitter")]),o.map(r.links,function(t){return e("li",[e('a.link-hidden[itemprop="url"][href="'+t.link+'"][target="_blank"]',t.link)])})])]),t.displayModal()?e.component(zn,{displayModal:t.displayModal,content:n}):"",e(_a,{follow_id:r.id,following:r.following_this_user,enabledClass:".btn.btn-medium.btn-message.u-marginbottom-10",disabledClass:".btn.btn-medium.btn-message.u-marginbottom-10"}),o.isEmpty(r.email)?"":e("a.btn.btn-medium.btn-message[href='javascript:void(0);']",{onclick:t.displayModal.toggle},"Enviar mensagem")]))}},ic={controller:function(t){var o=e.prop({}),r=e.prop(!0),n=e.prop(!1),i=t.userId;return mo.fetchUser(i,!0,o).then(function(){r(!1)})["catch"](function(t){n(!0),r(!1),e.redraw()}),{userDetails:o,error:n,loader:r}},view:function(t,o){var r=t.userDetails();return t.error()?e.component(Hi,{message:"Erro ao carregar dados."}):t.loader()?Tt.loader():e(".content[id='about-tab']",e(".w-container[id='about-content']",e(".w-row",[e(".w-col.w-col-8",e(".fontsize-base",r.about_html?e.trust(r.about_html):"")),e(".w-col.w-col-4",r.id?e.component(nc,{userId:r.id}):Tt.loader)])))}},ac={controller:function(t){var r=e.prop({}),n=t.user_id.split("-")[0],i=e.prop(window.location.hash),a=function(t){var r={"#created":e.component(oc,{userId:t.id}),"#contributed":e.component(rc,{userId:t.id}),"#about":e.component(ic,{userId:t.id})};return i(window.location.hash),o.isEmpty(i())||"#_=_"===i()?t.total_published_projects>0?(i("#created"),r["#created"]):t.total_contributed_projects>0?(i("#contributed"),r["#contributed"]):(i("#about"),r["#about"]):r[i()]};return Tt.redrawHashChange(),mo.fetchUser(n,!0,r),{displayTabContent:a,hash:i,userDetails:r}},view:function(t,r){var n=t.userDetails();return e("div",[e.component(tc,{user:n}),e("nav.project-nav.u-text-center.u-marginbottom-30.profile",{style:{"z-index":"10",position:"relative"}},e(".w-container[data-anchor='created']",[o.isEmpty(n)?Tt.loader():n.is_owner_or_admin?e("a.dashboard-nav-link.dashboard[href='/pt/users/"+n.id+"/edit']",{config:e.route,onclick:function(){e.route("/users/edit/"+n.id,{user_id:n.id})}},[e("span.fa.fa-cog"),e.trust("&nbsp;")," Editar perfil"]):"",e("a[data-target='#contributed-tab'][href='#contributed'][id='contributed_link'][class='dashboard-nav-link "+("#contributed"===t.hash()?"selected":"")+"']",["Apoiados ",e.trust("&nbsp;"),e("span.badge",n.total_contributed_projects)]),e("a[data-target='#created-tab'][href='#created'][id='created_link'][class='dashboard-nav-link "+("#created"===t.hash()?"selected":"")+"']",["Criados ",e.trust("&nbsp;"),e("span.badge",n.total_published_projects)]),e("a[data-target='#about-tab'][href='#about'][id='about_link'][class='dashboard-nav-link "+("#about"===t.hash()?"selected":"")+"']","Sobre")])),e("section.section",e(".w-container",e(".w-row",n.id?t.displayTabContent(n):Tt.loader())))])}},sc=o.partial(Tt.i18nScope,"activerecord.attributes.address"),lc={controller:function(e){var t=e.fields,o=e.multipleChoiceQuestions,r=e.openQuestions;return{fields:t,multipleChoiceQuestions:o,openQuestions:r}},view:function(r,n){return e(".section.u-marginbottom-40",e(".w-container",e(".w-row",[e(".w-col.w-col-1"),e(".w-col.w-col-10",e(".card.card-terciary.medium.u-radius",[n.confirmAddress?e(".u-marginbottom-30",[e(".fontcolor-secondary.fontsize-base.fontweight-semibold.u-marginbottom-20",t.t("delivery_address",sc())),e(".fontsize-base",[e("span.fontweight-semibold",t.t("country",sc())+": "),n.countryName,e("br"),e("span.fontweight-semibold",t.t("address_street",sc())+":"),e.trust("&nbsp;"),r.fields.address_street,e("br"),e("span.fontweight-semibold",t.t("address_number",sc())+":"),e.trust("&nbsp;"),r.fields.address_number,e("br"),e("span.fontweight-semibold",t.t("address_complement",sc())+":"),e.trust("&nbsp;"),r.fields.address_complement,e("br"),e("span.fontweight-semibold",t.t("address_neighbourhood",sc())+":"),e.trust("&nbsp;"),r.fields.address_neighbourhood,e("br"),e("span.fontweight-semibold",t.t("address_city",sc())+":"),e.trust("&nbsp;"),r.fields.address_city,e("br"),e("span.fontweight-semibold",t.t("address_state",sc())+":"),e.trust("&nbsp;"),n.stateName,e("br"),e("span.fontweight-semibold",t.t("address_zip_code",sc())+":"),e.trust("&nbsp;"),r.fields.address_zip_code,e("br"),e("span.fontweight-semibold",t.t("phone_number",sc())+":"),e.trust("&nbsp;"),r.fields.phone_number])]):"",o.map(r.multipleChoiceQuestions,function(t){var r=o.find(t.question.question_choices,function(e){return t.value()==e.id});return e(".u-marginbottom-30",[e(".fontcolor-secondary.fontsize-base.fontweight-semibold",t.question.question),e(".fontcolor-secondary.fontsize-smaller.u-marginbottom-20",t.question.description),e(".fontsize-base",r?r.option:"")]);
}),o.map(r.openQuestions,function(t){return e(".u-marginbottom-30",[e(".fontcolor-secondary.fontsize-base.fontweight-semibold",t.question.question),e(".fontcolor-secondary.fontsize-smaller.u-marginbottom-20",t.question.description),e(".fontsize-base",t.value())])})])),e(".w-col.w-col-1")])))}},cc=o.partial(Tt.i18nScope,"activerecord.attributes.address"),dc={controller:function(t){var r=t.survey_id,n=e.route.param("contribution_id"),i=e.prop(),a=Tt.idVM,s=Tt.toggleProp(!1,!0),l=Tt.toggleProp(!1,!0),c=Tt.toggleProp(!1,!0),d=e.prop(!1),u=e.prop(""),p=e.prop(""),m=e.prop(""),f=e.prop({}),b=e.prop([]),g=e.prop([]),h=e.prop({}),_=e.prop(),v=function(){s(!0)},y=w.filtersVM({contribution_id:"eq"}),j=function(){return y.contribution_id(n),w.loaderWithToken(S.survey.getPageOptions(y.parameters()))},k=function(){i().confirm_address?(window.location.hash="#address-form",f().validate()&&(scroll(0,0),l.toggle())):l.toggle()},x=function(){var t={};o.extend(t,{survey_address_answers_attributes:{addresses_attributes:f().address()}}),o.extend(t,{survey_open_question_answers_attributes:o.map(b(),function(e){return{id:e.question.answer_id,survey_open_question_id:e.question.id,contribution_id:n,answer:e.value()}})}),o.extend(t,{survey_multiple_choice_question_answers_attributes:o.map(g(),function(e){return{id:e.question.answer_id,contribution_id:n,survey_multiple_choice_question_id:e.question.id,survey_question_choice_id:e.value()}})}),e.request({method:"PUT",url:"/contributions/"+n+"/surveys/"+r+"/answer",data:t,config:Tt.setCsrfToken}).then(function(){scroll(0,0),c.toggle()})},z=function(t,r){r||j().load().then(function(t){i(o.first(t)),d(!o.isEmpty(i().finished_at)),m(i().survey_answered_at),hr.fetchProject(i().project_id),Bo.rewardLoader(i().reward_id).load().then(_);var r=i();u(r.country_name),p(r.state_name),a.id(Tt.getUserID());var n=w.loaderWithToken(S.userDetail.getRowOptions(a.parameters()));n.load().then(function(t){h(o.first(t)),f({address:e.prop(r.address||o.omit(h().address,"id")||{})})}),o.map(r.open_questions,function(t){b().push({question:t,value:e.prop(t.answer)})}),o.map(r.multiple_choice_questions,function(t){g().push({question:t,value:e.prop(t.survey_question_choice_id)})})})};return{projectVM:hr,loadSurvey:z,countryName:u,stateName:p,user:h,preview:k,finished:d,fields:f,reward:_,sendMessage:v,displayModal:s,answeredAt:m,sendAnswer:x,showPreview:l,showThanks:c,openQuestions:b,multipleChoiceQuestions:g,survey:i}},view:function(r){var n=r.user(),i=r.survey(),a=r.countryName,s=r.stateName,l=r.openQuestions(),c=r.multipleChoiceQuestions(),d=r.projectVM.currentProject(),u=o.first(r.reward()),p=[va,e.prop(d?d.user:{})],m=mo.displayImage(n);return e(".survey",{config:r.loadSurvey},o.isEmpty(n)?"":[r.displayModal()?e.component(zn,{displayModal:r.displayModal,content:p}):"",r.showThanks()?e(".survey-thanks",[e(".bg-white.page-header",e(".w-container",e(".w-row",[e(".w-col.w-col-2"),e(".w-col.w-col-8",[e(".u-marginbottom-20.u-text-center",e("img.big.thumb.u-marginbottom-20.u-round[src='"+m+"']")),e(".u-text-center",e(".fontsize-larger.u-marginbottom-10","Valeu!")),e(".fontsize-base.u-text-center",["As respostas abaixo foram enviadas para "+d.user.name+"! Qualquer dúvida sobre o andamento do projeto, visite a ",e("a.alt-link[href='/"+d.permalink+"#posts'][target='_blank']","aba de novidades da campanha")," ou ",e("a.alt-link[href='javascript:void(0);']",{onclick:r.sendMessage},"envie uma mensagem"),"."])]),e(".w-col.w-col-2")]))),e(lc,{confirmAddress:i.confirm_address,countryName:a(),stateName:s(),fields:r.fields().address(),openQuestions:l,multipleChoiceQuestions:c})]):r.showPreview()?e(".survey-preview",[e(".bg-white.page-header",e(".w-container",e(".w-row",[e(".w-col.w-col-2"),e(".w-col.w-col-8",[e(".u-marginbottom-20.u-text-center",e("img.big.thumb.u-marginbottom-20.u-round[src='"+m+"']")),e(".u-text-center",e(".fontsize-larger","Você confirma as respostas abaixo?"))]),e(".w-col.w-col-2")]))),e(lc,{confirmAddress:i.confirm_address,countryName:a(),stateName:s(),fields:r.fields().address(),openQuestions:l,multipleChoiceQuestions:c}),e("div",e(".w-container",e(".w-row",[e(".w-col.w-col-2"),e(".w-col.w-col-8",e(".w-row",[e(".w-col-small-6.w-col.w-col-6.w-col-small-6.w-col-tiny-6.w-sub-col",e("a.btn.btn-large.btn-terciary",{onclick:r.showPreview.toggle},"Não")),e(".w-col.w-col-6.w-col-small-6.w-col-tiny-6",e("a.btn.btn-large",{onclick:r.sendAnswer},"Sim"))])),e(".w-col.w-col-2")])))]):e(".survey-show",i&&d?[e(".dashboard-header.u-marginbottom-40.u-text-center",e(".w-container",e(".w-row",[e(".w-col.w-col-2"),e(".w-col.w-col-8",[e("img.big.thumb.u-marginbottom-20.u-round[src='"+m+"']"),e(".fontsize-larger.u-marginbottom-10","Oi, "+mo.displayName(n)),e(".fontsize-base.u-marginbottom-20",d.user.name+", do projeto "+d.name+", enviou algumas perguntas para que possa seguir com a produção e entrega da recompensa que você apoiou com R$"+u.minimum_value+":"),e(Wi,{reward:u})]),e(".w-col.w-col-2")]))),r.finished()?[e("div",e(".w-container",e(".w-row",[e(".w-col.w-col-1"),e(".w-col.w-col-10",e(".card.card-terciary.medium.u-marginbottom-30",[e(".card.card-message.u-marginbottom-40.u-radius",e(".fontsize-base",[e("span.fa.fa-exclamation-circle",""),r.answeredAt()?e("span"," Esse questionário não está mais aberto para receber respostas. Segue abaixo as respostas que você enviou no dia "+Tt.momentify(r.answeredAt(),"DD/MM/YYYY")+". Qualquer dúvida, ",e("a.alt-link[href='javascript:void(0);']",{onclick:r.sendMessage},"envie uma mensagem para "+d.user.name)):e("span"," Oooops! Esse questionário não está mais aberto para respostas desde o dia "+Tt.momentify(r.survey().finished_at,"DD/MM/YYYY")+". Nossa recomendação é que você ",e("a.alt-link[href='javascript:void(0);']",{onclick:r.sendMessage},"envie uma mensagem para "+d.user.name)," para saber como é possível resolver o seu caso! ")]))])),r.answeredAt()?e(lc,{confirmAddress:i.confirm_address,countryName:a(),stateName:s(),fields:r.fields().address(),openQuestions:l,multipleChoiceQuestions:c}):"",e(".w-col.w-col-1")])))]:[e("div",e(".w-container",e(".w-row",[e(".w-col.w-col-1"),e(".w-col.w-col-10",e(".card.card-terciary.medium.u-marginbottom-30",[r.answeredAt()?e(".card.card-message.u-marginbottom-40.u-radius",e(".fontsize-base",[e("span.fa.fa-exclamation-circle","")," Você já enviou as respostas abaixo no dia "+Tt.momentify(r.answeredAt(),"DD/MM/YYYY")+". Se notou algo errado, não tem problema: basta alterar as informações necessárias abaixo e reenviar as respostas."])):"",i.confirm_address?[e(".fontcolor-secondary.fontsize-base.fontweight-semibold",t.t("delivery_address",cc())),e(Gl,{countryName:a,stateName:s,fields:r.fields})]:"",o.map(c,function(t){return e(".u-marginbottom-30.w-form",[e(".fontcolor-secondary.fontsize-base.fontweight-semibold",t.question.question),e(".fontcolor-secondary.fontsize-smaller.u-marginbottom-20",t.question.description),[o.map(t.question.question_choices,function(o){return e(".fontsize-small.w-radio",[e("input.w-radio-input[type='radio'][name='choice"+t.question.id+"']",{value:o.id,checked:parseInt(o.id)===parseInt(t.value()),onchange:e.withAttr("value",t.value)}),e("label.w-form-label[for='radio']",o.option)])})]])}),o.map(l,function(t){return e(".u-marginbottom-30.w-form",[e(".fontcolor-secondary.fontsize-base.fontweight-semibold",t.question.question),e(".fontcolor-secondary.fontsize-smaller.u-marginbottom-20",t.question.description),e("input.positive.text-field.w-input[maxlength='256'][placeholder='Sua resposta'][required='required'][type='text']",{value:t.value(),onchange:e.withAttr("value",t.value)})])})])),e(".w-col.w-col-1")]))),e(".section",e(".w-container",e(".w-row",[e(".w-col.w-col-4"),e(".w-col.w-col-4",e("a.btn.btn-large",{onclick:function(){r.preview()}},"Enviar")),e(".w-col.w-col-4")])))]]:Tt.loader())])}},uc=function(){var t=e.prop([]),r=e.prop(!1),n=e.prop(""),i=function(e,r,n){return o.reduce(t(),function(t,o){return o[0]===e?o[r]:t},n)},a=function(e,r){var n=o.map(t(),function(t){return t[0]===e?[t[0],t[1],r]:t});t(n)},s=function(e){return i(e,2,!1)},l=function(e){return i(e,1,"")},c=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Array.isArray(e)?o.map(e,function(e){return e.push(!1),t().push(e)}):t().push([e,r,!1])};return c.fields=t,c.setSubmissionError=n,c.hasSubmissionError=function(){return r()===!0},c.displaySubmissionError=function(){return r()?e(".card.card-error.u-radius.zindex-10.u-marginbottom-30.fontsize-smaller",e(".u-marginbottom-10.fontweight-bold",e.trust(n()))):null},c.submissionError=function(e){return o.isUndefined(e)?c.displaySubmissionError():void r(e)},c.hasError=s,c.inlineError=function(t,r){return o.isUndefined(r)?s(t)?e(Hi,{message:l(t)}):null:void a(t,r)},c.resetFieldErrors=function(){return o.map(t(),function(e){return e[2]=!1})},c.resetErrors=function(){c.resetFieldErrors(),r(!1)},c},pc=(uc(),{password:e.prop(""),current_password:e.prop(""),uploaded_image:e.prop(""),cover_image:e.prop(""),email:e.prop(""),permalink:e.prop(""),public_name:e.prop(""),facebook_link:e.prop(""),twitter:e.prop(""),links:e.prop([]),about_html:e.prop(""),email_confirmation:e.prop("")}),mc=function(e){var t=void 0;try{t=JSON.parse(e)}catch(o){t={}}return o},fc={fields:pc,mapRailsErrors:mc},wc={controller:function(t){var r=fc.mapRailsErrors(Wn.railsErrors()),n=void 0,i=t.user||{},a={password:e.prop(""),current_password:e.prop(""),uploaded_image:e.prop(mo.displayImage(i)),cover_image:e.prop(i.profile_cover_image||""),email:e.prop(""),permalink:e.prop(i.permalink||""),public_name:e.prop(i.public_name||""),facebook_link:e.prop(i.facebook_link||""),twitter:e.prop(i.twitter_username||""),links:e.prop(i.links||[]),about_html:e.prop(i.about_html||""),email_confirmation:e.prop("")},s=e.prop(!1),l=e.prop(!1),c=Tt.toggleProp(!1,!0),d=e.prop(!1),u=e.prop(!1),p=e.prop(),m=e.prop(!1),f=e.prop(!1),w=e.prop([]),b=function(){p(w().join("<br/>"))},g=function(){mo.fetchUser(t.userId,!1).then(function(e){var t=o.first(e);a.uploaded_image(mo.displayImage(t)),a.cover_image(t.profile_cover_image),a.permalink(t.permalink),a.public_name(t.public_name),a.facebook_link(t.facebook_link),a.twitter(t.twitter_username),a.links(t.links),a.about_html(t.about_html)})},h=function(){var r=window.document.getElementById("user_uploaded_image"),n=window.document.getElementById("user_cover_image"),s=new FormData;if(r.files[0]||!t.hideCoverImg&&n.files[0])return s.append("uploaded_image",r.files[0]),t.hideCoverImg||s.append("cover_image",n.files[0]),f(!0),e.redraw(),e.request({method:"POST",url:"/users/"+i.id+"/upload_image.json",data:s,config:Tt.setCsrfToken,serialize:function(e){return e}}).then(function(e){a.uploaded_image(e.uploaded_image),a.cover_image(e.cover_image),f(!1)})["catch"](function(e){o.isArray(e.errors)?w(w().concat(e.errors)):p("Erro ao atualizar informações."),b(),u(!0),f(!1)})},_=function(){var o={current_password:a.current_password(),password:a.password(),email:a.email(),permalink:a.permalink(),public_name:a.public_name(),facebook_link:a.facebook_link(),twitter:a.twitter(),about_html:a.about_html(),links_attributes:k()};return t.publishingUserAbout&&(o.publishing_user_about=!0),m(!0),e.redraw(),h(),e.request({method:"PUT",url:"/users/"+i.id+".json",data:{user:o},config:Tt.setCsrfToken}).then(function(){d(!0),g(),m(!1),e.redraw(),Wn.validatePublish()})["catch"](function(t){r&&r.resetFieldErrors(),r=fc.mapRailsErrors(t.errors_json),p("Erro ao atualizar informações."),u(!0),m(!1),e.redraw()})},v=[],y=function(){return a.links().push({link:""})},j=function(e,t){return function(){return a.links()[t]._destroy=!0,!1}},k=function(){return o.reduce(a.links(),function(e,t,o){return e[o.toString()]=t,e},{})},x=function(){return l(a.email()!==a.email_confirmation()),!l()},z=function(){var e=String(a.password());return e.length>0&&e.length<=5&&s(!0),!s()},S=function(e,t){t||(n=function(){return e.submit()})},C=function(){return window.confirm("Tem certeza que deseja desativar a sua conta?")&&n(),!1},E=function(e){return e.preventDefault(),x()?z()?_():(p("Nova senha está incorreta."),u(!0)):(p("Confirmação de email está incorreta."),u(!0)),!1};return setTimeout(e.redraw,0),{removeLinks:v,removeLink:j,addLink:y,fields:a,loading:m,showSuccess:d,showError:u,errors:p,uploading:f,onSubmit:E,emailHasError:l,showEmailForm:c,validateEmailConfirmation:x,passwordHasError:s,validatePassword:z,deleteAccount:C,setDeleteForm:S,parsedErrors:r}},view:function(t,r){var n=r.user||{},i=t.fields;return e("#about-tab.content",[!t.showSuccess()||t.loading()||t.uploading()?"":e.component(Cn,{message:"As suas informações foram atualizadas"}),!t.showError()||t.loading()||t.uploading()?"":e.component(Cn,{message:e.trust(t.errors()),error:!0}),e("form.simple_form.w-form",{onsubmit:t.onSubmit},[e('input[name="utf8"][type="hidden"][value="✓"]'),e('input[name="_method"][type="hidden"][value="patch"]'),e('input[name="authenticity_token"][type="hidden"][value='+Tt.authenticityToken()+"]"),e("div",e(".w-container",e(".w-row",e(".w-col.w-col-10.w-col-push-1",[n.is_admin?e(".w-row.u-marginbottom-30.card.card-terciary",[e(".w-col.w-col-5.w-sub-col",[e("label.field-label.fontweight-semibold","Endereço do seu perfil"),e("label.field-label.fontsize-smallest.fontcolor-secondary","Seu perfil público pode ter uma URL personalizada. Escolha uma fácil de guardar!    ")]),e(".w-col.w-col-7",e(".w-row",[e(".w-col.w-col-6.w-col-small-6.w-col-tiny-6",e('input.string.optional.w-input.text-field.text-field.positive.prefix[id="user_permalink"][type="text"]',{name:"user[permalink]",value:i.permalink(),onchange:e.withAttr("value",i.permalink)})),e(".w-col.w-col-6.w-col-small-6.w-col-tiny-6.text-field.postfix.no-hover",e(".fontcolor-secondary.fontsize-smaller","  .catarse.me"))]))]):"",e(".w-row.u-marginbottom-30.card.card-terciary",[e(".fontsize-base.fontweight-semibold","Email"),e(".fontsize-small.u-marginbottom-30","Mantenha esse email atualizado pois ele é o canal de comunicação entre você, a equipe do Catarse e a equipe dos projetos que você apoiou. "),e(".fontsize-base.u-marginbottom-40",[e("span.fontweight-semibold.card.u-radius",n.email),e("a.alt-link.fontsize-small.u-marginleft-10[href='javascript:void(0);'][id='update_email']",{onclick:function(){t.showEmailForm.toggle()}},"Alterar email")]),e((t.showEmailForm()?"":".w-hidden")+".u-marginbottom-20.w-row[id='email_update_form']",[e(".w-col.w-col-6.w-sub-col",[e("label.field-label.fontweight-semibold","Novo email"),e("input.w-input.text-field.positive[id='new_email'][name='new_email'][type='email']",{"class":t.emailHasError()?"error":"",value:i.email(),onfocus:function(){return t.emailHasError(!1)},onchange:e.withAttr("value",i.email)})]),e(".w-col.w-col-6",[e("label.field-label.fontweight-semibold","Confirmar novo email"),e("input.string.required.w-input.text-field.w-input.text-field.positive[id='new_email_confirmation'][name='user[email]'][type='text']",{"class":t.emailHasError()?"error":"",value:i.email_confirmation(),onfocus:function(){return t.emailHasError(!1)},onblur:t.validateEmailConfirmation,onchange:e.withAttr("value",i.email_confirmation)})]),t.emailHasError()?e(Hi,{message:"Confirmação de email está incorreta."}):""])]),e(".w-row.u-marginbottom-30.card.card-terciary",[e(".w-col.w-col-5.w-sub-col",[e("label.field-label.fontweight-semibold","  Nome no perfil público"),e("label.field-label.fontsize-smallest.fontcolor-secondary","Esse é o nome que os usuários irão ver no seu perfil.")]),e(".w-col.w-col-7",e('input.string.optional.w-input.text-field.positive[id="user_public_name"][type="text"]',{name:"user[public_name]","class":!!t.parsedErrors.hasError("public_name")&&"error",value:i.public_name(),onchange:e.withAttr("value",i.public_name)}),t.parsedErrors.inlineError("public_name"))]),e(".w-form",[e(".w-row.u-marginbottom-30.card.card-terciary",[e(".w-col.w-col-5.w-sub-col",[e("label.field-label.fontweight-semibold","  Imagem do perfil"),e("label.field-label.fontsize-smallest.fontcolor-secondary","  Essa imagem será utilizada como a miniatura de seu perfil (PNG, JPG tamanho 280 x 280)")]),e(".w-col.w-col-4.w-sub-col",e(".input.file.optional.user_uploaded_image.field_with_hint",[e("label.field-label"),e("span.hint",e('img[alt="Avatar do Usuario"][src="'+i.uploaded_image()+'"]')),e('input.file.optional.w-input.text-field[id="user_uploaded_image"][type="file"]',{name:"user[uploaded_image]","class":!!t.parsedErrors.hasError("uploaded_image")&&"error"}),t.parsedErrors.inlineError("uploaded_image")]))]),r.hideCoverImg?"":e(".w-row.u-marginbottom-30.card.card-terciary",[e(".w-col.w-col-5.w-sub-col",[e("label.field-label.fontweight-semibold","  Imagem de capa do perfil"),e("label.field-label.fontsize-smallest.fontcolor-secondary","  Essa imagem será utilizada como fundo do cabeçalho do seu perfil público (PNG ou JPG). Caso você não envie nenhum imagem aqui, utilizaremos sua imagem de perfil como alternativa.")]),e(".w-col.w-col-4.w-sub-col",e(".input.file.optional.user_cover_image",[e("label.field-label"),e("span.hint",n.profile_cover_image?e("img",{src:i.cover_image()}):""),e('input.file.optional.w-input.text-field[id="user_cover_image"][type="file"]',{name:"user[cover_image]"})]))])]),e(".w-row",e(".w-col",e(".card.card-terciary.u-marginbottom-30",[e("label.field-label.fontweight-semibold","Sobre"),e("label.field-label.fontsize-smallest.fontcolor-secondary.u-marginbottom-20","Fale sobre você e tente fornecer as informações mais relevantes para que visitantes possam te conhecer melhor. "),e(".w-form",e(".preview-container.u-marginbottom-40",{"class":!!t.parsedErrors.hasError("about_html")&&"error"},Tt.redactor("user[about_html]",i.about_html)),t.parsedErrors.inlineError("about_html"))]))),e(".w-form.card.card-terciary.u-marginbottom-30",[e(".w-row.u-marginbottom-10",[e(".w-col.w-col-5.w-sub-col",[e("label.field-label.fontweight-semibold","  Perfil do facebook"),e("label.field-label.fontsize-smallest.fontcolor-secondary","  Cole o link do seu perfil")]),e(".w-col.w-col-7",e('input.string.optional.w-input.text-field.positive[type="text"]',{name:"user[facebook_link]",value:i.facebook_link(),onchange:e.withAttr("value",i.facebook_link)}))]),e(".w-row.u-marginbottom-10",[e(".w-col.w-col-5.w-sub-col",[e("label.field-label.fontweight-semibold","  Perfil do twitter"),e("label.field-label.fontsize-smallest.fontcolor-secondary","  Cole o link do seu perfil")]),e(".w-col.w-col-7",e('input.string.optional.w-input.text-field.positive[type="text"]',{name:"user[twitter]",value:i.twitter(),onchange:e.withAttr("value",i.twitter)}))])]),e(".w-form.card.card-terciary.u-marginbottom-30",e(".w-row.u-marginbottom-10",[e(".w-col.w-col-5.w-sub-col",[e('label.field-label.fontweight-semibold[for="name-8"]'," Presença na internet"),e('label.field-label.fontsize-smallest.fontcolor-secondary[for="name-8"]'," Inclua links que ajudem outros usuários a te conhecer melhor. ")]),e(".w-col.w-col-7",[e(".w-row",[i.links()&&i.links().length<=0?"":e(".link",o.map(i.links(),function(o,r){var n=o._destroy;return e("div",{key:r,"class":n?"w-hidden":"none"},[e(".w-col.w-col-10.w-col-small-10.w-col-tiny-10",e('input.string.w-input.text-field.w-input.text-field][type="text"][value="'+o.link+'"]',{"class":""===o.link?"positive":"optional",name:"user[links_attributes]["+r+"][link]",onchange:e.withAttr("value",function(e){return i.links()[r].link=e})})),e(".w-col.w-col-2.w-col-small-2.w-col-tiny-2",[e("a.btn.btn-small.btn-terciary.fa.fa-lg.fa-trash.btn-no-border",{onclick:t.removeLink(o.id,r)})])])}))]),e(".w-row",[e(".w-col.w-col-6.w-col-push-6",e("a.btn.btn-small.btn-terciary",{onclick:t.addLink},e("span.translation_missing","Add Link")))])])])),r.hidePasswordChange?"":e(".w-form.card.card-terciary.u-marginbottom-30",e(".w-row.u-marginbottom-10",[e(".fontsize-base.fontweight-semibold","Alterar minha senha"),e(".fontsize-small.u-marginbottom-20","Para que a senha seja alterada você precisa confirmar a sua senha atual."),e(".w-row.u-marginbottom-20",[e(".w-col.w-col-6.w-sub-col",[e("label.field-label.fontweight-semibold"," Senha atual"),e("input.password.optional.w-input.text-field.w-input.text-field.positive[id='user_current_password'][name='user[current_password]'][type='password']",{value:i.current_password(),onchange:e.withAttr("value",i.current_password)})]),e(".w-col.w-col-6",[e("label.field-label.fontweight-semibold"," Nova senha"),e("input.password.optional.w-input.text-field.w-input.text-field.positive[id='user_password'][name='user[password]'][type='password']",{"class":t.passwordHasError()?"error":"",value:i.password(),onfocus:function(){return t.passwordHasError(!1)},onblur:t.validatePassword,onchange:e.withAttr("value",i.password)}),t.passwordHasError()?e(Hi,{message:"A sua nova senha deve ter no mínimo 6 caracteres."}):""])])])),!n.is_admin&&(r.hideDisableAcc||n.total_published_projects>0)?"":e(".w-form.card.card-terciary.u-marginbottom-30",e(".w-row.u-marginbottom-10",[e(".fontweight-semibold.fontsize-smaller","Desativar minha conta"),e(".fontsize-smallest","Todos os seus apoios serão convertidos em apoios anônimos, seus dados não serão mais visíveis, você sairá automaticamente do sistema e sua conta será desativada permanentemente."),e("a.alt-link.fontsize-smaller[href='/pt/users/"+n.id+"'][rel='nofollow']",{onclick:t.deleteAccount},"Desativar minha conta no Catarse"),e("form.w-hidden",{action:"/pt/users/"+n.id,method:"post",config:t.setDeleteForm},[e("input[name='authenticity_token'][type='hidden'][value='"+Tt.authenticityToken()+"']"),e("input[name='_method'][type='hidden'][value='delete']")])]))]))),e(Rt,{loading:t.loading,onSubmit:t.onSubmit}))])])}},bc=o.partial(Tt.i18nScope,"users.show.contributions"),gc={controller:function(e){var t=e.title,o=e.hideSurveys;return{hideSurveys:o,title:t}},view:function(r,n){var i=n.collection,a=n.isSubscription,s=n.pagination,l=r.hideSurveys,c=r.title;return o.isEmpty(i)?e("div",""):e("div",[e(".section-one-column.u-marginbottom-30",e(".w-container",[e(".fontsize-larger.fontweight-semibold.u-marginbottom-30.u-text-center",c),e(".card.card-secondary.w-hidden-small.w-hidden-tiny.w-row",[e(".w-col.w-col-3",e(".fontsize-small.fontweight-semibold",t.t("project_col",bc()))),e(".w-col.w-col-3",e(".fontsize-small.fontweight-semibold",t.t("contribution_col",bc()))),e(".w-col.w-col-3",e(".fontsize-small.fontweight-semibold",t.t("reward_col",bc()))),e(".w-col.w-col-1"),l?"":e(".w-col.w-col-2",e(".fontsize-small.fontweight-semibold",a?"":t.t("survey_col",bc())))]),a?o.map(i,function(t){return e(As,{subscription:t})}):o.map(i,function(t){return e(Za,{contribution:t})}),e(".w-row.u-marginbottom-40.u-margintop-30",[e(ha,{collection:s,cssClass:".w-col-push-4"})])])),e(".divider.u-marginbottom-80.u-margintop-80")])}},hc={controller:function(t){var o=t.userId,r=t.user&&t.user.common_id,n=g.paginationVM(S.userSubscription),i=w.paginationVM(S.userContribution),a=w.paginationVM(S.userContribution),s=w.paginationVM(S.userContribution),l=e.prop(!1),c=e.prop(!0),d=function(){l(!0),c(!1),e.redraw()},u=w.filtersVM({user_id:"eq",state:"in",project_state:"in"}),p=w.filtersVM({user_id:"eq",status:"in"});return S.userSubscription.pageSize(9),S.userContribution.pageSize(9),p.user_id(r).status(["started","active","inactive","canceled","canceling","error"]).order({created_at:"desc"}),n.firstPage(p.parameters()).then(function(){c(!1)})["catch"](d),u.order({created_at:"desc"}).user_id(o).state(["refunded","pending_refund","paid","refused","pending"]),u.project_state(["online","waiting_funds"]),i.firstPage(u.parameters()).then(function(){c(!1)})["catch"](d),u.project_state(["failed"]),s.firstPage(u.parameters()).then(function(){c(!1)})["catch"](d),u.project_state(["successful"]).state(["paid","refunded","pending_refund"]),a.firstPage(u.parameters()).then(function(){c(!1)})["catch"](d),{subscriptions:n,onlinePages:i,successfulPages:a,failedPages:s,error:l,loader:c}},view:function(t,r){var n=t.subscriptions.collection(),i=t.onlinePages.collection(),a=t.successfulPages.collection(),s=t.failedPages.collection();return e(".content[id='private-contributed-tab']",t.error()?e.component(Hi,{message:"Erro ao carregar os projetos."}):t.loader()?Tt.loader():o.isEmpty(n)&&o.isEmpty(i)&&o.isEmpty(a)&&o.isEmpty(s)?e(".w-container",e(".w-row.u-margintop-30.u-text-center",[e(".w-col.w-col-3"),e(".w-col.w-col-6",[e(".fontsize-large.u-marginbottom-30",["Você ainda não apoiou nenhum projeto no",e.trust("&nbsp;"),"Catarse..."]),e(".w-row",[e(".w-col.w-col-3"),e(".w-col.w-col-6",e("a.btn.btn-large[href='/pt/explore']",{config:e.route,onclick:function(){e.route("/explore")}},"Apoie agora!")),e(".w-col.w-col-3")])]),e(".w-col.w-col-3")])):[e.component(gc,{title:"Assinaturas",collection:n,isSubscription:!0,pagination:t.subscriptions}),e.component(gc,{title:"Projetos em andamento",collection:i,pagination:t.onlinePages}),e.component(gc,{title:"Projetos bem-sucedidos",collection:a,pagination:t.successfulPages}),e.component(gc,{title:"Projetos não-financiados",collection:s,pagination:t.failedPages,hideSurveys:!0})])}},_c={view:function(t,o){var r=".card.medium.card-terciary.u-marginbottom-30";return e(r,[e("div.u-marginbottom-30",[e("label.fontweight-semibold.fontsize-base",o.label),o.label_hint?e(".fontsize-small",o.label_hint):""]),e("div",o.children)])}},vc=uc(),yc={owner_document:e.prop(""),country_id:e.prop(""),street:e.prop(""),number:e.prop(""),city:e.prop(""),zipcode:e.prop(""),complement:e.prop(""),neighbourhood:e.prop(""),state:e.prop(""),phonenumber:e.prop(""),name:e.prop(""),agency:e.prop(""),bank_id:e.prop(""),agency_digit:e.prop(""),account:e.prop(""),account_digit:e.prop(""),bank_account_id:e.prop(""),state_inscription:e.prop(""),birth_date:e.prop(""),account_type:e.prop(""),bank_account_type:e.prop("")},jc=function(e){var t=void 0;try{t=JSON.parse(e)}catch(r){t={}}var n=function(e,r){var n=o.first(o.compact(o.map(r,function(e){return o.first(t[e])})));n&&(vc(e,n),vc.inlineError(e,!0))};return n("owner_document",["user.cpf","cpf"]),n("country_id",["user.country_id","country_id"]),n("street",["user.address_street","address_street"]),n("number",["user.address_number","address_number"]),n("city",["user.address_city","address_city"]),n("zipcode",["user.address_zip_code","address_zip_code"]),n("complement",["user.address_complement","address_complement"]),n("neighbourhood",["user.address_neighbourhood","address_neighbourhood"]),n("state",["user.address_state","address_state"]),n("phonenumber",["user.phone_number","phone_number"]),n("name",["user.name","name"]),n("agency",["user.bank_account.agency","bank_account.agency"]),n("agency_digit",["user.bank_account.agency_digit","bank_account.agency_digit"]),n("account",["user.bank_account.account","bank_account.account"]),n("account_digit",["user.bank_account.account_digit","bank_account.account_digit"]),n("bank_account_type",["user.bank_account.account_type","bank_account.account_type"]),n("bank_id",["user.bank_account.bank","bank_account.bank"]),n("birth_date",["user.birth_date","birth_date"]),n("account_type",["user.account_type","account_type"]),vc},kc={fields:yc,mapRailsErrors:jc},xc=o.partial(Tt.i18nScope,"users.edit.settings_tab"),zc={controller:function(t){var r=kc.mapRailsErrors(Wn.railsErrors()),n=void 0,i=t.user,a=e.prop({owner_document:e.prop(i.owner_document||""),name:e.prop(i.name||""),state_inscription:e.prop(""),address:e.prop(i.address||{}),birth_date:e.prop(i.birth_date?Tt.momentify(i.birth_date):""),account_type:e.prop(i.account_type||"")}),s=e.prop(!1),l=t.userId,c=e.prop(""),d=e.prop(!0),u=Tt.toggleProp(!1,!0),p=Tt.toggleProp(!1,!0),m=o.partial(Tt.mask,"999.999.999-99"),f=o.partial(Tt.mask,"99.999.999/9999-99"),w=o.partial(Tt.mask,"99/99/9999"),b=e.prop(),g=e.prop(-1),h=function(t){return function(){return g(t),e.redraw(!0),n(),!1}},_=function(e,t){t||(n=function(){return e.submit()})},v=function(){var o={cpf:a().owner_document(),name:a().name(),address_attributes:a().address(),account_type:a().account_type(),birth_date:a().birth_date()};return t.publishingUserSettings&&(o.publishing_user_settings=!0),e.request({method:"PUT",url:"/users/"+l+".json",data:{user:o},config:Tt.setCsrfToken}).then(function(){r&&r.resetFieldErrors(),s(!1),u()||u.toggle(),Wn.validatePublish()})["catch"](function(e){r&&r.resetFieldErrors(),r=kc.mapRailsErrors(e.errors_json),c("Erro ao atualizar informações."),s(!1),u()&&u.toggle(),p()||p.toggle()})},y=function(){return s(!0),e.redraw(),v(),!1},j=o.compose(a().birth_date,w),k=function(e){"pf"!=a().account_type()?a().owner_document(f(e)):a().owner_document(m(e))},x=function(){c(!0),d(!1),e.redraw()};return mo.getUserCreditCards(t.userId).then(b)["catch"](x),r.hasError("country_id")&&r.inlineError("country_id",!1),{handleError:x,applyDocumentMask:k,fields:a,loader:d,showSuccess:u,showError:p,user:i,onSubmit:y,error:c,creditCards:b,deleteCard:h,toDeleteCard:g,setCardDeletionForm:_,applyBirthDateMask:j,loading:s,parsedErrors:r}},view:function(r,n){var i=r.user,a=r.fields(),s=i.total_contributed_projects>=1||i.total_published_projects>=1,l=!i.is_admin_role&&(s&&!o.isEmpty(i.name)&&!o.isEmpty(i.owner_document));return e("[id='settings-tab']",[r.showSuccess()?e.component(Cn,{message:t.t("update_success_msg",xc()),toggleOpt:r.showSuccess}):"",r.showError()?e.component(Cn,{message:e.trust(r.error()),toggleOpt:r.showError,error:!0}):"",e("form.w-form",{onsubmit:r.onSubmit},[e("div",[e(".w-container",e(".w-col.w-col-10.w-col-push-1",e(_c,{label:t.t("legal_title",xc()),label_hint:e.trust(t.t("legal_subtitle",xc())),children:[e(".divider.u-marginbottom-20"),e(".w-row",[e(".w-col.w-col-6.w-sub-col",e(".input.select.required.user_bank_account_bank_id",[e("select.select.required.w-input.text-field.bank-select.positive"+(l?".text-field-disabled":"")+"[id='user_bank_account_attributes_bank_id']",{name:"user[bank_account_attributes][bank_id]",onchange:e.withAttr("value",a.account_type),disabled:l},[e("option[value='pf']",{selected:"pf"===a.account_type()},t.t("account_types.pf",xc())),e("option[value='pj']",{selected:"pj"===a.account_type()},t.t("account_types.pj",xc())),e("option[value='mei']",{selected:"mei"===a.account_type()},t.t("account_types.mei",xc()))])]))]),e(".w-row",[e(".w-col.w-col-6.w-sub-col",[e("label.text.required.field-label.field-label.fontweight-semibold.force-text-dark[for='user_bank_account_attributes_owner_name']",t.t("pf"==a.account_type()?"pf_label_name":"pj_label_name",xc())),e("input.string.required.w-input.text-field.positive"+(l?".text-field-disabled":"")+"[id='user_bank_account_attributes_owner_name'][type='text']",{value:a.name(),name:"user[name]","class":!!r.parsedErrors.hasError("name")&&"error",onchange:e.withAttr("value",a.name),disabled:l}),r.parsedErrors.inlineError("name")]),e(".w-col.w-col-6",[e(".w-row",[e(".w-col.w-col-6.w-col-small-6.w-col-tiny-6.w-sub-col-middle",[e("label.text.required.field-label.field-label.fontweight-semibold.force-text-dark[for='user_bank_account_attributes_owner_document']",t.t("pf"==a.account_type()?"pf_label_document":"pj_label_document",xc())),e("input.string.tel.required.w-input.text-field.positive"+(l?".text-field-disabled":"")+"[data-validate-cpf-cnpj='true'][id='user_bank_account_attributes_owner_document'][type='tel'][validation_text='true']",{value:a.owner_document(),"class":!!r.parsedErrors.hasError("owner_document")&&"error",disabled:l,name:"user[cpf]",onchange:e.withAttr("value",r.applyDocumentMask),onkeyup:e.withAttr("value",r.applyDocumentMask)}),r.parsedErrors.inlineError("owner_document")]),e(".w-col.w-col-6.w-col-small-6.w-col-tiny-6","pf"==a.account_type()?[e("label.text.required.field-label.field-label.fontweight-semibold.force-text-dark[for='user_bank_account_attributes_owner_document']",t.t("label_birth_date",xc())),e("input.string.tel.required.w-input.text-field.positive"+(l&&!o.isEmpty(i.birth_date)?".text-field-disabled":"")+"[data-validate-cpf-cnpj='true'][id='user_bank_account_attributes_owner_document'][type='tel'][validation_text='true']",{value:a.birth_date(),name:"user[birth_date]","class":!!r.parsedErrors.hasError("birth_date")&&"error",
disabled:l&&!o.isEmpty(i.birth_date),onchange:e.withAttr("value",r.applyBirthDateMask),onkeyup:e.withAttr("value",r.applyBirthDateMask)}),r.parsedErrors.inlineError("birth_date")]:[e("label.text.required.field-label.field-label.fontweight-semibold.force-text-dark[for='user_bank_account_attributes_owner_document']",t.t("label_state_inscription",xc())),e("input.string.tel.required.w-input.text-field.positive[data-validate-cpf-cnpj='true'][id='user_bank_account_attributes_owner_document'][type='tel'][validation_text='true']",{value:a.state_inscription(),"class":!!r.parsedErrors.hasError("state_inscription")&&"error",name:"user[state_inscription]",onchange:e.withAttr("value",a.state_inscription)}),r.parsedErrors.inlineError("state_inscription")])])])])]}),e(_c,{label:t.t("address_title",xc()),label_hint:t.t("address_subtitle",xc()),children:[e(".divider.u-marginbottom-20"),e(Gl,{fields:r.fields,parsedErrors:r.parsedErrors})]}),n.hideCreditCards?"":e(".w-form.card.card-terciary.u-marginbottom-20",[e(".fontsize-base.fontweight-semibold",t.t("credit_cards.title",xc())),e(".fontsize-small.u-marginbottom-20",e.trust(t.t("credit_cards.subtitle",xc()))),e(".divider.u-marginbottom-20"),e(".w-row.w-hidden-tiny.card",[e(".w-col.w-col-5.w-col-small-5",e(".fontsize-small.fontweight-semibold",t.t("credit_cards.card_label",xc()))),e(".w-col.w-col-5.w-col-small-5",e(".fontweight-semibold.fontsize-small",t.t("credit_cards.provider_label",xc()))),e(".w-col.w-col-2.w-col-small-2")]),o.map(r.creditCards(),function(o){return e(".w-row.card",[e(".w-col.w-col-5.w-col-small-5",e(".fontsize-small.fontweight-semibold",["XXXX XXXX XXXX",e.trust("&nbsp;"),o.last_digits])),e(".w-col.w-col-5.w-col-small-5",e(".fontsize-small.fontweight-semibold.u-marginbottom-10",o.card_brand.toUpperCase())),e(".w-col.w-col-2.w-col-small-2",e("a.btn.btn-terciary.btn-small[rel='nofollow']",{onclick:r.deleteCard(o.id)},t.t("credit_cards.remove_label",xc())))])}),e("form.w-hidden",{action:"/pt/users/"+i.id+"/credit_cards/"+r.toDeleteCard(),method:"POST",config:r.setCardDeletionForm},[e("input[name='utf8'][type='hidden'][value='✓']"),e("input[name='_method'][type='hidden'][value='delete']"),e("input[name='authenticity_token'][type='hidden'][value='"+Tt.authenticityToken()+"']")])]))),e(Rt,{loading:r.loading,onSubmit:r.onSubmit})])])])}},Sc=o.partial(Tt.i18nScope,"users.edit.notifications_fields"),Cc={controller:function(t){var r=e.prop(),n=e.prop(),i=e.prop(),a=t.userId,s=Tt.toggleProp(!1,!0),l=e.prop(!1);mo.getUserProjectReminders(a).then(n)["catch"](function(t){l(!0),e.redraw()}),mo.getMailMarketingLists().then(function(e){i(c(e))})["catch"](function(t){l(!0),e.redraw()}),mo.getUserContributedProjects(a,null).then(r)["catch"](function(t){l(!0),e.redraw()});var c=function(r){var n=t.user.mail_marketing_lists;return o.map(r,function(t,r){var i=!o.isEmpty(n)&&!o.isUndefined(o.find(n,function(e){return!!e.marketing_list&&e.marketing_list.list_id===t.list_id})),a={item:t,in_list:i,should_insert:e.prop(!1),should_destroy:e.prop(!1),isInsertInListState:Tt.toggleProp(!1,!0),hovering:e.prop(!1)};return a.isInsertInListState(!a.in_list),a})},d=function(e){var r=o.find(t.user.mail_marketing_lists,function(t){return t.marketing_list.list_id===e.list_id});return r?r.user_marketing_list_id:null},u=function(e,t){return Boolean(o.find(e,function(e){return!!e.marketing_list&&e.marketing_list.list_id===t.list_id}))};return{projects:r,mailMarketingLists:i,showNotifications:s,projectReminders:n,error:l,generateListHandler:c,getUserMarketingListId:d,isOnCurrentList:u}},view:function(r,n){var i=n.user,a=r.projectReminders(),s=r.projects(),l=r.mailMarketingLists();return e("[id='notifications-tab']",r.error()?e.component(Hi,{message:"Erro ao carregar a página."}):e("form.simple_form.edit_user[accept-charset='UTF-8'][action='/pt/users/"+i.id+"'][method='post'][novalidate='novalidate']",[e("input[name='utf8'][type='hidden'][value='✓']"),e("input[name='_method'][type='hidden'][value='patch']"),e("input[name='authenticity_token'][type='hidden'][value='"+Tt.authenticityToken()+"']"),e("input[id='anchor'][name='anchor'][type='hidden'][value='notifications']"),e(".w-container",[e(".w-row",e(".w-col.w-col-10.w-col-push-1",e(".w-form.card.card-terciary",[e(".w-row.u-marginbottom-20",[e(".w-col.w-col-4",e(".fontweight-semibold.fontsize-small.u-marginbottom-10","Newsletters:")),e(".w-col.w-col-8",o.isEmpty(l)?Tt.loader():o.map(l,function(o,n){var a=o.item;return e(".card.u-marginbottom-20.u-radius.u-text-center-small-only",e(".w-row",[e(".w-sub-col.w-col.w-col-6",e("img",{src:t.t("newsletters."+a.list_id+".image_src",Sc())})),e(".w-col.w-col-6",[e(".fontsize-base.fontweight-semibold",t.t("newsletters."+a.list_id+".title",Sc())),e(".fontsize-small.u-marginbottom-30",t.t("newsletters."+a.list_id+".description",Sc())),o.should_insert()||o.should_destroy()?e("input[type='hidden']",{name:"user[mail_marketing_users_attributes]["+n+"][mail_marketing_list_id]",value:a.id}):"",o.should_destroy()?e("input[type='hidden']",{name:"user[mail_marketing_users_attributes]["+n+"][id]",value:r.getUserMarketingListId(a)}):"",o.should_destroy()?e("input[type='hidden']",{name:"user[mail_marketing_users_attributes]["+n+"][_destroy]",value:o.should_destroy()}):"",e("button.btn.btn-medium.w-button",{"class":o.isInsertInListState()?null:"btn-terciary",onclick:function(e){return r.isOnCurrentList(i.mail_marketing_lists,a)?void o.should_destroy(!0):void o.should_insert(!0)},onmouseenter:function(){o.hovering(!0)},onmouseout:function(){o.hovering(!1)}},o.in_list?o.hovering()?"Descadastrar":"Assinado":"Assinar")])]))}))]),e(".w-row.u-marginbottom-20",[e(".w-col.w-col-4",e(".fontweight-semibold.fontsize-small.u-marginbottom-10","Projetos que você apoiou:")),e(".w-col.w-col-8",e(".w-checkbox.w-clearfix",[e("input[name=user[subscribed_to_project_posts]][type='hidden'][value='0']"),e("input.w-checkbox-input"+(i.subscribed_to_project_posts?"[checked='checked']":"")+"[id='user_subscribed_to_project_posts'][name=user[subscribed_to_project_posts]][type='checkbox'][value='1']"),e("label.w-form-label.fontsize-base.fontweight-semibold"," Quero receber atualizações dos projetos"),e(".u-marginbottom-20",e("a.alt-link[href='javascript:void(0);']",{onclick:r.showNotifications.toggle}," Gerenciar as notificações de "+i.total_contributed_projects+" projetos")),r.showNotifications()?e("ul.w-list-unstyled.u-radius.card.card-secondary[id='notifications-box']",[o.isEmpty(s)?"":o.map(s,function(t){return e("li",e(".w-checkbox.w-clearfix",[e("input[id='unsubscribes_"+t.project_id+"'][type='hidden'][value='']",{name:"unsubscribes["+t.project_id+"]"}),e("input.w-checkbox-input"+(t.unsubscribed?"":"[checked='checked']")+"[type='checkbox'][value='1'][id='user_unsubscribes_"+t.project_id+"']",{name:"unsubscribes["+t.project_id+"]"}),e("label.w-form-label.fontsize-small",t.project_name)]))})]):""]))]),e(".w-row.u-marginbottom-20",[e(".w-col.w-col-4",e(".fontweight-semibold.fontsize-small.u-marginbottom-10","Social:")),e(".w-col.w-col-8",e(".w-checkbox.w-clearfix",[e("input[name=user[subscribed_to_friends_contributions]][type='hidden'][value='0']"),e("input.w-checkbox-input"+(i.subscribed_to_friends_contributions?"[checked='checked']":"")+"[id='user_subscribed_to_friends_contributions'][name=user[subscribed_to_friends_contributions]][type='checkbox'][value='1']"),e("label.w-form-label.fontsize-small","Um amigo apoiou ou lançou um projeto")])),e(".w-col.w-col-8",e(".w-checkbox.w-clearfix",[e("input[name=user[subscribed_to_new_followers]][type='hidden'][value='0']"),e("input.w-checkbox-input"+(i.subscribed_to_new_followers?"[checked='checked']":"")+"[id='user_subscribed_to_new_followers'][name=user[subscribed_to_new_followers]][type='checkbox'][value='1']"),e("label.w-form-label.fontsize-small","Um amigo começou a me seguir")]))]),e(".w-row.u-marginbottom-20",[e(".w-col.w-col-4",e(".fontweight-semibold.fontsize-small.u-marginbottom-10","Lembretes de projetos:")),e(".w-col.w-col-8",[o.isEmpty(a)?"":o.map(a,function(t){return e(".w-checkbox.w-clearfix",[e("input[id='user_reminders_"+t.project_id+"'][type='hidden'][value='false']",{name:"user[reminders]["+t.project_id+"]"}),e("input.w-checkbox-input[checked='checked'][type='checkbox'][value='1'][id='user_reminders_"+t.project_id+"']",{name:"user[reminders]["+t.project_id+"]"}),e("label.w-form-label.fontsize-small",t.project_name)])})])])]))),e(".u-margintop-30",e(".w-container",e(".w-row",e(".w-col.w-col-4.w-col-push-4",e("input.btn.btn-large[id='save'][name='commit'][type='submit'][value='Salvar']")))))])]))}},Ec={view:function(t,o){var r=o.project,n=o.user;return e(".card.card-terciary.u-radius.u-marginbottom-40",[e(".w-row",[o.hideAvatar?"":e(".w-col.w-col-2.w-col-small-2.w-col-tiny-2.w-hidden-tiny",[e('img.thumb.u-margintop-10.u-round[src="'+Tt.useAvatarOrDefault(n.profile_img_thumbnail)+'"][width="100"]')]),e(".w-col.w-col-10.w-col-small-10.w-col-tiny-10",[e(".fontcolor-secondary.fontsize-smallest.u-marginbottom-10",[r?"Dados do apoiador ":"Dados do usuário ",e('a.alt-link[href="/not-my-account'+(r?"?project_id="+r.project_id:"")+(o.reward?"&reward_id="+o.reward.id:"")+(o.value?"&value="+o.value:"")+'"]',"Não é você?")]),e(".fontsize-base.fontweight-semibold",n.name),e("label.field-label","CPF/CNPJ: "+n.owner_document)])])])}},Pc={controller:function(t){var r=t.parsedErrors,n=t.fields,i=t.user,a=e.prop({}),s=e.prop(),l=w.loader(S.bank.getPageOptions()),c=Tt.toggleProp(!1,!0),d=e.prop(!1),u=[{id:"51",code:"001",name:"Banco do Brasil S.A."},{id:"131",code:"341",name:"Itaú Unibanco S.A."},{id:"122",code:"104",name:"Caixa Econômica Federal"},{id:"104",code:"033",name:"Banco Santander  (Brasil)  S.A."},{id:"127",code:"399",name:"HSBC Bank Brasil S.A. - Banco Múltiplo"},{id:"23",code:"237",name:"Banco Bradesco S.A."}];return mo.getUserBankAccount(i.id).then(function(e){o.isEmpty(o.first(e))?n.bank_account_type("conta_corrente"):(a(o.first(e)),n.bank_account_id(a().bank_account_id),n.account(a().account),n.account_digit(a().account_digit),n.agency(a().agency),n.agency_digit(a().agency_digit),n.bank_id(a().bank_id),n.bank_account_type(a().account_type),t.bankCode(a().bank_id))}),l.load().then(s),{bankInput:t.bankInput,bankCode:t.bankCode,banks:s,banksLoader:l,showOtherBanksInput:d,showOtherBanks:c,popularBanks:u,bankAccount:a,parsedErrors:r}},view:function(t,r){var n=(r.user,r.fields),i=t.bankAccount();return e("div",[e(".w-row",[e(".w-col.w-col-5.w-sub-col"+(t.showOtherBanksInput()?".w-hidden":"")+"[id='bank_select']",e(".input.select.required.user_bank_account_bank_id",[e("label.field-label.fontsize-smaller","Banco"),e("select.select.required.w-input.text-field.bank-select.positive[id='user_bank_account_attributes_bank_id']",{name:"user[bank_account_attributes][bank_id]","class":!!t.parsedErrors.hasError("bank_id")&&"error",onchange:function(o){e.withAttr("value",t.bankCode)(o),t.showOtherBanksInput("0"==t.bankCode())}},[e("option[value='']",{selected:""===n.bank_id()}),o.map(t.popularBanks,function(t){return n.bank_id()!=t.id?e("option[value='"+t.id+"']",{selected:n.bank_id()==t.id},t.code+" . "+t.name):""}),""===n.bank_id()||o.find(t.popularBanks,function(e){return e.id===n.bank_id()})?"":e("option[value='"+n.bank_id()+"']",{selected:!0},i.bank_code+" . "+i.bank_name),e("option[value='0']","Outro")]),e(".fontsize-smaller.text-error.u-marginbottom-20.fa.fa-exclamation-triangle.w-hidden[data-error-for='user_bank_account_attributes_bank_id']"," Selecione um banco"),t.parsedErrors.inlineError("bank_id")])),t.showOtherBanksInput()?e(".w-col.w-col-5.w-sub-col",e(".w-row.u-marginbottom-20[id='bank_search']",e(".w-col.w-col-12",[e(".input.string.optional.user_bank_account_input_bank_number",[e("label.field-label.fontsize-smaller","Número do banco (3 números)"),e("input.string.optional.w-input.text-field.bank_account_input_bank_number[id='user_bank_account_attributes_input_bank_number'][maxlength='3'][size='3'][type='text']",{name:"user[bank_account_attributes][input_bank_number]",value:t.bankInput(),onchange:e.withAttr("value",t.bankInput)}),e(".fontsize-smaller.text-error.u-marginbottom-20.fa.fa-exclamation-triangle.w-hidden[data-error-for='user_bank_account_attributes_input_bank_number']"," Número do banco inválido")]),e("a.w-hidden-small.w-hidden-tiny.alt-link.fontsize-smaller[href='javascript:void(0);'][id='show_bank_list']",{onclick:t.showOtherBanks.toggle},["Busca por nome  ",e.trust("&nbsp;"),e.trust("&gt;")]),e("a.w-hidden-main.w-hidden-medium.alt-link.fontsize-smaller[href='javascript:void(0);'][id='show_bank_list']",{onclick:t.showOtherBanks.toggle},["Busca por nome  ",e.trust("&nbsp;"),e.trust("&gt;")])]))):"",t.showOtherBanks()?e(".w-row[id='bank_search_list']",e(".w-col.w-col-12",e(".select-bank-list[data-ix='height-0-on-load']",{style:{height:"395px"}},e(".card.card-terciary",[e(".fontsize-small.fontweight-semibold.u-marginbottom-10.u-text-center","Selecione o seu banco abaixo"),e(".fontsize-smaller",[e(".w-row.card.card-secondary.fontweight-semibold",[e(".w-col.w-col-3.w-col-small-3.w-col-tiny-3",e("div","Número")),e(".w-col.w-col-9.w-col-small-9.w-col-tiny-9",e("div","Nome"))]),o.isEmpty(t.banks())?"":o.map(t.banks(),function(o){return e(".w-row.card.fontsize-smallest",[e(".w-col.w-col-3.w-col-small-3.w-col-tiny-3",e("a.link-hidden.bank-resource-link[data-code='"+o.code+"'][data-id='"+o.id+"'][href='javascript:void(0)']",{onclick:function(){t.bankInput(o.code),t.showOtherBanks.toggle()}},o.code)),e(".w-col.w-col-9.w-col-small-9.w-col-tiny-9",e("a.link-hidden.bank-resource-link[data-code='"+o.code+"'][data-id='"+o.id+"'][href='javascript:void(0)']",{onclick:function(){t.bankInput(o.code),t.showOtherBanks.toggle()}},o.code+" . "+o.name))])})])])))):"",e(".w-col.w-col-7",e(".w-row",[e(".w-col.w-col-7.w-col-small-7.w-col-tiny-7.w-sub-col-middle",[e("label.text.required.field-label.field-label.fontweight-semibold.force-text-dark.fontsize-smaller[for='user_bank_account_attributes_agency']","Agência"),e("input.string.required.w-input.text-field.positive[id='user_bank_account_attributes_agency'][type='text']",{value:n.agency(),"class":!!t.parsedErrors.hasError("agency")&&"error",name:"user[bank_account_attributes][agency]",onchange:e.withAttr("value",n.agency)}),t.parsedErrors.inlineError("agency")]),e(".w-col.w-col-5.w-col-small-5.w-col-tiny-5",[e("label.text.optional.field-label.field-label.fontweight-semibold.force-text-dark.fontsize-smaller[for='user_bank_account_attributes_agency_digit']","Dígito agência"),e("input.string.optional.w-input.text-field.positive[id='user_bank_account_attributes_agency_digit'][type='text']",{value:n.agency_digit(),"class":!!t.parsedErrors.hasError("agency_digit")&&"error",name:"user[bank_account_attributes][agency_digit]",onchange:e.withAttr("value",n.agency_digit)}),t.parsedErrors.inlineError("agency_digit")])]))]),e(".w-row",[e(".w-col.w-col-5.w-sub-col",[e("label.field-label.fontweight-semibold.fontsize-smaller","Tipo de conta"),e(".input.select.required.user_bank_account_account_type",[e("select.select.required.w-input.text-field.bank-select.positive[id='user_bank_account_attributes_account_type']",{name:"user[bank_account_attributes][account_type]","class":!!t.parsedErrors.hasError("account_type")&&"error",onchange:e.withAttr("value",n.bank_account_type)},[e("option[value='conta_corrente']",{selected:"conta_corrente"===n.bank_account_type()},"Conta corrente"),e("option[value='conta_poupanca']",{Selected:"conta_poupanca"===n.bank_account_type()},"Conta poupança"),e("option[value='conta_corrente_conjunta']",{selected:"conta_corrente_conjunta"===n.bank_account_type()},"Conta corrente conjunta"),e("option[value='conta_poupanca_conjunta']",{selected:"conta_poupanca_conjunta"===n.bank_account_type()},"Conta poupança conjunta")]),t.parsedErrors.inlineError("account_type")])]),e(".w-col.w-col-7",e(".w-row",[e(".w-col.w-col-7.w-col-small-7.w-col-tiny-7.w-sub-col-middle",[e("label.text.required.field-label.field-label.fontweight-semibold.force-text-dark.fontsize-smaller[for='user_bank_account_attributes_account']","No. da conta"),e("input.string.required.w-input.text-field.positive[id='user_bank_account_attributes_account'][type='text']",{value:n.account(),"class":!!t.parsedErrors.hasError("account")&&"error",onchange:e.withAttr("value",n.account),name:"user[bank_account_attributes][account]"}),t.parsedErrors.inlineError("account")]),e(".w-col.w-col-5.w-col-small-5.w-col-tiny-5",[e("label.text.required.field-label.field-label.fontweight-semibold.force-text-dark.fontsize-smaller[for='user_bank_account_attributes_account_digit']","Dígito conta"),e("input.string.required.w-input.text-field.positive[id='user_bank_account_attributes_account_digit'][type='text']",{value:n.account_digit(),"class":!!t.parsedErrors.hasError("account_digit")&&"error",onchange:e.withAttr("value",n.account_digit),name:"user[bank_account_attributes][account_digit]"}),t.parsedErrors.inlineError("account_digit")])]))]),i.bank_account_id?e("input[id='user_bank_account_attributes_id'][type='hidden']",{name:"user[bank_account_attributes][id]",value:n.bank_account_id()}):""])}},Mc=o.partial(Tt.i18nScope,"users.balance"),Dc={controller:function(t){var o,r=kc.mapRailsErrors(t.rails_errors),n={agency:e.prop(""),bank_id:e.prop(""),agency_digit:e.prop(""),account:e.prop(""),account_digit:e.prop(""),bank_account_id:e.prop(""),bank_account_type:e.prop("")},i=e.prop([]),a=e.prop(""),s=e.prop("-1"),l=(w.filtersVM({user_id:"eq"}),t.balance),c=S.balanceTransfer.postOptions({user_id:l.user_id}),d=w.loaderWithToken(c),u=e.prop(!1),p=Tt.toggleProp(!1,!0),m=Tt.toggleProp(!1,!0),f=function(t){var o={};return o.bank_account_attributes={bank_id:s(),input_bank_number:a(),agency_digit:n.agency_digit(),agency:n.agency(),account:n.account(),account_digit:n.account_digit(),account_type:n.bank_account_type()},n.bank_account_id()&&(o.bank_account_attributes.id=n.bank_account_id().toString()),u(!0),e.redraw(),e.request({method:"PUT",url:"/users/"+t+".json",data:{user:o},config:Tt.setCsrfToken}).then(function(o){r&&r.resetFieldErrors(),mo.getUserBankAccount(t).then(i),u(!1),m(!0),e.redraw()})["catch"](function(t){r&&r.resetFieldErrors(),r=kc.mapRailsErrors(t.errors_json),u(!1),e.redraw()})},b=function(){d.load().then(function(o){t.balanceManager.load(),t.balanceTransactionManager.load(),m(!1),p.toggle(),e.redraw()})};return o={loading:u,requestLoader:d,requestFund:b,bankAccounts:i,displayDone:p,displayConfirmation:m,loadBankA:t.bankAccountManager.loader,updateUserData:f},N(o,"requestFund",b),N(o,"parsedErrors",r),N(o,"fields",n),N(o,"bankInput",a),N(o,"bankCode",s),o},view:function(r,n){var i=n.balance;r.fields,n.user;return e("div",[e(".modal-dialog-header",[e(".fontsize-large.u-text-center",t.t("withdraw",Mc()))]),r.displayConfirmation()?e(".modal-dialog-content.u-text-center",r.loadBankA()?Tt.loader():o.map(r.bankAccounts(),function(o){return[e(".fontsize-base.u-marginbottom-20",[e("span.fontweight-semibold",t.t("value_text",Mc())+":"),e.trust("&nbsp;"),e("span.text-success",t.t("shared.currency",{amount:Tt.formatNumber(i.amount,2,3)}))]),e(".fontsize-base.u-marginbottom-10",[e("span",{style:{"font-weight":" 600"}},t.t("bank.account",Mc()))]),e(".fontsize-small.u-marginbottom-10",[e("div",[e("span.fontcolor-secondary",t.t("bank.name",Mc())),e.trust("&nbsp;"),o.owner_name]),e("div",[e("span.fontcolor-secondary",t.t("bank.cpf_cnpj",Mc())),e.trust("&nbsp;"),o.owner_document]),e("div",[e("span.fontcolor-secondary",t.t("bank.bank_name",Mc())),e.trust("&nbsp;"),o.bank_name]),e("div",[e("span.fontcolor-secondary",t.t("bank.agency",Mc())),e.trust("&nbsp;"),o.agency+"-"+o.agency_digit]),e("div",[e("span.fontcolor-secondary",t.t("bank.account",Mc())),e.trust("&nbsp;"),o.account+"-"+o.account_digit])])]})):r.displayDone()?e(".modal-dialog-content.u-text-center",[e(".fa.fa-check-circle.fa-5x.text-success.u-marginbottom-40"),e("p.fontsize-large",t.t("success_message",Mc()))]):e(".modal-dialog-content",[e(".fontsize-base.u-marginbottom-20",[e("span.fontweight-semibold",t.t("value_text",Mc())+":"),e.trust("&nbsp;"),e("span.text-success",t.t("shared.currency",{amount:Tt.formatNumber(i.amount,2,3)}))]),e(Ec,{user:n.user,hideAvatar:!0}),e(Pc,{user:n.user,parsedErrors:r.parsedErrors,fields:r.fields,bankCode:r.bankCode,bankInput:r.bankInput})]),r.displayConfirmation()?e(".modal-dialog-nav-bottom",{style:"position: relative"},[e(".w-row",[e(".w-col.w-col-1"),e(".w-col.w-col-5",r.requestLoader()||r.loading()?Tt.loader():[e('a.btn.btn-medium.btn-request-fund[href="javascript:void(0);"]',{onclick:function(){return r.requestFund()}},t.t("shared.confirm_text"))]),e(".w-col.w-col-5",r.requestLoader()||r.loading()?"":[e("a.btn.btn-medium.btn-terciary.w-button",{onclick:r.displayConfirmation.toggle},t.t("shared.back_text"))]),e(".w-col.w-col-1")])]):"",r.displayConfirmation()||r.displayDone()?"":e(".modal-dialog-nav-bottom",{style:"position: relative;"},[e(".w-row",[e(".w-col.w-col-3"),e(".w-col.w-col-6",[r.requestLoader()||r.loading()?Tt.loader():e('a.btn.btn-large.btn-request-fund[href="javascript:void(0);"]',{onclick:function(){return r.updateUserData(n.user.id)}},t.t("request_fund",Mc()))]),e(".w-col.w-col-3")])])])}},qc=o.partial(Tt.i18nScope,"users.balance"),Ac={controller:function(e){return e.balanceManager.load(),{userBalances:e.balanceManager.collection,displayModal:Tt.toggleProp(!1,!0)}},view:function(t,n){var i=o.first(t.userBalances())||{user_id:n.user_id,amount:0},a=[Dc,o.extend({},{balance:i},n)];return e(".w-section.section.user-balance-section",[t.displayModal()?e.component(zn,{displayModal:t.displayModal,content:a}):"",e(".w-container",[e(".w-row",[e(".w-col.w-col-8.u-text-center-small-only.u-marginbottom-20",[e(".fontsize-larger",[I18n.t("totals",qc()),e("span.text-success","R$ "+Tt.formatNumber(i.amount||0,2,3))])]),e(".card.card-terciary.u-radius.w-col.w-col-4",[e('a[class="r-fund-btn w-button btn btn-medium u-marginbottom-10 '+(i.amount<=0||i.in_period_yet?"btn-inactive":"")+'"][href="javascript:void(0);"]',{onclick:i.amount>0&&(o.isNull(i.in_period_yet)||i.in_period_yet===!1)?t.displayModal.toggle:"javascript:void(0);"},I18n.t("withdraw_cta",qc())),e(".fontsize-smaller.fontweight-semibold",i.last_transfer_amount&&i.in_period_yet?I18n.t("last_withdraw_msg",qc({amount:"R$ "+Tt.formatNumber(i.last_transfer_amount,2,3),date:r(i.last_transfer_created_at).format("MMMM")})):I18n.t("no_withdraws_this_month",qc({month_name:r().format("MMMM")}))),e(".fontcolor-secondary.fontsize-smallest.lineheight-tight.u-marginbottom-10",I18n.t("withdraw_limits_msg",qc()))])])])])}},Tc=_.partial(Tt.i18nScope,"users.balance"),Rc={controller:function(e){var t=Tt.toggleProp(!1,!0);return 0==e.index&&t.toggle(),{expanded:t}},view:function(t,o){var r=o.item,n=Tt.momentFromString(r.created_at,"YYYY-MM-DD");return e("div[class='balance-card "+(t.expanded()?"card-detailed-open":"")+"']",e(".w-clearfix.card.card-clickable",[e(".w-row",[e(".w-col.w-col-2.w-col-tiny-2",[e(".fontsize-small.lineheight-tightest",n.format("D MMM")),e(".fontsize-smallest.fontcolor-terciary",n.format("YYYY"))]),e(".w-col.w-col-10.w-col-tiny-10",[e(".w-row",[e(".w-col.w-col-4",[e("div",[e("span.fontsize-smaller.fontcolor-secondary",I18n.t("debit",Tc())),e.trust("&nbsp;"),e("span.fontsize-base.text-error","R$ "+Tt.formatNumber(Math.abs(r.debit),2,3))])]),e(".w-col.w-col-4",[e("div",[e("span.fontsize-smaller.fontcolor-secondary",I18n.t("credit",Tc())),e.trust("&nbsp;"),e("span.fontsize-base.text-success","R$ "+Tt.formatNumber(r.credit,2,3))])]),e(".w-col.w-col-4",[e("div",[e("span.fontsize-smaller.fontcolor-secondary",I18n.t("totals",Tc())),e.trust("&nbsp;"),e("span.fontsize-base","R$ "+Tt.formatNumber(r.total_amount,2,3))])])])])]),e("a.w-inline-block.arrow-admin."+(t.expanded()?"arrow-admin-opened":"")+'.fa.fa-chevron-down.fontcolor-secondary[href="javascript:(void(0));"]',{onclick:t.expanded.toggle})]),t.expanded()?e(".card",_.map(r.source,function(t){var o=t.amount>=0,r={subscription_reward_label:t.origin_objects.subscription_reward_label||"",subscriber_name:t.origin_objects.subscriber_name,service_fee:t.origin_objects.service_fee?100*t.origin_objects.service_fee:"",project_name:t.origin_objects.project_name,contributitor_name:t.origin_objects.contributor_name};return e("div",[e(".w-row.fontsize-small.u-marginbottom-10",[e(".w-col.w-col-2",[e(".text-"+(o?"success":"error"),(o?"+":"-")+" R$ "+Tt.formatNumber(Math.abs(t.amount),2,3))]),e(".w-col.w-col-10",[e("div",I18n.t("event_names."+t.event_name,Tc(r)))])]),e(".divider.u-marginbottom-10")])})):"")}},Ic={controller:function(e){return e.balanceTransactionManager.load(),{list:e.balanceTransactionManager.list}},view:function(t,r){var n=t.list;return e(".w-section.section.card-terciary.before-footer.balance-transactions-area",[e(".w-container",o.map(n.collection(),function(t,o){return e.component(Rc,{item:t,index:o})})),e(".container",[e(".w-row.u-margintop-40",[e(".w-col.w-col-2.w-col-push-5",[n.isLoading()?Tt.loader():n.isLastPage()?"":e("button#load-more.btn.btn-medium.btn-terciary",{onclick:n.nextPage},"Carregar mais")])])])])}},Nc={controller:function(t){var o=w.filtersVM({user_id:"eq"});o.user_id(t.user_id);var r=function(){var r=e.prop([{amount:0,user_id:t.user_id}]),n=function(){S.balance.getRowWithToken(o.parameters()).then(r)};return{collection:r,load:n}}(),n=function(){var e=w.paginationVM(S.balanceTransaction,"created_at.desc"),t=function(){e.firstPage(o.parameters())};return{load:t,list:e}}(),i=function(){var t=e.prop([]),r=function(){return w.loaderWithToken(S.bankAccount.getRowOptions(o.parameters()))}(),n=function(){r.load().then(t)};return{collection:t,load:n,loader:r}}();return{bankAccountManager:i,balanceManager:r,balanceTransactionManager:n}},view:function(t,r){var n=o.extend({},r,t);return e("#balance-area",[e.component(Ac,n),e(".divider"),e.component(Ic,n),e(".u-marginbottom-40"),e(".w-section.section.card-terciary.before-footer")])}},Oc={controller:function(t){var r=e.prop({}),n=t.user_id.split("-")[0],i=e.prop(window.location.hash),a=function(t){var r={"#projects":e(oc,{userId:n,showDraft:!0}),"#contributions":e(hc,{userId:n,user:t}),"#about_me":e(wc,{hideDisableAcc:!1,userId:n,user:t}),"#settings":e(zc,{userId:n,user:t}),"#notifications":e(Cc,{userId:n,user:t}),"#balance":e(Nc,{user_id:n,userId:n,user:t})};return i(window.location.hash),o.isEmpty(i())||"#_=_"===i()?(i("#contributions"),r["#contributions"]):r[i()]};return Tt.redrawHashChange(),mo.fetchUser(n,!0,r),{displayTabContent:a,hash:i,userDetails:r}},view:function(t,r){var n=t.userDetails();return e("div",[e(tc,{user:n,hideDetails:!0}),o.isEmpty(n)?"":[e("nav.dashboard-nav.u-text-center",{style:{"z-index":"10",position:"relative"}},e(".w-container",[e("a.dashboard-nav-link"+("#contributions"===t.hash()?".selected":"")+"[data-target='#dashboard_contributions'][href='#contributions'][id='dashboard_contributions_link']","Apoiados"),e("a.dashboard-nav-link"+("#projects"===t.hash()?".selected":"")+"[data-target='#dashboard_projects'][href='#projects'][id='dashboard_projects_link']","Criados"),e("a.dashboard-nav-link"+("#about_me"===t.hash()?".selected":"")+"[data-target='#dashboard_about_me'][href='#about_me'][id='dashboard_about_me_link']","Perfil Público"),e("a.dashboard-nav-link"+("#settings"===t.hash()?".selected":"")+"[data-target='#dashboard_settings'][href='#settings'][id='dashboard_settings_link']","Dados cadastrais"),e("a.dashboard-nav-link"+("#notifications"===t.hash()?".selected":"")+"[data-target='#dashboard_notifications'][href='#notifications'][id='dashboard_notifications_link']","Notificações"),e("a.dashboard-nav-link"+("#balance"===t.hash()?".selected":"")+"[data-target='#dashboard_balance'][href='#balance'][id='dashboard_balance_link']","Saldo"),e("a.dashboard-nav-link.u-right-big-only[href='/pt/users/"+n.id+"']",{config:e.route,onclick:function(){e.route("/users/"+n.id,{user_id:n.id})}},"Ir para o perfil público")])),e("section.section",e("#projects"==t.hash()?".w-container":".w-section",e(".w-row",n.id?t.displayTabContent(n):Tt.loader())))]])}},Fc=uc(),Vc={mode:e.prop(""),online_days:e.prop(""),goal:e.prop("")},Lc=function(e){Vc.mode(e.mode||"aon"),Vc.online_days(e.online_days||""),Vc.goal(e.goal)},Bc=function(e){var t={mode:Vc.mode(),online_days:Vc.online_days(),goal:Vc.goal()};return hr.updateProject(e,t)},Yc=function(e){return function(){Vc.mode(e),Vc.online_days(""),"flex"==e&&Fc.inlineError("online_days",!1)}},Uc={fields:Vc,fillFields:Lc,updateProject:Bc,e:Fc,genClickChangeMode:Yc},Wc=o.partial(Tt.i18nScope,"projects.dashboard_goal"),$c={controller:function(t){var r=Uc,n=[["mode",["mode"]],["goal",["goal"]],["online_days",["online_days"]]],i=Tt.toggleProp(!1,!0),a=Tt.toggleProp(!1,!0),s=Tt.toggleProp(!1,!0),l=Tt.toggleProp(!1,!0),c=o.compose(r.fields.goal,Tt.applyMonetaryMask),d=e.prop(!1),u=function(o){return d(!0),e.redraw(),r.updateProject(t.projectId).then(function(e){d(!1),r.e.resetFieldErrors(),i()||i.toggle(),a()&&a.toggle(),Wn.validatePublish()})["catch"](function(e){e.errors_json&&Wn.mapRailsErrors(e.errors_json,n,r.e),d(!1),i()&&i.toggle(),a()||a.toggle()}),!1};return Wn.railsErrors()&&Wn.mapRailsErrors(Wn.railsErrors(),n,r.e),r.fillFields(t.project),{onSubmit:u,showSuccess:i,showError:a,showModeDiff:s,showTaxesDiff:l,vm:r,applyGoalMask:c,loading:d}},view:function(r,n){var i=r.vm;return e("#goal-tab",[r.showSuccess()?e.component(Cn,{message:t.t("shared.successful_update"),toggleOpt:r.showSuccess}):"",r.showError()?e.component(Cn,{message:t.t("shared.failed_update"),toggleOpt:r.showError,error:!0}):"",e("form.w-form",{onsubmit:r.onSubmit},[e(".w-container",[e(".w-row",[e(".w-col.w-col-10.w-col-push-1",[e(_c,{label:t.t("mode_label",Wc()),label_hint:t.t("mode_hint",Wc()),children:[e(".flex-row.u-marginbottom-30",[e('a.choose-mode.choose-aon.w-inline-block.btn-select.flex-column.u-text-center[data-mode="aon"][href="javascript:void(0);"]',{onclick:i.genClickChangeMode("aon"),"class":"aon"==i.fields.mode()&&"selected"},[e('img[alt="Badge aon"][src="/assets/catarse_bootstrap/badge-aon.png"]')]),e('a.choose-mode.choose-flex.w-inline-block.btn-select.flex-column.u-text-center[data-mode="flex"][href="javascript:void(0);"]',{onclick:i.genClickChangeMode("flex"),"class":"flex"==i.fields.mode()&&"selected"},[e('img[alt="Badge flex"][src="/assets/catarse_bootstrap/badge-flex.png"]')])]),e(".u-text-center.fontsize-smaller",[e('a.mode-diff-toggle.link-hidden-light.fontweight-semibold[href="javascript:void(0);"]',{onclick:r.showModeDiff.toggle},["Veja a diferença entre os modelos ",e("span.fa.fa-chevron-down")])]),r.showModeDiff()?e(".mode-diff.u-margintop-30",[e(".flex-row",[e(".w-hidden-small.w-hidden-tiny.fontsize-smaller.flex-column",e.trust(t.t("aon_diff_html",Wc()))),e(".w-hidden-small.w-hidden-tiny.fontsize-smaller.flex-column",e.trust(t.t("flex_diff_html",Wc())))]),e(".u-text-center.u-margintop-30",[e(".divider.u-marginbottom-20"),e(".fontsize-base",t.t("want_more",Wc())),e.trust(t.t("mode_diff_ebook",Wc()))])]):""]}),e(_c,{label:t.t("goal_label",Wc()),label_hint:t.t("goal_hint",Wc()),children:[e(".w-row.u-marginbottom-30",[e(".w-col.w-col-2"),e(".w-col.w-col-8",[e(".w-row",[e(".w-col.w-col-4.w-col-small-6.w-col-tiny-6.text-field.prefix.no-hover.medium.prefix-permalink",[e(".fontcolor-secondary.u-text-center.fontsize-base.lineheight-tightest","R$")]),e(".w-col.w-col-8.w-col-small-6.w-col-tiny-6.label-hide",[e(".input.tel.optional.project_goal",[e("label.field-label"),e('input.string.optional.w-input.text-field.postfix.positive.medium[autocomplete="off"][id="project-goal-input"][name="project[goal]"][type="tel"]',{"class":!!i.e.hasError("goal")&&"error",value:i.fields.goal(),maxlength:14,onkeyup:e.withAttr("value",r.applyGoalMask)})])])]),e(".u-text-center",i.e.inlineError("goal"))]),e(".w-col.w-col-2")]),e(".u-text-center.fontsize-smaller.fontweight-semibold",[e('a.fee-toggle.link-hidden-light[href="javascript:void(0)"]',{onclick:r.showTaxesDiff.toggle},[t.t("goal_taxes_link",Wc()),e("span.fa.fa-chevron-down")])]),r.showTaxesDiff()?e(".fee-explanation.u-margintop-30",[e(".u-marginbottom-30",[e(".fontsize-small.fontweight-semibold",t.t("goal_taxes_label",Wc())),e(".fontsize-smaller",t.t("goal_"+i.fields.mode()+"_taxes_hint",Wc()))]),e(".u-text-center.u-margintop-30",[e(".divider.u-marginbottom-20"),e(".fontsize-base",t.t("want_more",Wc())),e.trust(t.t("goal_taxes_watch_video_html",Wc()))])]):""]
}),e(_c,{label:t.t("online_days_label",Wc()),label_hint:e.trust(t.t("online_days_"+i.fields.mode()+"_hint",Wc())),children:"aon"==i.fields.mode()?[e(".w-row",[e(".w-col.w-col-2"),e(".w-col.w-col-8",[e(".w-row",[e(".w-col.w-col-8.label-hide",[e(".input.integer.optional.disabled.project_online_days",[e("label.field-label"),e('input.numeric.integer.optional.disabled.w-input.text-field.postfix.positive.medium[id="project_online_days"][name="project[online_days]"][type="number"]',{onchange:e.withAttr("value",i.fields.online_days),value:i.fields.online_days(),"class":!!i.e.hasError("online_days")&&"error"})])]),e(".w-col.w-col-4",[e(".text-field.medium.prefix-permalink.u-text-center",[e("","dias")])])]),i.e.inlineError("online_days")])])]:[e(".flex-row",[e("a.choose-time.choose-unlimited.w-inline-block.btn-select.flex-column.u-text-center",{"class":o.isEmpty(i.fields.online_days().toString())?"selected":"",onclick:function(){i.fields.online_days("")}},[e(".fontsize-base.fontweight-semibold.u-marginbottom-20",t.t("online_days_open",Wc())),e(".w-hidden-tiny",t.t("online_days_open_hint",Wc()))]),e("a.choose-time.choose-limited.w-inline-block.btn-select.flex-column.u-text-center",{"class":o.isEmpty(i.fields.online_days().toString())?"":"selected",onclick:function(){i.fields.online_days(1)}},[e(".fontsize-base.fontweight-semibold.u-marginbottom-20",t.t("online_days_closed",Wc())),e(".w-hidden-tiny.u-marginbottom-30",t.t("online_days_closed_hint",Wc())),e(".w-row",[e(".w-col.w-col-6.label-hide",[e(".input.integer.optional.project_online_days",[e("label.field-label"),e('input.numeric.integer.optional.w-input.text-field.field.w-input.text-field.medium.prefix[id="project_online_days"][name="project[online_days]"][type="number"]',{onchange:e.withAttr("value",i.fields.online_days),value:i.fields.online_days(),"class":!!i.e.hasError("online_days")&&"error"})])]),e(".w-col.w-col-6",[e(".text-field.medium.prefix-permalink",{"class":!!i.e.hasError("online_days")&&"error"},[e("","dias")])])]),e(".w-row",i.e.inlineError("online_days"))])])]})])])]),e(Rt,{loading:r.loading,onSubmit:r.onSubmit})])])}},Hc={controller:function(e){return{user:mo.fetchUser(e.user_id),project:hr.fetchProject(e.project_id)}},view:function(t,o){return t.user()&&t.project()?"sub"===t.project().mode?"":e($c,{user:t.user(),userId:o.user_id,projectId:o.project_id,project:t.project()}):e("div",Tt.loader())}},Qc={controller:function(t){var r=t.goal(),n=t.project,i=e.prop(!1),a=e.prop(!1),s=e.prop(!1),l=e.prop(!1),c=function(){t.error(!1),i(!1),s(!1),l(!1),o.isEmpty(r.title())&&(t.error(!0),a(!0)),o.isEmpty(r.description())&&(t.error(!0),i(!0)),(!r.value()||parseInt(r.value())<10)&&(t.error(!0),s(!0)),parseInt(r.value())>=10&&"draft"!==n.state&&t.currentGoal()&&parseInt(r.value())<=t.currentGoal().value()&&(t.error(!0),l(!0))},d=e.prop(!1),u=function(e){return r.value(e.target.value.replace(/[^0-9]/g,"")),!0},p=function(){var t=confirm("Você tem certeza?");return!!t&&(r.id()?e.request({method:"DELETE",url:"/projects/"+r.project_id()+"/goals/"+r.id(),config:Tt.setCsrfToken}).then(function(){d(!0),e.redraw()}):(d(!0),!1))},m=function(){if(c(),t.error())return!1;var o={id:r.id(),project_id:r.project_id(),value:r.value(),title:r.title(),description:r.description()};return r.id()?Jo.updateGoal(r.project_id(),r.id(),o).then(function(){t.showSuccess(!0),r.editing.toggle()}):Jo.createGoal(r.project_id(),o).then(function(o){r.id(o.goal_id),t.showSuccess(!0),r.editing.toggle(),e.redraw()}),!1};return{confirmDelete:p,descriptionError:i,titleError:a,valueError:s,currentError:l,acceptNumeric:u,destroyed:d,saveGoal:m}},view:function(t,o){var r=o.goal(),n=function(t){return e(".fontsize-smaller.text-error.u-marginbottom-20.fa.fa-exclamation-triangle",e("span",t))};return t.destroyed()?e("div",""):e(".card.u-marginbottom-30",[e(".w-row",[e(".w-col.w-col-6",e(".fontsize-small","Meta:")),e(".w-col.w-col-6",e(".w-row",[e(".prefix.text-field.w-col.w-col-4.w-col-small-6.w-col-tiny-6",e(".fontcolor-secondary.fontsize-base.lineheight-tightest.u-text-center","R$")),e(".w-col.w-col-8.w-col-small-6.w-col-tiny-6",e("input.positive.postfix.text-field.w-input[type='text']",{"class":!(!t.valueError()&&!t.currentError())&&"error",value:r.value(),oninput:function(e){return t.acceptNumeric(e)},onchange:e.withAttr("value",r.value)}))]))]),t.valueError()?n("A meta deve ser igual ou superior a R$10"):"",t.currentError()?n("A meta deve ser igual ou superior a meta atual"):"",e(".w-row",[e(".w-col.w-col-6",e(".fontsize-small","Título:")),e(".w-col.w-col-6",e("input.positive.text-field.w-input[type='text']",{value:r.title(),"class":!!t.descriptionError()&&"error",onchange:e.withAttr("value",r.title)}))]),t.titleError()?n("Título não pode ficar em branco."):"",e(".w-row",[e(".w-col.w-col-6",e(".fontsize-small","Descrição da meta:")),e(".w-col.w-col-6",e("textarea.height-medium.positive.text-field.w-input[placeholder='O que você vai fazer se atingir essa meta?']",{value:r.description(),"class":!!t.descriptionError()&&"error",onchange:e.withAttr("value",r.description)}))]),t.descriptionError()?n("Descrição não pode ficar em branco."):"",e(".u-margintop-30.w-row",[e(".w-sub-col.w-col.w-col-5",e("button.btn.btn-small.w-button",{onclick:t.saveGoal},"Salvar")),o.goal().id()?e(".w-sub-col.w-col.w-col-6",e("button.btn.btn-small.btn-terciary.w-button",{onclick:function(){o.goal().editing.toggle()}},"Cancelar")):"",e(".w-col.w-col-1",e("button.btn.btn-inline.btn-no-border.btn-small.btn-terciary.fa.fa-lg.fa-trash",{onclick:t.confirmDelete}))])])}},Gc=(o.partial(Tt.i18nScope,"projects.contributions"),{view:function(t,o){var r=o.goal(),n=o.project,i=o.currentGoal,a="draft"===n.state||i()&&r.value()>i().value();return e(".card.u-marginbottom-30",e(".w-row",[e(".w-col.w-col-11.w-col-small-11.w-col-tiny-11",[e(".fontsize-base.fontweight-semibold.u-marginbottom-20","Meta: R$"+r.value()),e(".fontsize-small.fontweight-semibold",r.title()),e("p.fontcolor-secondary.fontsize-small",[r.description()])]),[a?e(".w-col.w-col-1.w-col-small-1.w-col-tiny-1",e("button.btn.btn-inline.btn-no-border.btn-small.btn-terciary.fa.fa-edit.fa-lg",{onclick:r.editing.toggle})):""]]))}}),Xc=(o.partial(Tt.i18nScope,"projects.dashboard_goal"),{controller:function(t){var r=uc(),n=[["goals",["goals.size"]]],i=Jo.goals,a=j.loaderWithToken(S.projectSubscribersInfo.postOptions({id:t.project.common_id})),s=e.prop(),l=e.prop({});a.load().then(function(e){l(e);var t=o.sortBy(i(),function(e){return e().value()}),r=o.find(t,function(e){return e().value()>l().amount_paid_for_valid_period});s(r())});var c=e.prop(!1),d=e.prop(!1);return Jo.fetchGoalsEdit(t.projectId),Wn.railsErrors()&&Wn.mapRailsErrors(Wn.railsErrors(),n,r),{showSuccess:c,e:r,error:d,goals:i,currentGoal:s,addGoal:Jo.addGoal}},view:function(t,r){var n=t.showSuccess,i=t.error;return e(".w-container",e(".w-row",[t.showSuccess()?e.component(Cn,{message:"Meta salva com sucesso"}):"",t.error()?e.component(Cn,{message:"Erro ao salvar informações",error:!0}):"",e(".w-col.w-col-1"),e(".w-col.w-col-10",e(".w-form",[t.e.inlineError("goals"),e("div",e(".card.card-terciary.medium.u-marginbottom-30[id='arrecadacao']",[e(".u-marginbottom-30",[e("label.fontsize-base.fontweight-semibold[for='name-8']","O que você vai alcançar com os apoios de seus assinantes?"),e(".fontsize-small",["As metas são a melhor maneira de deixar seus assinantes envolvidos no próximo passo de sua jornada criativa. Use-as para mostrar, de forma clara, o que vocês estarão conquistando",e.trust("&nbsp;"),"juntos com o sucesso de seu Catarse Assinaturas."])]),o.map(t.goals(),function(o){return o().editing()?e(Qc,{goal:o,showSuccess:n,project:r.project,currentGoal:t.currentGoal,error:i}):e(Gc,{goal:o,project:r.project,currentGoal:t.currentGoal})}),e("button.btn.btn-large.btn-message",{onclick:function(){t.addGoal(r.projectId)}},["+ ",e.trust("&nbsp;")," Adicionar meta"])]))])),e(".w-col.w-col-1")]))}}),Jc={controller:function(e){return{user:mo.fetchUser(e.user_id),project:hr.fetchProject(e.project_id)}},view:function(t,o){return t.user()&&t.project()?"sub"!==t.project().mode?"":e(Xc,{user:t.user(),userId:o.user_id,projectId:o.project_id,project:t.project()}):e("div",Tt.loader())}},Kc=uc(),Zc={tracker_snippet_html:e.prop(""),user_id:e.prop(""),public_tags:e.prop(""),admin_tags:e.prop(""),service_fee:e.prop(""),name:e.prop(""),permalink:e.prop(""),category_id:e.prop(""),city_id:e.prop(""),city_name:e.prop("")},ed=function(e){Zc.tracker_snippet_html(e.tracker_snippet_html||""),Zc.user_id(e.user_id),Zc.admin_tags(e.admin_tag_list||""),Zc.public_tags(e.tag_list||""),Zc.service_fee(e.service_fee),Zc.name(e.name),Zc.permalink(e.permalink),Zc.category_id(e.category_id),Zc.city_id(e.city_id||""),e.address.city&&Zc.city_name(e.address.city+" - "+e.address.state)},td=function(e){var t={tracker_snippet_html:Zc.tracker_snippet_html(),user_id:Zc.user_id(),all_tags:Zc.admin_tags(),all_public_tags:Zc.public_tags(),service_fee:Zc.service_fee(),name:Zc.name(),permalink:Zc.permalink(),category_id:Zc.category_id(),city_id:Zc.city_id};return hr.updateProject(e,t)},od=function(t,r){var n=w.filtersVM;S.category.getPage(n({}).order({name:"asc"}).parameters()).then(function(n){var i=o.map(n,function(t,o){return e("option[value='"+t.id+"']",{selected:r==t.id},t.name)});t(i)})},rd=function(t){var r=w.filtersVM({search_index:"ilike"}).order({name:"asc"}),n=function(e,t){return function(){Zc.city_name(e.name+" - "+e.acronym),Zc.city_id(e.id),t("")}};return function(i){var a=i.currentTarget.value;r.search_index(l(a)),Zc.city_name(a),S.city.getPage(r.parameters()).then(function(r){var i=o.map(r,function(o){return e(".table-row.fontsize-smallest.fontcolor-secondary",[e(".city-select.fontsize-smallest.link-hidden-light",{onclick:n(o,t)},o.name+" - "+o.acronym)])});t(e(".table-outer.search-pre-result",{style:{"z-index":9999}},i))})["catch"](function(e){t("")})}},nd={fields:Zc,fillFields:ed,updateProject:td,loadCategoriesOptionsTo:od,e:Kc,generateSearchCity:rd},id={view:function(t,o){var r=o.cardClass||".w-row.u-marginbottom-30.card.card-terciary",n=o.onclick||Function.prototype;return e(r,{onclick:n},[e(".w-col.w-col-5.w-sub-col",[e("label.field-label.fontweight-semibold",o.label),o.label_hint?e("label.hint.fontsize-smallest.fontcolor-secondary",o.label_hint):""]),e(".w-col.w-col-7.w-sub-col",o.children)])}},ad=o.partial(Tt.i18nScope,"projects.dashboard_basics"),sd={controller:function(r){var n=nd,i=[["name",["name"]],["public_tags",["public_tags"]],["permalink",["permalink"]],["category_id",["category"]],["city_id",["city"]]],a=e.prop(!1),s=e.prop(),l=e.prop([]),c=Tt.toggleProp(!1,!0),d=Tt.toggleProp(!1,!0),u=e.prop([]),p=e.prop([]),m=e.prop(!1),f=e.prop(!1),w=function(){if(m())return!1;a(!0),e.redraw();var t=o.pluck(u(),"name").join(",");return n.fields.public_tags(t),n.updateProject(r.projectId).then(function(){a(!1),n.e.resetFieldErrors(),c(!0),d(!1)})["catch"](function(e){e.errors_json&&Wn.mapRailsErrors(e.errors_json,i,n.e),a(!1),c(!1),d(!0)}),!1};Wn.railsErrors()&&Wn.mapRailsErrors(Wn.railsErrors(),i,n.e),n.fillFields(r.project),n.fields.public_tags()&&u(o.map(n.fields.public_tags().split(","),function(e){return{name:e}})),n.loadCategoriesOptionsTo(l,n.fields.category_id());var b=function(o){return function(){return p([]),u().length>=5?(n.e("public_tags",t.t("tags_max_error",ad())),n.e.inlineError("public_tags",!0),e.redraw(),!1):(u().push(o),m(!1),e.redraw(),!1)}},g=function(e){return function(){var t=o.reject(u(),function(t){return t===e});return u(t),!1}},h=e.prop(""),_=e.prop({abort:Function.prototype}),v=Tt.getApiHost()+"/rpc/tag_search",y=function(){return e.request({method:"POST",background:!0,config:_,data:{query:h(),count:3},url:v})},j=function(t){h(t.target.value),m(!0),p([]);var o=t.keyCode;if(188===o||13===o){var r=","===h().charAt(h().length-1)?h().substr(0,h().length-1):h();return b({name:r.toLowerCase()}).call(),t.target.value="",!1}return f(!0),_().abort(),y().then(function(t){p(t),f(!1),e.redraw(!0)}),!1},k=function(e,t){t||(e.onkeyup=j)};return{vm:n,onSubmit:w,loading:a,categories:l,cities:s,showSuccess:c,showError:d,tagOptions:p,editTag:k,addTag:b,removeTag:g,isEditingTags:m,triggerTagSearch:j,selectedTags:u,tagEditingLoading:f}},view:function(r,n){var i=r.vm;return e("#basics-tab",[r.showSuccess()?e.component(Cn,{message:t.t("shared.successful_update"),toggleOpt:r.showSuccess}):"",r.showError()?e.component(Cn,{message:t.t("shared.failed_update"),toggleOpt:r.showError,error:!0}):"",e("form.w-form",{onsubmit:r.onSubmit},[e(".w-container",[n.user.is_admin?e(".w-row",[e(".w-col.w-col-10.w-col-push-1",[e(id,{label:t.t("tracker_snippet_html",ad()),children:[e("textarea.text.optional.w-input.text-field.positive.medium",{value:i.fields.tracker_snippet_html(),onchange:e.withAttr("value",i.fields.tracker_snippet_html)})]}),e(id,{label:t.t("user_id",ad()),children:[e('input.string.optional.w-input.text-field.positive.medium[type="text"]',{value:i.fields.user_id(),onchange:e.withAttr("value",i.fields.user_id)})]}),e(id,{label:t.t("admin_tags",ad()),label_hint:t.t("admin_tags_hint",ad()),children:[e('input.string.optional.w-input.text-field.positive.medium[type="text"]',{value:i.fields.admin_tags(),onchange:e.withAttr("value",i.fields.admin_tags)})]}),e(id,{label:t.t("service_fee",ad()),children:[e('input.string.optional.w-input.text-field.positive.medium[type="number"]',{value:i.fields.service_fee(),onchange:e.withAttr("value",i.fields.service_fee)})]})])]):"",e(".w-row",[e(".w-col.w-col-10.w-col-push-1",[e(id,{label:t.t("name",ad()),label_hint:t.t("name_hint",ad()),children:[e('input.string.required.w-input.text-field.positive.medium[type="text"][maxlength="50"]',{value:i.fields.name(),"class":i.e.hasError("name")?"error":"",onchange:e.withAttr("value",i.fields.name)}),i.e.inlineError("name")]}),e(id,{label:t.t("tags",ad()),label_hint:t.t("tags_hint",ad()),onclick:function(){return r.isEditingTags(!1)},children:[e('input.string.optional.w-input.text-field.positive.medium[type="text"]',{config:r.editTag,"class":i.e.hasError("public_tags")?"error":"",onfocus:function(){return i.e.inlineError("public_tags",!1)}}),r.isEditingTags()?e(".options-list.table-outer",r.tagEditingLoading()?e(".dropdown-link",e(".fontsize-smallest","Carregando...")):r.tagOptions().length?o.map(r.tagOptions(),function(t){return e(".dropdown-link",{onclick:r.addTag(t)},e(".fontsize-smaller",t.name))}):e(".dropdown-link",e(".fontsize-smallest","Nenhuma tag relacionada..."))):"",i.e.inlineError("public_tags"),e("div.tag-choices",o.map(r.selectedTags(),function(t){return e(".tag-div",e("div",[e("a.tag-close-btn.fa.fa-times-circle",{onclick:r.removeTag(t)})," "+t.name]))}))]}),e(id,{label:t.t("permalink",ad()),label_hint:t.t("permalink_hint",ad()),children:[e(".w-row",[e(".w-col.w-col-4.w-col-small-6.w-col-tiny6.text-field.prefix.no-hover.medium.prefix-permalink",{"class":i.e.hasError("permalink")?"error":""},e(".fontcolor-secondary.u-text-center.fontcolor-secondary.u-text-center.fontsize-smallest","www.catarse.me/")),e(".w-col.w-col-8.w-col-small-6.w-col-tiny-6",[e('input.string.required.w-input.text-field.postfix.positive.medium[type="text"]',{value:i.fields.permalink(),"class":i.e.hasError("permalink")?"error":"",onchange:e.withAttr("value",i.fields.permalink)})])]),e(".w-row",i.e.inlineError("permalink"))]}),e(id,{label:t.t("category",ad()),label_hint:t.t("category_hint",ad()),children:[e("select.required.w-input.text-field.w-select.positive.medium",{value:i.fields.category_id(),"class":i.e.hasError("category_id")?"error":"",onchange:e.withAttr("value",i.fields.category_id)},r.categories()),i.e.inlineError("category_id")]}),e(id,{label:t.t("city",ad()),label_hint:t.t("city_hint",ad()),children:[e('input.string.required.w-input.text-field.positive.medium[type="text"]',{value:i.fields.city_name(),"class":i.e.hasError("city_id")?"error":"",onkeyup:i.generateSearchCity(r.cities)}),i.e.inlineError("city_id"),r.cities()]})])])]),e(Rt,{loading:r.loading,onSubmit:r.onSubmit})])])}},ld={controller:function(e){return{user:mo.fetchUser(e.user_id),project:hr.fetchProject(e.project_id)}},view:function(t,o){return t.user()&&t.project()?e(sd,{user:t.user(),userId:o.user_id,projectId:o.project_id,project:t.project()}):e("div",Tt.loader())}},cd=uc(),dd={about_html:e.prop("")},ud=function(e){dd.about_html(e.about_html||"")},pd=function(e){var t={about_html:dd.about_html()};return hr.updateProject(e,t)},md={fields:dd,fillFields:ud,updateProject:pd,e:cd},fd={view:function(t,o){var r=o.cardClass||".w-row.u-marginbottom-30.card.card-terciary.padding-redactor-description.text.optional.project_about_html.field_with_hint";return e(r,{style:o.cardStyle||{}},[e("div",[e("label.field-label.fontweight-semibold.fontsize-base",o.label),o.label_hint?e("label.hint.fontsize-smallest.fontcolor-secondary",o.label_hint):""]),e("div",o.children)])}},wd=o.partial(Tt.i18nScope,"projects.dashboard_description"),bd={controller:function(t){var o=md,r=[["about_html",["about_html"]]],n=Tt.toggleProp(!1,!0),i=Tt.toggleProp(!1,!0),a=e.prop(!1),s=function(s){return a(!0),e.redraw(),o.updateProject(t.projectId).then(function(e){a(!1),o.e.resetFieldErrors(),n()||n.toggle(),i()&&i.toggle(),Wn.validatePublish()})["catch"](function(e){e.errors_json&&Wn.mapRailsErrors(e.errors_json,r,o.e),a(!1),n()&&n.toggle(),i()||i.toggle()}),!1};return Wn.railsErrors()&&Wn.mapRailsErrors(Wn.railsErrors(),r,o.e),o.fillFields(t.project),{onSubmit:s,showSuccess:n,showError:i,vm:o,loading:a}},view:function(o,r){var n=o.vm;return e("#description-tab",[o.showSuccess()?e.component(Cn,{message:t.t("shared.successful_update"),toggleOpt:o.showSuccess}):"",o.showError()?e.component(Cn,{message:t.t("shared.failed_update"),toggleOpt:o.showError,error:!0}):"",e("form.w-form",{onsubmit:o.onSubmit},[e(".w-container",[e(".w-row",[e(".w-col.w-col-10.w-col-push-1",[e(".u-marginbottom-60.u-text-center",[e(".w-inline-block.card.fontsize-small.u-radius",[e.trust(t.t("description_alert",wd()))])]),e(fd,{label:t.t("description_label",wd()),label_hint:t.t("description_hint",wd()),children:[e(".preview-container",{"class":!!n.e.hasError("about_html")&&"error"},Tt.redactor("project[about_html]",n.fields.about_html)),n.e.inlineError("about_html")]})])])]),e(Rt,{loading:o.loading,onSubmit:o.onSubmit})])])}},gd=uc(),hd={about_html:e.prop(""),video_url:e.prop("")},_d=function(e){hd.about_html(e.about_html||""),hd.video_url(e.video_url||"")},vd=function(e){var t={about_html:hd.about_html(),video_url:hd.video_url()};return hr.updateProject(e,t)},yd={fields:hd,fillFields:_d,updateProject:vd,e:gd},jd=o.partial(Tt.i18nScope,"projects.dashboard_description"),kd=o.partial(Tt.i18nScope,"projects.dashboard_video"),xd={controller:function(t){var o=yd,r=[["about_html",["about_html"]],["video_url",["video_url"]]],n=Tt.toggleProp(!1,!0),i=Tt.toggleProp(!1,!0),a=e.prop(!1),s=function(s){return a(!0),e.redraw(),o.updateProject(t.projectId).then(function(e){a(!1),o.e.resetFieldErrors(),n()||n.toggle(),i()&&i.toggle(),Wn.validatePublish()})["catch"](function(e){e.errors_json&&Wn.mapRailsErrors(e.errors_json,r,o.e),a(!1),n()&&n.toggle(),i()||i.toggle()}),!1};return Wn.railsErrors()&&Wn.mapRailsErrors(Wn.railsErrors(),r,o.e),o.fillFields(t.project),{onSubmit:s,showSuccess:n,showError:i,vm:o,loading:a}},view:function(o,r){var n=o.vm;return e("#description-tab",[o.showSuccess()?e.component(Cn,{message:t.t("shared.successful_update"),toggleOpt:o.showSuccess}):"",o.showError()?e.component(Cn,{message:t.t("shared.failed_update"),toggleOpt:o.showError,error:!0}):"",e("form.w-form",{onsubmit:o.onSubmit},[e(".w-container",[e(".w-row",[e(".w-col.w-col-10.w-col-push-1",[e(".u-marginbottom-60.u-text-center",[e(".w-col-8.w-inline-block.card.fontsize-small.u-radius",[e.trust(t.t("description_video_alert",jd()))])]),e(id,{label:t.t("video_label",kd()),label_hint:t.t("video_hint",kd()),children:[e('input.string.required.w-input.text-field.positive.medium[type="text"]',{value:n.fields.video_url(),"class":n.e.hasError("video_url")?"error":"",onchange:e.withAttr("value",n.fields.video_url)}),n.e.inlineError("video_url")]})])]),e(".w-row",[e(".w-col.w-col-10.w-col-push-1",[e(fd,{label:t.t("description_label",jd()),label_hint:t.t("description_hint",jd()),children:[e(".preview-container",{"class":!!n.e.hasError("about_html")&&"error"},Tt.redactor("project[about_html]",n.fields.about_html)),n.e.inlineError("about_html")]})])])]),e(Rt,{loading:o.loading,onSubmit:o.onSubmit})])])}},zd={controller:function(e){return{user:mo.fetchUser(e.user_id),project:hr.fetchProject(e.project_id)}},view:function(t,o){var r=hr.isSubscription(t.project)?xd:bd;return t.user()&&t.project()?e(r,{user:t.user(),userId:o.user_id,projectId:o.project_id,project:t.project()}):e("div",Tt.loader())}},Sd=uc(),Cd={video_url:e.prop("")},Ed=function(e){Cd.video_url(e.video_url||"")},Pd=function(e){var t={video_url:Cd.video_url()};return hr.updateProject(e,t)},Md={fields:Cd,fillFields:Ed,updateProject:Pd,e:Sd},Dd=o.partial(Tt.i18nScope,"projects.dashboard_video"),qd={controller:function(t){var o=Md,r=[["video_url",["video_url"]]],n=Tt.toggleProp(!1,!0),i=Tt.toggleProp(!1,!0),a=e.prop(!1),s=function(s){return a(!0),e.redraw(),o.updateProject(t.projectId).then(function(e){a(!1),o.e.resetFieldErrors(),n()||n.toggle(),i()&&i.toggle(),Wn.validatePublish()})["catch"](function(e){e.errors_json&&Wn.mapRailsErrors(e.errors_json,r,o.e),a(!1),n()&&n.toggle(),i()||i.toggle()}),!1};return Wn.railsErrors()&&Wn.mapRailsErrors(Wn.railsErrors(),r,o.e),o.fillFields(t.project),{onSubmit:s,showSuccess:n,showError:i,vm:o,loading:a}},view:function(o,r){var n=o.vm;return e("#video-tab",[o.showSuccess()?e.component(Cn,{message:t.t("shared.successful_update"),toggleOpt:o.showSuccess}):"",o.showError()?e.component(Cn,{message:t.t("shared.failed_update"),toggleOpt:o.showError,error:!0}):"",e("form.w-form",{onsubmit:o.onSubmit},[e(".w-container",[e(".w-row",[e(".w-col.w-col-10.w-col-push-1",[e(".u-marginbottom-60.u-text-center",[e(".w-inline-block.card.fontsize-small.u-radius",[e.trust(t.t("video_alert",Dd()))])]),e(id,{label:t.t("video_label",Dd()),label_hint:t.t("video_hint",Dd()),children:[e('input.string.required.w-input.text-field.positive.medium[type="text"]',{value:n.fields.video_url(),"class":n.e.hasError("video_url")?"error":"",onchange:e.withAttr("value",n.fields.video_url)}),n.e.inlineError("video_url")]})])])]),e(Rt,{loading:o.loading,onSubmit:o.onSubmit})])])}},Ad={controller:function(e){return{user:mo.fetchUser(e.user_id),project:hr.fetchProject(e.project_id)}},view:function(t,o){return t.user()&&t.project()?e(qd,{user:t.user(),userId:o.user_id,projectId:o.project_id,project:t.project()}):e("div",Tt.loader())}},Td=uc(),Rd={budget:e.prop("")},Id=function(e){Rd.budget(e.budget||"")},Nd=function(e){var t={budget:Rd.budget()};return hr.updateProject(e,t)},Od={fields:Rd,fillFields:Id,updateProject:Nd,e:Td},Fd=o.partial(Tt.i18nScope,"projects.dashboard_budget"),Vd={controller:function(t){var o=Od,r=[["budget",["budget"]]],n=Tt.toggleProp(!1,!0),i=Tt.toggleProp(!1,!0),a=e.prop(!1),s=function(s){return a(!0),e.redraw(),o.updateProject(t.projectId).then(function(e){a(!1),o.e.resetFieldErrors(),n()||n.toggle(),i()&&i.toggle(),Wn.validatePublish()})["catch"](function(e){e.errors_json&&Wn.mapRailsErrors(e.errors_json,r,o.e),a(!1),n()&&n.toggle(),i()||i.toggle()}),!1};return Wn.railsErrors()&&Wn.mapRailsErrors(Wn.railsErrors(),r,o.e),o.fillFields(t.project),{onSubmit:s,showSuccess:n,showError:i,vm:o,loading:a}},view:function(o,r){var n=o.vm;return e("#budget-tab",[o.showSuccess()?e.component(Cn,{message:t.t("shared.successful_update"),toggleOpt:o.showSuccess}):"",o.showError()?e.component(Cn,{message:t.t("shared.failed_update"),toggleOpt:o.showError,error:!0}):"",e("form.w-form",{onsubmit:o.onSubmit},[e(".w-container",[e(".w-row",[e(".w-col.w-col-10.w-col-push-1",[e(".u-marginbottom-60.u-text-center",[e(".w-inline-block.card.fontsize-small.u-radius",[e.trust(t.t("budget_alert",Fd()))])]),e(fd,{cardStyle:{display:"block"},label:t.t("budget_label",Fd()),children:[e(".preview-container",{"class":!!n.e.hasError("budget")&&"error"},Tt.redactor("project[budget]",n.fields.budget)),n.e.inlineError("budget")]})])])]),e(Rt,{loading:o.loading,onSubmit:o.onSubmit})])])}},Ld={controller:function(e){return{user:mo.fetchUser(e.user_id),project:hr.fetchProject(e.project_id)}},view:function(t,o){return t.user()&&t.project()?e(Vd,{user:t.user(),userId:o.user_id,projectId:o.project_id,project:t.project()}):e("div",Tt.loader())}},Bd={controller:function(e){return{user:mo.fetchUser(e.user_id)}},view:function(t,o){return t.user()?e(wc,{user:t.user(),userId:o.user_id,useFloatBtn:!0,hideDisableAcc:!0,hideCoverImg:!0,hidePasswordChange:!0,publishingUserAbout:!0}):e("div",Tt.loader())}},Yd={controller:function(e){return{user:mo.fetchUser(e.user_id)}},view:function(t,o){return t.user()?e(zc,{user:t.user(),userId:o.user_id,hideCreditCards:!0,useFloatBtn:!0,publishingUserSettings:!0}):e("div",Tt.loader())}},Ud={controller:function(e){var t=e.states,r=e.fee,n=e.fees,i=Tt.toggleProp(!1,!0),a=function(e){var t=o.map(n(),function(e){return e.destination()});return e.acronym!==r.destination()&&o.contains(t,e.acronym)},s=o.compose(r.value,Tt.applyMonetaryMask);return o.extend(r,{deleted:i}),r.value(r.value()?""+Tt.formatNumber(r.value(),2,3):"0,00"),{fee:r,applyMask:s,fees:n,deleted:i,feeValue:r.value,stateInUse:a,states:t}},view:function(t){var r=t.deleted,n=o.filter(t.fees(),function(e){return"others"!==e.destination&&"international"!==e.destination}).length,i=t.states;return e("div"+(r()?".w-hidden":""),[e(".u-marginbottom-10.w-row",[e(".w-col.w-col-6","others"===t.fee.destination()?[e("input[type='hidden']",{value:"others"}),e("label.field-label.fontsize-smallest",n>0?"Resto do Brasil":"Todos os estados do Brasil")]:"international"===t.fee.destination()?[e("input[type='hidden']",{value:"international"}),e("label.field-label.fontsize-smallest","Internacional")]:e("select.fontsize-smallest.text-field.text-field-light.w-select",{"class":!!t.fee.error&&"error",value:t.fee.destination(),onchange:e.withAttr("value",t.fee.destination)},[o.map(i(),function(o){return e("option",{value:o.acronym,disabled:t.stateInUse(o)},o.name)})])),e(".w-col.w-col-1"),e(".w-col.w-col-4",e(".w-row",[e(".no-hover.positive.prefix.text-field.w-col.w-col-3",e(".fontcolor-secondary.fontsize-mini.u-text-center","R$")),e(".w-col.w-col-9",e("input.positive.postfix.text-field.w-input",{value:t.feeValue(),autocomplete:"off",type:"text",onkeyup:e.withAttr("value",t.applyMask),oninput:e.withAttr("value",t.feeValue)}))])),e(".w-col.w-col-1",[e("input[type='hidden']",{value:t.deleted()}),"others"===t.fee.destination()||"international"===t.fee.destination()?"":e("a.btn.btn-no-border.btn-small.btn-terciary.fa.fa-1.fa-trash",{onclick:function(){return t.deleted.toggle()}})])],t.fee.error?e(Hi,{message:"Estado não pode ficar em branco."}):""),e(".divider.u-marginbottom-10")])}},Wd={controller:function(t){var n=hr.getCurrentProject(),i=t.reward(),a=hr.isSubscription(n)?5:10,s=e.prop(!1),l=function(e){return i.minimum_value(e.target.value.replace(/[^0-9]/g,"")),!0},c=function(){var o=confirm("Você tem certeza?");return!!o&&(i.newReward?(s(!0),!1):e.request({method:"DELETE",url:"/projects/"+t.project_id+"/rewards/"+i.id(),config:Tt.setCsrfToken}).then(function(){s(!0),e.redraw()}))},d=e.prop(!1),u=e.prop(!1),p=e.prop(!1),m=e.prop([]),f=e.prop([]),w=Bo.statesLoader,b=function(){t.error(!1),t.errors("Erro ao salvar informações. Confira os dados informados."),d(!1),u(!1),p(!1),i.newReward&&r(i.deliver_at()).isBefore(r().date(-1))&&(t.error(!0),p(!0)),o.isEmpty(i.description())&&(t.error(!0),d(!0)),(!i.minimum_value()||parseInt(i.minimum_value())<a)&&(t.error(!0),u(!0)),o.map(f(),function(e){o.extend(e,{error:!1}),null===e.destination()&&(t.error(!0),o.extend(e,{error:!0}))})},g=function(){if(b(),t.error())return!1;var e={title:i.title(),project_id:t.project_id,shipping_options:i.shipping_options(),minimum_value:i.minimum_value(),description:i.description(),deliver_at:i.deliver_at()};if("national"===i.shipping_options()||"international"===i.shipping_options()){var r=o.map(f(),function(e){return{_destroy:e.deleted(),id:e.id(),value:e.value(),destination:e.destination()}});o.extend(e,{shipping_fees_attributes:r})}return i.newReward?Bo.createReward(t.project_id,e).then(function(e){t.showSuccess(!0),i.newReward=!1,i.id(e.reward_id),i.edit.toggle()}):Bo.updateReward(t.project_id,i.id(),e).then(function(){t.showSuccess(!0),i.edit.toggle()}),!1},h=function(){var t=o.map(f(),function(e){return e.destination()});"national"!==i.shipping_options()&&"international"!==i.shipping_options()||o.contains(t,"others")||f().push({id:e.prop(null),value:e.prop(0),destination:e.prop("others")}),"national"===i.shipping_options()?f(o.reject(f(),function(e){return"international"===e.destination()})):"international"!==i.shipping_options()||o.contains(t,"international")||f().push({id:e.prop(null),value:e.prop(0),destination:e.prop("international")})};return w.load().then(function(t){m(t),m().unshift({acronym:null,name:"Estado"}),i.newReward||Bo.getFees({id:i.id()}).then(function(t){o.map(t,function(t){var o={id:e.prop(t.id),value:e.prop(t.value),destination:e.prop(t.destination)};f().unshift(o)}),h()})}),{minimumValueError:u,minimumValue:a,deliverAtError:p,descriptionError:d,confirmDelete:c,acceptNumeric:l,updateOptions:h,saveReward:g,destroyed:s,states:m,project:n,reward:i,fees:f}},view:function(t,n){var i={id:e.prop(null),value:e.prop(null),destination:e.prop(null)},a=t.fees(),s=n.reward(),l=function(t){return e(".fontsize-smaller.text-error.u-marginbottom-20.fa.fa-exclamation-triangle",e("span",t))};return t.destroyed()?e("div",""):e(".w-row.card.card-terciary.u-marginbottom-20.card-edition.medium",[e(".card",e(".w-form",[e(".w-row",[e(".w-col.w-col-5",e("label.fontsize-smaller","Título:")),e(".w-col.w-col-7",e("input.w-input.text-field.positive[aria-required='true'][autocomplete='off'][type='tel']",{value:t.reward.title(),oninput:e.withAttr("value",t.reward.title)}))]),e(".w-row.u-marginbottom-20",[e(".w-col.w-col-5",e("label.fontsize-smaller","Valor mínimo:")),e(".w-col.w-col-7",[e(".w-row",[e(".w-col.w-col-3.w-col-small-3.w-col-tiny-3.text-field.positive.prefix.no-hover",e(".fontsize-smallest.fontcolor-secondary.u-text-center","R$")),e(".w-col.w-col-9.w-col-small-9.w-col-tiny-9",e("input.string.tel.required.w-input.text-field.project-edit-reward.positive.postfix[aria-required='true'][autocomplete='off'][required='required'][type='tel']",{"class":!!t.minimumValueError()&&"error",value:t.reward.minimum_value(),oninput:function(e){return t.acceptNumeric(e)}}))]),t.minimumValueError()?l("Valor deve ser igual ou superior a R$"+t.minimumValue+"."):"",e(".fontsize-smaller.text-error.u-marginbottom-20.fa.fa-exclamation-triangle.w-hidden[data-error-for='reward_minimum_value']","Informe um valor mínimo maior ou igual a 10")])]),"sub"===t.project.mode?null:e(".w-row",[e(".w-col.w-col-5",e("label.fontsize-smaller","Previsão de entrega:")),e(".w-col.w-col-7",e(".w-row",e(".w-col.w-col-12",e(".w-row",[e("input[type='hidden'][value='1']"),e("select.date.required.w-input.text-field.w-col-6.positive[aria-required='true'][discard_day='true'][required='required'][use_short_month='true']",{"class":!!t.deliverAtError()&&"error",onchange:function(e){t.reward.deliver_at(r(t.reward.deliver_at()).month(parseInt(e.target.value)-1).format())}},[o.map(r.monthsShort(),function(o,n){return e("option",{value:n+1,selected:r(t.reward.deliver_at()).format("M")==n+1},Tt.capitalize(o))})]),e("select.date.required.w-input.text-field.w-col-6.positive[aria-required='true'][discard_day='true'][required='required'][use_short_month='true']",{"class":!!t.deliverAtError()&&"error",onchange:function(e){t.reward.deliver_at(r(s.deliver_at()).year(parseInt(e.target.value)).format())}},[o.map(o.range(r().year(),r().year()+6),function(o){return e("option",{value:o,selected:r(t.reward.deliver_at()).format("YYYY")===String(o)
},o)})])]))),t.deliverAtError()?l("Data de entrega não pode ser no passado."):"")]),e(".w-row",e("label.fontsize-smaller","Descrição:")),e(".w-row",[e("textarea.text.required.w-input.text-field.positive.height-medium[aria-required='true'][placeholder='Descreva sua recompensa'][required='required']",{value:t.reward.description(),"class":!!t.descriptionError()&&"error",oninput:e.withAttr("value",t.reward.description)}),e(".fontsize-smaller.text-error.u-marginbottom-20.fa.fa-exclamation-triangle.w-hidden[data-error-for='reward_description']","Descrição não pode ficar em branco")]),t.descriptionError()?l("Descrição não pode ficar em branco."):"","sub"===t.project.mode?null:e(".u-marginbottom-30.w-row",[e(".w-col.w-col-3",e("label.fontsize-smaller[for='field-2']","Tipo de entrega")),e(".w-col.w-col-9",[e("select.positive.text-field.w-select",{value:t.reward.shipping_options()||"free",onchange:function(e){t.reward.shipping_options(e.target.value),t.updateOptions()}},[e("option[value='international']","Frete Nacional e Internacional"),e("option[value='national']","Frete Nacional"),e("option[value='free']","Sem frete envolvido"),e("option[value='presential']","Retirada presencial")]),"national"===t.reward.shipping_options()||"international"===t.reward.shipping_options()?e(".card.card-terciary",[o.map(a,function(o,r){return[e(Ud,{fee:o,fees:t.fees,feeIndex:r,states:t.states})]}),e(".u-margintop-20",e("a.alt-link[href='#']",{onclick:function(){return t.fees().push(i),!1}},"Adicionar destino"))]):""])]),e(".w-row.u-margintop-30",[e(".w-col.w-col-5.w-col-small-5.w-col-tiny-5.w-sub-col-middle",e("a.w-button.btn.btn-small",{onclick:function(){t.saveReward()}},"Salvar")),s.newReward?"":e(".w-col.w-col-5.w-col-small-5.w-col-tiny-5.w-sub-col-middle",e("a.w-button.btn-terciary.btn.btn-small.reward-close-button",{onclick:function(){s.edit.toggle()}},"Cancelar")),e(".w-col.w-col-1.w-col-small-1.w-col-tiny-1",[e("input[type='hidden'][value='false']"),e("a.remove_fields.existing",{onclick:t.confirmDelete},e(".btn.btn-small.btn-terciary.fa.fa-lg.fa-trash.btn-no-border"))])])]))])}},$d=o.partial(Tt.i18nScope,"projects.reward_fields"),Hd={controller:function(t){var o=t.reward(),r=function(){return o.maximum_contributions()-o.paid_count()-o.waiting_payment_count()},n=e.prop(!1),i=Tt.toggleProp(!1,!0),a=function(){o.limited.toggle(),o.maximum_contributions("")},s=function(){i.toggle()},l=function(){n(!1),t.error(!1),t.errors("Erro ao salvar informações."),o.maximum_contributions()&&o.paid_count()>o.maximum_contributions()&&(n(!0),t.error(!0))},c=function(){if(l(),t.error())return!1;var r={maximum_contributions:o.maximum_contributions()};return Bo.updateReward(t.project().project_id,o.id(),r).then(function(){t.showSuccess(!0),i.toggle(),o.limited(null!==o.maximum_contributions()),e.redraw()}),!1};return{availableCount:r,toggleShowLimit:s,toggleLimit:a,saveReward:c,showLimited:i,limitError:n}},view:function(o,r){var n=r.reward(),i=r.project(),a=hr.isSubscription(i);return e(".w-row.cursor-move.card-persisted.card.card-terciary.u-marginbottom-20.medium.sortable",[e(".card",[e(".w-row",[e(".w-col.w-col-11.w-col-small-11.w-col-tiny-11",e(".fontsize-base.fontweight-semibold",t.t(a?"minimum_value_subscription_title":"minimum_value_title",$d({minimum_value:n.minimum_value()})))),Bo.canEdit(n,i.state,r.user)?e(".w-col.w-col-1.w-col-small-1.w-col-tiny-1",e("a.show_reward_form[href='javascript:void(0);']",{onclick:function(){n.edit.toggle()}},e(".btn.btn-small.btn-terciary.fa.fa-lg.fa-edit.btn-no-border"))):""]),e(".u-marginbottom-20",[e(".fontsize-smaller.fontweight-semibold",t.t(a?"paid_subscribers":"paid_contributors",$d({count:n.paid_count()}))),e(".fontsize-smaller.fontcolor-secondary",t.t("index.contributions_to_confirm",$d({count:n.waiting_payment_count()})))]),e(".fontsize-small.fontweight-semibold",n.title()),e(".fontsize-small.fontcolor-secondary",e.trust(Tt.simpleFormat(Tt.strip(n.description())))),n.limited()?o.availableCount()<=0?e(".u-margintop-10",e("span.badge.badge-gone.fontsize-smaller",t.t("reward_gone",$d()))):e(".u-margintop-10",e("span.badge.badge-attention.fontsize-smaller",[e("span.fontweight-bold",t.t("reward_limited",$d())),t.t("reward_available",$d({available:o.availableCount(),maximum:n.maximum_contributions()}))])):"",n.deliver_at()&&!a?e(".fontsize-smallest",[e("b",t.t("delivery_estimation",$d())),Tt.momentify(n.deliver_at(),"MMM/YYYY")]):null,a?null:e(".fontsize-smallest",e("b",t.t("delivery",$d())+": "),t.t("shipping_options."+n.shipping_options(),$d())),e(".u-margintop-40.w-row",[o.showLimited()?"":e(".w-col.w-col-4",[e("button.btn.btn-small.btn-terciary.w-button",{onclick:o.toggleShowLimit},"Alterar limite")]),e(".w-col.w-col-8")]),e("div"+(o.showLimited()?"":".w-hidden"),e(".card.card-terciary.div-display-none.u-radius",{style:{display:"block"}},e(".w-form",[[e(".w-row",[e(".w-col.w-col-6",e(".w-checkbox",[e("input.w-checkbox-input[type='checkbox']",{onclick:o.toggleLimit,checked:n.limited()}),e("label.fontsize-smaller.fontweight-semibold.w-form-label",t.t("reward_limited_input",$d()))])),e(".w-col.w-col-6",e("input.string.tel.optional.w-input.text-field.u-marginbottom-30.positive[placeholder='Quantidade disponível'][type='tel']",{"class":!!o.limitError()&&"error",value:n.maximum_contributions(),onchange:e.withAttr("value",n.maximum_contributions)}))]),e(".w-row",[e(".w-sub-col.w-col.w-col-4",e("button.btn.btn-small.w-button",{onclick:o.saveReward},"Salvar")),e(".w-sub-col.w-col.w-col-4",e("button.btn.btn-small.btn-terciary.w-button",{onclick:o.toggleShowLimit},"Cancelar")),e(".w-clearfix.w-col.w-col-4")])]]))),o.limitError()?e(Hi,{message:"Limite deve ser maior que quantidade de apoios."}):"",,]),e(".u-margintop-20",[e(".fontcolor-secondary.fontsize-smallest.fontweight-semibold",t.t("reward_link_label",$d())),e(".fontcolor-secondary.fontsize-smallest.u-marginbottom-10",t.t("reward_link_hint",$d())),e(".w-form",e(".w-col.w-col-6",e.component(ci,{value:"https://www.catarse.me/pt/projects/"+i.project_id+"/"+(a?"subscriptions/start":"contributions/new")+"?reward_id="+n.id()})))])])}},Qd=o.partial(Tt.i18nScope,"projects.reward_fields"),Gd={controller:function(n){var i=e.prop([]),a=e.prop(!1),s=e.prop(!1),l=e.prop([]),c=e.prop(!1),d=function(){return{id:e.prop(null),minimum_value:e.prop(null),title:e.prop(""),shipping_options:e.prop("free"),edit:Tt.toggleProp(!0,!1),deliver_at:e.prop(r().date(1).format()),description:e.prop(""),paid_count:e.prop(0),limited:Tt.toggleProp(!1,!0),maximum_contributions:e.prop(null),newReward:!0,row_order:e.prop(999999999+20*i().length)}},u=function(t,o){return e.request({method:"POST",url:"/pt/projects/"+n.project_id+"/rewards/"+t+"/sort?reward[row_order_position]="+o,config:function(e){Tt.authenticityToken()&&(e.setRequestHeader("X-CSRF-Token",Tt.authenticityToken()),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"))}})},p=function(e,t){!t&&window.$&&window.$(e).sortable({update:function(e,t){var o=t.item[0].id;u(o,t.item.index())}})},m=function(){return Bo.fetchRewards(n.project_id).then(function(){i([]),o.map(Bo.rewards(),function(t){var o=null!==t.maximum_contributions,r=e.prop({id:e.prop(t.id),deliver_at:e.prop(t.deliver_at),description:e.prop(t.description),maximum_contributions:e.prop(t.maximum_contributions),minimum_value:e.prop(t.minimum_value),edit:Tt.toggleProp(!1,!0),limited:Tt.toggleProp(o,!o),paid_count:e.prop(t.paid_count),row_order:e.prop(t.row_order),shipping_options:e.prop(t.shipping_options),title:e.prop(t.title),waiting_payment_count:e.prop(t.waiting_payment_count)});i().push(r)}),0===Bo.rewards().length&&i().push(e.prop(d()))})},f=t.translations[t.currentLocale()].projects.reward_fields.faq;return m(),{loading:a,error:s,errors:l,showSuccess:c,rewards:i,user:mo.fetchUser(n.user_id),newReward:d,setSorting:p,tips:f}},view:function(r,n){var i=r.error,a=n.project;return e("[id='dashboard-rewards-tab']",a()?[e(".w-section.section",e(".w-container",[r.showSuccess()?e.component(Cn,{message:"Recompensa salva com sucesso"}):"",r.error()?e.component(Cn,{message:r.errors(),error:!0}):"",e(".w-row",e(".w-col.w-col-8.w-col-push-2",e(".u-marginbottom-60.u-text-center",e(".w-inline-block.card.fontsize-small.u-radius",[e("span.fa.fa-lightbulb-o"),e.trust(" "+t.t("reward_know_more_cta_html",Qd()))])))),e(".w-row",[e(".w-col.w-col-9",e(".w-form",[0===r.rewards().length?"":e(".ui-sortable[id='rewards']",{config:r.setSorting},[o.map(o.sortBy(r.rewards(),function(e){return Number(e().row_order())}),function(t,o){return e("div[id="+t().id()+"]",[e(".nested-fields",e(".reward-card",[t().edit()?e(Wd,{project_id:n.project_id,error:i,showSuccess:r.showSuccess,errors:r.errors,reward:t}):e(Hd,{reward:t,error:i,errors:r.errors,user:r.user(),showSuccess:r.showSuccess,project:a})])),e("input.ui-sortable-handle[type='hidden']",{value:t().id()})])})])]),Bo.canAdd(a().state,r.user())?[e("button.btn.btn-large.btn-message.show_reward_form.new_reward_button.add_fields",{onclick:function(){return r.rewards().push(e.prop(r.newReward()))}},t.t("add_reward",Qd()))]:""),e(".w-col.w-col-3",[t.t("reward_faq_intro",Qd()),e("br"),e("br"),t.t("reward_faq_sub_intro",Qd()),e("br"),e("br"),o.map(r.tips,function(t,o){return"sub"!==a().mode||3!==Number(o)&&4!==Number(o)?[e(".fontweight-semibold",t.title),e.trust(t.description),e("br"),e("br")]:null})])])]))]:Tt.loader())}},Xd=uc(),Jd=e.prop({}),Kd={headline:e.prop(""),uploaded_image:e.prop(""),cover_image:e.prop(""),upload_files_targets:e.prop({}),upload_files:e.prop(new FormData)},Zd=function(e){Kd.headline(e.headline||""),Kd.cover_image(e.cover_image||""),Kd.upload_files_targets({}),Kd.upload_files(new FormData),Jd(e)},eu=function(){Jd().id&&hr.fetchProject(Jd().id,!1).then(function(t){Zd(_.first(t)),e.redraw()})},tu=function(e,t){var o=Kd.upload_files();e.target.files[0]?(o["delete"]&&o["delete"](t),o.append(t,e.target.files[0]),Kd.upload_files_targets()[t]=!0):(o["delete"](t),delete Kd.upload_files_targets()[t])},ou=function(t){if(_.isEmpty(Kd.upload_files_targets())){var o=e.deferred();return o.resolve({}),o.promise}return e.request({method:"POST",url:"/projects/"+t+"/upload_image.json",data:Kd.upload_files(),config:Tt.setCsrfToken,serialize:function(e){return e}})},ru=function(e){var t={headline:Kd.headline()};return hr.updateProject(e,t)},nu={fields:Kd,fillFields:Zd,updateProject:ru,e:Xd,prepareForUpload:tu,uploadImage:ou,currentProject:Jd,reloadCurrentProject:eu},iu=o.partial(Tt.i18nScope,"projects.dashboard_card"),au={controller:function(t){var o=nu,r=[["uploaded_image",["uploaded_image"]],["cover_image",["cover_image"]],["headline",["headline"]]],n=Tt.toggleProp(!1,!0),i=Tt.toggleProp(!1,!0),a=e.prop(!1),s=function(s){return a(!0),e.redraw(),o.uploadImage(t.projectId).then(function(s){o.updateProject(t.projectId).then(function(e){a(!1),o.e.resetFieldErrors(),n()||n.toggle(),i()&&i.toggle(),o.reloadCurrentProject(),Wn.validatePublish()})["catch"](function(t){t.errors_json&&Wn.mapRailsErrors(t.errors_json,r,o.e),a(!1),n()&&n.toggle(),i()||i.toggle(),e.redraw()})})["catch"](function(e){e.errors_json&&Wn.mapRailsErrors(e.errors_json,r,o.e),a(!1),n()&&n.toggle(),i()||i.toggle()}),!1};return Wn.railsErrors()&&Wn.mapRailsErrors(Wn.railsErrors(),r,o.e),o.fillFields(t.project),{onSubmit:s,showSuccess:n,showError:i,vm:o,loading:a}},view:function(o,r){var n=o.vm;return e("#card-tab",[o.showSuccess()?e.component(Cn,{message:t.t("shared.successful_update"),toggleOpt:o.showSuccess}):"",o.showError()?e.component(Cn,{message:t.t("shared.failed_update"),toggleOpt:o.showError,error:!0}):"",e("form.w-form",{onsubmit:o.onSubmit},[e(".w-section.section",[e(".w-container",["sub"===n.currentProject().mode?e(".w-row",[e(".w-col.w-col-12",[e(id,{label:e.trust(t.t("cover_image_label",iu())),label_hint:t.t("cover_image_hint",iu()),children:[e("span.hint",n.fields.cover_image()?e('img[alt="Imagem de fundo"][src="'+n.fields.cover_image()+'"]'):"Imagem de fundo"),e('input.file.optional.w-input.text-field[id="project_cover_image"][name="project[cover_image]"][type="file"]',{"class":!!n.e.hasError("cover_image")&&"error",onchange:function(e){n.prepareForUpload(e,"cover_image")}}),n.e.inlineError("cover_image")]})])]):"",e(".w-row",[e(".w-col.w-col-8",[e(id,{label:t.t("uploaded_image_label",iu()),label_hint:t.t("uploaded_image_hint",iu()),children:[e('input.file.optional.w-input.text-field[id="project_uploaded_image"][name="project[uploaded_image]"][type="file"]',{"class":!!n.e.hasError("uploaded_image")&&"error",onchange:function(e){n.prepareForUpload(e,"uploaded_image")}}),n.e.inlineError("uploaded_image")]}),e(id,{label:t.t("headline_label",iu()),label_hint:t.t("headline_label_hint",iu()),children:[e('textarea.text.optional.w-input.text-field.positive[id="project_headline"][maxlength="100"][name="project[headline]"][rows="3"]',{onchange:e.withAttr("value",n.fields.headline),"class":!!n.e.hasError("headline")&&"error"},n.fields.headline()),n.e.inlineError("headline")]})]),e(Tn,{project:n.currentProject(),type:"small"})])])]),e(Rt,{loading:o.loading,onSubmit:o.onSubmit})])])}},su={controller:function(e){return{user:mo.fetchUser(e.user_id),project:hr.fetchProject(e.project_id)}},view:function(t,o){return t.user()&&t.project()?e(au,{user:t.user(),userId:o.user_id,projectId:o.project_id,project:t.project()}):e("div",Tt.loader())}},lu={controller:function(e){var t=void 0,o=Tt.toggleProp(!1,!0),r=function(e,t){if(!t){var o=document.createElement("script"),r=document.getElementsByTagName("script")[0];o.src="https://www.youtube.com/iframe_api",r.parentNode.insertBefore(o,r),window.onYouTubeIframeAPIReady=i}},n=function(){return _.isUndefined(t)||t.pauseVideo(),o.toggle(),!1},i=function(){t=new YT.Player("ytvideo",{height:"528",width:"940",videoId:e.src,playerVars:{showInfo:0,modestBranding:0},events:{onStateChange:function(e){return 0===e.data&&n()}}})};return{showLightbox:o,setYoutube:r,closeVideo:n}},view:function(t,o){return e("#youtube-lightbox",[e("a#youtube-play.w-lightbox.w-inline-block.fa.fa-play-circle.fontcolor-negative.fa-5x[href='javascript:void(0);']",{onclick:function(){t.showLightbox.toggle(),o.onclick&&o.onclick()}}),e('#lightbox.w-lightbox-backdrop[style="display:'+(t.showLightbox()?"block":"none")+'"]',[e(".w-lightbox-container",[e(".w-lightbox-content",[e(".w-lightbox-view",[e(".w-lightbox-frame",[e("figure.w-lightbox-figure",[e("img.w-lightbox-img.w-lightbox-image[src='data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20width=%22940%22%20height=%22528%22/%3E']"),e("#ytvideo.embedly-embed.w-lightbox-embed",{config:t.setYoutube})])])]),e(".w-lightbox-spinner.w-lightbox-hide"),e(".w-lightbox-control.w-lightbox-left.w-lightbox-inactive"),e(".w-lightbox-control.w-lightbox-right.w-lightbox-inactive"),e("#youtube-close.w-lightbox-control.w-lightbox-close",{onclick:t.closeVideo})]),e(".w-lightbox-strip")])])])}},cu=_.partial(Tt.i18nScope,"projects.dashboard_start"),du={controller:function(e){},view:function(t,o){return e(".dashboard-header.min-height-70.u-text-center",[e(".w-container",e(".u-marginbottom-40.w-row",[e(".w-col.w-col-8.w-col-push-2",[e(".fontsize-larger.fontweight-semibold.lineheight-looser.u-marginbottom-10",I18n.t("title",cu())),e(".fontsize-small.lineheight-loose.u-marginbottom-40",I18n.t("description",cu({name:o.project().user.name||""}))),e(".card.card-terciary.u-radius",e('iframe[allowfullscreen="true"][width="630"][height="383"][frameborder="0"][scrolling="no"][mozallowfullscreen="true"][webkitallowfullscreen="true"][src='+I18n.t("video_src",cu())+"]"))])])),"draft"===o.project().state?e.component(Zn,{project:o.project()}):""])}},uu={view:function(t,o){return o.project()?e("div",[e(".u-text-center",e(".w-container",e(".w-row",[e(".w-col.w-col-8.w-col-push-2",[e(".fontweight-semibold.fontsize-large.u-margintop-40","É hora dos feedbacks!"),e("p.fontsize-base","Compartilhe o link abaixo com seus amigos e aproveite o momento para fazer ajustes finos que ajudem na sua campanha."),e(".w-row.u-marginbottom-30",[e(".w-col.w-col-3"),e(".w-col.w-col-6",e("input.w-input.text-field[type='text'][value='https://www.catarse.me/"+o.project().permalink+"']")),e(".w-col.w-col-3")])]),e(".w-col.w-col-2")]))),e(Zs,o)]):Tt.loader()}},pu={view:function(t,o){return e("div",[e(".modal-dialog-content",[e(".fontsize-large.u-text-center.u-marginbottom-30.fontweight-semibold","Você confirma?"),e(".fontsize-large.u-text-center.u-marginbottom-30",["Sua arrecadação irá terminar no dia  ",e("span.expire-date",o.expirationDate),", as 23h59. Até lá, você pode captar recursos e seguir firme na sua campanha! Assim que o seu prazo chegar ao fim, você deverá confirmar os seus dados bancários. A partir de então, depositaremos o dinheiro na sua conta em até 10 dias úteis."])]),e(".modal-dialog-nav-bottom",e(".w-row",[e(".w-col.w-col-2"),e(".w-col.w-col-4",[e("input[id='anchor'][name='anchor'][type='hidden'][value='announce_expiration']"),e("input.btn.btn.btn-large[id='budget-save'][name='commit'][type='submit'][value='Sim']")]),e(".w-col.w-col-4",e("button.btn.btn-large.btn-terciary",{onclick:o.displayModal.toggle}," Não")),e(".w-col.w-col-2")]))])}},mu={controller:function(){var t=e.prop(2),o=Tt.toggleProp(!1,!0);return{days:t,showModal:o}},view:function(t,o){var n=t.days,i=r().add(t.days(),"days").format("DD/MM/YYYY");return e("[id='dashboard-announce_expiration-tab']",e("form.simple_form.project-form.w-form[accept-charset='UTF-8'][action='/pt/flexible_projects/"+o.project_id+"'][id='expiration-form'][method='post'][novalidate='novalidate']",[e("input[name='utf8'][type='hidden'][value='✓']"),e("input[name='_method'][type='hidden'][value='patch']"),e("input[name='authenticity_token'][type='hidden'][value='"+Tt.authenticityToken()+"']"),e(".w-section",e(".w-container",e(".w-row.u-marginbottom-60",[e(".w-col.w-col-1"),e(".w-col.w-col-10",e(".card-big.card.card-terciary.u-radius",[e(".u-marginbottom-30.w-row",[e(".w-sub-col.w-col.w-col-6",e(".fontsize-small.u-marginbottom-10",["Em quantos dias, contados a partir de agora, você quer encerrar a sua arrecadação?",e("br"),e("span.fontsize-smaller.fontweight-semibold","(mínimo de 2 dias)")])),e(".w-col.w-col-6",e(".w-row",[e(".w-col.w-col-8.w-col-small-6.w-col-tiny-6",e("input.numeric.numeric.optional.w-input.text-field.positive.medium[id='flexible_project_online_days'][step='any'][type='number']",{name:"flexible_project[online_days]",value:n(),onchange:e.withAttr("value",t.days)})),e(".medium.no-hover.postfix.prefix-permalink.text-field.w-col.w-col-4.w-col-small-6.w-col-tiny-6",e(".fontcolor-secondary.fontsize-base.lineheight-tightest.u-text-center","Dias"))]))]),e(".fontcolor-secondary.u-text-center",[e(".fontsize-smaller","Você poderá receber apoios até:"),e(".fontsize-base",[e("span.expire-date",i)," as 23h59m"])])])),e(".w-col.w-col-1")]))),e(".w-section",e(".w-container",e(".w-row",[e(".w-col.w-col-4"),e(".w-col.w-col-4",e("button.btn.btn-large.u-marginbottom-20",{onclick:function(e){t.showModal.toggle(),e.preventDefault()}},"  Confirmar"))]))),t.showModal()?e.component(zn,{displayModal:t.showModal,content:[pu,{expirationDate:i,displayModal:t.showModal}]}):""]))}},fu={view:function(t,o){return e("div.u-marginbottom-80",[e(".w-section.dashboard-header.u-text-center[id='dashboard-titles-root']",e(".w-container",e(".w-row",e(".w-col.w-col-8.w-col-push-2.u-marginbottom-30",[e(".fontweight-semibold.fontsize-larger.lineheight-looser[id='dashboard-page-title']",e.trust(o.title)),e(".fontsize-base[id='dashboard-page-subtitle']",e.trust(o.subtitle))])))),e(".u-marginbottom-80",o.content)])}},wu=o.partial(Tt.i18nScope,"projects.edit"),bu={controller:function(r){var n=r.project_id,i=r.user_id,a=hr.fetchProject(n),s=e.prop(window.location.hash),l=function(){var r={project_id:n,user_id:i,project:a},l={"#video":hr.isSubscription(a)?null:e(fu,{title:t.t("video_html",wu()),subtitle:t.t("video_subtitle",wu()),content:e(Ad,o.extend({},r))}),"#description":e(fu,{title:t.t("description",wu()),subtitle:t.t("description_subtitle",wu()),content:e(zd,o.extend({},r))}),"#budget":e(fu,{title:t.t("budget",wu()),subtitle:t.t("budget_subtitle",wu()),content:e(Ld,o.extend({},r))}),"#reward":e(fu,{title:t.t("reward_html",wu()),subtitle:t.t("reward_subtitle",wu()),content:e(Gd,o.extend({},r))}),"#user_settings":e(fu,{title:t.t("user_settings",wu()),subtitle:t.t("user_settings_subtitle",wu()),content:e(Yd,o.extend({},r))}),"#user_about":e(fu,{title:t.t("user_about",wu()),subtitle:t.t("user_about_subtitle",wu()),content:e(Bd,o.extend({},r))}),"#card":e(fu,{title:t.t("card_"+a().mode,wu()),subtitle:t.t("card_subtitle_"+a().mode,wu()),content:e(su,o.extend({},r))}),"#basics":e(fu,{title:t.t("basics",wu()),subtitle:t.t("basics_subtitle",wu()),content:e(ld,o.extend({},r))}),"#goal":e(fu,{title:t.t("goal",wu()),subtitle:t.t("goal_subtitle",wu()),content:e(Hc,o.extend({},r))}),"#goals":e(fu,{title:t.t("goals",wu()),subtitle:"",content:e(Jc,o.extend({},r))}),"#announce_expiration":e(fu,{title:t.t("announce_expiration",wu()),subtitle:t.t("announce_expiration_subtitle",wu()),content:e(mu,o.extend({},r))}),"#preview":e(uu,o.extend({},r)),"#start":e(du,o.extend({},r))};return s(window.location.hash),o.isEmpty(s())||"#_=_"===s()?l["#basics"]:l[s()]};return Tt.redrawHashChange(),{displayTabContent:l,hash:s,project:a}},view:function(t,o){var r=t.project;return e(".project-dashboard-edit",r()?[e(".w-section.section-product."+r().mode),t.displayTabContent(),r()?e.component(Qn,{project:r}):""]:"")}},gu=o.partial(Tt.i18nScope,"projects.contributions.edit"),hu=o.partial(Tt.i18nScope,"projects.contributions.edit_international"),_u={controller:function(t){var r=hr.currentProject,n=ol(),i=e.prop(!1),a=e.prop(),s=R.getCurrentContribution(),l=e.prop(s().reward),c=s().value,d=o.partial(Tt.mask,"999.999.999-99"),u=o.partial(Tt.mask,"99.999.999/9999-99"),p=e.prop(!1),m=Tt.getUserID(),f=mo.getCurrentUser(),w=function(){return o.findWhere(Bo.fees(),{id:s().shipping_fee_id})},b=function(){n.validate()&&(n.similityExecute(s().id),i(!0))},g=function(t){var r=o.findWhere(n.fields.errors(),{field:t});return r?e.component(Hi,{message:r.message}):""},h=function(e){e.length>14?(p(!0),n.fields.ownerDocument(u(e))):(p(!1),n.fields.ownerDocument(d(e)))},_=function(e){return function(t){CatarseAnalytics.oneTimeEvent({cat:"contribution_finish",act:n.isInternational?"contribution_address_br":"contribution_address_int"}),o.isFunction(e)&&e(t)}},v=function(e){return n.isInternational()?hu(e):gu(e)},y=function(e){return e.description&&e.description.length>110};return o.isNull(m)?Tt.navigateToDevise():(l()&&!o.isNull(l().id)&&Bo.getFees(l()).then(Bo.fees),n.fetchUser().then(function(){a(rs({data:n.fields.address()}))}),n.similityExecute(s().id),hr.getCurrentProject(),{addressChange:_,applyDocumentMask:h,fieldHasError:g,validateForm:b,showPaymentForm:i,contribution:s,reward:l,value:c,addVM:a,scope:v,isCnpj:p,vm:n,user:f,project:r,shippingFee:w,isLongDescription:y,toggleDescription:Tt.toggleProp(!1,!0)})},view:function(r){var n=r.user(),i=r.addVM(),a=r.project(),s=Tt.formatNumber(Number(r.value),2,3),l=e(".w-row",[e(".w-checkbox.w-clearfix",[e("input.w-checkbox-input[id='anonymous'][name='anonymous'][type='checkbox']",{onclick:function(){return CatarseAnalytics.event({cat:"contribution_finish",act:"contribution_anonymous_change"})},onchange:function(){r.vm.fields.anonymous.toggle()},checked:r.vm.fields.anonymous()}),e("label.w-form-label.fontsize-smallest[for='anonymous']",t.t("fields.anonymous",r.scope()))]),r.vm.fields.anonymous()?e(".card.card-message.u-radius.zindex-10.fontsize-smallest",e("div",[e("span.fontweight-bold",[t.t("anonymous_confirmation_title",r.scope()),e("br")]),e("br"),t.t("anonymous_confirmation",r.scope())])):""]);return e("#project-payment.w-section.w-clearfix.section",i&&!o.isEmpty(a)?[e(".w-col",e(".w-clearfix.w-hidden-main.w-hidden-medium.card.u-radius.u-marginbottom-20",[e(".fontsize-smaller.fontweight-semibold.u-marginbottom-20",t.t("selected_reward.value",r.scope())),e(".w-clearfix",[e(".fontsize-larger.text-success.u-left","R$ "+s),e('a.alt-link.fontsize-smaller.u-right[href="/projects/'+hr.currentProject().project_id+"/contributions/new"+(r.reward().id?"?reward_id="+r.reward().id:"")+'"]',"Editar")]),e(".divider.u-marginbottom-10.u-margintop-10"),e(".back-payment-info-reward",[e(".fontsize-smaller.fontweight-semibold.u-marginbottom-10",t.t("selected_reward.reward",r.scope())),e(".fontsize-smallest.fontweight-semibold",r.reward().title),e(".fontsize-smallest.reward-description.opened.fontcolor-secondary",{"class":r.isLongDescription(r.reward())?r.toggleDescription()?"extended":"":"extended"},r.reward().description?r.reward().description:e.trust(t.t("selected_reward.review_without_reward_html",r.scope(o.extend({value:s}))))),r.isLongDescription(r.reward())?e('a[href="javascript:void(0);"].link-hidden.link-more.u-marginbottom-20',{onclick:r.toggleDescription.toggle},[r.toggleDescription()?"menos ":"mais ",e("span.fa.fa-angle-down",{"class":r.toggleDescription()?"reversed":""})]):"",r.reward().deliver_at?e(".fontcolor-secondary.fontsize-smallest.u-margintop-10",[e("span.fontweight-semibold","Entrega prevista:")," "+Tt.momentify(r.reward().deliver_at,"MMM/YYYY")]):"",Bo.hasShippingOptions(r.reward())||"presential"===r.reward().shipping_options?e(".fontcolor-secondary.fontsize-smallest",[e("span.fontweight-semibold","Forma de envio: "),t.t("shipping_options."+r.reward().shipping_options,{scope:"projects.contributions"})]):""])])),e(".w-container",e(".w-row",[e(".w-col.w-col-8",[e(".w-form",[e("form.u-marginbottom-40",[e(".u-marginbottom-40.u-text-center-small-only",[e(".fontweight-semibold.lineheight-tight.fontsize-large",t.t("title",r.scope())),e(".fontsize-smaller",t.t("required",r.scope()))]),n.name&&n.owner_document?e(".card.card-terciary.u-radius.u-marginbottom-40",[e(".w-row.u-marginbottom-20",[e(".w-col.w-col-2.w-col-small-2.w-col-tiny-2.w-hidden-tiny",[e('img.thumb.u-margintop-10.u-round[src="'+Tt.useAvatarOrDefault(n.profile_img_thumbnail)+'"][width="100"]')]),e(".w-col.w-col-10.w-col-small-10.w-col-tiny-10",[e(".fontcolor-secondary.fontsize-smallest.u-marginbottom-10",[a?"Dados do apoiador ":"Dados do usuário ",e('a.alt-link[href="/not-my-account'+(a?"?project_id="+a.project_id:"")+(r.reward()?"&reward_id="+r.reward().id:"")+(r.value?"&value="+100*r.value:"")+'"]',"Não é você?")]),e(".fontsize-base.fontweight-semibold",n.name),n.owner_document?e("label.field-label","CPF/CNPJ: "+n.owner_document):""])]),l]):"",e(".card.card-terciary.u-marginbottom-30.u-radius.w-form",e(ul,{fields:i.fields,defaultCountryID:i.defaultCountryID,defaultForeignCountryID:i.defaultForeignCountryID,international:i.international})),n.name&&n.owner_document?"":e(".card.card-terciary.u-radius.u-marginbottom-40",[e(".w-row",[e(".w-col.w-col-7.w-sub-col",[e("label.field-label.fontweight-semibold[for='complete-name']",t.t("fields.complete_name",r.scope())),e("input.positive.w-input.text-field[id='complete-name'][name='complete-name']",{onfocus:r.vm.resetFieldError("completeName"),"class":!!r.fieldHasError("completeName")&&"error",type:"text",onchange:e.withAttr("value",r.vm.fields.completeName),value:r.vm.fields.completeName(),placeholder:"Nome Completo"}),r.fieldHasError("completeName")]),e(".w-col.w-col-5",i.international()?"":[e("label.field-label.fontweight-semibold[for='document']",t.t("fields.owner_document",r.scope())),e("input.positive.w-input.text-field[id='document']",{onfocus:r.vm.resetFieldError("ownerDocument"),"class":!!r.fieldHasError("ownerDocument")&&"error",type:"tel",onkeyup:e.withAttr("value",r.applyDocumentMask),value:r.vm.fields.ownerDocument()}),r.fieldHasError("ownerDocument")])]),l]),e(".card.card-terciary.u-radius.u-marginbottom-40",e(Gl,{addressFields:i.fields,fields:e.prop(r.vm.fields),international:i.international,hideNationality:!0}))])]),e(".w-row.u-marginbottom-40",r.showPaymentForm()?"":e(".w-col.w-col-push-3.w-col-6",e("button.btn.btn-large",{onclick:function(){return CatarseAnalytics.event({cat:"contribution_finish",act:"contribution_next_click"},r.validateForm)}},t.t("next_step",r.scope())))),r.showPaymentForm()?e.component($l,{vm:r.vm,contribution_id:r.contribution().id,project_id:hr.currentProject().project_id,user_id:n.id}):""]),e(".w-col.w-col-4",[e(".card.u-marginbottom-20.u-radius.w-hidden-small.w-hidden-tiny",[e(".fontsize-smaller.fontweight-semibold.u-marginbottom-20",t.t("selected_reward.value",r.scope())),e(".w-clearfix",[e(".fontsize-larger.text-success.u-left","R$ "+s),e('a.alt-link.fontsize-smaller.u-right[href="/projects/'+hr.currentProject().project_id+"/contributions/new"+(r.reward().id?"?reward_id="+r.reward().id:"")+'"]',"Editar")]),e(".divider.u-marginbottom-10.u-margintop-10"),e(".back-payment-info-reward",[e(".fontsize-smaller.fontweight-semibold.u-marginbottom-10",t.t("selected_reward.reward",r.scope())),e(".fontsize-smallest.fontweight-semibold",r.reward().title),e(".fontsize-smallest.reward-description.opened.fontcolor-secondary",{"class":r.isLongDescription(r.reward())?r.toggleDescription()?"extended":"":"extended"},r.reward().description?r.reward().description:e.trust(t.t("selected_reward.review_without_reward_html",r.scope(o.extend({value:Number(r.value).toFixed()}))))),r.isLongDescription(r.reward())?e('a[href="javascript:void(0);"].link-hidden.link-more.u-marginbottom-20',{onclick:r.toggleDescription.toggle},[r.toggleDescription()?"menos ":"mais ",e("span.fa.fa-angle-down",{"class":r.toggleDescription()?"reversed":""})]):"",r.reward().deliver_at?e(".fontcolor-secondary.fontsize-smallest.u-margintop-10",[e("span.fontweight-semibold","Entrega prevista:")," "+Tt.momentify(r.reward().deliver_at,"MMM/YYYY")]):"",r.reward()&&(Bo.hasShippingOptions(r.reward())||"presential"===r.reward().shipping_options)?e(".fontcolor-secondary.fontsize-smallest",[e("span.fontweight-semibold","Forma de envio: "),t.t("shipping_options."+r.reward().shipping_options,{scope:"projects.contributions"})]):"",e("div")])]),e.component(al,{mode:a.mode,vm:r.vm,faq:r.vm.faq(a.mode),projectUserId:a.user_id})])]))]:Tt.loader())}},vu={controller:function(r){var n=Bo,i=n.selectedReward,a=n.selectReward,s=n.rewards(),l=hr.currentProject().mode,c=t.translations[t.currentLocale()].projects.faq[l],d=function(){var t=Tt.monetaryToFloat(n.contributionValue);if(t<n.selectedReward().minimum_value)n.error("O valor de apoio para essa recompensa deve ser de no mínimo R$"+n.selectedReward().minimum_value);else{if(!Tt.getUser())return Tt.storeObject(storeKey,{value:t,reward:n.selectedReward()}),Tt.navigateToDevise("/"+hr.currentProject().permalink);n.error(""),n.contributionValue(t),e.route("/projects/"+hr.currentproject().project_id+"/payment",{project_user_id:hr.currentProject().user_id})}return!1},u=function(e){return e.id===i().id};return o.first(s).id!==n.noReward.id&&s.unshift(n.noReward),{rewards:s,project:hr.currentProject,contributionValue:n.contributionValue,submitContribution:d,applyMask:n.applyMask,error:n.error,isSelected:u,selectedReward:i,selectReward:a,faq:c}},view:function(t,r){var n=t.project;return e("#project-rewards",[e(".w-section.page-header.u-text-center",[e(".w-container",[e('h1.fontsize-larger.fontweight-semibold.project-name[itemprop="name"]',Tt.selfOrEmpty(n().name||n().project_name)),e('h2.fontsize-base.lineheight-looser[itemprop="author"]',["por ",n().user?n().user.name:n().owner_name?n().owner_name:""])])]),e(".w-section.header-cont-new",e(".w-container",e(".fontweight-semibold.lineheight-tight.text-success.fontsize-large.u-text-center-small-only","Escolha a recompensa e em seguida o valor do apoio"))),e(".section[id='new-contribution']",e(".w-container",e(".w-row",[e(".w-col.w-col-8",e(".w-form.back-reward-form",e("form.simple_form.new_contribution",{onsubmit:t.submitContribution},o.map(t.rewards,function(o,r){var n=t.isSelected(o),i=Tt.applyMonetaryMask(o.minimum_value);return e("span.radio.w-radio.w-clearfix.back-reward-radio-reward",{"class":n?"selected":"",onclick:t.selectReward(o),key:r},e("label[for='contribution_reward_id_"+o.id+"']",[e("input.radio_buttons.optional.w-input.text-field.w-radio-input.back-reward-radio-button[id='contribution_reward_id_"+o.id+"'][name='contribution[reward_id]'][type='radio'][value='"+o.id+"']",{
checked:!!n}),e("label.w-form-label.fontsize-base.fontweight-semibold.u-marginbottom-10[for='contribution_reward_"+o.id+"']",o.id===-1?"Não quero recompensa":"R$ "+o.minimum_value+" ou mais"),n?e(".w-row.back-reward-money",[e(".w-col.w-col-8.w-col-small-8.w-col-tiny-8.w-sub-col-middle.w-clearfix",[e(".w-row",[e(".w-col.w-col-3.w-col-small-3.w-col-tiny-3",e(".back-reward-input-reward.placeholder","R$")),e(".w-col.w-col-9.w-col-small-9.w-col-tiny-9",e("input.user-reward-value.back-reward-input-reward[autocomplete='off'][type='tel']",{"class":t.error()?"error":"",min:i,placeholder:i,onkeyup:e.withAttr("value",t.applyMask),value:t.contributionValue()}))]),t.error().length>0?e(".text-error",[e("br"),e("span.fa.fa-exclamation-triangle")," "+t.error()]):""]),e(".submit-form.w-col.w-col-4.w-col-small-4.w-col-tiny-4",e("button.btn.btn-large",["Continuar  ",e("span.fa.fa-chevron-right")]))]):"",e(".back-reward-reward-description",[e(".fontsize-smaller.u-marginbottom-10",o.description),o.deliver_at?e(".fontsize-smallest.fontcolor-secondary","Estimativa de entrega: "+Tt.momentify(o.deliver_at,"MMM/YYYY")):""])]))})))),e(".w-col.w-col-4",e.component(al,{mode:t.project().mode,faq:t.faq}))])))])}},yu=o.partial(Tt.i18nScope,"projects.dashboard_fiscal"),ju={controller:function(t){var r=w.loaderWithToken,n=w.filtersVM({project_id:"eq"}),i=t.project_id,a=e.prop({}),s=e.prop({});n.project_id(i);var l=r(S.projectFiscalId.getRowOptions(n.parameters()));l.load().then(function(e){s(o.first(e)||{})});var c=r(S.projectDetail.getRowOptions(n.parameters()));return c.load().then(function(e){a(o.first(e)||{})}),{l:l,l2:c,projectDetail:a,projectFiscalData:s}},view:function(r,n){var i=r.projectDetail(),a=r.projectFiscalData(),s=r.l()||r.l2(),l=!s&&a&&(!o.isEmpty(a.debit_notes)||!o.isEmpty(a.informs));return e(".project-fiscal",i.is_owner_or_admin?e.component(Qn,{project:e.prop(i)}):"",e(".section",e(".w-container",e(".w-row",[e(".w-col.w-col-2"),e(".w-col.w-col-8",[e(".fontsize-larger.fontweight-semibold.lineheight-looser.u-text-center",t.t("title",yu())),e(".fontsize-base.u-text-center",t.t("subtitle",yu())),e(".u-margintop-20.u-text-center",e(".w-inline-block.card.fontsize-small.u-radius",[e("span.fa.fa-lightbulb-o",""),e.trust("&nbsp;"),e.trust(t.t("help_link",yu()))]))]),e(".w-col.w-col-2")]))),e(".divider"),s?Tt.loader():e(".before-footer.section",e(".w-container",[l?e(".w-row",[e(".w-col.w-col-2"),e(".w-col.w-col-8",e(".card.u-radius.u-marginbottom-20.card-terciary",[e(".fontsize-small.fontweight-semibold.u-marginbottom-20",[e("span.fa.fa-download",e.trust("&nbsp;")),t.t("doc_download",yu())]),e(".card.u-radius.u-marginbottom-20",[e("span.fontweight-semibold",e.trust("Atenção:")),e.trust(t.t("doc_download_explanation",yu()))]),e("ul.w-list-unstyled",o.map(a.informs,function(t,o){return[o>0?e("li.divider.u-marginbottom-10"):"",e("li.fontsize-smaller.u-marginbottom-10",e("div",["Informe de Rendimentos -",e.trust("&nbsp;"),e("a.alt-link[href='/projects/"+i.project_id+"/inform/"+t+"']",t),e.trust("&nbsp;")]))]})),e("ul.w-list-unstyled",o.map(a.debit_notes,function(t,r){return[r>0||!o.isEmpty(a.informs)?e("li.divider.u-marginbottom-10"):"",e("li.fontsize-smaller.u-marginbottom-10",e("div",["Nota de Débito -",e.trust("&nbsp;"),e("a.alt-link[href='/projects/"+i.project_id+"/debit_note/"+t+"']",t.replace(/^(\d\d\d\d)(\d\d)(\d\d)$/,"$3/$2/$1")),e.trust("&nbsp;")]))]}))])),e(".w-col.w-col-2")]):e(".w-row",[e(".w-col.w-col-2"),e(".w-col.w-col-8",e(".card.card-message.u-marginbottom-40.u-radius",e(".fontsize-base",[e("span.fa.fa-exclamation-circle",""),t.t(hr.isSubscription(i)?"nodoc_explanation_sub":"nodoc_explanation",yu())]))),e(".w-col.w-col-2")])])))}},ku=function(t,o){return[e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","1/9")," ",e("span",{style:{"font-weight":" 600"}},"O que pode e não pode alterar na página do projeto a partir da publicação?")]),e("div",[e("span.fontweight-semibold","Você não poderá alterar"),": a identidade do responsável pelo projeto (Nome / CPF ou Razão Social / CNPJ), a Modalidade de financiamento, o título do projeto, a URL (link) do projeto, a categoria do projeto, a meta de arrecadação, prazo escolhido e as recompensas onde existirem apoios já efetuados. ",e("br"),e("br"),e("span.fontweight-semibold","Você poderá alterar"),": o vídeo principal da campanha, o conteúdo da descrição, a imagem do projeto, a frase de efeito, as recompensas onde não existirem apoios efetuados, além de adicionar novas recompensas durante a arrecadação"])]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","2/9")," ",e("span.fontweight-semibold"," Regras da modalidade Tudo-ou-nada")]),e("div",["Você escolheu a campanha tudo-ou-nada. Dessa maneira, você só irá receber os recursos arrecadados ",e("span.fontweight-semibold","caso atinja ou supere a meta de arrecadação"),". Caso contrário, todos seus apoiadores serão reembolsados. Você será responsável pela entrega das recompensas oferecidas se seu projeto alcançar a meta de arrecadação."])]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","3/9")," ",e("span",{style:{"font-weight":" 600"}},"Meta de arrecadação")]),e("div","A meta não poderá ser alterada após o publicação do projeto.")]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","4/9")," ",e("span",{style:{"font-weight":" 600"}},"Taxas")]),e("div",["Cobramos 13% sobre o ",e("span.fontweight-semibold","valor total arrecadado")," pelo seu projeto caso ele atinja ou supere a meta dentro do prazo da campanha. Se o projeto não atingir a meta, nenhuma taxa será cobrada.",e("span.fontweight-semibold")])]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","5/9")," ",e("span",{style:{"font-weight":" 600"}},"Prazo da campanha")]),e("div","Seu projeto estará em arrecadação no Catarse até o dia "+Tt.momentify(o)+" às 23h59min59s. Este prazo não poderá ser alterado após a publicação do projeto.")]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","6/9")," ",e("span",{style:{"font-weight":" 600"}},"Regras do repasse e reembolso"),e("div",[e.trust('Quando o prazo do seu projeto chegar ao fim, você deverá inscrever e confirmar seus dados bancários. Você poderá alterar o Banco, Conta e a Agência <strong>somente se a nova conta cadastrada for de sua titularidade</strong>. Após essa confirmação, o Catarse depositará o valor arrecadado, já descontada a taxa, na sua conta em 10 dias úteis. Caso o projeto não atinja 100% da meta dentro do prazo, o Catarse irá reembolsar os apoiadores. <a href="http://suporte.catarse.me/hc/pt-br/articles/202365507" target="blank">Saiba mais sobre o processo de reembolso</a>')])]),e("div","")]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","7/9")," ",e("span",{style:{"font-weight":" 600"}},"Responsabilidade do Catarse")]),[e("div",[e("span.fontweight-semibold"),e("span.fontweight-semibold","O Catarse é responsável:")," pelo desenvolvimento tecnológico da plataforma, atendimento de dúvidas e problemas (tanto de apoiadores quanto de realizadores), por hospedar o projeto na plataforma e por garantir a segurança das transações financeiras. ",e("br"),e("br"),e("span.fontweight-semibold","O Catarse não é responsável:")," pelo financiamento, divulgação e execução, nem pela entrega de recompensas dos projetos inscritos."])]]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","8/9")," ",e("span",{style:{"font-weight":" 600"}},"Suas responsabilidades")]),e("div","É sua responsabilidade o recebimento do dinheiro da campanha e tudo aquilo que diz respeito a formatação do projeto, planejamento e divulgação da campanha de arrecadação, mobilização de apoiadores, execução do projeto, comunicação com apoiadores e produção e entrega de recompensas dentro do prazo estimado.")]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","9/9")," ",e("span",{style:{"font-weight":" 600"}},"Retiradas de projetos no ar")]),e("div",[e("span.fontweight-semibold"),"O CATARSE reserva-se o direito de, a seu exclusivo critério e uma vez notificado a respeito, cancelar projetos e encerrar as contas de CRIADORES DE PROJETOS que violem nossas ",e("a.alt-link[href='http://suporte.catarse.me/hc/pt-br/articles/202387638-Diretrizes-para-cria%C3%A7%C3%A3o-de-projetos'][target='_blank']","Regras do Jogo")," e ",e("a.alt-link[href='http://www.catarse.me/terms-of-use'][target='_blank']","Termos de Uso"),"."])])]},xu=function(t){return[e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","1/9")," ",e("span.fontweight-semibold","O que pode e não pode alterar na página do projeto a partir da publicação?")]),e("div",[e("span.fontweight-semibold","Você não poderá alterar"),": a identidade do responsável pelo projeto (Nome / CPF ou Razão Social / CNPJ), a Modalidade de financiamento, o título do projeto, a URL (link) do projeto, a categoria do projeto, a meta de arrecadação,  o prazo (caso já tenha definido), e as recompensas onde existirem apoios já efetuados.",e("br"),e("br"),e("span.fontweight-semibold","Você poderá alterar"),": o vídeo principal da campanha, o conteúdo da descrição, a imagem do projeto, a frase de efeito, as recompensas onde não existirem apoios efetuados, além de adicionar novas recompensas durante a arrecadação"])]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","2/9")," ",e("span.fontweight-semibold","Regras da modalidade FLEX")]),e("div","Você escolheu a campanha flexível. Dessa maneira, você irá receber todos os recursos arrecadados junto aos apoiadores ao final do prazo da campanha (descontando a taxa do Catarse) e deverá cumprir com a execução do projeto e com a entrega das recompensas oferecidas independente do quanto arrecadar.")]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","3/9")," ",e("span.fontweight-semibold","Meta de arrecadação")]),e("div","A meta não poderá ser alterada após o publicação do projeto.")]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","4/9")," ",e("span.fontweight-semibold","Taxas")]),e("div",["Ao final da campanha, cobraremos 13% sobre o ",e("span.fontweight-semibold","valor total arrecadado.")])]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","5/9")," ",e("span.fontweight-semibold","Prazo da campanha")]),e("div","Uma vez definido, o prazo de encerramento não poderá ser alterado. Caso você tenha iniciado a campanha com o prazo em aberto, deverá defini-lo durante a campanha, podendo deixar a campanha aberta por no máximo 12 meses.")]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","6/9")," ",e("span.fontweight-semibold","Prazo para repasse")]),e("div",e.trust("Quando o prazo do seu projeto chegar ao fim, você deverá inscrever e confirmar seus dados bancários. Você poderá alterar o Banco, Conta e a Agência <strong>somente se a nova conta cadastrada for de sua titularidade</strong>. Após a confirmação, o Catarse depositará na sua conta corrente em até 10 dias úteis. O valor depositado já estará considerando o desconto de 13% da taxa."))]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","7/9")," ",e("span.fontweight-semibold","Responsabilidade do Catarse")]),[e("div",[e("span.fontweight-semibold"),e("span.fontweight-semibold","O Catarse é responsável:")," pelo desenvolvimento tecnológico da plataforma, atendimento de dúvidas e problemas (tanto de apoiadores quanto de realizadores), por hospedar o projeto na plataforma e por garantir a segurança das transações financeiras. ",e("br"),e("br"),e("span.fontweight-semibold","O Catarse não é responsável:")," pelo financiamento, divulgação e execução, nem pela entrega de recompensas dos projetos inscritos."])]]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","8/9")," ",e("span.fontweight-semibold","Suas responsabilidades")]),e("div","É sua responsabilidade o recebimento do dinheiro da campanha e tudo aquilo que diz respeito a formatação do projeto, planejamento e divulgação da campanha de arrecadação, mobilização de apoiadores, execução do projeto, comunicação com apoiadores e produção e entrega de recompensas dentro do prazo estimado.")]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","9/9")," ",e("span",{style:{"font-weight":" 600"}},"Retiradas de projetos no ar")]),e("div",[e("span.fontweight-semibold"),"O CATARSE reserva-se o direito de, a seu exclusivo critério e uma vez notificado a respeito, cancelar projetos e encerrar as contas de CRIADORES DE PROJETOS que violem nossas ",e("a.alt-link[href='http://suporte.catarse.me/hc/pt-br/articles/202387638-Diretrizes-para-cria%C3%A7%C3%A3o-de-projetos'][target='_blank']","Regras do Jogo")," e ",e("a.alt-link[href='http://www.catarse.me/terms-of-use'][target='_blank']","Termos de Uso"),"."])])]},zu=function(t){return[e(".w-col.w-col-11",[e("div",[e("span.fontcolor-secondary.fontsize-smallest","1/9"),e.trust("&nbsp;"),e("span.fontweight-semibold","O que pode e não pode alterar na página do projeto a partir da publicação?")]),e("div",[e("span.fontweight-semibold","Você não poderá alterar:")," a identidade do responsável pelo projeto (Nome / CPF ou Razão Social / CNPJ), a Modalidade de financiamento, o título do projeto, a URL (link) do projeto, a categoria escolhida, as metas de arrecadação já atingidas e as recompensas onde existirem apoios já efetuados.",e("br"),e("br"),e("span.fontweight-semibold","Você poderá alterar: "),"o conteúdo da descrição do projeto, o vídeo principal da campanha, as imagens do projeto, a frase de efeito, as recompensas onde não existirem apoios efetuados, além de adicionar novas recompensas e novas metas durante a arrecadação."])]),e(".w-col.w-col-11",[e("div",[e("span.fontcolor-secondary.fontsize-smallest","2/9"),e("span.fontweight-semibold","Regras da modalidade Assinatura")]),e("div","Você escolheu a modalidade Assinatura. Dessa maneira, você irá receber em tempo real, no saldo de sua conta no Catarse, os recursos arrecadados pelos seus assinantes. Você é o responsável por entregar as recompensas oferecidas aos seus assinantes.")]),e(".w-col.w-col-11",[e("div",[e("span.fontcolor-secondary.fontsize-smallest","3/9"),e.trust("&nbsp;"),e("span.fontweight-semibold","Metas de arrecadação")]),e("div","Você só poderá alterar, durante a campanha no ar, metas de arrecadação futuras. Ou seja, sua meta de arrecadação ativa e suas metas já atingidas não poderão ser alteradas.")]),e(".w-col.w-col-11",[e("div",[e("span.fontcolor-secondary.fontsize-smallest","4/9"),e.trust("&nbsp;"),e("span.fontweight-semibold","Taxas")]),e("div",["Cobramos 13% sobre todos os valores arrecadados em sua campanha de assinatura. ",e("span.fontweight-semibold")])]),e(".w-col.w-col-11",[e("div",[e("span.fontcolor-secondary.fontsize-smallest","5/9"),e.trust("&nbsp;"),e("span.fontweight-semibold","Prazo da campanha")]),e("div","No Catarse Assinaturas você pode manter sua campanha no ar por quanto tempo você quiser.")]),e(".w-col.w-col-11",[e("div",[e("span.fontcolor-secondary.fontsize-smallest","6/9"),e.trust("&nbsp;"),e("span.fontweight-semibold","Regras da transferência de dinheiro")]),e("div",["Você poderá realizar 01 saque mensal (que é como chamamos a transferência do seu saldo no Catarse para sua conta bancária cadastrada). Assim que você solicitar o saque, o Catarse depositará o valor, já com o desconto da taxa, na sua conta corrente em até 10 dias úteis.",e.trust("&nbsp;")])]),e(".w-col.w-col-11",[e("div",[e("span.fontcolor-secondary.fontsize-smallest","7/9"),e.trust("&nbsp;"),e("span.fontweight-semibold","Responsabilidade do Catarse")]),e("div",[e("span.fontweight-semibold"),e("span.fontweight-semibold","O Catarse é responsável:"),e.trust("&nbsp;"),"pelo desenvolvimento tecnológico da plataforma, atendimento de dúvidas e problemas (tanto de apoiadores quanto de realizadores), por hospedar o projeto na plataforma e por garantir a segurança das transações financeiras.",e("br"),e("br"),e("span.fontweight-semibold","O Catarse não é responsável:"),e.trust("&nbsp;"),"pelo financiamento, divulgação e execução, nem pela entrega de recompensas dos projetos inscritos."])]),e(".w-col.w-col-11",[e("div",[e("span.fontcolor-secondary.fontsize-smallest","8/9"),e.trust("&nbsp;"),e("span.fontweight-semibold","Suas responsabilidades")]),e("div",[e("span.fontweight-semibold"),e("span.fontweight-semibold"),"É sua responsabilidade o recebimento do dinheiro da campanha e tudo aquilo que diz respeito a formatação do projeto, planejamento e divulgação da campanha de arrecadação, mobilização de apoiadores, execução do projeto, comunicação com apoiadores e produção e entrega de recompensas dentro do prazo estimado."])]),e(".w-col.w-col-11",[e("div",[e("span.fontcolor-secondary.fontsize-smallest","9/9"),e.trust("&nbsp;"),e("span.fontweight-semibold","Retiradas de projetos no ar")]),e("div",[e("span.fontweight-semibold"),"O CATARSE reserva-se o direito de, a seu exclusivo critério e uma vez notificado a respeito, cancelar projetos e encerrar as contas de CRIADORES DE PROJETOS que violem nossas ",e("a.alt-link[href='http://suporte.catarse.me/hc/pt-br/articles/202387638-Diretrizes-para-cria%C3%A7%C3%A3o-de-projetos'][target='_blank']","Regras do Jogo")," e ",e("a.alt-link[href='http://www.catarse.me/terms-of-use'][target='_blank']","Termos de Uso"),"."])])]},Su={flexTerms:xu,subTerms:zu,aonTerms:ku},Cu=o.partial(Tt.i18nScope,"projects.publish"),Eu={controller:function(t){var n=w.filtersVM({project_id:"eq"}),i=e.prop([]),a=e.prop([]),s=w.loaderWithToken;n.project_id(t.root.getAttribute("data-id"));var l=s(S.projectDetail.getRowOptions(n.parameters())),c=s(S.projectAccount.getRowOptions(n.parameters()));l.load().then(a),c.load().then(i);var d=function(){var e=o.first(a());return r().add(e.online_days,"days")},u=e.prop(0);return{l:l,accountL:c,acceptedIndex:u,expiresAt:d,filtersVM:n,projectAccount:i,projectDetails:a}},view:function(r,n){var i=o.first(r.projectDetails()),a=r.acceptedIndex,s=o.first(r.projectAccount()),l="flex"===i.mode?Su.flexTerms(i):"aon"===i.mode?Su.aonTerms(i,r.expiresAt()):Su.subTerms(i);return[i&&s?[i.is_owner_or_admin?e.component(Qn,{project:e.prop(i),hidePublish:!0}):"",e(".w-section.section-product."+i.mode),e(".w-section.section",[e(".w-container",[e(".w-row",[e(".w-col.w-col-3"),e(".w-col.w-col-6",[e(".u-text-center",[e("img.u-marginbottom-20[src='/assets/catarse_bootstrap/launch-icon.png'][width='94']"),e(".fontsize-large.fontweight-semibold.u-marginbottom-20","Pronto para lançar sua campanha?"),e(".fontsize-base.u-marginbottom-30","Preparamos uma lista com informações importantes para você checar antes de colocar seu projeto no ar!")])]),e(".w-col.w-col-3")])])]),e(".divider"),e(".w-section.section-one-column.bg-gray.section.before-footer",[e(".w-container",[e(".card.medium.u-marginbottom-60.card-terciary",[e(".w-row",[e(".w-col.w-col-6.w-clearfix",[e("img.card-project-thumb.u-right[src="+i.large_image+"]")]),e(".w-col.w-col-6",[e(".u-marginbottom-30.fontsize-base",[e("div",[e("span.fontweight-semibold","Título: "),i.name]),e("div",[e("span.fontweight-semibold","Link: "),"www.catarse.me/"+i.permalink]),e("div",[e("span.fontweight-semibold","Modalidade de financiamento: "),t.t(i.mode,Cu())]),"sub"!==i.mode?e("div",[e("span.fontweight-semibold","Meta de arrecadação: "),"R$ "+Tt.formatNumber(i.goal,2,3)]):"",null!==i.online_days?e("div",[e("span.fontweight-semibold","Prazo: "+i.online_days+" "+(i.online_days>1?"dias":"dia"))]):"",e("div",[e("span.fontweight-semibold","Responsável: "),s.owner_name]),e("div",[e("span.fontweight-semibold","CPF/CNPJ: "),s.owner_document])])])]),e(".u-text-center",[e(".w-row",[e(".w-col.w-col-1"),e(".w-col.w-col-10",[e(".divider.u-marginbottom-10"),e(".fontsize-small.fontcolor-secondary","Os dados acima não podem ser alterados após o projeto entrar no ar. Se você precisa fazer mudanças, navegue na barra lateral e volte aqui quando estiver tudo pronto!")]),e(".w-col.w-col-1")])])]),e(".card.medium.u-radius.u-marginbottom-60",[e(".u-text-center.u-marginbottom-60",[e(".fontsize-large.fontweight-semibold","Relembre nossas regras"),e(".w-row",[e(".w-col.w-col-2"),e(".w-col.w-col-8",[e(".fontsize-small",["Antes de publicar, clique nos círculos abaixo e confirme que você está ciente de como funciona o Catarse. Qualquer dúvida, ",e('a.alt-link[href="http://suporte.catarse.me/hc/pt-br/requests/new"][target="_blank"]',"entre em contato"),"!"])]),e(".w-col.w-col-2")])]),o.map(l,function(t,o){return e(".u-marginbottom-30.fontsize-base"+(o<=a()?"":".w-hidden.publish-rules"),[e(".w-row",[e(".w-col.w-col-1.u-text-center",[e("div",[e(o+1>a()?"a.w-inline-block.checkbox-big":"a.w-inline-block.checkbox-big.checkbox--selected.fa.fa-check.fa-lg",{onclick:function(){o>=a()&&a(a()+1)}})])]),t])])})]),a()>=l.length?e(".w-row.publish-btn-section",[e(".w-col.w-col-4"),e(".w-col.w-col-4",[e("a.btn.btn-large.u-marginbottom-20[href=/"+("flex"===i.mode?"flexible_projects":"projects")+"/"+i.project_id+"/push_to_online]","Publicar agora!"),e(".u-text-center.fontsize-smaller",["Ao publicar o seu projeto, você está aceitando os ",e("a.alt-link[href='/terms-of-use'][target='_blank']","Termos de Uso")," e ",e("a.alt-link[href='/privacy-policy'][target='_blank']","Politica de Privacidade")])]),e(".w-col.w-col-4")]):""])])]:Tt.loader()]}},Pu=function(e){var t=e.translations[e.currentLocale()].pages.start,r=t.testimonials,n=t.categoryProjects,i=t.panes,a=t.qa;return{testimonials:o.map(r,function(e){return{thumbUrl:e.thumb,content:e.content,name:e.name,totals:e.totals}}),panes:o.map(i,function(e){return{label:e.label,src:e.src}}),questions:{col_1:o.map(a.col_1,function(e){return{question:e.question,answer:e.answer}}),col_2:o.map(a.col_2,function(e){return{question:e.question,answer:e.answer}})},categoryProjects:o.map(n,function(e){return{categoryId:e.category_id,sampleProjects:[e.sample_project_ids.primary,e.sample_project_ids.secondary]}})}},Mu=o.partial(Tt.i18nScope,"pages.start"),Du={controller:function(){Tt.analytics.windowScroll({cat:"project_start",act:"start_page_scroll"});var r=e.prop([]),n=e.prop([]),i=e.prop(0),a=e.prop([]),s=e.prop([]),l=e.prop(-1),c=Pu(t),d=w.filtersVM,u=c.panes,p=d({category_id:"eq"}),m=d({project_id:"eq"}),f=d({id:"eq"}),b=w.loader,g=b(S.statistic.getRowOptions()),h=function(){return S.category.getPage(d({}).order({name:"asc"}).parameters()).then(n)},_=function(e){return function(){i(e)}},v=function(){return b(S.categoryTotals.getRowOptions(p.parameters()))},y=function(){return b(S.projectDetail.getRowOptions(m.parameters()))},j=function(){return b(S.userDetail.getRowOptions(f.parameters()))},k=function(e){var r=t.translations[t.currentLocale()].projects.index.explore_categories;return o.isUndefined(r[e.id])?null:r[e.id].link+"?ref=ctrse_start"},x=function(e){a(e);var t=o.findWhere(c.categoryProjects,{categoryId:o.first(e).category_id});s([]),o.isUndefined(t)||o.map(t.sampleProjects,function(e,t){o.isUndefined(e)||(m.project_id(e),y().load().then(function(e){return E(e,t)}))})},z=function(t){return function(){var o=k(t);return o?void(window.location=o):(l(t.id),p.category_id(t.id),a([t]),e.redraw(),void v().load().then(x))}},C=function(e,t){s()[t]=o.extend({},s()[t],{userThumb:o.first(e).profile_img_thumbnail})},E=function(e,t){s()[t]=o.first(e),f.id(o.first(e).user.id),j().load().then(function(e){return C(e,t)})},P=e.prop("-1"),M=e.prop(""),D=e.prop(!1),q=e.prop(!1),A=function(){return q(P()==-1),D(""===M().trim()),!q()&&!D()};return g.load().then(r),h(),{stats:r,categories:n,paneImages:u,selectCategory:z,selectedCategory:a,selectedCategoryIdx:l,selectPane:_,selectedPane:i,featuredProjects:s,linkToExternal:k,testimonials:c.testimonials,questions:c.questions,projectCategory:P,projectName:M,projectNameError:D,projectCategoryError:q,validateProjectForm:A}},view:function(r,n){var i=o.first(r.stats()),a=function(){return o.map(r.testimonials,function(t){var o=e(".card.u-radius.card-big.card-terciary",[e(".u-text-center.u-marginbottom-20",[e('img.thumb-testimonial.u-round.u-marginbottom-20[src="'+t.thumbUrl+'"]')]),e("p.fontsize-large.u-marginbottom-30",'"'+t.content+'"'),e(".u-text-center",[e(".fontsize-large.fontweight-semibold",t.name),e(".fontsize-base",t.totals)])]);return{content:o}})};return e("#start",{config:Tt.setPageTitle(t.t("header_html",Mu()))},[e(".w-section.hero-full.hero-start",[e(".w-container.u-text-center",[e(".fontsize-megajumbo.fontweight-semibold.u-marginbottom-40",t.t("slogan",Mu())),e(".w-row.u-marginbottom-40",[e(".w-col.w-col-4.w-col-push-4",[e('a.btn.btn-large.u-marginbottom-10[href="#start-form"]',{config:Tt.scrollTo(),onclick:Tt.analytics.event({cat:"project_start",act:"start_btnstart_click"})},t.t("submit",Mu()))])]),e(".w-row",o.isEmpty(i)?"":[e(".w-col.w-col-4",[e(".fontsize-largest.lineheight-loose",Tt.formatNumber(i.total_contributors,0,3)),e("p.fontsize-small.start-stats",t.t("header.people",Mu()))]),e(".w-col.w-col-4",[e(".fontsize-largest.lineheight-loose",i.total_contributed.toString().slice(0,2)+" milhões"),e("p.fontsize-small.start-stats",t.t("header.money",Mu()))]),e(".w-col.w-col-4",[e(".fontsize-largest.lineheight-loose",Tt.formatNumber(i.total_projects_success,0,3)),e("p.fontsize-small.start-stats",t.t("header.success",Mu()))])])])]),e(".w-section.section",[e(".w-container",[e(".w-row",[e(".w-col.w-col-10.w-col-push-1.u-text-center",[e(".fontsize-larger.u-marginbottom-10.fontweight-semibold",t.t("page-title",Mu())),e(".fontsize-small",t.t("page-subtitle",Mu()))])]),e(".w-clearfix.how-row",[e(".w-hidden-small.w-hidden-tiny.how-col-01",[e(".info-howworks-backers",[e(".fontweight-semibold.fontsize-large",t.t("banner.1",Mu())),e(".fontsize-base",t.t("banner.2",Mu()))]),e(".info-howworks-backers",[e(".fontweight-semibold.fontsize-large",t.t("banner.3",Mu())),e(".fontsize-base",t.t("banner.4",Mu()))])]),e(".how-col-02"),e(".how-col-03",[e(".fontweight-semibold.fontsize-large",t.t("banner.5",Mu())),e(".fontsize-base",t.t("banner.6",Mu())),e(".fontweight-semibold.fontsize-large.u-margintop-30",t.t("banner.7",Mu())),e(".fontsize-base",t.t("banner.8",Mu()))]),e(".w-hidden-main.w-hidden-medium.how-col-01",[e(".info-howworks-backers",[e(".fontweight-semibold.fontsize-large",t.t("banner.1",Mu())),e(".fontsize-base",t.t("banner.2",Mu()))]),e(".info-howworks-backers",[e(".fontweight-semibold.fontsize-large",t.t("banner.3",Mu())),e(".fontsize-base",t.t("banner.4",Mu()))])])])])]),e(".w-section.divider"),e(".w-section.section-large",[e(".w-container.u-text-center.u-marginbottom-60",[e("div",[e("span.fontsize-largest.fontweight-semibold",t.t("features.title",Mu()))]),e(".w-hidden-small.w-hidden-tiny.fontsize-large.u-marginbottom-20",t.t("features.subtitle",Mu())),e(".w-hidden-main.w-hidden-medium.u-margintop-30",[e(".fontsize-large.u-marginbottom-30",t.t("features.feature_1",Mu())),e(".fontsize-large.u-marginbottom-30",t.t("features.feature_2",Mu())),e(".fontsize-large.u-marginbottom-30",t.t("features.feature_3",Mu())),e(".fontsize-large.u-marginbottom-30",t.t("features.feature_4",Mu())),e(".fontsize-large.u-marginbottom-30",t.t("features.feature_5",Mu())),e(".fontsize-large.u-marginbottom-30",t.t("features.feature_6",Mu()))])]),e(".w-container",[e(".w-tabs.w-hidden-small.w-hidden-tiny",[e(".w-tab-menu.w-col.w-col-4",o.map(r.paneImages,function(t,o){return e("btn.w-tab-link.w-inline-block.tab-list-item"+(o===r.selectedPane()?".selected":""),{onclick:Tt.analytics.event({cat:"project_start",act:"start_solution_click",lbl:t.label},r.selectPane(o))},t.label)})),e(".w-tab-content.w-col.w-col-8",o.map(r.paneImages,function(t,o){return e(".w-tab-pane",[e('img[src="'+t.src+'"].pane-image'+(o===r.selectedPane()?".selected":""))])}))])])]),e(".w-section.section-large.card-terciary",e(".w-container",[e(".u-text-center.u-marginbottom-40",[e("div",e("span.fontsize-largest.fontweight-semibold",t.t("mode.title",Mu()))),e(".w-row",[e(".w-col.w-col-1"),e(".w-col.w-col-10",e(".fontsize-large.u-marginbottom-20",t.t("mode.subtitle",Mu()))),e(".w-col.w-col-1")])]),e("div",e(".flex-row.u-marginbottom-40",[e(".flex-column.card.u-radius.u-marginbottom-30",[e(".u-text-center.u-marginbottom-30",e("img[src='https://daks2k3a4ib2z.cloudfront.net/57ba58b4846cc19e60acdd5b/5a4e2fd4056b6a0001013595_aon-badge.png']")),e(".fontsize-large.flex-column.u-marginbottom-20",[t.t("mode.aon.info",Mu()),e.trust("&nbsp;")]),e(".fontsize-base.flex-column.fontcolor-secondary",t.t("mode.aon.info_2",Mu()))]),e(".flex-column.card.u-radius.u-marginbottom-30",[e(".u-text-center.u-marginbottom-30",e("img[src='https://daks2k3a4ib2z.cloudfront.net/57ba58b4846cc19e60acdd5b/5a4e2fd48aff0400011446b8_flex-badge.png']")),e(".fontsize-large.flex-column.u-marginbottom-20",t.t("mode.flex.info",Mu())),e(".fontsize-base.flex-column.fontcolor-secondary",t.t("mode.flex.info_2",Mu()))]),e(".flex-column.card.u-radius.u-marginbottom-30.card-secondary",[e(".u-text-center.u-marginbottom-30",e("img[src='https://daks2k3a4ib2z.cloudfront.net/57ba58b4846cc19e60acdd5b/5a4e2fd4872fe200012f7fed_ass-badge.png']")),e(".fontsize-large.flex-column.u-marginbottom-20",t.t("mode.sub.info",Mu())),e(".fontsize-base.flex-column.fontcolor-secondary",[t.t("mode.sub.info_2",Mu()),e.trust(t.t("mode.sub.more_link",Mu()))])])])),e(".u-text-center.u-marginbottom-30",[e(".fontsize-large.fontweight-semibold",t.t("mode.tax_info",Mu())),e(".fontsize-smallest.fontcolor-secondary",[t.t("mode.failed_info",Mu()),e.trust(t.t("mode.more_link",Mu()))])])])),e(".w-section.section-large.bg-blue-one",[e(".w-container.u-text-center",[e(".fontsize-larger.lineheight-tight.fontcolor-negative.u-marginbottom-20",[t.t("video.title",Mu()),e("br"),t.t("video.subtitle",Mu())]),e.component(lu,{src:t.t("video.src",Mu()),onclick:Tt.analytics.event({cat:"project_start",act:"start_video_play"})})])]),e(".w-hidden-small.w-hidden-tiny.section-categories",[e(".w-container",[e(".u-text-center",[e(".w-row",[e(".w-col.w-col-10.w-col-push-1",[e(".fontsize-large.u-marginbottom-40.fontcolor-negative",t.t("categories.title",Mu()))])])]),e(".w-tabs",[e(".w-tab-menu.u-text-center",o.map(r.categories(),function(t){return e("a.w-tab-link.w-inline-block.btn-category.small.btn-inline"+(r.selectedCategoryIdx()===t.id?".w--current":""),{onclick:Tt.analytics.event({cat:"project_start",act:"start_category_click",lbl:t.name},r.selectCategory(t))},[e("div",t.name)])})),e(".w-tab-content.u-margintop-40",[e(".w-tab-pane.w--tab-active",[e(".w-row",r.selectedCategoryIdx()!==-1?o.map(r.selectedCategory(),function(n){return[e(".w-col.w-col-5",[e(".fontsize-jumbo.u-marginbottom-20",n.name),e('a.w-button.btn.btn-medium.btn-inline.btn-dark[href="#start-form"]',{config:Tt.scrollTo()},t.t("submit",Mu()))]),e(".w-col.w-col-7",[e(".fontsize-megajumbo.fontcolor-negative","R$ "+(n.total_successful_value?Tt.formatNumber(n.total_successful_value,2,3):"...")),e(".fontsize-large.u-marginbottom-20","Doados para projetos"),e(".fontsize-megajumbo.fontcolor-negative",n.successful_projects?n.successful_projects:"..."),e(".fontsize-large.u-marginbottom-30","Projetos financiados"),o.isEmpty(r.featuredProjects())?"":o.map(r.featuredProjects(),function(r){return o.isUndefined(r)?e(".fontsize-base",t.t("categories.loading_featured",Mu())):e(".w-row.u-marginbottom-10",[e(".w-col.w-col-1",[e('img.user-avatar[src="'+Tt.useAvatarOrDefault(r.userThumb)+'"]')]),e(".w-col.w-col-11",[e(".fontsize-base.fontweight-semibold",r.user.public_name||r.user.name),e(".fontsize-smallest",[t.t("categories.pledged",Mu({pledged:Tt.formatNumber(r.pledged),contributors:r.total_contributors})),e('a.link-hidden[href="/'+r.permalink+'"]',r.name)])])])})])]}):"")])])])])]),e.component(Ra,{slides:a(),title:t.t("testimonials_title",Mu()),slideClass:"slide-testimonials-content",wrapperClass:"slide-testimonials",onchange:Tt.analytics.event({cat:"project_start",act:"start_testimonials_change"
})}),e(".w-section.divider.u-margintop-30"),e(".w-container",[e(".fontsize-larger.u-text-center.u-marginbottom-60.u-margintop-40",t.t("qa_title",Mu())),e(".w-row.u-marginbottom-60",[e(".w-col.w-col-6",o.map(r.questions.col_1,function(t){return e.component(In,{question:t.question,answer:t.answer,onclick:Tt.analytics.event({cat:"project_start",act:"start_qa_click",lbl:t.question})})})),e(".w-col.w-col-6",o.map(r.questions.col_2,function(t){return e.component(In,{question:t.question,answer:t.answer,onclick:Tt.analytics.event({cat:"project_start",act:"start_qa_click",lbl:t.question})})}))])]),e("#start-form.w-section.section-large.u-text-center.bg-purple.before-footer",[e(".w-container",[e(".fontsize-jumbo.fontcolor-negative.u-marginbottom-60","Crie o seu rascunho gratuitamente!"),e('form[action="/projects/fallback_create"][method="GET"].w-row.w-form',{onsubmit:function(e){return Tt.analytics.oneTimeEvent({cat:"project_create",act:"create_form_submit"})(e),r.validateProjectForm()}},[e(".w-col.w-col-2"),e(".w-col.w-col-8",[e(".fontsize-larger.fontcolor-negative.u-marginbottom-10",t.t("form.title",Mu())),e('input[name="utf8"][type="hidden"][value="✓"]'),e('input[name="authenticity_token"][type="hidden"][value="'+Tt.authenticityToken()+'"]'),e('input.w-input.text-field.medium.u-marginbottom-30[type="text"]',{name:"project[name]","class":r.projectNameError()?"error":"",onfocus:function(){return r.projectNameError(!1)},onchange:function(t){Tt.analytics.oneTimeEvent({cat:"project_create",act:"create_form_change",lbl:"name"})(t),e.withAttr("value",r.projectName)(t)}}),e(".fontsize-larger.fontcolor-negative.u-marginbottom-10","na categoria"),e("select.w-select.text-field.medium.u-marginbottom-40",{name:"project[category_id]","class":r.projectCategoryError()?"error":"",onfocus:function(){return r.projectCategoryError(!1)},onchange:function(t){Tt.analytics.oneTimeEvent({cat:"project_create",act:"create_form_change",lbl:"category"})(t),e.withAttr("value",r.projectCategory)(t)}},[e('option[value="-1"]',t.t("form.select_default",Mu())),o.map(r.categories(),function(t){return e("option",{value:t.id,selected:r.projectCategory()===t.id},t.name)})])]),e(".w-col.w-col-2"),e(".w-row.u-marginbottom-20",[e(".w-col.w-col-4.w-col-push-4.u-margintop-40",[e('input[type="submit"][value="'+t.t("form.submit",Mu())+'"].w-button.btn.btn-large')])]),e(".w-row.u-marginbottom-80",r.projectNameError()||r.projectCategoryError()?e.component(Hi,{message:"Por favor, verifique novamente os campos acima!"}):"")])])])])}},qu={controller:function(){var t={collection:e.prop([])};return S.teamTotal.getRow().then(function(e){t.collection(e)}),{vm:t}},view:function(t,o){return e("#team-total-static.w-section.section-one-column.section.u-margintop-40.u-text-center.u-marginbottom-20",[t.vm.collection().map(function(t){return e(".w-container",[e(".w-row",[e(".w-col.w-col-2"),e(".w-col.w-col-8",[e(".fontsize-base.u-marginbottom-30","Hoje somos "+t.member_count+" pessoas espalhadas por "+t.total_cities+" cidades em "+t.countries.length+" países ("+t.countries.toString()+")! O Catarse é independente, sem investidores, de código aberto e construído com amor. Nossa paixão é construir um ambiente onde cada vez mais projetos possam ganhar vida."),e(".fontsize-larger.lineheight-tight.text-success","Nossa equipe, junta, já apoiou R$"+Tt.formatNumber(t.total_amount)+" para "+t.total_contributed_projects+" projetos!")]),e(".w-col.w-col-2")])])})])}},Au={controller:function(){var t={collection:e.prop([])},r=function(e,t){return o.map(o.range(Math.ceil(e.length/t)),function(o){return e.slice(o*t,(o+1)*t)})};return S.teamMember.getPage().then(function(e){t.collection(r(e,4))}),{vm:t}},view:function(t){return e("#team-members-static.w-section.section",[e(".w-container",[o.map(t.vm.collection(),function(t){return e(".w-row.u-text-center",[o.map(t,function(t){return e(".team-member.w-col.w-col-3.w-col-small-3.w-col-tiny-6.u-marginbottom-40",[e('a.alt-link[href="/users/'+t.id+'"]',[e('img.thumb.big.u-round.u-marginbottom-10[src="'+t.img+'"]'),e(".fontweight-semibold.fontsize-base",t.name)]),e(".fontsize-smallest.fontcolor-secondary","Apoiou "+t.total_contributed_projects+" projetos")])})])})])])}},Tu={view:function(){return e("#static-team-app",[e(".w-section.hero-who.hero-full",[e(".w-container.u-text-center",[e('img.icon-hero[src="https://catarse.me/assets/logo-yellow.png"]'),e(".u-text-center.u-marginbottom-20.fontsize-largest","Conheça nosso time")])]),e.component(qu),e.component(Au)])}},Ru={controller:function(t){var o=e.prop(t.friend);return{friend:o}},view:function(t,r){var n=t.friend(),i=o.isEmpty(n.avatar)?"/assets/catarse_bootstrap/user.jpg":n.avatar;return e(".w-col.w-col-4",e(".card.card-backer.u-marginbottom-20.u-radius.u-text-center",[e("img.thumb.u-marginbottom-10.u-round[src='"+i+"']"),e(".fontsize-base.fontweight-semibold.lineheight-tight",e("a.link-hidden",{href:"/users/"+n.friend_id},mo.displayName(n))),e(".fontcolor-secondary.fontsize-smallest.u-marginbottom-10",o.isNull(n.city)?"":e(".fontsize-smaller.fontcolor-secondary.u-marginbottom-10",n.city+", "+n.state)),e(".fontsize-smaller",[e("span.fontweight-semibold",n.total_contributed_projects)," apoiados ",e.trust("&nbsp;"),"| ",e.trust("&nbsp;"),e("span.fontweight-semibold",n.total_published_projects)," criados"]),e(".btn-bottom-card.w-row",[e(".w-col.w-col-3.w-col-small-4.w-col-tiny-3"),e(".w-col.w-col-6.w-col-small-4.w-col-tiny-6",e.component(_a,{following:n.following,follow_id:n.friend_id})),e(".w-col.w-col-3.w-col-small-4.w-col-tiny-3")])]))}},Iu={controller:function(t){S.userFriend.pageSize(9);var o=w.filtersVM({user_id:"eq"}),r=t.user,n=w.paginationVM(S.userFriend,"following.asc,total_contributed_projects.desc",{Prefer:"count=exact"}),i=e.prop(!1),a=function(){i(!0);var e=w.loaderWithToken(S.followAllFriends.postOptions({}));e.load().then(function(){n.firstPage(o.parameters()),i(!1)})};return o.user_id(r.user_id),n.collection().length||n.firstPage(o.parameters()),{friendListVM:n,followAll:a,allLoading:i}},view:function(t,r){var n=t.friendListVM;return e(".w-section.bg-gray.before-footer.section",[e(".w-container",[e(".w-row.u-marginbottom-40.card.u-radius.card-terciary",[e(".w-col.w-col-7.w-col-small-6.w-col-tiny-6",[e(".fontsize-small","Comece agora! Siga todos os seus amigos ou somente alguns deles para descobrir projetos juntos!")]),e(".w-col.w-col-5.w-col-small-6.w-col-tiny-6",[t.allLoading()?Tt.loader():e("a.w-button.btn.btn-medium",{onclick:t.followAll},"Siga todos os seus "+(n.total()?n.total():"")+" amigos")])]),e(".w-row",[o.map(n.collection(),function(t){return e.component(Ru,{friend:t})})]),e(".w-section.section.bg-gray",[e(".w-container",[e(".w-row.u-marginbottom-60",[e(".w-col.w-col-5",[e(".u-marginright-20")]),e.component(ha,{collection:n}),e(".w-col.w-col-5")])])])])])}},Nu={controller:function(t){S.userFollow.pageSize(9);var o=w.filtersVM({user_id:"eq"}),r=t.user,n=(e.prop(window.location.hash),w.paginationVM(S.userFollow,"created_at.desc",{Prefer:"count=exact"}));return o.user_id(r.user_id),n.collection().length||n.firstPage(o.parameters()),{followsListVM:n}},view:function(t,r){var n=t.followsListVM;return e(".w-section.bg-gray.before-footer.section",[e(".w-container",[e(".w-row",[o.map(n.collection(),function(t){return e.component(Ru,{friend:o.extend({},{following:!0,friend_id:t.follow_id},t.source)})})]),e(".w-section.section.bg-gray",[e(".w-container",[e(".w-row.u-marginbottom-60",[e(".w-col.w-col-5",[e(".u-marginright-20")]),e.component(ha,{collection:n}),e(".w-col.w-col-5")])])])])])}},Ou={controller:function(e){S.userFollower.pageSize(9);var t=w.paginationVM(S.userFollower,"following.asc,created_at.desc",{Prefer:"count=exact"}),o=e.user,r=w.filtersVM({follow_id:"eq"});return r.follow_id(o.user_id),t.collection().length||t.firstPage(r.parameters()),{followersListVM:t}},view:function(t,r){var n=t.followersListVM;return e(".w-section.bg-gray.before-footer.section",[e(".w-container",[e(".w-row",[o.map(n.collection(),function(t){return e.component(Ru,{friend:o.extend({},{friend_id:t.user_id},t.source)})})]),e(".w-section.section.bg-gray",[e(".w-container",[e(".w-row.u-marginbottom-60",[e(".w-col.w-col-5",[e(".u-marginright-20")]),e.component(ha,{collection:n}),e(".w-col.w-col-5")])])])])])}},Fu={controller:function(){S.creatorSuggestion.pageSize(9);var t=w.paginationVM(S.creatorSuggestion,"following.asc, total_published_projects.desc, total_contributed_projects.desc",{Prefer:"count=exact"}),o=e.prop(!1),r=function(){o(!0);var e=w.loaderWithToken(S.followAllCreators.postOptions({}));e.load().then(function(){t.firstPage(),o(!1)})};return t.collection().length||t.firstPage(),{allLoading:o,creatorsListVM:t,followAll:r}},view:function(t){var r=t.creatorsListVM;return e(".w-section.bg-gray.before-footer.section",[e(".w-container",[e(".w-row.u-marginbottom-40.card.u-radius.card-terciary",[e(".w-col.w-col-7.w-col-small-6.w-col-tiny-6",[e(".fontsize-small","Siga os realizadores que você já apoiou e saiba em primeira mão sempre que eles apoiarem projetos ou lançarem novas campanhas!")]),e(".w-col.w-col-5.w-col-small-6.w-col-tiny-6",[t.allLoading()?Tt.loader():e("a.w-button.btn.btn-medium",{onclick:t.followAll},"Siga todos os "+(r.total()?r.total():"")+" realizadores")])]),e(".w-row",[o.map(r.collection(),function(t){return e.component(Ru,{friend:o.extend({},{friend_id:t.user_id},t)})})]),e(".w-section.section.bg-gray",[e(".w-container",[e(".w-row.u-marginbottom-60",[e(".w-col.w-col-5",[e(".u-marginright-20")]),e.component(ha,{collection:r}),e(".w-col.w-col-5")])])])])])}},Vu={controller:function(t){var r=Tt.getUser(),n=e.prop(window.location.hash),i=function(){var t={user:r},i={"#creators":e.component(Fu,t),"#friends":e.component(Iu,t),"#follows":e.component(Nu,t),"#followers":e.component(Ou,t)};return n(window.location.hash),o.isEmpty(n())||"#_=_"===n()?i["#friends"]:i[n()]};return Tt.redrawHashChange(),{user:r,displayTabContent:i}},view:function(t,o){return e("div",[e(".w-section.dashboard-header",[e(".w-container",[e(".w-row.u-margintop-20.u-marginbottom-20",[e(".w-col.w-col-1"),e(".w-col.w-col-10.u-text-center",[e(".fontsize-larger.fontweight-semibold.u-marginbottom-10","Descubra projetos com seus amigos"),e(".fontsize-small","Siga os seus amigos e nós iremos te notificar sempre que eles lançarem ou apoiarem algum projeto")]),e(".w-col.w-col-1")])])]),e(".divider.u-margintop-30"),e(".project-nav",e(".u-text-center.w-container",[e('a[id="creators-link"][class="dashboard-nav-link '+(Tt.hashMatch("#creators")?"selected":"")+'"] [href="#creators"]',"Encontre realizadores"),e('a[id="friends-link"][class="dashboard-nav-link '+(Tt.hashMatch("#friends")||Tt.hashMatch("")?"selected":"")+'"] [href="#friends"]',"Encontre amigos"),e('a[id="follows-link"][class="dashboard-nav-link '+(Tt.hashMatch("#follows")?"selected":"")+'"] [href="#follows"]',["Seguindo",e.trust("&nbsp;"),e("span.w-hidden-small.w-hidden-tiny.badge",t.user.follows_count)]),e('a[id="followers-link"][class="dashboard-nav-link '+(Tt.hashMatch("#followers")?"selected":"")+'"] [href="#followers"]',["Seguidores",e.trust("&nbsp;"),e("span.w-hidden-small.w-hidden-tiny.badge",t.user.followers_count)])])),t.displayTabContent()])}},Lu=o.partial(Tt.i18nScope,"projects.contributions"),Bu={controller:function(e){var t=mo.getUserRecommendedProjects(),r=e.contribution&&!o.isEmpty(e.contribution.slip_url),n=function(t,o){o||(CatarseAnalytics.event({cat:"contribution_finish",act:"contribution_finished",lbl:r?"slip":"creditcard",val:e.contribution.value,extraData:{contribution_id:e.contribution.contribution_id}}),CatarseAnalytics.checkout(""+e.contribution.contribution_id,"["+e.contribution.project.permalink+"] "+(e.contribution.reward?e.contribution.reward.minimum_value:"10")+" ["+(r?"slip":"creditcard")+"]",""+(e.contribution.reward?e.contribution.reward.reward_id:""),""+e.contribution.project.category,""+e.contribution.value,""+e.contribution.value*e.contribution.project.service_fee))};return{setEvents:n,displayShareBox:Tt.toggleProp(!1,!0),isSlip:r,recommendedProjects:t}},view:function(o,r){return e("#thank-you",{config:o.setEvents},[e(".page-header.u-marginbottom-30",e(".w-container",e(".w-row",e(".w-col.w-col-10.w-col-push-1",[e(".u-marginbottom-20.u-text-center",e("img.big.thumb.u-round[src='"+r.contribution.project.user_thumb+"']")),e("#thank-you.u-text-center",o.isSlip?[e("#slip-thank-you.fontsize-largest.text-success.u-marginbottom-20",t.t("thank_you_slip.thank_you",Lu())),e(".fontsize-base.u-marginbottom-40",e.trust(t.t("thank_you_slip.thank_you_text_html",Lu({email:r.contribution.contribution_email,link_email:"/pt/users/"+Tt.getUser().user_id+"/edit#about_me"}))))]:[e("#creditcard-thank-you.fontsize-larger.text-success.u-marginbottom-20",t.t("thank_you.thank_you",Lu())),e(".fontsize-base.u-marginbottom-40",e.trust(t.t("thank_you.thank_you_text_html",Lu({total:r.contribution.project.total_contributions,email:r.contribution.contribution_email,link2:"/pt/users/"+Tt.getUser().user_id+"/edit#contributions",link_email:"/pt/users/"+Tt.getUser().user_id+"/edit#about_me"})))),e(".fontsize-base.fontweight-semibold.u-marginbottom-20","Compartilhe com seus amigos e ajude esse projeto a bater a meta!")]),o.isSlip?"":e(".w-row",[e(".w-hidden-small.w-hidden-tiny",[e(".w-sub-col.w-col.w-col-4",e.component(li,{url:"https://www.catarse.me/"+r.contribution.project.permalink+"?ref=ctrse_thankyou&utm_source=facebook.com&utm_medium=social&utm_campaign=project_share",big:!0})),e(".w-sub-col.w-col.w-col-4",e.component(li,{messenger:!0,big:!0,url:"https://www.catarse.me/"+r.contribution.project.permalink+"?ref=ctrse_thankyou&utm_source=facebook.com&utm_medium=messenger&utm_campaign=thanks_share"})),e(".w-col.w-col-4",e('a.btn.btn-large.btn-tweet.u-marginbottom-20[href="https://twitter.com/intent/tweet?text=Acabei%20de%20apoiar%20o%20projeto%20'+encodeURIComponent(r.contribution.project.name)+"%20https://www.catarse.me/"+r.contribution.project.permalink+'%3Fref%3Dtwitter%26utm_source%3Dtwitter.com%26utm_medium%3Dsocial%26utm_campaign%3Dproject_share"][target="_blank"]',[e("span.fa.fa-twitter")," Twitter"]))]),e(".w-hidden-main.w-hidden-medium",[e(".u-marginbottom-30.u-text-center-small-only",e("button.btn.btn-large.btn-terciary.u-marginbottom-40",{onclick:o.displayShareBox.toggle},"Compartilhe")),o.displayShareBox()?e(Va,{project:e.prop({permalink:r.contribution.project.permalink,name:r.contribution.project.name}),displayShareBox:o.displayShareBox}):""])])])))),e(".section.u-marginbottom-40",e(".w-container",o.isSlip?e(".w-row",e(".w-col.w-col-8.w-col-offset-2",e("iframe.slip",{src:r.contribution.slip_url,width:"100%",height:"905px",frameborder:"0",style:"overflow: hidden;"}))):[e(".fontsize-large.fontweight-semibold.u-marginbottom-30.u-text-center",t.t("thank_you.project_recommendations",Lu())),e.component(Rn,{collection:o.recommendedProjects,ref:"ctrse_thankyou_r"})]))])}},Yu=o.partial(Tt.i18nScope,"pages.start"),Uu={controller:function(){var t=e.prop([]),o=w.filtersVM,r=function(){return S.category.getPage(o({}).order({name:"asc"}).parameters()).then(t)},n=e.prop("-1"),i=e.prop(""),a=e.prop(!1),s=e.prop(!1),l=function(){return s(n()==-1),a(""===i().trim()),!s()&&!a()};return r(),{categories:t,projectCategory:n,projectName:i,projectNameError:a,projectCategoryError:s,validateProjectForm:l}},view:function(r){return e(".before-footer.bg-purple.section-large.u-text-center",e(".w-container",[e("img[src='https://daks2k3a4ib2z.cloudfront.net/57ba58b4846cc19e60acdd5b/59cd4be2c67c8d0001764fbe_logo-ass.png']"),e(".fontcolor-negative.fontsize-large.fontweight-semibold.u-marginbottom-60","Viva do que você ama fazer"),e(".w-row",[e(".w-col.w-col-2"),e(".w-col.w-col-8",e(".w-form",[e('form.w-row.w-form[action="/projects/fallback_create"][method="GET"]',{onsubmit:function(e){return r.validateProjectForm()}},[e(".fontcolor-negative.fontsize-larger.u-marginbottom-10","Quero iniciar uma campanha chamada"),e('input[name="utf8"][type="hidden"][value="✓"]'),e('input[name="authenticity_token"][type="hidden"][value="'+Tt.authenticityToken()+'"]'),e('input.w-hidden[type="text"]',{name:"project[mode]",value:"sub"}),e('input.w-input.text-field.medium.u-marginbottom-30[type="text"]',{name:"project[name]","class":r.projectNameError()?"error":"",onfocus:function(){return r.projectNameError(!1)},onchange:function(t){e.withAttr("value",r.projectName)(t)}}),e(".fontcolor-negative.fontsize-larger.u-marginbottom-10","na categoria"),e("select.w-select.text-field.medium.u-marginbottom-40",{name:"project[category_id]","class":r.projectCategoryError()?"error":"",onfocus:function(){return r.projectCategoryError(!1)},onchange:function(t){e.withAttr("value",r.projectCategory)(t)}},[e('option[value="-1"]',t.t("form.select_default",Yu())),o.map(r.categories(),function(t){return e("option",{value:t.id,selected:r.projectCategory()===t.id},t.name)})])],e(".u-marginbottom-80.w-row",[e(".w-col.w-col-4"),e(".u-margintop-40.w-col.w-col-4",e('input[type="submit"][value="'+t.t("form.submit",Yu())+'"].w-button.btn.btn-large')),e(".w-col.w-col-4",e("div"))]))])),e(".w-col.w-col-2")]),e(".w-row.u-marginbottom-80",r.projectNameError()||r.projectCategoryError()?e.component(Hi,{message:"Por favor, verifique novamente os campos acima!"}):"")]))}},Wu=Object.freeze({AdminNotifications:It,AdminProjects:Pr,Menu:qr,Footer:Ar,CheckEmail:Rr,AdminUsers:$r,AdminContributions:sn,AdminSubscriptions:yn,AdminBalanceTranfers:Mn,Flex:Nn,Insights:yi,Posts:zi,Surveys:Ei,SurveyCreate:Xi,Jobs:Ki,Press:ea,LiveStatistics:ta,ProjectsContributionReport:ga,ProjectsSubscriptionReport:Sa,ProjectsSubscriptionReportDownload:Ca,ProjectsDashboard:Ea,ProjectsExplore:Aa,ProjectsHome:Fa,ProjectsShow:Zs,ProjectsContribution:ll,ProjectsSubscriptionContribution:dl,ProjectsSubscriptionCheckout:Kl,ProjectsSubscriptionThankYou:ec,UsersShow:ac,SurveysShow:dc,UsersEdit:Oc,ProjectEdit:bu,ProjectsPayment:_u,ProjectsReward:vu,ProjectsFiscal:ju,Publish:Eu,Start:Du,Team:Tu,FollowFoundFriends:Vu,ThankYou:Bu,SubProjectNew:Uu,ProjectEditUserAbout:Bd,ProjectEditReward:Gd,ProjectEditUserSettings:Yd,ProjectEditBasic:ld,ProjectEditDescription:zd,ProjectEditBudget:Ld,ProjectEditVideo:Ad,ProjectEditGoal:Hc,ProjectEditGoals:Jc,ProjectEditCard:su,CopyTextInput:ci}),$u={root:Wu};return $u}(m,I18n,_,moment,$,Postgrest,CatarseAnalytics,Liquid,replaceDiacritics,Chart,select);