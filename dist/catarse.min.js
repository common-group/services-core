"use strict";window.c=function(){return{models:{},pages:{},contribution:{},admin:{},project:{},h:{}}}(),window.c.h=function(e,t){var o=function(e,o){return o=o||"DD/MM/YYYY",e?t(e).format(o):"no date"},n=function(e,o){var n=t(e,o||"DD/MM/YYYY");return n.isValid()?n:t(e)},r=function(e,t){return function(o,n,r){if(null===o||void 0===o)return null;var i="\\d(?=(\\d{"+(r||3)+"})+"+(n>0?"\\D":"$")+")",a=o.toFixed(Math.max(0,~~n));return(t?a.replace(".",t):a).replace(new RegExp(i,"g"),"$&"+(e||","))}},i=r(".",","),a=function(t){var o=e.prop({}),n={days:"dias",minutes:"minutos",hours:"horas",seconds:"segundos"};return o({unit:n[t.remaining_time.unit||"seconds"],total:t.remaining_time.total}),o},l=function(t,o){var n=e.prop(t);return n.toggle=function(){n(n()===o?t:o)},n},s=e.postgrest.filtersVM({id:"eq"}),c=function(e){return e||"/assets/catarse_bootstrap/user.jpg"},d=function(){return e('.u-text-center.u-margintop-30[style="margin-bottom:-110px;"]',[e('img[alt="Loader"][src="https://s3.amazonaws.com/catarse.files/loader.gif"]')])};return{momentify:o,momentFromString:n,formatNumber:i,idVM:s,toggleProp:l,generateRemaingTime:a,loader:d,useAvatarOrDefault:c}}(window.m,window.moment),window.c.models=function(e){var t=e.postgrest.model("contribution_details"),o=e.postgrest.model("project_details"),n=e.postgrest.model("contributions"),r=e.postgrest.model("team_totals"),i=e.postgrest.model("project_contributions_per_day"),a=e.postgrest.model("project_contributions_per_location"),l=e.postgrest.model("projects"),s=e.postgrest.model("team_members"),c=e.postgrest.model("statistics");return s.pageSize(40),l.pageSize(3),{contributionDetail:t,projectDetail:o,contributions:n,teamTotal:r,teamMember:s,project:l,projectContributionsPerDay:i,projectContributionsPerLocation:a,statistic:c}}(window.m),window.c.AdminContribution=function(e,t){return{view:function(o,n){var r=n.item;return e(".w-row.admin-contribution",[e(".fontweight-semibold.lineheight-tighter.u-marginbottom-10.fontsize-small","R$"+r.value),e(".fontsize-smallest.fontcolor-secondary",t.momentify(r.created_at,"DD/MM/YYYY HH:mm[h]")),e(".fontsize-smallest",["ID do Gateway: ",e('a.alt-link[target="_blank"][href="https://dashboard.pagar.me/#/transactions/'+r.gateway_id+'"]',r.gateway_id)])])}}}(window.m,window.c.h),window.c.AdminDetail=function(e,t,o){return{controller:function(){},view:function(n,r){var i=r.actions,a=r.item;return e("#admin-contribution-detail-box",[e(".divider.u-margintop-20.u-marginbottom-20"),e(".w-row.u-marginbottom-30",t.map(i,function(t){return e.component(o[t.component],{data:t.data,item:r.item})})),e(".w-row.card.card-terciary.u-radius",[e.component(o.AdminTransaction,{contribution:a}),e.component(o.AdminTransactionHistory,{contribution:a}),e.component(o.AdminReward,{contribution:a,key:a.key})])])}}}(window.m,window._,window.c),window.c.AdminFilter=function(e,t,o,n){return{controller:function(){return{toggler:n.toggleProp(!1,!0)}},view:function(n,r){var i=r.filterBuilder,a=o.findWhere(i,{component:"FilterMain"});return t("#admin-contributions-filter.w-section.page-header",[t(".w-container",[t(".fontsize-larger.u-text-center.u-marginbottom-30","Apoios"),t(".w-form",[t("form",{onsubmit:r.submit},[o.findWhere(i,{component:"FilterMain"})?t.component(e[a.component],a.data):"",t(".u-marginbottom-20.w-row",t('button.w-col.w-col-12.fontsize-smallest.link-hidden-light[style="background: none; border: none; outline: none; text-align: left;"][type="button"]',{onclick:n.toggler.toggle},"Filtros avançados  >")),n.toggler()?t("#advanced-search.w-row.admin-filters",[o.map(i,function(o){return"FilterMain"!==o.component?t.component(e[o.component],o.data):""})]):""])])])])}}}(window.c,window.m,window._,window.c.h),window.c.AdminInputAction=function(e,t,o){return{controller:function(o){var n=o.data,r=e.prop(!1),i=e.prop(!1),a=(e.prop(!1),{}),l=o.item,s=n.property,c=e.prop(n.forceValue||"");t.idVM.id(l[n.updateKey]);var d=e.postgrest.loaderWithToken(n.model.patchOptions(t.idVM.parameters(),a)),m=function(e){_.extend(l,e[0]),r(!0),i(!1)},u=function(){return a[s]=c(),d.load().then(m,i),!1},w=function(e,t,o){o.onunload=function(){r(!1),i(!1),c(n.forceValue||"")}};return{complete:r,error:i,l:d,newValue:c,submit:u,toggler:t.toggleProp(!1,!0),unload:w}},view:function(t,o){var n=o.data,r=t.l()?"por favor, aguarde...":n.callToAction;return e(".w-col.w-col-2",[e("button.btn.btn-small.btn-terciary",{onclick:t.toggler.toggle},n.outerLabel),t.toggler()?e(".dropdown-list.card.u-radius.dropdown-list-medium.zindex-10",{config:t.unload},[e("form.w-form",{onsubmit:t.submit},t.complete()?t.error()?[e('.w-form-error[style="display:block;"]',[e("p","Houve um problema na requisição. O apoio não foi transferido!")])]:[e('.w-form-done[style="display:block;"]',[e("p","Apoio transferido com sucesso!")])]:[e("label",n.innerLabel),n.forceValue?"":e('input.w-input.text-field[type="text"][placeholder="'+n.placeholder+'"]',{onchange:e.withAttr("value",t.newValue),value:t.newValue()}),e('input.w-button.btn.btn-small[type="submit"][value="'+r+'"]')])]):""])}}}(window.m,window.c.h,window.c),window.c.AdminItem=function(e,t,o,n){return{controller:function(e){var t=o.toggleProp(!1,!0);return{displayDetailBox:t}},view:function(o,r){var i=r.item;return e(".w-clearfix.card.u-radius.u-marginbottom-20.results-admin-items",[e(".w-row",[t.map(r.builder,function(t){return e(t.wrapperClass,[e.component(n[t.component],{item:i,key:i.key})])})]),e("button.w-inline-block.arrow-admin.fa.fa-chevron-down.fontcolor-secondary",{onclick:o.displayDetailBox.toggle}),o.displayDetailBox()?e.component(n.AdminDetail,{item:i,actions:r.actions,key:i.key}):""])}}}(window.m,window._,window.c.h,window.c),window.c.AdminList=function(e,t,o){o.admin;return{controller:function(e){var t=e.vm.list;!t.collection().length&&t.firstPage&&t.firstPage().then(null,function(t){e.vm.error(t.message)})},view:function(n,r){var i=r.vm.list,a=r.vm.error;return e(".w-section.section",[e(".w-container",a()?e(".card.card-error.u-radius.fontweight-bold",a()):[e(".w-row.u-marginbottom-20",[e(".w-col.w-col-9",[e(".fontsize-base",i.isLoading()?"Buscando apoios...":[e("span.fontweight-semibold",i.total())," apoios encontrados"])])]),e("#admin-contributions-list.w-container",[i.collection().map(function(t){return e.component(o.AdminItem,{builder:r.itemBuilder,actions:r.itemActions,item:t,key:t.key})}),e(".w-section.section",[e(".w-container",[e(".w-row",[e(".w-col.w-col-2.w-col-push-5",[i.isLoading()?t.loader():e("button#load-more.btn.btn-medium.btn-terciary",{onclick:i.nextPage},"Carregar mais")])])])])])])])}}}(window.m,window.c.h,window.c),window.c.AdminProjectDetailsCard=function(e,t){return{controller:function(o){var n=o.resource,r=function(){var t=e.prop({}),o={online:{cssClass:"text-success",text:"NO AR"},successful:{cssClass:"text-success",text:"FINANCIADO"},failed:{cssClass:"text-error",text:"NÃO FINANCIADO"},waiting_funds:{cssClass:"text-waiting",text:"AGUARDANDO"},rejected:{cssClass:"text-error",text:"RECUSADO"},draft:{cssClass:"",text:"RASCUNHO"},in_analysis:{cssClass:"",text:"EM ANÁLISE"},approved:{cssClass:"text-success",text:"APROVADO"}};return t(o[n.state]),t};return{project:n,statusTextObj:r(),remainingTextObj:t.generateRemaingTime(n)}},view:function(o){var n=o.project,r=n.progress.toFixed(2),i=o.statusTextObj(),a=o.remainingTextObj();return e(".project-details-card.card.u-radius.card-terciary.u-marginbottom-20",[e("div",[e(".fontsize-small.fontweight-semibold",[e("span.fontcolor-secondary","Status:")," ",e("span",{"class":i.cssClass},i.text)," "]),function(){return n.is_published?[e(".meter.u-margintop-20.u-marginbottom-10",[e(".meter-fill",{style:{width:(r>100?100:r)+"%"}})]),e(".w-row",[e(".w-col.w-col-3.w-col-small-3.w-col-tiny-6",[e(".fontweight-semibold.fontsize-large.lineheight-tight",r+"%"),e(".fontcolor-secondary.lineheight-tighter.fontsize-small.u-marginbottom-10","financiado")]),e(".w-col.w-col-3.w-col-small-3.w-col-tiny-6",[e(".fontweight-semibold.fontsize-large.lineheight-tight",["R$ "+t.formatNumber(n.pledged,2)]),e(".fontcolor-secondary.lineheight-tighter.fontsize-small.u-marginbottom-10","levantados")]),e(".w-col.w-col-3.w-col-small-3.w-col-tiny-6",[e(".fontweight-semibold.fontsize-large.lineheight-tight",n.total_contributions),e(".fontcolor-secondary.lineheight-tighter.fontsize-small","apoios")]),e(".w-col.w-col-3.w-col-small-3.w-col-tiny-6",[e(".fontweight-semibold.fontsize-large.lineheight-tight",a.total),e(".fontcolor-secondary.lineheight-tighter.fontsize-small",a.unit+" restantes")])])]:void 0}()])])}}}(window.m,window.c.h),window.c.AdminProjectDetailsExplanation=function(e,t){return{controller:function(o){var n=function(o){var n={online:[e("span","Você pode receber apoios até 23hs59min59s do dia "+t.momentify(o.zone_expires_at)+". Lembre-se, é tudo-ou-nada e você só levará os recursos captados se bater a meta dentro desse prazo.")],successful:[e("span.fontweight-semibold",o.user.name+", comemore que você merece!")," Seu projeto foi bem sucedido e agora é a hora de iniciar o trabalho de relacionamento com seus apoiadores! ","Atenção especial à entrega de recompensas. Prometeu? Entregue! Não deixe de olhar a seção de pós-projeto do ",e('a.alt-link[href="/guides"]',"Guia dos Realizadores")," e de informar-se sobre ",e('a.alt-link[href="http://suporte.catarse.me/hc/pt-br/articles/202037493-FINANCIADO-Como-ser%C3%A1-feito-o-repasse-do-dinheiro-"][target="_blank"]',"como o repasse do dinheiro será feito.")],waiting_funds:[e("span.fontweight-semibold",o.user.name+", estamos processando os últimos pagamentos!")," Seu projeto foi finalizado em "+t.momentify(o.zone_expires_at)+" e está aguardando confirmação de boletos e pagamentos. ","Devido à data de vencimento de boletos, projetos que tiveram apoios de última hora ficam por até 4 dias úteis nesse status, contados a partir da data de finalização do projeto. ",e('a.alt-link[href="http://suporte.catarse.me/hc/pt-br/articles/202037493-FINANCIADO-Como-ser%C3%A1-feito-o-repasse-do-dinheiro-"][target="_blank"]',"Entenda como o repasse de dinheiro é feito para projetos bem sucedidos.")],failed:[e("span.fontweight-semibold",o.user.name+", não desanime!")," Seu projeto não bateu a meta e sabemos que isso não é a melhor das sensações. Mas não desanime. ","Encare o processo como um aprendizado e não deixe de cogitar uma segunda tentativa. Não se preocupe, todos os seus apoiadores receberão o dinheiro de volta. ",e('a.alt-link[href="http://suporte.catarse.me/hc/pt-br/articles/202365507-Regras-e-funcionamento-dos-reembolsos-estornos"][target="_blank"]',"Entenda como fazemos estornos e reembolsos.")],rejected:[e("span.fontweight-semibold",o.user.name+", infelizmente não foi desta vez.")," Você enviou seu projeto para análise do Catarse e entendemos que ele não está de acordo com o perfil do site. ","Ter um projeto recusado não impede que você envie novos projetos para avaliação ou reformule seu projeto atual. ","Converse com nosso atendimento! Recomendamos que você dê uma boa olhada nos ",e('a.alt-link[href="http://suporte.catarse.me/hc/pt-br/articles/202387638-Diretrizes-para-cria%C3%A7%C3%A3o-de-projetos"][target="_blank"]',"critérios da plataforma")," e no ",e('a.alt-link[href="/guides"]',"guia dos realizadores"),"."],draft:[e("span.fontweight-semibold",o.user.name+", construa o seu projeto!")," Quanto mais cuidadoso e bem formatado for um projeto, maiores as chances de ele ser bem sucedido na sua campanha de captação. ","Antes de enviar seu projeto para a nossa análise, preencha todas as abas ao lado com carinho. Você pode salvar as alterações e voltar ao rascunho de projeto quantas vezes quiser. ","Quando tudo estiver pronto, clique no botão ENVIAR e entraremos em contato para avaliar o seu projeto."],in_analysis:[e("span.fontweight-semibold",o.user.name+", você enviou seu projeto para análise em "+t.momentify(o.sent_to_analysis_at)+" e receberá nossa avaliação em até 4 dias úteis após o envio!")," Enquanto espera a sua resposta, você pode continuar editando o seu projeto. ","Recomendamos também que você vá coletando feedback com as pessoas próximas e planejando como será a sua campanha."],approved:[e("span.fontweight-semibold",o.user.name+", seu projeto foi aprovado!")," Para colocar o seu projeto no ar é preciso apenas que você preencha os dados necessários na aba ",e('a.alt-link[href="#user_settings"]',"Conta"),". É importante saber que cobramos a taxa de 13% do valor total arrecadado apenas por projetos bem sucedidos. Entenda ",e('a.alt-link[href="http://suporte.catarse.me/hc/pt-br/articles/202037493-FINANCIADO-Como-ser%C3%A1-feito-o-repasse-do-dinheiro-"][target="_blank"]',"como fazemos o repasse do dinheiro.")]};return n[o.state]};return{explanation:n(o.resource)}},view:function(t,o){return e("p."+o.resource.state+"-project-text.fontsize-small.lineheight-loose",t.explanation)}}}(window.m,window.c.h),window.c.AdminProject=function(e,t){return{view:function(o,n){var r=n.item;return e(".w-row.admin-project",[e(".w-col.w-col-3.w-col-small-3.u-marginbottom-10",[e("img.thumb-project.u-radius[src="+r.project_img+"][width=50]")]),e(".w-col.w-col-9.w-col-small-9",[e(".fontweight-semibold.fontsize-smaller.lineheight-tighter.u-marginbottom-10",[e('a.alt-link[target="_blank"][href="/'+r.permalink+'"]',r.project_name)]),e(".fontsize-smallest.fontweight-semibold",r.project_state),e(".fontsize-smallest.fontcolor-secondary",t.momentify(r.project_online_date)+" a "+t.momentify(r.project_expires_at))])])}}}(window.m,window.c.h),window.c.AdminRadioAction=function(e,t,o){return{controller:function(o){var n=o.data,r=e.prop(!1),i={},a=e.prop(o.item.reward.description||""),l=e.prop(!1),s=(e.prop(!1),o.item),c=(n.getKey,e.prop("")),d={},m={},u=e.prop(),w=n.getKey,p=n.radios,f=n.updateKey;m[f]="eq";var g=e.postgrest.filtersVM(m);g[f](s[f]),d[w]="eq";var b=e.postgrest.filtersVM(d);b[w](s[w]);var h=e.postgrest.loaderWithToken(n.getModel.getRowOptions(b.parameters())),v=e.postgrest.loaderWithToken(n.updateModel.patchOptions(g.parameters(),i)),y=function(e){_.extend(s,e[0]),r(!0)},x=function(){h.load().then(function(e){u(e[0][p])},l)},j=function(){return c()&&(i[n.property]=c(),v.load().then(y,l)),!1},C=function(e,t,o){o.onunload=function(){r(!1),l(!1),c("")}},A=function(t){a(t),e.redraw()};return x(),{complete:r,description:a,setDescription:A,error:l,setLoader:v,getLoader:h,newValue:c,submit:j,toggler:t.toggleProp(!1,!0),unload:C,radios:u}},view:function(o,n){var r=n.data,i=o.setLoader()||o.getLoader()?"por favor, aguarde...":r.callToAction;return e(".w-col.w-col-2",[e("button.btn.btn-small.btn-terciary",{onclick:o.toggler.toggle},r.outerLabel),o.toggler()?e(".dropdown-list.card.u-radius.dropdown-list-medium.zindex-10",{config:o.unload},[e("form.w-form",{onsubmit:o.submit},o.complete()?o.error()?[e('.w-form-error[style="display:block;"]',[e("p","Houve um problema na requisição. O apoio não foi transferido!")])]:[e('.w-form-done[style="display:block;"]',[e("p","Recompensa alterada com sucesso!")])]:[o.radios()?_.map(o.radios(),function(t,r){var i=function(){o.newValue(t.id),o.setDescription(t.description)},a=t.id===n.item.reward.id?!0:!1;return e(".w-radio",[e("input#r-"+r+'.w-radio-input[type=radio][name="admin-radio"][value="'+t.id+'"]'+(a?"[checked]":""),{onclick:i}),e('label.w-form-label[for="r-'+r+'"]',"R$"+t.minimum_value)])}):t.loader(),e("strong","Descrição"),e("p",o.description()),e('input.w-button.btn.btn-small[type="submit"][value="'+i+'"]')])]):""])}}}(window.m,window.c.h,window.c),window.c.AdminReward=function(e,t,o){return{view:function(n,r){var i=r.contribution.reward||{},a=parseInt(i.paid_count)+parseInt(i.waiting_payment_count);return e(".w-col.w-col-4",[e(".fontweight-semibold.fontsize-smaller.lineheight-tighter.u-marginbottom-20","Recompensa"),e(".fontsize-smallest.lineheight-looser",o.isEmpty(i)?"Apoio sem recompensa.":["ID: "+i.id,e("br"),"Valor mínimo: R$"+t.formatNumber(i.minimum_value,2,3),e("br"),e.trust("Disponíveis: "+a+" / "+(i.maximum_contributions||"&infin;")),e("br"),"Aguardando confirmação: "+i.waiting_payment_count,e("br"),"Descrição: "+i.description])])}}}(window.m,window.c.h,window._),window.c.AdminTransactionHistory=function(e,t,o){return{controller:function(e){var n=e.contribution,r=o.reduce([{date:n.paid_at,name:"Apoio confirmado"},{date:n.pending_refund_at,name:"Reembolso solicitado"},{date:n.refunded_at,name:"Estorno realizado"},{date:n.created_at,name:"Apoio criado"},{date:n.refused_at,name:"Apoio cancelado"},{date:n.deleted_at,name:"Apoio excluído"},{date:n.chargeback_at,name:"Chargeback"}],function(e,o){return null!==o.date&&void 0!==o.date?(o.originalDate=o.date,o.date=t.momentify(o.date,"DD/MM/YYYY, HH:mm"),e.concat(o)):e},[]);return{orderedEvents:o.sortBy(r,"originalDate")}},view:function(t){return e(".w-col.w-col-4",[e(".fontweight-semibold.fontsize-smaller.lineheight-tighter.u-marginbottom-20","Histórico da transação"),t.orderedEvents.map(function(t){return e(".w-row.fontsize-smallest.lineheight-looser.date-event",[e(".w-col.w-col-6",[e(".fontcolor-secondary",t.date)]),e(".w-col.w-col-6",[e("div",t.name)])])})])}}}(window.m,window.c.h,window._),window.c.AdminTransaction=function(e,t){return{view:function(o,n){var r=n.contribution;return e(".w-col.w-col-4",[e(".fontweight-semibold.fontsize-smaller.lineheight-tighter.u-marginbottom-20","Detalhes do apoio"),e(".fontsize-smallest.lineheight-looser",["Valor: R$"+t.formatNumber(r.value,2,3),e("br"),"Taxa: R$"+t.formatNumber(r.gateway_fee,2,3),e("br"),"Aguardando Confirmação: "+(r.waiting_payment?"Sim":"Não"),e("br"),"Anônimo: "+(r.anonymous?"Sim":"Não"),e("br"),"Id pagamento: "+r.gateway_id,e("br"),"Apoio: "+r.contribution_id,e("br"),"Chave: \n",e("br"),r.key,e("br"),"Meio: "+r.gateway,e("br"),"Operadora: "+(r.gateway_data&&r.gateway_data.acquirer_name),e("br"),function(){return r.is_second_slip?[e('a.link-hidden[href="#"]',"Boleto bancário")," ",e("span.badge","2a via")]:void 0}()])])}}}(window.m,window.c.h),window.c.AdminUser=function(e,t){return{view:function(o,n){var r=n.item;return e(".w-row.admin-user",[e(".w-col.w-col-3.w-col-small-3.u-marginbottom-10",[e('img.user-avatar[src="'+t.useAvatarOrDefault(r.user_profile_img)+'"]')]),e(".w-col.w-col-9.w-col-small-9",[e(".fontweight-semibold.fontsize-smaller.lineheight-tighter.u-marginbottom-10",[e('a.alt-link[target="_blank"][href="/users/'+r.user_id+'/edit"]',r.user_name)]),e(".fontsize-smallest","Usuário: "+r.user_id),e(".fontsize-smallest.fontcolor-secondary","Catarse: "+r.email),e(".fontsize-smallest.fontcolor-secondary","Gateway: "+r.payer_email)])])}}}(window.m,window.c.h),window.c.FilterDateRange=function(e){return{view:function(t,o){return e(".w-col.w-col-3.w-col-small-6",[e('label.fontsize-smaller[for="'+o.index+'"]',o.label),e(".w-row",[e(".w-col.w-col-5.w-col-small-5.w-col-tiny-5",[e('input.w-input.text-field.positive[id="'+o.index+'"][type="text"]',{onchange:e.withAttr("value",o.first),value:o.first()})]),e(".w-col.w-col-2.w-col-small-2.w-col-tiny-2",[e(".fontsize-smaller.u-text-center.lineheight-looser","e")]),e(".w-col.w-col-5.w-col-small-5.w-col-tiny-5",[e('input.w-input.text-field.positive[type="text"]',{onchange:e.withAttr("value",o.last),value:o.last()})])])])}}}(window.m),window.c.FilterDropdown=function(e,t){return{view:function(o,n){return e(".w-col.w-col-3.w-col-small-6",[e('label.fontsize-smaller[for="'+n.index+'"]',n.label),e('select.w-select.text-field.positive[id="'+n.index+'"]',{onchange:e.withAttr("value",n.vm),value:n.vm()},[t.map(n.options,function(t){return e('option[value="'+t.value+'"]',t.option)})])])}}}(window.m,window._),window.c.FilterMain=function(e){return{view:function(t,o){return e(".w-row",[e(".w-col.w-col-10",[e('input.w-input.text-field.positive.medium[placeholder="'+o.placeholder+'"][type="text"]',{onchange:e.withAttr("value",o.vm),value:o.vm()})]),e(".w-col.w-col-2",[e('input#filter-btn.btn.btn-large.u-marginbottom-10[type="submit"][value="Buscar"]')])])}}}(window.m),window.c.FilterNumberRange=function(e){return{view:function(t,o){return e(".w-col.w-col-3.w-col-small-6",[e('label.fontsize-smaller[for="'+o.index+'"]',o.label),e(".w-row",[e(".w-col.w-col-5.w-col-small-5.w-col-tiny-5",[e('input.w-input.text-field.positive[id="'+o.index+'"][type="text"]',{onchange:e.withAttr("value",o.first),value:o.first()})]),e(".w-col.w-col-2.w-col-small-2.w-col-tiny-2",[e(".fontsize-smaller.u-text-center.lineheight-looser","e")]),e(".w-col.w-col-5.w-col-small-5.w-col-tiny-5",[e('input.w-input.text-field.positive[type="text"]',{onchange:e.withAttr("value",o.last),value:o.last()})])])])}}}(window.m),window.c.PaymentStatus=function(e){return{controller:function(t){var o,n,r,i=t.item,a=null;return a=function(){if(i.gateway_data)switch(i.gateway.toLowerCase()){case"moip":return{first_digits:i.gateway_data.cartao_bin,last_digits:i.gateway_data.cartao_final,brand:i.gateway_data.cartao_bandeira};case"pagarme":return{first_digits:i.gateway_data.card_first_digits,last_digits:i.gateway_data.card_last_digits,brand:i.gateway_data.card_brand}}},o=function(){switch(i.payment_method.toLowerCase()){case"boletobancario":return e("span#boleto-detail","");case"cartaodecredito":var t=a();return t?e("#creditcard-detail.fontsize-smallest.fontcolor-secondary.lineheight-tight",[t.first_digits+"******"+t.last_digits,e("br"),t.brand+" "+i.installments+"x"]):""}},n=function(){switch(i.payment_method.toLowerCase()){case"boletobancario":return".fa-barcode";case"cartaodecredito":return".fa-credit-card";default:return".fa-question"}},r=function(){switch(i.state){case"paid":return".text-success";case"refunded":return".text-refunded";case"pending":case"pending_refund":return".text-waiting";default:return".text-error"}},{displayPaymentMethod:o,paymentMethodClass:n,stateClass:r}},view:function(t,o){var n=o.item;return e(".w-row.payment-status",[e(".fontsize-smallest.lineheight-looser.fontweight-semibold",[e("span.fa.fa-circle"+t.stateClass())," "+n.state]),e(".fontsize-smallest.fontweight-semibold",[e("span.fa"+t.paymentMethodClass())," ",e('a.link-hidden[href="#"]',n.payment_method)]),e(".fontsize-smallest.fontcolor-secondary.lineheight-tight",[t.displayPaymentMethod()])])}}}(window.m),window.c.ProjectCard=function(e,t,o){return{view:function(o,n){var r=n.project,i=r.progress.toFixed(2),a=t.generateRemaingTime(r)(),l="/"+r.permalink+(n.ref?"?ref="+n.ref:"");return e(".w-col.w-col-4",[e(".card-project.card.u-radius",[e('a.card-project-thumb[href="'+l+'"]',{style:{"background-image":"url("+r.project_img+")",display:"block"}}),e(".card-project-description.alt",[e(".fontweight-semibold.u-text-center-small-only.lineheight-tight.u-marginbottom-10.fontsize-base",[e('a.link-hidden[href="'+l+'"]',r.project_name)]),e(".w-hidden-small.w-hidden-tiny.fontsize-smallest.fontcolor-secondary.u-marginbottom-20","por "+r.owner_name),e(".w-hidden-small.w-hidden-tiny.fontcolor-secondary.fontsize-smaller",[e('a.link-hidden[href="'+l+'"]',r.headline)])]),e(".w-hidden-small.w-hidden-tiny.card-project-author.altt",[e(".fontsize-smallest.fontcolor-secondary",[e("span.fa.fa-map-marker.fa-1"," ")," "+r.city_name+", "+r.state_acronym])]),e(".card-project-meter",[e(".meter",[e(".meter-fill",{style:{width:(i>100?100:i)+"%"}})])]),e(".card-project-stats",[e(".w-row",[e(".w-col.w-col-4.w-col-small-4.w-col-tiny-4",[e(".fontsize-base.fontweight-semibold",Math.ceil(r.progress)+"%")]),e(".w-col.w-col-4.w-col-small-4.w-col-tiny-4.u-text-center-small-only",[e(".fontsize-smaller.fontweight-semibold","R$ "+t.formatNumber(r.pledged)),e(".fontsize-smallest.lineheight-tightest","Levantados")]),e(".w-col.w-col-4.w-col-small-4.w-col-tiny-4.u-text-right",[e(".fontsize-smaller.fontweight-semibold",a.total+" "+a.unit),e(".fontsize-smallest.lineheight-tightest","Restantes")])])])])])}}}(window.m,window.c.h,window.c.models),window.c.ProjectChartContributionAmountPerDay=function(e,t,o,n){return{controller:function(e){var r=e.collection()[0],i=function(){return[{label:"R$ arrecadados por dia",fillColor:"rgba(126,194,69,0.2)",strokeColor:"rgba(126,194,69,1)",pointColor:"rgba(126,194,69,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:o.map(r.source,function(e){return e.total_amount})}]},a=function(e,a){if(!a){Object.defineProperty(e,"offsetHeight",{get:function(){return e.height}}),Object.defineProperty(e,"offsetWidth",{get:function(){return e.width}});var l=e.getContext("2d");new t(l).Line({labels:o.map(r.source,function(e){return n.momentify(e.paid_at)}),datasets:i()})}};return{renderChart:a}},view:function(t){return e(".card.u-radius.medium.u-marginbottom-30",[e(".fontweight-semibold.u-marginbottom-10.fontsize-large.u-text-center","R$ arrecadados por dia"),e(".w-row",[e(".w-col.w-col-12.overflow-auto",[e('canvas[id="chart"][width="860"][height="300"]',{config:t.renderChart})])])])}}}(window.m,window.Chart,window._,window.c.h),window.c.ProjectChartContributionTotalPerDay=function(e,t,o,n){return{controller:function(e){var r=e.collection()[0],i=function(){return[{label:"Apoios confirmados por dia",fillColor:"rgba(126,194,69,0.2)",strokeColor:"rgba(126,194,69,1)",pointColor:"rgba(126,194,69,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:o.map(r.source,function(e){return e.total})}]},a=function(e,a){if(!a){Object.defineProperty(e,"offsetHeight",{get:function(){return e.height}}),Object.defineProperty(e,"offsetWidth",{get:function(){return e.width}});var l=e.getContext("2d");new t(l).Line({labels:o.map(r.source,function(e){return n.momentify(e.paid_at)}),datasets:i()})}};return{renderChart:a}},view:function(t){return e(".card.u-radius.medium.u-marginbottom-30",[e(".fontweight-semibold.u-marginbottom-10.fontsize-large.u-text-center","Apoios confirmados por dia"),e(".w-row",[e(".w-col.w-col-12.overflow-auto",[e('canvas[id="chart"][width="860"][height="300"]',{config:t.renderChart})])])])}}}(window.m,window.Chart,window._,window.c.h),window.c.ProjectContributionsPerLocationTable=function(e,t,o,n){return{controller:function(o){var r=e.postgrest.filtersVM({project_id:"eq"}),i=e.prop([]),a=function(e){return function(){var t=i(),o=t[0],r=n.sortBy(o.source,e);void 0===o.orderFilter&&(o.orderFilter="DESC"),"DESC"===o.orderFilter&&(r=r.reverse()),o.source=r,o.orderFilter="DESC"===o.orderFilter?"ASC":"DESC",i(t)}};return r.project_id(o.resourceId),t.projectContributionsPerLocation.getRow(r.parameters()).then(function(e){i(e),a("total_contributed")()}),{contributionsPerLocation:i,generateSort:a}},view:function(t){return e(".project-contributions-per-location",[e(".fontweight-semibold.u-marginbottom-10.fontsize-large.u-text-center","Localização geográfica dos apoios"),t.contributionsPerLocation().map(function(r){return e(".table-outer.u-marginbottom-60",[e(".w-row.table-row.fontweight-semibold.fontsize-smaller.header",[e(".w-col.w-col-4.w-col-small-4.w-col-tiny-4.table-col",[e("div","Estado")]),e('.w-col.w-col-4.w-col-small-4.w-col-tiny-4.table-col[data-ix="sort-arrows"]',[e('a.link-hidden[href="javascript:void(0);"]',{onclick:t.generateSort("total_contributions")},["Apoios  ",e("span.fa.fa-sort")])]),e('.w-col.w-col-4.w-col-small-4.w-col-tiny-4.table-col[data-ix="sort-arrows"]',[e('a.link-hidden[href="javascript:void(0);"]',{onclick:t.generateSort("total_contributed")},["R$ apoiados ",e("span.w-hidden-small.w-hidden-tiny","(% do total) ")," ",e("span.fa.fa-sort")])])]),e(".table-inner.fontsize-small",[n.map(r.source,function(t){return e(".w-row.table-row",[e(".w-col.w-col-4.w-col-small-4.w-col-tiny-4.table-col",[e("div",t.state_acronym)]),e(".w-col.w-col-4.w-col-small-4.w-col-tiny-4.table-col",[e("div",t.total_contributions)]),e(".w-col.w-col-4.w-col-small-4.w-col-tiny-4.table-col",[e("div",["R$ ",o.formatNumber(t.total_contributed,2,3),e("span.w-hidden-small.w-hidden-tiny","  ("+t.total_on_percentage.toFixed(2)+"%)")])])])})])])})])}}}(window.m,window.c.models,window.c.h,window._),window.c.ProjectReminderCount=function(e){return{view:function(t,o){var n=o.resource;return e("#project-reminder-count.card.u-radius.u-text-center.medium.u-marginbottom-80",[e(".fontsize-large.fontweight-semibold","Total de pessoas que clicaram no botão Lembrar-me"),e(".fontsize-smaller.u-marginbottom-30","Um lembrete por email é enviado 48 horas antes do término da sua campanha"),e(".fontsize-jumbo",n.reminder_count)])}}}(window.m),window.c.ProjectRow=function(e){return{view:function(t,o){var n=o.collection,r=o.ref;return n.collection().length>0?e(".w-section.section.u-marginbottom-40",[e(".w-container",[e(".w-row.u-marginbottom-30",[e(".w-col.w-col-10.w-col-small-6.w-col-tiny-6",[e(".fontsize-large.lineheight-looser",n.title)]),e(".w-col.w-col-2.w-col-small-6.w-col-tiny-6",[e('a.btn.btn-small.btn-terciary[href="/pt/explore?ref='+r+"#"+n.hash+'"]',"Ver todos")])]),e(".w-row",_.map(n.collection(),function(t){return e.component(c.ProjectCard,{project:t,ref:r})}))])]):e("")}}}(window.m),window.c.TeamMembers=function(e,t,o){return{controller:function(){var n={collection:t.prop([])},r=function(t,o){return e.map(e.range(Math.ceil(t.length/o)),function(e){return t.slice(e*o,(e+1)*o)})};return o.teamMember.getPage().then(function(e){n.collection(r(e,4))}),{vm:n}},view:function(o){return t("#team-members-static.w-section.section",[t(".w-container",[e.map(o.vm.collection(),function(o){return t(".w-row.u-text-center",[e.map(o,function(e){return t(".team-member.w-col.w-col-3.w-col-small-3.w-col-tiny-6.u-marginbottom-40",[t('a.alt-link[href="/users/'+e.id+'"]',[t('img.thumb.big.u-round.u-marginbottom-10[src="'+e.img+'"]'),t(".fontweight-semibold.fontsize-base",e.name)]),t(".fontsize-smallest.fontcolor-secondary","Apoiou "+e.total_contributed_projects+" projetos")])})])})])])}}}(window._,window.m,window.c.models),window.c.TeamTotal=function(e,t,o){return{controller:function(){var t={collection:e.prop([])};return o.teamTotal.getRow().then(function(e){t.collection(e)}),{vm:t}},view:function(o){return e("#team-total-static.w-section.section-one-column.u-margintop-40.u-text-center.u-marginbottom-20",[o.vm.collection().map(function(o){return e(".w-container",[e(".w-row",[e(".w-col.w-col-2"),e(".w-col.w-col-8",[e(".fontsize-base.u-marginbottom-30","Hoje somos "+o.member_count+" pessoas espalhadas por "+o.total_cities+" cidades em "+o.countries.length+" países ("+o.countries.toString()+")! O Catarse é independente, sem investidores, de código aberto e construído com amor. Nossa paixão é construir um ambiente onde cada vez mais projetos possam ganhar vida."),e(".fontsize-larger.lineheight-tight.text-success","Nossa equipe, junta, já apoiou R$"+t.formatNumber(o.total_amount)+" para "+o.total_contributed_projects+" projetos!")]),e(".w-col.w-col-2")])])})])}}}(window.m,window.c.h,window.c.models),window.c.admin.Contributions=function(e,t,o){var n=t.admin;return{controller:function(){var o=n.contributionListVM,r=n.contributionFilterVM,i=e.prop(""),a=[{component:"AdminUser",wrapperClass:".w-col.w-col-4"},{component:"AdminProject",wrapperClass:".w-col.w-col-4"},{component:"AdminContribution",wrapperClass:".w-col.w-col-2"},{component:"PaymentStatus",wrapperClass:".w-col.w-col-2"}],l=[{component:"AdminInputAction",data:{property:"user_id",updateKey:"id",callToAction:"Transferir",innerLabel:"Id do novo apoiador:",outerLabel:"Transferir Apoio",placeholder:"ex: 129908",model:t.models.contributionDetail}},{component:"AdminRadioAction",data:{getKey:"project_id",updateKey:"contribution_id",property:"reward_id",radios:"rewards",callToAction:"Alterar Recompensa",outerLabel:"Recompensa",getModel:t.models.projectDetail,updateModel:t.models.contributionDetail}},{component:"AdminInputAction",data:{property:"state",updateKey:"id",callToAction:"Apagar",innerLabel:"Tem certeza que deseja apagar esse apoio?",outerLabel:"Apagar Apoio",forceValue:"deleted",model:t.models.contributionDetail}}],s=[{component:"FilterMain",data:{vm:r.full_text_index,placeholder:"Busque por projeto, email, Ids do usuário e do apoio..."}},{component:"FilterDropdown",data:{label:"Com o estado",name:"state",
vm:r.state,options:[{value:"",option:"Qualquer um"},{value:"paid",option:"paid"},{value:"refused",option:"refused"},{value:"pending",option:"pending"},{value:"pending_refund",option:"pending_refund"},{value:"refunded",option:"refunded"},{value:"chargeback",option:"chargeback"},{value:"deleted",option:"deleted"}]}},{component:"FilterDropdown",data:{label:"gateway",name:"gateway",vm:r.gateway,options:[{value:"",option:"Qualquer um"},{value:"Pagarme",option:"Pagarme"},{value:"MoIP",option:"MoIP"},{value:"PayPal",option:"PayPal"},{value:"Credits",option:"Créditos"}]}},{component:"FilterNumberRange",data:{label:"Valores entre",first:r.value.gte,last:r.value.lte}},{component:"FilterDateRange",data:{label:"Período do apoio",first:r.created_at.gte,last:r.created_at.lte}}],c=function(){return o.firstPage(r.parameters()).then(null,function(e){i(e.message)}),!1};return{filterVM:r,filterBuilder:s,itemActions:l,itemBuilder:a,listVM:{list:o,error:i},submit:c}},view:function(o){return[e.component(t.AdminFilter,{form:o.filterVM.formDescriber,filterBuilder:o.filterBuilder,submit:o.submit}),e.component(t.AdminList,{vm:o.listVM,itemBuilder:o.itemBuilder,itemActions:o.itemActions})]}}}(window.m,window.c,window.c.h),window.c.contribution.ProjectsHome=function(e,t){return{controller:function(){var o={recommendedCollection:e.prop([]),recentCollection:e.prop([]),nearMeCollection:e.prop([]),expiringCollection:e.prop([])},n=t.models.project,r=e.postgrest.filtersVM({expires_at:"lte",state:"eq"}),i=e.postgrest.filtersVM({near_me:"eq",state:"eq"}),a=e.postgrest.filtersVM({online_date:"gte",state:"eq"}),l=e.postgrest.filtersVM({recommended:"eq",state:"eq"});r.expires_at(moment().add(14,"days").format("YYYY-MM-DD")),r.state("online"),i.near_me("true").state("online"),a.online_date(moment().subtract(5,"days").format("YYYY-MM-DD")),a.state("online"),l.recommended("true").state("online"),n.getPageWithToken(i.parameters()).then(o.nearMeCollection),n.getPage(l.parameters()).then(o.recommendedCollection),n.getPage(a.parameters()).then(o.recentCollection),n.getPage(r.parameters()).then(o.expiringCollection);var s=[{title:"Próximos a você",hash:"near_of",collection:o.nearMeCollection},{title:"Recomendados",hash:"recommended",collection:o.recommendedCollection},{title:"Na reta final",hash:"expiring",collection:o.expiringCollection},{title:"Recentes",hash:"recent",collection:o.recentCollection}];return{collections:s}},view:function(o){return _.map(o.collections,function(o){return e.component(t.ProjectRow,{collection:o,ref:"home_"+o.hash})})}}}(window.m,window.c),window.c.pages.LiveStatistics=function(e,t,o,n,r){return{controller:function(){var o=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],i=e.prop([]),a=e.prop({});return t.statistic.getRow().then(i),o.socket&&n.isFunction(o.socket.on)&&o.socket.on("new_paid_contributions",function(o){a(r.parse(o.payload)),t.statistic.getRow().then(i),e.redraw()}),{pageStatistics:i,notificationData:a}},view:function(t){var r=t.notificationData();return e(".w-section.bg-stats.section.min-height-100",[e(".w-container.u-text-center",n.map(t.pageStatistics(),function(t){return[e('img.u-marginbottom-60[src="https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/55ada5dd11b36a52616d97df_symbol-catarse.png"]'),e(".fontcolor-negative.u-marginbottom-40",[e(".fontsize-megajumbo.fontweight-semibold","R$ "+o.formatNumber(t.total_contributed,2,3)),e(".fontsize-large","Doados para projetos publicados por aqui")]),e(".fontcolor-negative.u-marginbottom-60",[e(".fontsize-megajumbo.fontweight-semibold",t.total_contributors),e(".fontsize-large","Pessoas já apoiaram pelo menos 1 projeto no Catarse")])]})),n.isEmpty(r)?"":e(".w-container",[e("div",[e(".card.u-radius.u-marginbottom-60.medium",[e(".w-row",[e(".w-col.w-col-4",[e(".w-row",[e(".w-col.w-col-4.w-col-small-4",[e('img.thumb.u-round[src="'+o.useAvatarOrDefault(r.user_image)+'"]')]),e(".w-col.w-col-8.w-col-small-8",[e(".fontsize-large.lineheight-tight",r.user_name)])])]),e(".w-col.w-col-4.u-text-center.fontsize-base.u-margintop-20",[e("div","acabou de apoiar o")]),e(".w-col.w-col-4",[e(".w-row",[e(".w-col.w-col-4.w-col-small-4",[e('img.thumb-project.u-radius[src="'+r.project_image+'"][width="75"]')]),e(".w-col.w-col-8.w-col-small-8",[e(".fontsize-large.lineheight-tight",r.project_name)])])])])])])]),e(".u-text-center.fontsize-large.u-marginbottom-10.fontcolor-negative",[e('a.link-hidden.fontcolor-negative[href="https://github.com/catarse"][target="_blank"]',[e("span.fa.fa-github",".")," Open Source com orgulho! "])])])}}}(window.m,window.c.models,window.c.h,window._,window.JSON),window.c.pages.Team=function(e,t){return{view:function(){return e("#static-team-app",[e.component(t.TeamTotal),e.component(t.TeamMembers)])}}}(window.m,window.c),window.c.project.Insights=function(e,t,o,n){return{controller:function(t){var n=e.postgrest.filtersVM({project_id:"eq"}),r=e.prop([]),i=e.prop([]);return n.project_id(t.root.getAttribute("data-id")),o.projectDetail.getRow(n.parameters()).then(r),o.projectContributionsPerDay.getRow(n.parameters()).then(i),{vm:n,projectDetails:r,contributionsPerDay:i}},view:function(o){return n.map(o.projectDetails(),function(n){return e(".project-insights",[e(".w-container",[e(".w-row.u-marginbottom-40",[e(".w-col.w-col-2"),e(".w-col.w-col-8.dashboard-header.u-text-center",[e(".fontweight-semibold.fontsize-larger.lineheight-looser.u-marginbottom-10","Minha campanha"),e.component(t.AdminProjectDetailsCard,{resource:n}),e.component(t.AdminProjectDetailsExplanation,{resource:n})]),e(".w-col.w-col-2")])]),function(n){return n.is_published?[e(".divider"),e(".w-section.section-one-column.bg-gray.before-footer",[e(".w-container",[e(".w-row",[e(".w-col.w-col-12.u-text-center",{style:{"min-height":"300px"}},[e.component(t.ProjectChartContributionTotalPerDay,{collection:o.contributionsPerDay})])]),e(".w-row",[e(".w-col.w-col-12.u-text-center",{style:{"min-height":"300px"}},[e.component(t.ProjectChartContributionAmountPerDay,{collection:o.contributionsPerDay})])]),e(".w-row",[e(".w-col.w-col-12.u-text-center",[e.component(t.ProjectContributionsPerLocationTable,{resourceId:o.vm.project_id()})])]),e(".w-row",[e(".w-col.w-col-12.u-text-center",[e.component(t.ProjectReminderCount,{resource:n})])])])])]:void 0}(n)])})}}}(window.m,window.c,window.c.models,window._),window.c.admin.contributionFilterVM=function(e,t,o){var n=e.postgrest.filtersVM({full_text_index:"@@",state:"eq",gateway:"eq",value:"between",created_at:"between"}),r=function(e){return(e||"").toString().trim()};return n.state(""),n.gateway(""),n.order({id:"desc"}),n.created_at.lte.toFilter=function(){var e=r(n.created_at.lte());return e&&t.momentFromString(e).endOf("day").format("")},n.created_at.gte.toFilter=function(){var e=r(n.created_at.gte());return e&&t.momentFromString(e).format()},n.full_text_index.toFilter=function(){var e=r(n.full_text_index());return e&&o(e)||void 0},n}(window.m,window.c.h,window.replaceDiacritics),window.c.admin.contributionListVM=function(e,t){return e.postgrest.paginationVM(t.contributionDetail.getPageWithToken)}(window.m,window.c.models);